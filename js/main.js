!function t(i,e,s){function o(a,h){if(!e[a]){if(!i[a]){var r="function"==typeof require&&require;if(!h&&r)return r(a,!0);if(n)return n(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var _=e[a]={exports:{}};i[a][0].call(_.exports,function(t){var e=i[a][1][t];return o(e?e:t)},_,_.exports,t,i,e,s)}return e[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(t,i,e){!function(t){if("function"==typeof define&&define.amd)define(t);else if("object"==typeof e)i.exports=t();else{var s=window.Cookies,o=window.Cookies=t();o.noConflict=function(){return window.Cookies=s,o}}}(function(){function t(){for(var t=0,i={};t<arguments.length;t++){var e=arguments[t];for(var s in e)i[s]=e[s]}return i}function i(e){function s(i,o,n){var a;if("undefined"!=typeof document){if(arguments.length>1){if(n=t({path:"/"},s.defaults,n),"number"==typeof n.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*n.expires),n.expires=h}try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(r){}return o=e.write?e.write(o,i):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",o,n.expires&&"; expires="+n.expires.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.secure?"; secure":""].join("")}i||(a={});for(var c=document.cookie?document.cookie.split("; "):[],_=/(%[0-9A-Z]{2})+/g,l=0;l<c.length;l++){var d=c[l].split("="),p=d.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var u=d[0].replace(_,decodeURIComponent);if(p=e.read?e.read(p,u):e(p,u)||p.replace(_,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(r){}if(i===u){a=p;break}i||(a[u]=p)}catch(r){}}return a}}return s.set=s,s.get=function(t){return s(t)},s.getJSON=function(){return s.apply({json:!0},[].slice.call(arguments))},s.defaults={},s.remove=function(i,e){s(i,"",t(e,{expires:-1}))},s.withConverter=i,s}return i(function(){})})},{}],2:[function(t,i,e){function s(t,i,e,n,a,h){this._font=t,this._text=i,this._x=o["default"](n,0),this._y=o["default"](a,0),this._fontSize=o["default"](e,12),this._p=o["default"](h,window),this._rotation=0,this._hAlign=s.ALIGN.BOX_CENTER,this._vAlign=s.BASELINE.BOX_CENTER,this._calculateMetrics(!0)}var o=t("./utils.js");i.exports=s,s.ALIGN={BOX_LEFT:"box_left",BOX_CENTER:"box_center",BOX_RIGHT:"box_right"},s.BASELINE={BOX_TOP:"box_top",BOX_CENTER:"box_center",BOX_BOTTOM:"box_bottom",FONT_CENTER:"font_center",ALPHABETIC:"alphabetic"},s.prototype.setText=function(t){return this._text=t,this._calculateMetrics(!1),this},s.prototype.setPosition=function(t,i){return this._x=o["default"](t,this._x),this._y=o["default"](i,this._y),this},s.prototype.getPosition=function(){return{x:this._x,y:this._y}},s.prototype.setTextSize=function(t){return this._fontSize=t,this._calculateMetrics(!0),this},s.prototype.setRotation=function(t){return this._rotation=o["default"](t,this._rotation),this},s.prototype.getRotation=function(t){return this._rotation},s.prototype.setPInstance=function(t){return this._p=o["default"](t,this._p),this},s.prototype.getPInstance=function(){return this._p},s.prototype.setAnchor=function(t,i,e){var n=this._calculateAlignedCoords(this._x,this._y);if(this._hAlign=o["default"](t,s.ALIGN.CENTER),this._vAlign=o["default"](i,s.BASELINE.CENTER),e){var a=this._calculateAlignedCoords(this._x,this._y);this._x+=n.x-a.x,this._y+=n.y-a.y}return this},s.prototype.getBbox=function(t,i){this.setPosition(t,i);var e=this._calculateAlignedCoords(this._x,this._y);return{x:e.x+this._boundsOffset.x,y:e.y+this._boundsOffset.y,w:this.width,h:this.height}},s.prototype.getTextPoints=function(t,i,e){this.setPosition(t,i);for(var s=this._font.textToPoints(this._text,this._x,this._y,this._fontSize,e),o=0;o<s.length;o+=1){var n=this._calculateAlignedCoords(s[o].x,s[o].y);s[o].x=n.x,s[o].y=n.y}return s},s.prototype.draw=function(t,i,e){e=o["default"](e,!1),this.setPosition(t,i);var s={x:this._x,y:this._y};if(this._p.push(),this._rotation&&(s=this._calculateRotatedCoords(s.x,s.y,this._rotation),this._p.rotate(this._rotation)),s=this._calculateAlignedCoords(s.x,s.y),this._p.textAlign(this._p.LEFT,this._p.BASELINE),this._p.textFont(this._font),this._p.textSize(this._fontSize),this._p.text(this._text,s.x,s.y),e){this._p.stroke(200);var n=s.x+this._boundsOffset.x,a=s.y+this._boundsOffset.y;this._p.noFill(),this._p.rect(n,a,this.width,this.height)}this._p.pop()},s.prototype._calculateRotatedCoords=function(t,i,e){var s=Math.cos(e)*t+Math.cos(Math.PI/2-e)*i,o=-Math.sin(e)*t+Math.sin(Math.PI/2-e)*i;return{x:s,y:o}},s.prototype._calculateAlignedCoords=function(t,i){var e,o;switch(this._hAlign){case s.ALIGN.BOX_LEFT:e=t;break;case s.ALIGN.BOX_CENTER:e=t-this.halfWidth;break;case s.ALIGN.BOX_RIGHT:e=t-this.width;break;default:e=t,console.log("Unrecognized horizonal align:",this._hAlign)}switch(this._vAlign){case s.BASELINE.BOX_TOP:o=i-this._boundsOffset.y;break;case s.BASELINE.BOX_CENTER:o=i+this._distBaseToMid;break;case s.BASELINE.BOX_BOTTOM:o=i-this._distBaseToBottom;break;case s.BASELINE.FONT_CENTER:o=i-this._descent+(this._ascent+this._descent)/2;break;case s.BASELINE.ALPHABETIC:o=i;break;default:o=i,console.log("Unrecognized vertical align:",this._vAlign)}return{x:e,y:o}},s.prototype._calculateMetrics=function(t){var i=this._font.textBounds(this._text,1e3,1e3,this._fontSize);i={x:i.x-1e3,y:i.y-1e3,w:i.w,h:i.h},t&&(this._ascent=this._font._textAscent(this._fontSize),this._descent=this._font._textDescent(this._fontSize)),this.width=i.w,this.height=i.h,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this._boundsOffset={x:i.x,y:i.y},this._distBaseToMid=Math.abs(i.y)-this.halfHeight,this._distBaseToBottom=this.height-Math.abs(i.y)}},{"./utils.js":3}],3:[function(t,i,e){e["default"]=function(t,i){return void 0!==t?t:i}},{}],4:[function(t,i,e){function s(t,i){this._slideshowDelay=void 0!==t?t:2e3,this._transitionDuration=void 0!==i?_transitionDuration:1e3,this._slideshows=[],this.reload()}function o(t,i,e){this._$container=t,this._slideshowDelay=i,this._transitionDuration=e,this._timeoutId=null,this._imageIndex=0,this._$images=[],this._$container.find("img").each(function(t,i){var e=$(i);e.css({position:"absolute",top:"0",left:"0",zIndex:0===t?2:0}),this._$images.push(e)}.bind(this)),this._numImages=this._$images.length,this._numImages<=1||(this._$container.on("mouseenter",this._onEnter.bind(this)),this._$container.on("mouseleave",this._onLeave.bind(this)))}i.exports=s;var n=t("./utilities.js");s.prototype.reload=function(){var t=this._slideshows||[];this._slideshows=[],$(".hover-slideshow").each(function(i,e){var s=$(e),n=this._findInSlideshows(e,t);if(-1!==n){var a=t.splice(n,1)[0];this._slideshows.push(a)}else this._slideshows.push(new o(s,this._slideshowDelay,this._transitionDuration))}.bind(this))},s.prototype._findInSlideshows=function(t,i){for(var e=0;e<i.length;e+=1)if(t===i[e].getElement())return e;return-1},o.prototype.getElement=function(){return this._$container.get(0)},o.prototype.get$Element=function(){return this._$container},o.prototype._onEnter=function(){this._timeoutId=setTimeout(this._advanceSlideshow.bind(this),500)},o.prototype._onLeave=function(){clearInterval(this._timeoutId),this._timeoutId=null},o.prototype._advanceSlideshow=function(){this._imageIndex+=1;var t;this._numImages>=3&&(t=n.wrapIndex(this._imageIndex-2,this._numImages),this._$images[t].css({zIndex:0,opacity:0}),this._$images[t].velocity("stop")),this._numImages>=2&&(t=n.wrapIndex(this._imageIndex-1,this._numImages),this._$images[t].css({zIndex:1,opacity:1}),this._$images[t].velocity("stop")),this._imageIndex=n.wrapIndex(this._imageIndex,this._numImages),this._$images[this._imageIndex].css({zIndex:2,opacity:0}),this._$images[this._imageIndex].velocity({opacity:1},this._transitionDuration,"easeInOutQuad"),this._timeoutId=setTimeout(this._advanceSlideshow.bind(this),this._slideshowDelay)}},{"./utilities.js":19}],5:[function(t,i,e){function s(t,i,e){this._$nav=t,this._$navLogo=i,this._fontPath=e,this._text=this._$navLogo.text(),this._isFirstFrame=!0,this._isMouseOver=!1,this._isOverNavLogo=!1,this._updateTextOffset(),this._updateSize(),this._updateFontSize(),this._$container=$("<div>").css({position:"absolute",top:"0px",left:"0px"}).prependTo(this._$nav).hide(),this._createP5Instance()}i.exports=s;var o=t("../utilities.js");s.prototype._createP5Instance=function(){new p5(function(t){this._p=t,t.preload=this._preload.bind(this,t),t.setup=this._setup.bind(this,t),t.draw=this._draw.bind(this,t)}.bind(this),this._$container.get(0))},s.prototype._updateTextOffset=function(){var t=$("<div>").css({display:"inline-block",verticalAlign:"baseline"}).prependTo(this._$navLogo),i=this._$nav.offset(),e=t.offset();this._textOffset={top:e.top-i.top,left:e.left-i.left},t.remove()},s.prototype._calculateNavLogoBounds=function(){var t=this._$nav.offset(),i=this._$navLogo.offset();this._logoBbox={y:i.top-t.top,x:i.left-t.left,w:this._$navLogo.outerWidth(),h:this._$navLogo.outerHeight()}},s.prototype._updateSize=function(){this._width=this._$nav.innerWidth(),this._height=this._$nav.innerHeight()},s.prototype._updateFontSize=function(){this._fontSize=this._$navLogo.css("fontSize").replace("px","")},s.prototype._onResize=function(t){this._updateSize(),this._updateFontSize(),this._updateTextOffset(),this._calculateNavLogoBounds(),t.resizeCanvas(this._width,this._height)},s.prototype._setMouseOver=function(t){this._isMouseOver=t},s.prototype._onClick=function(t){this._isOverNavLogo&&this._$navLogo.trigger(t)},s.prototype._preload=function(t){this._font=t.loadFont(this._fontPath)},s.prototype._setup=function(t){var i=t.createCanvas(this._width,this._height);this._$canvas=$(i.canvas),this._$container.show(),this._$navLogo.css("zIndex",-1),this._$canvas.on("mouseover",this._setMouseOver.bind(this,!0)),this._$canvas.on("mouseout",this._setMouseOver.bind(this,!1)),this._$canvas.on("click",this._onClick.bind(this)),$(window).on("resize",this._onResize.bind(this,t))},s.prototype._draw=function(t){if(this._isMouseOver){var i=o.isInRect(t.mouseX,t.mouseY,this._logoBbox);!this._isOverNavLogo&&i?(this._isOverNavLogo=!0,this._$canvas.css("cursor","pointer")):this._isOverNavLogo&&!i&&(this._isOverNavLogo=!1,this._$canvas.css("cursor","initial"))}}},{"../utilities.js":19}],6:[function(t,i,e){function s(t,i){n.call(this,t,i,"../fonts/big_john-webfont.ttf")}i.exports=s;var o=t("p5-bbox-aligned-text"),n=t("./base-logo-sketch.js"),a=t("./generators/sin-generator.js"),h=t("../utilities.js");s.prototype=Object.create(n.prototype),s.prototype._onResize=function(t){n.prototype._onResize.call(this,t),this._spacing=h.map(this._fontSize,20,40,2,5,{clamp:!0,round:!0}),this._bboxText.setText(this._text).setTextSize(this._fontSize).setAnchor(o.ALIGN.BOX_LEFT,o.BASELINE.ALPHABETIC).setPosition(this._textOffset.left,this._textOffset.top).setAnchor(o.ALIGN.BOX_CENTER,o.BASELINE.BOX_CENTER,!0),this._drawStationaryLogo(t),this._points=this._bboxText.getTextPoints(),this._isFirstFrame=!0},s.prototype._drawStationaryLogo=function(t){t.background(255),t.stroke(255),t.fill("#0A000A"),t.strokeWeight(2),this._bboxText.draw()},s.prototype._setup=function(t){n.prototype._setup.call(this,t),this._bboxText=new o(this._font,this._text,this._fontSize,0,0,t),this._onResize(t),this._drawStationaryLogo(t),this._thresholdGenerator=new a(t,0,1,.02,t.PI/2)},s.prototype._draw=function(t){if(n.prototype._draw.call(this,t),this._isMouseOver&&this._isOverNavLogo){this._isFirstFrame&&(t.background(255),this._isFirstFrame=!1),this._fontSize>30?this._thresholdGenerator.setBounds(.2*this._bboxText.height,.47*this._bboxText.height):this._thresholdGenerator.setBounds(.2*this._bboxText.height,.6*this._bboxText.height);var i=this._thresholdGenerator.generate();t.background(255,100),t.strokeWeight(1);for(var e=0;e<this._points.length;e+=1)for(var s=this._points[e],o=e+1;o<this._points.length;o+=1){var a=this._points[o],h=t.dist(s.x,s.y,a.x,a.y);i>h&&(t.noStroke(),t.fill("rgba(165, 0, 173, 0.25)"),t.ellipse((s.x+a.x)/2,(s.y+a.y)/2,h,h),t.stroke("rgba(165, 0, 173, 0.25)"),t.noFill(),t.line(s.x,s.y,a.x,a.y))}}}},{"../utilities.js":19,"./base-logo-sketch.js":5,"./generators/sin-generator.js":8,"p5-bbox-aligned-text":2}],7:[function(t,i,e){function s(t,i,e,s,o){this._p=t,this._min=n["default"](i,0),this._max=n["default"](e,1),this._increment=n["default"](s,.1),this._position=n["default"](o,t.random(-1e6,1e6))}function o(t,i,e,o,n,a,h,r,c){this._xNoise=new s(t,i,e,a,r),this._yNoise=new s(t,o,n,h,c),this._p=t}i.exports={NoiseGenerator1D:s,NoiseGenerator2D:o};var n=t("../../utilities.js");s.prototype.setBounds=function(t,i){this._min=n["default"](t,this._min),this._max=n["default"](i,this._max)},s.prototype.setIncrement=function(t){this._increment=n["default"](t,this._increment)},s.prototype.generate=function(){this._update();var t=this._p.noise(this._position);return t=this._p.map(t,0,1,this._min,this._max)},s.prototype._update=function(){this._position+=this._increment},o.prototype.setBounds=function(t){t&&(this._xNoise.setBounds(t.xMin,t.xMax),this._yNoise.setBounds(t.yMin,t.yMax))},o.prototype.setBounds=function(t){t&&(this._xNoise.setBounds(t.xIncrement),this._yNoise.setBounds(t.yIncrement))},o.prototype.generate=function(){return{x:this._xNoise.generate(),y:this._yNoise.generate()}}},{"../../utilities.js":19}],8:[function(t,i,e){function s(t,i,e,s,n){this._p=t,this._min=o["default"](i,0),this._max=o["default"](e,0),this._increment=o["default"](s,.1),this._angle=o["default"](n,t.random(-1e6,1e6))}i.exports=s;var o=t("../../utilities.js");s.prototype.setBounds=function(t,i){this._min=o["default"](t,this._min),this._max=o["default"](i,this._max)},s.prototype.setIncrement=function(t){this._increment=o["default"](t,this._increment)},s.prototype.generate=function(){this._update();var t=this._p.sin(this._angle);return t=this._p.map(t,-1,1,this._min,this._max)},s.prototype._update=function(){this._angle+=this._increment}},{"../../utilities.js":19}],9:[function(t,i,e){function s(t,i){n.call(this,t,i,"../fonts/big_john-webfont.ttf")}i.exports=s;var o=t("p5-bbox-aligned-text"),n=t("./base-logo-sketch.js"),a=t("../utilities.js");s.prototype=Object.create(n.prototype),s.prototype._onResize=function(t){n.prototype._onResize.call(this,t),this._spacing=a.map(this._fontSize,20,40,2,5,{clamp:!0,round:!0}),this._bboxText.setText(this._text).setTextSize(this._fontSize).setAnchor(o.ALIGN.BOX_LEFT,o.BASELINE.ALPHABETIC).setPosition(this._textOffset.left,this._textOffset.top).setAnchor(o.ALIGN.BOX_CENTER,o.BASELINE.BOX_CENTER,!0),this._drawStationaryLogo(t),this._calculateCircles(t),this._isFirstFrame=!0},s.prototype._drawStationaryLogo=function(t){t.background(255),t.stroke(255),t.fill("#0A000A"),t.strokeWeight(2),this._bboxText.draw()},s.prototype._setup=function(t){n.prototype._setup.call(this,t),this._bboxText=new o(this._font,this._text,this._fontSize,0,0,t),this._onResize(t),this._drawStationaryLogo(t),this._calculateCircles(t)},s.prototype._calculateCircles=function(t){var i=this._bboxText.getBbox(),e=Math.floor(Math.max(i.x-5,0)),s=Math.ceil(Math.min(i.x+i.w+5,t.width)),o=Math.floor(Math.max(i.y-5,0)),n=Math.ceil(Math.min(i.y+i.h+5,t.height));t.loadPixels(),t.pixelDensity(1),this._circles=[];for(var a=o;n>a;a+=this._spacing)for(var h=e;s>h;h+=this._spacing){var r=4*(a*t.width+h),c=t.pixels[r],_=t.pixels[r+1],l=t.pixels[r+2],d=t.pixels[r+3],p=t.color(c,_,l,d);t.saturation(p)>0&&(this._circles.push({x:h+t.random(-2/3*this._spacing,2/3*this._spacing),y:a+t.random(-2/3*this._spacing,2/3*this._spacing),color:t.color("#06FFFF")}),this._circles.push({x:h+t.random(-2/3*this._spacing,2/3*this._spacing),y:a+t.random(-2/3*this._spacing,2/3*this._spacing),color:t.color("#FE00FE")}),this._circles.push({x:h+t.random(-2/3*this._spacing,2/3*this._spacing),y:a+t.random(-2/3*this._spacing,2/3*this._spacing),color:t.color("#FFFF04")}))}},s.prototype._draw=function(t){if(n.prototype._draw.call(this,t),this._isMouseOver&&this._isOverNavLogo){this._isFirstFrame&&(t.background(255),this._isFirstFrame=!1),t.blendMode(t.BLEND),t.background(255),t.noStroke(),t.blendMode(t.MULTIPLY);for(var i=this._bboxText.halfWidth,e=2*this._spacing,s=0;s<this._circles.length;s+=1){var o=this._circles[s],h=o.color,r=t.dist(o.x,o.y,t.mouseX,t.mouseY),c=a.map(r,0,i,1,e,{clamp:!0});t.fill(h),t.ellipse(o.x,o.y,c,c)}}}},{"../utilities.js":19,"./base-logo-sketch.js":5,"p5-bbox-aligned-text":2}],10:[function(t,i,e){function s(t,i){a.call(this,t,i,"../fonts/big_john-webfont.ttf")}i.exports=s;var o=t("./generators/noise-generators.js"),n=t("p5-bbox-aligned-text"),a=t("./base-logo-sketch.js");s.prototype=Object.create(a.prototype),s.prototype._onResize=function(t){a.prototype._onResize.call(this,t),this._bboxText.setText(this._text).setTextSize(this._fontSize).setRotation(0).setAnchor(n.ALIGN.BOX_LEFT,n.BASELINE.ALPHABETIC).setPosition(this._textOffset.left,this._textOffset.top).setAnchor(n.ALIGN.BOX_CENTER,n.BASELINE.BOX_CENTER,!0),this._textPos=this._bboxText.getPosition(),this._drawStationaryLogo(t),this._isFirstFrame=!0},s.prototype._drawStationaryLogo=function(t){t.background(255),t.stroke(255),t.fill("#0A000A"),t.strokeWeight(2),this._bboxText.draw()},s.prototype._setup=function(t){a.prototype._setup.call(this,t),this._bboxText=new n(this._font,this._text,this._fontSize,0,0,t),this._onResize(t),this._rotationNoise=new o.NoiseGenerator1D(t,-t.PI/4,t.PI/4,.02),this._xyNoise=new o.NoiseGenerator2D(t,-100,100,-50,50,.01,.01)},s.prototype._draw=function(t){if(a.prototype._draw.call(this,t),this._isMouseOver&&this._isOverNavLogo){this._isFirstFrame&&(t.background(255),this._isFirstFrame=!1);var i=this._rotationNoise.generate(),e=this._xyNoise.generate();this._bboxText.setRotation(i).setPosition(this._textPos.x+e.x,this._textPos.y+e.y).draw()}}},{"./base-logo-sketch.js":5,"./generators/noise-generators.js":7,"p5-bbox-aligned-text":2}],11:[function(t,i,e){function s(t){this._loader=t,this._$logo=$("nav.navbar .navbar-brand"),this._$nav=$("#main-nav"),this._$navLinks=this._$nav.find("a"),this._$activeNav=this._$navLinks.find(".active"),this._$navLinks.on("click",this._onNavClick.bind(this)),this._$logo.on("click",this._onLogoClick.bind(this))}i.exports=s,s.prototype.setActiveFromUrl=function(){this._deactivate();var t=location.pathname;"/index.html"===t||"/"===t?this._activateLink(this._$navLinks.filter("#about-link")):"/work.html"===t&&this._activateLink(this._$navLinks.filter("#work-link"))},s.prototype._deactivate=function(){this._$activeNav.length&&(this._$activeNav.removeClass("active"),this._$activeNav=$())},s.prototype._activateLink=function(t){t.addClass("active"),this._$activeNav=t},s.prototype._onLogoClick=function(t){t.preventDefault();var i=$(t.currentTarget),e=i.attr("href");this._loader.loadPage(e,{},!0)},s.prototype._onNavClick=function(t){t.preventDefault(),this._$nav.collapse("hide");var i=$(t.currentTarget);if(!i.is(this._$activeNav)){this._deactivate(),this._activateLink(i);var e=i.attr("href");this._loader.loadPage(e,{},!0)}}},{}],12:[function(t,i,e){function s(t){var i=t.state&&t.state.url||"/index.html",e=t.state&&t.state.query||{};if(i===p.getLoadedPath()&&"/work.html"===i){var s=e.category||"all";a.selectCategory(s)}else p.loadPage(i,{},!1)}function o(){n=new c,a=new _(p),l.init(),objectFitImages(),smartquotes(),u.setActiveFromUrl()}var n,a,h=t("./page-loader.js"),r=t("./main-nav.js"),c=t("./hover-slideshow.js"),_=t("./portfolio-filter.js"),l=t("./thumbnail-slideshow/slideshow.js"),d=t("./pick-random-sketch.js")(),p=new h(o),u=new r(p),f=$("nav.navbar"),g=f.find(".navbar-brand");new d(f,g);o(),window.addEventListener("popstate",s)},{"./hover-slideshow.js":4,"./main-nav.js":11,"./page-loader.js":13,"./pick-random-sketch.js":14,"./portfolio-filter.js":15,"./thumbnail-slideshow/slideshow.js":17}],13:[function(t,i,e){function s(t,i){this._$content=$("#content"),this._onReload=t,this._fadeDuration=void 0!==i?i:250,this._path=location.pathname}i.exports=s;var o=t("./utilities.js");s.prototype.getLoadedPath=function(){return this._path},s.prototype.loadPage=function(t,i,e){function s(s,n,a){if("error"===n)return void console.log("There was a problem loading the page.");var h=o.createQueryString(i);e&&history.pushState({url:t,query:i},null,t+h),ga("set","page",t+h),ga("send","pageview"),this._path=location.pathname,this._$content.velocity({opacity:1},this._fadeDuration,"swing"),this._onReload()}this._$content.velocity({opacity:0},this._fadeDuration,"swing",function(){this._$content.empty(),this._$content.load(t+" #content",s.bind(this))}.bind(this))}},{"./utilities.js":19}],14:[function(t,i,e){function s(t){var i=[];for(var e in a)-1===t.indexOf(e)&&i.push(e);return i}var o=t("js-cookie"),n=t("./utilities.js"),a={"halftone-flashlight":t("./interactive-logos/halftone-flashlight-word.js"),"noisy-word":t("./interactive-logos/noisy-word-sketch.js"),"connect-points":t("./interactive-logos/connect-points-sketch.js")},h=Object.keys(a).length,r="seen-sketch-names";i.exports=function(){var t=o.getJSON(r)||[],i=s(t);0===i.length&&(h>1?(t=[t.pop()],i=s(t)):(t=[],i=Object.keys(a)));var e=n.randArrayElement(i);return t.push(e),o.set(r,t,{expires:7}),a[e]}},{"./interactive-logos/connect-points-sketch.js":6,"./interactive-logos/halftone-flashlight-word.js":9,"./interactive-logos/noisy-word-sketch.js":10,"./utilities.js":19,"js-cookie":1}],15:[function(t,i,e){function s(t,i,e,s){this._loader=t,this._gridSpacing=0,this._aspectRatio=void 0!==e?e:16/9,this._transitionDuration=void 0!==s?s:800,this._breakpoints=void 0!==i?i.slice():n.slice(),this._$grid=$("#portfolio-grid"),this._$nav=$("#portfolio-nav"),this._$projects=[],this._$categories={},this._rows=0,this._cols=0,this._imageHeight=0,this._imageWidth=0,this._breakpoints.sort(function(t,i){return t.width<i.width?-1:t.width>i.width?1:0}),this._cacheProjects(),this._createGrid(),this._$grid.find(".project a").on("click",this._onProjectClick.bind(this));var a=o.getQueryParameters(),h=a.category||"all",r=h.toLowerCase();this._$activeNavItem=this._$nav.find("a[data-category="+r+"]"),this._$activeNavItem.addClass("active"),this._filterProjects(r),$("#portfolio-nav a").on("click",this._onNavClick.bind(this)),$(window).on("resize",this._createGrid.bind(this))}i.exports=s;var o=t("./utilities.js"),n=[{width:1200,cols:3,spacing:15},{width:992,cols:3,spacing:15},{width:700,cols:3,spacing:15},{width:600,cols:2,spacing:10},{width:480,cols:2,spacing:10},{width:320,cols:1,spacing:10}];s.prototype.selectCategory=function(t){t=t&&t.toLowerCase()||"all";var i=this._$nav.find("a[data-category="+t+"]");i.length&&!i.is(this._$activeNavItem)&&(this._$activeNavItem.removeClass("active"),this._$activeNavItem=i,this._$activeNavItem.addClass("active"),this._filterProjects(t))},s.prototype._filterProjects=function(t){var i=this._getProjectsInCategory(t);this._animateGridHeight(i.length),this._$projects.forEach(function(t){t.velocity("stop");var e=i.indexOf(t);if(-1===e)t.css("zIndex",-1),t.velocity({opacity:0},this._transitionDuration,"easeInOutCubic",function(){t.hide()});else{t.show(),t.css("zIndex",0);var s=this._indexToXY(e);t.velocity({opacity:1,top:s.y+"px",left:s.x+"px"},this._transitionDuration,"easeInOutCubic")}}.bind(this))},s.prototype._animateGridHeight=function(t){this._$grid.velocity("stop");var i=Math.ceil(t/this._cols);this._$grid.velocity({height:this._imageHeight*i+this._gridSpacing*(i-1)+"px"},this._transitionDuration)},s.prototype._getProjectsInCategory=function(t){return"all"===t?this._$projects:this._$categories[t]||[]},s.prototype._cacheProjects=function(){this._$projects=[],this._$categories={},this._$grid.find(".project").each(function(t,i){var e=$(i);this._$projects.push(e);for(var s=e.data("categories").split(","),o=0;o<s.length;o+=1){var n=$.trim(s[o]).toLowerCase();this._$categories[n]?this._$categories[n].push(e):this._$categories[n]=[e]}}.bind(this))},s.prototype._calculateGrid=function(){for(var t=this._$grid.innerWidth(),i=0;i<this._breakpoints.length;i+=1)if(t<=this._breakpoints[i].width){this._cols=this._breakpoints[i].cols,this._gridSpacing=this._breakpoints[i].spacing;break}this._rows=Math.ceil(this._$projects.length/this._cols),this._imageWidth=(t-(this._cols-1)*this._gridSpacing)/this._cols,this._imageHeight=this._imageWidth*(1/this._aspectRatio)},s.prototype._createGrid=function(){this._calculateGrid(),this._$grid.css("position","relative"),this._$grid.css({height:this._imageHeight*this._rows+this._gridSpacing*(this._rows-1)+"px"}),this._$projects.forEach(function(t,i){var e=this._indexToXY(i);t.css({position:"absolute",top:e.y+"px",left:e.x+"px",width:this._imageWidth+"px",height:this._imageHeight+"px"})}.bind(this))},s.prototype._onNavClick=function(t){t.preventDefault();var i=$(t.target);if(!i.is(this._$activeNavItem)){this._$activeNavItem.length&&this._$activeNavItem.removeClass("active"),i.addClass("active"),this._$activeNavItem=i;var e=i.data("category").toLowerCase();history.pushState({url:"/work.html",query:{category:e}},null,"/work.html?category="+e),this._filterProjects(e)}},s.prototype._onProjectClick=function(t){t.preventDefault();var i=$(t.currentTarget),e=i.data("name"),s="/projects/"+e+".html";this._loader.loadPage(s,{},!0)},s.prototype._indexToXY=function(t){var i=Math.floor(t/this._cols),e=t%this._cols;return{x:e*this._imageWidth+e*this._gridSpacing,y:i*this._imageHeight+i*this._gridSpacing}}},{"./utilities.js":19}],16:[function(t,i,e){function s(t,i){this._slideshow=i,this._$modal=t.find(".slideshow-modal"),this._$overlay=this._$modal.find(".modal-overlay"),this._$content=this._$modal.find(".modal-contents"),this._$caption=this._$modal.find(".modal-caption"),this._$imageContainer=this._$modal.find(".modal-image"),this._$imageLeft=this._$modal.find(".image-advance-left"),this._$imageRight=this._$modal.find(".image-advance-right"),this._index=0,this._isOpen=!1,this._$imageLeft.on("click",this.advanceLeft.bind(this)),this._$imageRight.on("click",this.advanceRight.bind(this)),$(document).on("keydown",this._onKeyDown.bind(this)),this._$modal.css("display","block"),this._$modal.hide(),$(window).on("resize",this._onResize.bind(this)),this._$overlay.on("click",this.close.bind(this)),this._$modal.find(".modal-close").on("click",this.close.bind(this)),this._updateControls(),setTimeout(function(){this._onResize()}.bind(this),0)}i.exports=s;var o={LEFT_ARROW:37,RIGHT_ARROW:39,ESCAPE:27};s.prototype.advanceLeft=function(){this.showImageAt(this._index-1)},s.prototype.advanceRight=function(){this.showImageAt(this._index+1)},s.prototype.showImageAt=function(t){t=Math.max(t,0),t=Math.min(t,this._slideshow.getNumImages()-1),this._index=t;var i=this._slideshow.getGalleryImage(this._index),e=this._slideshow.getCaption(this._index);this._$imageContainer.empty(),$("<img>",{src:i.attr("src")}).appendTo(this._$imageContainer),this._$caption.empty(),e&&($("<span>").addClass("figure-number").text("Fig. "+(this._index+1)+": ").appendTo(this._$caption),$("<span>").addClass("caption-text").text(e).appendTo(this._$caption)),this._onResize(),this._updateControls()},s.prototype.open=function(t){t=t||0,this._$modal.show(),this.showImageAt(t),this._isOpen=!0},s.prototype.close=function(){this._$modal.hide(),this._isOpen=!1},s.prototype._onKeyDown=function(t){this._isOpen&&(t.which===o.LEFT_ARROW?this.advanceLeft():t.which===o.RIGHT_ARROW?this.advanceRight():t.which===o.ESCAPE&&this.close())},s.prototype._updateControls=function(){this._$imageRight.removeClass("disabled"),this._$imageLeft.removeClass("disabled"),this._index>=this._slideshow.getNumImages()-1?this._$imageRight.addClass("disabled"):this._index<=0&&this._$imageLeft.addClass("disabled")},s.prototype._onResize=function(){var t=this._$imageContainer.find("img");this._$content.width("");var i=this._$imageLeft.outerWidth(!0)+this._$imageRight.outerWidth(!0),e=2*this._$caption.outerHeight(!0),s=(t.innerWidth(),this._$modal.width()-i),o=this._$modal.height()-e,n=function(){var i=t.prop("naturalWidth"),e=t.prop("naturalHeight"),n=i/s,a=e/o,h=Math.max(n,a);h>1?(t.css("width",i/h+"px"),t.css("height",e/h+"px")):(t.css("width",i+"px"),t.css("height",e+"px")),this._$imageRight.css("top",t.outerHeight()/2+"px"),this._$imageLeft.css("top",t.outerHeight()/2+"px"),this._$content.width(t.outerWidth(!0))}.bind(this);t.prop("complete")?n():t.one("load",n)}},{}],17:[function(t,i,e){function s(t,i){this._transitionDuration=i,this._$container=t,this._index=0,this._thumbnailSlider=new n(t,this),this._modal=new o(t,this),this._$captionContainer=t.find(".caption"),this._$selectedImageContainer=t.find(".selected-image"),this._$selectedImageContainer.on("click",function(){this._modal.open(this._index)}.bind(this)),this._$galleryImages=this._loadGalleryImages(),this._numImages=this._$galleryImages.length,this.showImage(0)}var o=t("./slideshow-modal.js"),n=t("./thumbnail-slider.js");i.exports={init:function(t){t=void 0!==t?t:400,this._slideshows=[],$(".slideshow").each(function(i,e){var o=new s($(e),t);this._slideshows.push(o)}.bind(this))}},s.prototype.getActiveIndex=function(){return this._index},s.prototype.getNumImages=function(){return this._numImages},s.prototype.getGalleryImage=function(t){return this._$galleryImages[t]},s.prototype.getCaption=function(t){return this._$galleryImages[t].data("caption")},s.prototype.showImage=function(t){this._$galleryImages.forEach(function(t){t.css({zIndex:0,opacity:0}),t.velocity("stop")},this);var i=this._$galleryImages[this._index],e=this._$galleryImages[t];this._index=t,i.css("zIndex",1),e.css("zIndex",2),i.css("opacity",1),e.velocity({opacity:1},this._transitionDuration,"easeInOutQuad");var s=e.data("caption");s&&(this._$captionContainer.empty(),$("<span>").addClass("figure-number").text("Fig. "+(this._index+1)+": ").appendTo(this._$captionContainer),$("<span>").addClass("caption-text").text(s).appendTo(this._$captionContainer))},s.prototype._loadGalleryImages=function(){for(var t=[],i=0;i<this._thumbnailSlider.getNumThumbnails();i+=1){var e=this._thumbnailSlider.get$Thumbnail(i),s=e.data("large-path"),o=s.split("/").pop().split(".")[0],n=$("<img>",{id:o}).css({position:"absolute",top:"0px",left:"0px",opacity:0,zIndex:0}).data("image-url",s).data("caption",e.data("caption")).appendTo(this._$selectedImageContainer);n.get(0).src=s,t.push(n)}return t}},{"./slideshow-modal.js":16,"./thumbnail-slider.js":18}],18:[function(t,i,e){function s(t,i){this._$container=t,this._slideshow=i,this._index=0,this._scrollIndex=0,this._$thumbnailContainer=t.find(".thumbnails"),this._$thumbnailImages=this._$thumbnailContainer.find("img"),this._$visibleThumbnailWrap=t.find(".visible-thumbnails"),this._$advanceLeft=t.find(".thumbnail-advance-left"),this._$advanceRight=t.find(".thumbnail-advance-right"),this._$thumbnails=[],this._$thumbnailImages.each(function(t,i){var e=$(i);e.data("index",t),this._$thumbnails.push(e)}.bind(this)),this._numImages=this._$thumbnails.length,this._$advanceLeft.on("click",this.advanceLeft.bind(this)),this._$advanceRight.on("click",this.advanceRight.bind(this)),this._$thumbnailImages.on("click",this._onClick.bind(this)),this._activateThumbnail(0),$(window).on("resize",this._onResize.bind(this)),setTimeout(function(){this._onResize()}.bind(this),0)}i.exports=s,s.prototype.getActiveIndex=function(){return this._index},s.prototype.getNumThumbnails=function(){return this._numImages},s.prototype.get$Thumbnail=function(t){return this._$thumbnails[t]},s.prototype.advanceLeft=function(){var t=this._scrollIndex-this._numVisible;t=Math.max(t,0),this._scrollToThumbnail(t)},s.prototype.advanceRight=function(){var t=this._scrollIndex+this._numVisible;t=Math.min(t,this._numImages-1),this._scrollToThumbnail(t)},s.prototype._resetSizing=function(){this._$thumbnailContainer.css({top:"",left:"",width:"",height:""}),this._$visibleThumbnailWrap.width(""),this._$visibleThumbnailWrap.height(""),
this._$thumbnails.forEach(function(t){t.height(""),t.width(t.height())})},s.prototype._onResize=function(){this._resetSizing();var t=this._$thumbnails[0],i=t.outerHeight(!1),e=2*(t.outerWidth(!0)-i);this._$advanceRight.css("display","block"),this._$advanceLeft.css("display","block");var s=this._$advanceRight.outerWidth(!0)+this._$advanceLeft.outerWidth(!0),o=this._$visibleThumbnailWrap.outerWidth(!1),n=Math.floor((o-e)/(i+e));if(n<this._numImages){n=Math.round((o-s+e)/(i+e));var a=(o-s+e)/n-e;this._$thumbnails.forEach(function(t){t.css("width",a+"px"),t.css("height",a+"px")});var h=a*this._numImages+e*(this._numImages-1);this._$thumbnailContainer.css({width:h+"px",height:t.outerHeight(!0)+"px"}),this._$visibleThumbnailWrap.css({width:o-s+"px",height:t.outerHeight(!0)+"px"})}else n=this._numImages,this._$thumbnailContainer.css("width","100%"),this._$advanceRight.css("display","none"),this._$advanceLeft.css("display","none");this._numVisible=n;var r=Math.floor((this._numVisible-1)/2);this._scrollBounds={min:r,max:this._numImages-1-r},this._numVisible%2===0&&(this._scrollBounds.max-=1),this._updateThumbnailControls()},s.prototype._activateThumbnail=function(t){this._$thumbnails[this._index].removeClass("active"),this._$thumbnails[t].addClass("active")},s.prototype._scrollToThumbnail=function(t){if(this._numVisible!==this._numImages){t=Math.max(t,this._scrollBounds.min),t=Math.min(t,this._scrollBounds.max),this._scrollIndex=t,console.log(this._scrollIndex);var i=this._$thumbnails[0],e=parseFloat(i.css("width")),s=2*parseFloat(i.css("margin-right")),o=e*this._scrollBounds.min+s*(this._scrollBounds.min-1),n=e*t+s*(t-1),a=o-n;this._$thumbnailContainer.velocity("stop"),this._$thumbnailContainer.velocity({left:a+"px"},600,"easeInOutQuad"),this._updateThumbnailControls()}},s.prototype._onClick=function(t){var i=$(t.target),e=i.data("index");this._index!==e&&(this._activateThumbnail(e),this._scrollToThumbnail(e),this._index=e,this._slideshow.showImage(e))},s.prototype._updateThumbnailControls=function(){this._$advanceLeft.removeClass("disabled"),this._$advanceRight.removeClass("disabled");var t=Math.floor((this._numVisible-1)/2);this._numImages-1-t;this._scrollIndex>=this._scrollBounds.max?this._$advanceRight.addClass("disabled"):this._scrollIndex<=this._scrollBounds.min&&this._$advanceLeft.addClass("disabled")}},{}],19:[function(t,i,e){e["default"]=function(t,i){return void 0!==t?t:i},e.timeIt=function(t){var i=performance.now();t();var e=performance.now();return e-i},e.isInRect=function(t,i,e){return t>=e.x&&t<=e.x+e.w&&i>=e.y&&i<=e.y+e.h},e.randInt=function(t,i){return Math.floor(Math.random()*(i-t+1))+t},e.randArrayElement=function(t){var i=e.randInt(0,t.length-1);return t[i]},e.map=function(t,i,e,s,o,n){var a=(t-i)/(e-i)*(o-s)+s;return n?(n.round&&n.round===!0&&(a=Math.round(a)),n.floor&&n.floor===!0&&(a=Math.floor(a)),n.ceil&&n.ceil===!0&&(a=Math.ceil(a)),n.clamp&&n.clamp===!0&&(a=Math.min(a,o),a=Math.max(a,s)),a):a},e.getQueryParameters=function(){if(qs=window.location.search,qs.length<=1)return{};qs=qs.substring(1);for(var t=qs.split("&"),i={},e=0;e<t.length;e+=1){var s=t[e].split("=");if(2===s.length){var o=decodeURIComponent(s[0]),n=decodeURIComponent(s[1]);i[o]=n}}return i},e.createQueryString=function(t){if("object"!=typeof t)return"";var i=Object.keys(t);if(0===i.length)return"";for(var e="?",s=0;s<i.length;s+=1){var o=i[s],n=t[o];e+=encodeURIComponent(o)+"="+encodeURIComponent(n),s!==i.length-1&&(e+="&")}return e},e.wrapIndex=function(t,i){var e=t%i;return 0>e&&(e=i+e),e}},{}]},{},[12]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvanMtY29va2llL3NyYy9qcy5jb29raWUuanMiLCJtYWluLmpzIiwibm9kZV9tb2R1bGVzL3A1LWJib3gtYWxpZ25lZC10ZXh0L2xpYi9iYm94LWFsaWduZWQtdGV4dC5qcyIsIm5vZGVfbW9kdWxlcy9wNS1iYm94LWFsaWduZWQtdGV4dC9saWIvdXRpbHMuanMiLCJzcmMvanMvaG92ZXItc2xpZGVzaG93LmpzIiwic3JjL2pzL2ludGVyYWN0aXZlLWxvZ29zL2Jhc2UtbG9nby1za2V0Y2guanMiLCJzcmMvanMvaW50ZXJhY3RpdmUtbG9nb3MvY29ubmVjdC1wb2ludHMtc2tldGNoLmpzIiwic3JjL2pzL2ludGVyYWN0aXZlLWxvZ29zL2dlbmVyYXRvcnMvbm9pc2UtZ2VuZXJhdG9ycy5qcyIsInNyYy9qcy9pbnRlcmFjdGl2ZS1sb2dvcy9nZW5lcmF0b3JzL3Npbi1nZW5lcmF0b3IuanMiLCJzcmMvanMvaW50ZXJhY3RpdmUtbG9nb3MvaGFsZnRvbmUtZmxhc2hsaWdodC13b3JkLmpzIiwic3JjL2pzL2ludGVyYWN0aXZlLWxvZ29zL25vaXN5LXdvcmQtc2tldGNoLmpzIiwic3JjL2pzL21haW4tbmF2LmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvcGFnZS1sb2FkZXIuanMiLCJzcmMvanMvcGljay1yYW5kb20tc2tldGNoLmpzIiwic3JjL2pzL3BvcnRmb2xpby1maWx0ZXIuanMiLCJzcmMvanMvdGh1bWJuYWlsLXNsaWRlc2hvdy9zbGlkZXNob3ctbW9kYWwuanMiLCJzcmMvanMvdGh1bWJuYWlsLXNsaWRlc2hvdy9zbGlkZXNob3cuanMiLCJzcmMvanMvdGh1bWJuYWlsLXNsaWRlc2hvdy90aHVtYm5haWwtc2xpZGVyLmpzIiwic3JjL2pzL3V0aWxpdGllcy5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiT2xkQ29va2llcyIsIndpbmRvdyIsIkNvb2tpZXMiLCJhcGkiLCJub0NvbmZsaWN0IiwiZXh0ZW5kIiwicmVzdWx0IiwiYXJndW1lbnRzIiwiYXR0cmlidXRlcyIsImtleSIsImluaXQiLCJjb252ZXJ0ZXIiLCJ2YWx1ZSIsImRvY3VtZW50IiwicGF0aCIsImRlZmF1bHRzIiwiZXhwaXJlcyIsIkRhdGUiLCJzZXRNaWxsaXNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJKU09OIiwic3RyaW5naWZ5IiwidGVzdCIsIndyaXRlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiU3RyaW5nIiwicmVwbGFjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVzY2FwZSIsImNvb2tpZSIsInRvVVRDU3RyaW5nIiwiZG9tYWluIiwic2VjdXJlIiwiam9pbiIsImNvb2tpZXMiLCJzcGxpdCIsInJkZWNvZGUiLCJwYXJ0cyIsInNsaWNlIiwiY2hhckF0IiwibmFtZSIsInJlYWQiLCJ0aGlzIiwianNvbiIsInBhcnNlIiwic2V0IiwiZ2V0IiwiZ2V0SlNPTiIsImFwcGx5IiwicmVtb3ZlIiwid2l0aENvbnZlcnRlciIsIjIiLCJCYm94QWxpZ25lZFRleHQiLCJmb250IiwidGV4dCIsImZvbnRTaXplIiwieCIsInkiLCJwSW5zdGFuY2UiLCJfZm9udCIsIl90ZXh0IiwiX3giLCJ1dGlscyIsIl95IiwiX2ZvbnRTaXplIiwiX3AiLCJfcm90YXRpb24iLCJfaEFsaWduIiwiQUxJR04iLCJCT1hfQ0VOVEVSIiwiX3ZBbGlnbiIsIkJBU0VMSU5FIiwiX2NhbGN1bGF0ZU1ldHJpY3MiLCJCT1hfTEVGVCIsIkJPWF9SSUdIVCIsIkJPWF9UT1AiLCJCT1hfQk9UVE9NIiwiRk9OVF9DRU5URVIiLCJBTFBIQUJFVElDIiwicHJvdG90eXBlIiwic2V0VGV4dCIsInN0cmluZyIsInNldFBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJzZXRUZXh0U2l6ZSIsInNldFJvdGF0aW9uIiwiYW5nbGUiLCJnZXRSb3RhdGlvbiIsInNldFBJbnN0YW5jZSIsInAiLCJnZXRQSW5zdGFuY2UiLCJzZXRBbmNob3IiLCJoQWxpZ24iLCJ2QWxpZ24iLCJ1cGRhdGVQb3NpdGlvbiIsIm9sZFBvcyIsIl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzIiwiQ0VOVEVSIiwibmV3UG9zIiwiZ2V0QmJveCIsInBvcyIsIl9ib3VuZHNPZmZzZXQiLCJ3Iiwid2lkdGgiLCJoIiwiaGVpZ2h0IiwiZ2V0VGV4dFBvaW50cyIsIm9wdGlvbnMiLCJwb2ludHMiLCJ0ZXh0VG9Qb2ludHMiLCJkcmF3IiwiZHJhd0JvdW5kcyIsInB1c2giLCJfY2FsY3VsYXRlUm90YXRlZENvb3JkcyIsInJvdGF0ZSIsInRleHRBbGlnbiIsIkxFRlQiLCJ0ZXh0Rm9udCIsInRleHRTaXplIiwic3Ryb2tlIiwiYm91bmRzWCIsImJvdW5kc1kiLCJub0ZpbGwiLCJyZWN0IiwicG9wIiwicngiLCJNYXRoIiwiY29zIiwiUEkiLCJyeSIsInNpbiIsIm5ld1giLCJuZXdZIiwiaGFsZldpZHRoIiwiY29uc29sZSIsImxvZyIsIl9kaXN0QmFzZVRvTWlkIiwiX2Rpc3RCYXNlVG9Cb3R0b20iLCJfZGVzY2VudCIsIl9hc2NlbnQiLCJzaG91bGRVcGRhdGVIZWlnaHQiLCJib3VuZHMiLCJ0ZXh0Qm91bmRzIiwiX3RleHRBc2NlbnQiLCJfdGV4dERlc2NlbnQiLCJoYWxmSGVpZ2h0IiwiYWJzIiwiLi91dGlscy5qcyIsIjMiLCJkZWZhdWx0VmFsdWUiLCJ1bmRlZmluZWQiLCI0IiwiSG92ZXJTbGlkZXNob3dzIiwic2xpZGVzaG93RGVsYXkiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJfc2xpZGVzaG93RGVsYXkiLCJfdHJhbnNpdGlvbkR1cmF0aW9uIiwiX3NsaWRlc2hvd3MiLCJyZWxvYWQiLCJTbGlkZXNob3ciLCIkY29udGFpbmVyIiwiXyRjb250YWluZXIiLCJfdGltZW91dElkIiwiX2ltYWdlSW5kZXgiLCJfJGltYWdlcyIsImZpbmQiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwiJGltYWdlIiwiJCIsImNzcyIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInpJbmRleCIsImJpbmQiLCJfbnVtSW1hZ2VzIiwib24iLCJfb25FbnRlciIsIl9vbkxlYXZlIiwidXRpbGl0aWVzIiwib2xkU2xpZGVzaG93cyIsIl8iLCIkZWxlbWVudCIsIl9maW5kSW5TbGlkZXNob3dzIiwic2xpZGVzaG93Iiwic3BsaWNlIiwic2xpZGVzaG93cyIsImdldEVsZW1lbnQiLCJnZXQkRWxlbWVudCIsInNldFRpbWVvdXQiLCJfYWR2YW5jZVNsaWRlc2hvdyIsImNsZWFySW50ZXJ2YWwiLCJ3cmFwSW5kZXgiLCJvcGFjaXR5IiwidmVsb2NpdHkiLCIuL3V0aWxpdGllcy5qcyIsIjUiLCJCYXNlTG9nb1NrZXRjaCIsIiRuYXYiLCIkbmF2TG9nbyIsImZvbnRQYXRoIiwiXyRuYXYiLCJfJG5hdkxvZ28iLCJfZm9udFBhdGgiLCJfaXNGaXJzdEZyYW1lIiwiX2lzTW91c2VPdmVyIiwiX2lzT3Zlck5hdkxvZ28iLCJfdXBkYXRlVGV4dE9mZnNldCIsIl91cGRhdGVTaXplIiwiX3VwZGF0ZUZvbnRTaXplIiwicHJlcGVuZFRvIiwiaGlkZSIsIl9jcmVhdGVQNUluc3RhbmNlIiwicDUiLCJwcmVsb2FkIiwiX3ByZWxvYWQiLCJzZXR1cCIsIl9zZXR1cCIsIl9kcmF3IiwiYmFzZWxpbmVEaXYiLCJkaXNwbGF5IiwidmVydGljYWxBbGlnbiIsIm5hdk9mZnNldCIsIm9mZnNldCIsImxvZ29CYXNlbGluZU9mZnNldCIsIl90ZXh0T2Zmc2V0IiwiX2NhbGN1bGF0ZU5hdkxvZ29Cb3VuZHMiLCJsb2dvT2Zmc2V0IiwiX2xvZ29CYm94Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiX3dpZHRoIiwiaW5uZXJXaWR0aCIsIl9oZWlnaHQiLCJpbm5lckhlaWdodCIsIl9vblJlc2l6ZSIsInJlc2l6ZUNhbnZhcyIsIl9zZXRNb3VzZU92ZXIiLCJpc01vdXNlT3ZlciIsIl9vbkNsaWNrIiwidHJpZ2dlciIsImxvYWRGb250IiwicmVuZGVyZXIiLCJjcmVhdGVDYW52YXMiLCJfJGNhbnZhcyIsImNhbnZhcyIsInNob3ciLCJpc092ZXJMb2dvIiwiaXNJblJlY3QiLCJtb3VzZVgiLCJtb3VzZVkiLCIuLi91dGlsaXRpZXMuanMiLCI2IiwiU2tldGNoIiwiQmJveFRleHQiLCJTaW5HZW5lcmF0b3IiLCJPYmplY3QiLCJjcmVhdGUiLCJfc3BhY2luZyIsIm1hcCIsImNsYW1wIiwicm91bmQiLCJfYmJveFRleHQiLCJfZHJhd1N0YXRpb25hcnlMb2dvIiwiX3BvaW50cyIsImJhY2tncm91bmQiLCJmaWxsIiwic3Ryb2tlV2VpZ2h0IiwiX3RocmVzaG9sZEdlbmVyYXRvciIsInNldEJvdW5kcyIsImRpc3RhbmNlVGhyZXNob2xkIiwiZ2VuZXJhdGUiLCJwb2ludDEiLCJqIiwicG9pbnQyIiwiZGlzdCIsIm5vU3Ryb2tlIiwiZWxsaXBzZSIsImxpbmUiLCIuL2Jhc2UtbG9nby1za2V0Y2guanMiLCIuL2dlbmVyYXRvcnMvc2luLWdlbmVyYXRvci5qcyIsInA1LWJib3gtYWxpZ25lZC10ZXh0IiwiNyIsIk5vaXNlR2VuZXJhdG9yMUQiLCJtaW4iLCJtYXgiLCJpbmNyZW1lbnQiLCJfbWluIiwiX21heCIsIl9pbmNyZW1lbnQiLCJfcG9zaXRpb24iLCJyYW5kb20iLCJOb2lzZUdlbmVyYXRvcjJEIiwieE1pbiIsInhNYXgiLCJ5TWluIiwieU1heCIsInhJbmNyZW1lbnQiLCJ5SW5jcmVtZW50IiwieE9mZnNldCIsInlPZmZzZXQiLCJfeE5vaXNlIiwiX3lOb2lzZSIsInNldEluY3JlbWVudCIsIl91cGRhdGUiLCJub2lzZSIsIi4uLy4uL3V0aWxpdGllcy5qcyIsIjgiLCJhbmdsZUluY3JlbWVudCIsInN0YXJ0aW5nQW5nbGUiLCJfYW5nbGUiLCI5IiwiX2NhbGN1bGF0ZUNpcmNsZXMiLCJiYm94Iiwic3RhcnRYIiwiZmxvb3IiLCJlbmRYIiwiY2VpbCIsInN0YXJ0WSIsImVuZFkiLCJsb2FkUGl4ZWxzIiwicGl4ZWxEZW5zaXR5IiwiX2NpcmNsZXMiLCJwaXhlbHMiLCJnIiwiYiIsImMiLCJjb2xvciIsInNhdHVyYXRpb24iLCJibGVuZE1vZGUiLCJCTEVORCIsIk1VTFRJUExZIiwibWF4RGlzdCIsIm1heFJhZGl1cyIsImNpcmNsZSIsInJhZGl1cyIsIjEwIiwiTm9pc2UiLCJfdGV4dFBvcyIsIl9yb3RhdGlvbk5vaXNlIiwiX3h5Tm9pc2UiLCJyb3RhdGlvbiIsInh5T2Zmc2V0IiwiLi9nZW5lcmF0b3JzL25vaXNlLWdlbmVyYXRvcnMuanMiLCIxMSIsIk1haW5OYXYiLCJsb2FkZXIiLCJfbG9hZGVyIiwiXyRsb2dvIiwiXyRuYXZMaW5rcyIsIl8kYWN0aXZlTmF2IiwiX29uTmF2Q2xpY2siLCJfb25Mb2dvQ2xpY2siLCJzZXRBY3RpdmVGcm9tVXJsIiwiX2RlYWN0aXZhdGUiLCJ1cmwiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiX2FjdGl2YXRlTGluayIsImZpbHRlciIsInJlbW92ZUNsYXNzIiwiJGxpbmsiLCJhZGRDbGFzcyIsInByZXZlbnREZWZhdWx0IiwiJHRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJhdHRyIiwibG9hZFBhZ2UiLCJjb2xsYXBzZSIsImlzIiwiMTIiLCJvblBvcFN0YXRlIiwic3RhdGUiLCJxdWVyeU9iamVjdCIsInF1ZXJ5IiwiZ2V0TG9hZGVkUGF0aCIsImNhdGVnb3J5IiwicG9ydGZvbGlvRmlsdGVyIiwic2VsZWN0Q2F0ZWdvcnkiLCJvblBhZ2VMb2FkIiwiaG92ZXJTbGlkZXNob3dzIiwiUG9ydGZvbGlvRmlsdGVyIiwib2JqZWN0Rml0SW1hZ2VzIiwic21hcnRxdW90ZXMiLCJtYWluTmF2IiwiTG9hZGVyIiwibmF2IiwibmF2TG9nbyIsImFkZEV2ZW50TGlzdGVuZXIiLCIuL2hvdmVyLXNsaWRlc2hvdy5qcyIsIi4vbWFpbi1uYXYuanMiLCIuL3BhZ2UtbG9hZGVyLmpzIiwiLi9waWNrLXJhbmRvbS1za2V0Y2guanMiLCIuL3BvcnRmb2xpby1maWx0ZXIuanMiLCIuL3RodW1ibmFpbC1zbGlkZXNob3cvc2xpZGVzaG93LmpzIiwiMTMiLCJvblJlbG9hZCIsImZhZGVEdXJhdGlvbiIsIl8kY29udGVudCIsIl9vblJlbG9hZCIsIl9mYWRlRHVyYXRpb24iLCJfcGF0aCIsInNob3VsZFB1c2hIaXN0b3J5Iiwib25Db250ZW50RmV0Y2hlZCIsInJlc3BvbnNlVGV4dCIsInRleHRTdGF0dXMiLCJqcVhociIsInF1ZXJ5U3RyaW5nIiwiY3JlYXRlUXVlcnlTdHJpbmciLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZ2EiLCJlbXB0eSIsImxvYWQiLCIxNCIsImZpbmRVbnNlZW5Ta2V0Y2hlcyIsInNlZW5Ta2V0Y2hOYW1lcyIsInVuc2VlblNrZXRjaE5hbWVzIiwic2tldGNoTmFtZSIsInNrZXRjaENvbnN0cnVjdG9ycyIsImluZGV4T2YiLCJoYWxmdG9uZS1mbGFzaGxpZ2h0Iiwibm9pc3ktd29yZCIsImNvbm5lY3QtcG9pbnRzIiwibnVtU2tldGNoZXMiLCJrZXlzIiwiY29va2llS2V5IiwicmFuZFNrZXRjaE5hbWUiLCJyYW5kQXJyYXlFbGVtZW50IiwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9jb25uZWN0LXBvaW50cy1za2V0Y2guanMiLCIuL2ludGVyYWN0aXZlLWxvZ29zL2hhbGZ0b25lLWZsYXNobGlnaHQtd29yZC5qcyIsIi4vaW50ZXJhY3RpdmUtbG9nb3Mvbm9pc3ktd29yZC1za2V0Y2guanMiLCJqcy1jb29raWUiLCIxNSIsImJyZWFrcG9pbnRzIiwiYXNwZWN0UmF0aW8iLCJfZ3JpZFNwYWNpbmciLCJfYXNwZWN0UmF0aW8iLCJfYnJlYWtwb2ludHMiLCJkZWZhdWx0QnJlYWtwb2ludHMiLCJfJGdyaWQiLCJfJHByb2plY3RzIiwiXyRjYXRlZ29yaWVzIiwiX3Jvd3MiLCJfY29scyIsIl9pbWFnZUhlaWdodCIsIl9pbWFnZVdpZHRoIiwic29ydCIsIl9jYWNoZVByb2plY3RzIiwiX2NyZWF0ZUdyaWQiLCJfb25Qcm9qZWN0Q2xpY2siLCJxcyIsImdldFF1ZXJ5UGFyYW1ldGVycyIsImluaXRpYWxDYXRlZ29yeSIsInRvTG93ZXJDYXNlIiwiXyRhY3RpdmVOYXZJdGVtIiwiX2ZpbHRlclByb2plY3RzIiwiY29scyIsInNwYWNpbmciLCIkc2VsZWN0ZWROYXYiLCIkc2VsZWN0ZWRFbGVtZW50cyIsIl9nZXRQcm9qZWN0c0luQ2F0ZWdvcnkiLCJfYW5pbWF0ZUdyaWRIZWlnaHQiLCJmb3JFYWNoIiwic2VsZWN0ZWRJbmRleCIsIl9pbmRleFRvWFkiLCJudW1FbGVtZW50cyIsImN1clJvd3MiLCJjYXRlZ29yeU5hbWVzIiwiZGF0YSIsInRyaW0iLCJfY2FsY3VsYXRlR3JpZCIsImdyaWRXaWR0aCIsInRhcmdldCIsInByb2plY3ROYW1lIiwiMTYiLCJTbGlkZXNob3dNb2RhbCIsIl9zbGlkZXNob3ciLCJfJG1vZGFsIiwiXyRvdmVybGF5IiwiXyRjYXB0aW9uIiwiXyRpbWFnZUNvbnRhaW5lciIsIl8kaW1hZ2VMZWZ0IiwiXyRpbWFnZVJpZ2h0IiwiX2luZGV4IiwiX2lzT3BlbiIsImFkdmFuY2VMZWZ0IiwiYWR2YW5jZVJpZ2h0IiwiX29uS2V5RG93biIsImNsb3NlIiwiX3VwZGF0ZUNvbnRyb2xzIiwiS0VZX0NPREVTIiwiTEVGVF9BUlJPVyIsIlJJR0hUX0FSUk9XIiwiRVNDQVBFIiwic2hvd0ltYWdlQXQiLCJnZXROdW1JbWFnZXMiLCIkaW1nIiwiZ2V0R2FsbGVyeUltYWdlIiwiY2FwdGlvbiIsImdldENhcHRpb24iLCJzcmMiLCJhcHBlbmRUbyIsIm9wZW4iLCJ3aGljaCIsImNvbnRyb2xzV2lkdGgiLCJjYXB0aW9uSGVpZ2h0IiwibXciLCJtaCIsInNldFNpemUiLCJpdyIsInByb3AiLCJpaCIsInN3Iiwic2giLCJvbmUiLCIxNyIsIl90aHVtYm5haWxTbGlkZXIiLCJUaHVtYm5haWxTbGlkZXIiLCJfbW9kYWwiLCJfJGNhcHRpb25Db250YWluZXIiLCJfJHNlbGVjdGVkSW1hZ2VDb250YWluZXIiLCJfJGdhbGxlcnlJbWFnZXMiLCJfbG9hZEdhbGxlcnlJbWFnZXMiLCJzaG93SW1hZ2UiLCJnZXRBY3RpdmVJbmRleCIsIiRnYWxsZXJ5SW1hZ2UiLCIkbGFzdEltYWdlIiwiJGN1cnJlbnRJbWFnZSIsIiRnYWxsZXJ5SW1hZ2VzIiwiZ2V0TnVtVGh1bWJuYWlscyIsIiR0aHVtYiIsImdldCRUaHVtYm5haWwiLCJsYXJnZVBhdGgiLCJpZCIsIi4vc2xpZGVzaG93LW1vZGFsLmpzIiwiLi90aHVtYm5haWwtc2xpZGVyLmpzIiwiMTgiLCJfc2Nyb2xsSW5kZXgiLCJfJHRodW1ibmFpbENvbnRhaW5lciIsIl8kdGh1bWJuYWlsSW1hZ2VzIiwiXyR2aXNpYmxlVGh1bWJuYWlsV3JhcCIsIl8kYWR2YW5jZUxlZnQiLCJfJGFkdmFuY2VSaWdodCIsIl8kdGh1bWJuYWlscyIsIiR0aHVtYm5haWwiLCJfYWN0aXZhdGVUaHVtYm5haWwiLCJuZXdJbmRleCIsIl9udW1WaXNpYmxlIiwiX3Njcm9sbFRvVGh1bWJuYWlsIiwiX3Jlc2V0U2l6aW5nIiwiJGZpcnN0VGh1bWIiLCJ0aHVtYlNpemUiLCJ0aHVtYk1hcmdpbiIsInRodW1iQ29udHJvbFdpZHRoIiwidmlzaWJsZVdpZHRoIiwibnVtVGh1bWJzVmlzaWJsZSIsIm5ld1NpemUiLCJ0b3RhbFNpemUiLCJtaWRkbGVJbmRleCIsIl9zY3JvbGxCb3VuZHMiLCJfdXBkYXRlVGh1bWJuYWlsQ29udHJvbHMiLCJzaXplIiwicGFyc2VGbG9hdCIsIm1hcmdpbiIsImNlbnRlclgiLCJ0aHVtYlgiLCJtaWRTY3JvbGxJbmRleCIsIjE5IiwidmFsIiwiZGVmYXVsdFZhbCIsInRpbWVJdCIsImZ1bmMiLCJzdGFydCIsInBlcmZvcm1hbmNlIiwibm93IiwiZW5kIiwicmFuZEludCIsImFycmF5IiwibnVtIiwibWluMSIsIm1heDEiLCJtaW4yIiwibWF4MiIsIm1hcHBlZCIsInNlYXJj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QUNBLEdBQUFlLEdBQUFrQixtQkFBQW1qQixFQUFBLElBQ0FuQixFQUFBaGlCLG1CQUFBbWpCLEVBQUEsR0FDQXZOLEdBQUE5VyxHQUFBa2pCLEdBR0EsTUFBQXBNLElBR0EvWCxFQUFBa2Esa0JBQUEsU0FBQW5DLEdBQ0EsR0FBQSxnQkFBQUEsR0FBQSxNQUFBLEVBQ0EsSUFBQW9ELEdBQUF6SyxPQUFBeUssS0FBQXBELEVBQ0EsSUFBQSxJQUFBb0QsRUFBQWpiLE9BQUEsTUFBQSxFQUVBLEtBQUEsR0FEQStaLEdBQUEsSUFDQXRhLEVBQUEsRUFBQUEsRUFBQXdiLEVBQUFqYixPQUFBUCxHQUFBLEVBQUEsQ0FDQSxHQUFBc0IsR0FBQWthLEVBQUF4YixHQUNBd2tCLEVBQUFwTSxFQUFBOVcsRUFDQWdaLElBQUFqWSxtQkFBQWYsR0FBQSxJQUFBZSxtQkFBQW1pQixHQUNBeGtCLElBQUF3YixFQUFBamIsT0FBQSxJQUFBK1osR0FBQSxLQUVBLE1BQUFBLElBR0FqYSxFQUFBME0sVUFBQSxTQUFBM0IsRUFBQTdLLEdBQ0EsR0FBQXFsQixHQUFBeGEsRUFBQTdLLENBS0EsT0FKQSxHQUFBcWxCLElBRUFBLEVBQUFybEIsRUFBQXFsQixHQUVBQSxhbEJnd0VXIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIVxuICogSmF2YVNjcmlwdCBDb29raWUgdjIuMS4yXG4gKiBodHRwczovL2dpdGh1Yi5jb20vanMtY29va2llL2pzLWNvb2tpZVxuICpcbiAqIENvcHlyaWdodCAyMDA2LCAyMDE1IEtsYXVzIEhhcnRsICYgRmFnbmVyIEJyYWNrXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuOyhmdW5jdGlvbiAoZmFjdG9yeSkge1xuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBPbGRDb29raWVzID0gd2luZG93LkNvb2tpZXM7XG5cdFx0dmFyIGFwaSA9IHdpbmRvdy5Db29raWVzID0gZmFjdG9yeSgpO1xuXHRcdGFwaS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0d2luZG93LkNvb2tpZXMgPSBPbGRDb29raWVzO1xuXHRcdFx0cmV0dXJuIGFwaTtcblx0XHR9O1xuXHR9XG59KGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gZXh0ZW5kICgpIHtcblx0XHR2YXIgaSA9IDA7XG5cdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXR0cmlidXRlcyA9IGFyZ3VtZW50c1sgaSBdO1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIGF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0cmVzdWx0W2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0IChjb252ZXJ0ZXIpIHtcblx0XHRmdW5jdGlvbiBhcGkgKGtleSwgdmFsdWUsIGF0dHJpYnV0ZXMpIHtcblx0XHRcdHZhciByZXN1bHQ7XG5cdFx0XHRpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdyaXRlXG5cblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRhdHRyaWJ1dGVzID0gZXh0ZW5kKHtcblx0XHRcdFx0XHRwYXRoOiAnLydcblx0XHRcdFx0fSwgYXBpLmRlZmF1bHRzLCBhdHRyaWJ1dGVzKTtcblxuXHRcdFx0XHRpZiAodHlwZW9mIGF0dHJpYnV0ZXMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHR2YXIgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdFx0ZXhwaXJlcy5zZXRNaWxsaXNlY29uZHMoZXhwaXJlcy5nZXRNaWxsaXNlY29uZHMoKSArIGF0dHJpYnV0ZXMuZXhwaXJlcyAqIDg2NGUrNSk7XG5cdFx0XHRcdFx0YXR0cmlidXRlcy5leHBpcmVzID0gZXhwaXJlcztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHRcdFx0XHRcdGlmICgvXltcXHtcXFtdLy50ZXN0KHJlc3VsdCkpIHtcblx0XHRcdFx0XHRcdHZhbHVlID0gcmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZSkge31cblxuXHRcdFx0XHRpZiAoIWNvbnZlcnRlci53cml0ZSkge1xuXHRcdFx0XHRcdHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh2YWx1ZSkpXG5cdFx0XHRcdFx0XHQucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnwzQXwzQ3wzRXwzRHwyRnwzRnw0MHw1Qnw1RHw1RXw2MHw3Qnw3RHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNvbnZlcnRlci53cml0ZSh2YWx1ZSwga2V5KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoa2V5KSk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDVFfDYwfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvW1xcKFxcKV0vZywgZXNjYXBlKTtcblxuXHRcdFx0XHRyZXR1cm4gKGRvY3VtZW50LmNvb2tpZSA9IFtcblx0XHRcdFx0XHRrZXksICc9JywgdmFsdWUsXG5cdFx0XHRcdFx0YXR0cmlidXRlcy5leHBpcmVzICYmICc7IGV4cGlyZXM9JyArIGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRVxuXHRcdFx0XHRcdGF0dHJpYnV0ZXMucGF0aCAgICAmJiAnOyBwYXRoPScgKyBhdHRyaWJ1dGVzLnBhdGgsXG5cdFx0XHRcdFx0YXR0cmlidXRlcy5kb21haW4gICYmICc7IGRvbWFpbj0nICsgYXR0cmlidXRlcy5kb21haW4sXG5cdFx0XHRcdFx0YXR0cmlidXRlcy5zZWN1cmUgPyAnOyBzZWN1cmUnIDogJydcblx0XHRcdFx0XS5qb2luKCcnKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlYWRcblxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0cmVzdWx0ID0ge307XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcblx0XHRcdC8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLiBBbHNvIHByZXZlbnRzIG9kZCByZXN1bHQgd2hlblxuXHRcdFx0Ly8gY2FsbGluZyBcImdldCgpXCJcblx0XHRcdHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpIDogW107XG5cdFx0XHR2YXIgcmRlY29kZSA9IC8oJVswLTlBLVpdezJ9KSsvZztcblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0Zm9yICg7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcblx0XHRcdFx0dmFyIGNvb2tpZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTtcblxuXHRcdFx0XHRpZiAoY29va2llLmNoYXJBdCgwKSA9PT0gJ1wiJykge1xuXHRcdFx0XHRcdGNvb2tpZSA9IGNvb2tpZS5zbGljZSgxLCAtMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHZhciBuYW1lID0gcGFydHNbMF0ucmVwbGFjZShyZGVjb2RlLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHRcdFx0XHRcdGNvb2tpZSA9IGNvbnZlcnRlci5yZWFkID9cblx0XHRcdFx0XHRcdGNvbnZlcnRlci5yZWFkKGNvb2tpZSwgbmFtZSkgOiBjb252ZXJ0ZXIoY29va2llLCBuYW1lKSB8fFxuXHRcdFx0XHRcdFx0Y29va2llLnJlcGxhY2UocmRlY29kZSwgZGVjb2RlVVJJQ29tcG9uZW50KTtcblxuXHRcdFx0XHRcdGlmICh0aGlzLmpzb24pIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvb2tpZSA9IEpTT04ucGFyc2UoY29va2llKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGtleSA9PT0gbmFtZSkge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gY29va2llO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdFtuYW1lXSA9IGNvb2tpZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0YXBpLnNldCA9IGFwaTtcblx0XHRhcGkuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0cmV0dXJuIGFwaShrZXkpO1xuXHRcdH07XG5cdFx0YXBpLmdldEpTT04gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gYXBpLmFwcGx5KHtcblx0XHRcdFx0anNvbjogdHJ1ZVxuXHRcdFx0fSwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcblx0XHR9O1xuXHRcdGFwaS5kZWZhdWx0cyA9IHt9O1xuXG5cdFx0YXBpLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXksIGF0dHJpYnV0ZXMpIHtcblx0XHRcdGFwaShrZXksICcnLCBleHRlbmQoYXR0cmlidXRlcywge1xuXHRcdFx0XHRleHBpcmVzOiAtMVxuXHRcdFx0fSkpO1xuXHRcdH07XG5cblx0XHRhcGkud2l0aENvbnZlcnRlciA9IGluaXQ7XG5cblx0XHRyZXR1cm4gYXBpO1xuXHR9XG5cblx0cmV0dXJuIGluaXQoZnVuY3Rpb24gKCkge30pO1xufSkpO1xuIiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyohXG4gKiBKYXZhU2NyaXB0IENvb2tpZSB2Mi4xLjJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcy1jb29raWUvanMtY29va2llXG4gKlxuICogQ29weXJpZ2h0IDIwMDYsIDIwMTUgS2xhdXMgSGFydGwgJiBGYWduZXIgQnJhY2tcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG47KGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoZmFjdG9yeSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIE9sZENvb2tpZXMgPSB3aW5kb3cuQ29va2llcztcblx0XHR2YXIgYXBpID0gd2luZG93LkNvb2tpZXMgPSBmYWN0b3J5KCk7XG5cdFx0YXBpLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR3aW5kb3cuQ29va2llcyA9IE9sZENvb2tpZXM7XG5cdFx0XHRyZXR1cm4gYXBpO1xuXHRcdH07XG5cdH1cbn0oZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBleHRlbmQgKCkge1xuXHRcdHZhciBpID0gMDtcblx0XHR2YXIgcmVzdWx0ID0ge307XG5cdFx0Zm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhdHRyaWJ1dGVzID0gYXJndW1lbnRzWyBpIF07XG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gYXR0cmlidXRlcykge1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQgKGNvbnZlcnRlcikge1xuXHRcdGZ1bmN0aW9uIGFwaSAoa2V5LCB2YWx1ZSwgYXR0cmlidXRlcykge1xuXHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV3JpdGVcblxuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdGF0dHJpYnV0ZXMgPSBleHRlbmQoe1xuXHRcdFx0XHRcdHBhdGg6ICcvJ1xuXHRcdFx0XHR9LCBhcGkuZGVmYXVsdHMsIGF0dHJpYnV0ZXMpO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YgYXR0cmlidXRlcy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRcdHZhciBleHBpcmVzID0gbmV3IERhdGUoKTtcblx0XHRcdFx0XHRleHBpcmVzLnNldE1pbGxpc2Vjb25kcyhleHBpcmVzLmdldE1pbGxpc2Vjb25kcygpICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZSs1KTtcblx0XHRcdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgPSBleHBpcmVzO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHRcdFx0aWYgKC9eW1xce1xcW10vLnRlc3QocmVzdWx0KSkge1xuXHRcdFx0XHRcdFx0dmFsdWUgPSByZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXG5cdFx0XHRcdGlmICghY29udmVydGVyLndyaXRlKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSlcblx0XHRcdFx0XHRcdC5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDNBfDNDfDNFfDNEfDJGfDNGfDQwfDVCfDVEfDVFfDYwfDdCfDdEfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhbHVlID0gY29udmVydGVyLndyaXRlKHZhbHVlLCBrZXkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0a2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhrZXkpKTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoLyUoMjN8MjR8MjZ8MkJ8NUV8NjB8N0MpL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9bXFwoXFwpXS9nLCBlc2NhcGUpO1xuXG5cdFx0XHRcdHJldHVybiAoZG9jdW1lbnQuY29va2llID0gW1xuXHRcdFx0XHRcdGtleSwgJz0nLCB2YWx1ZSxcblx0XHRcdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgJiYgJzsgZXhwaXJlcz0nICsgYXR0cmlidXRlcy5leHBpcmVzLnRvVVRDU3RyaW5nKCksIC8vIHVzZSBleHBpcmVzIGF0dHJpYnV0ZSwgbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG5cdFx0XHRcdFx0YXR0cmlidXRlcy5wYXRoICAgICYmICc7IHBhdGg9JyArIGF0dHJpYnV0ZXMucGF0aCxcblx0XHRcdFx0XHRhdHRyaWJ1dGVzLmRvbWFpbiAgJiYgJzsgZG9tYWluPScgKyBhdHRyaWJ1dGVzLmRvbWFpbixcblx0XHRcdFx0XHRhdHRyaWJ1dGVzLnNlY3VyZSA/ICc7IHNlY3VyZScgOiAnJ1xuXHRcdFx0XHRdLmpvaW4oJycpKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVhZFxuXG5cdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHRyZXN1bHQgPSB7fTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheVxuXHRcdFx0Ly8gaW4gY2FzZSB0aGVyZSBhcmUgbm8gY29va2llcyBhdCBhbGwuIEFsc28gcHJldmVudHMgb2RkIHJlc3VsdCB3aGVuXG5cdFx0XHQvLyBjYWxsaW5nIFwiZ2V0KClcIlxuXHRcdFx0dmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJykgOiBbXTtcblx0XHRcdHZhciByZGVjb2RlID0gLyglWzAtOUEtWl17Mn0pKy9nO1xuXHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHRmb3IgKDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHBhcnRzID0gY29va2llc1tpXS5zcGxpdCgnPScpO1xuXHRcdFx0XHR2YXIgY29va2llID0gcGFydHMuc2xpY2UoMSkuam9pbignPScpO1xuXG5cdFx0XHRcdGlmIChjb29raWUuY2hhckF0KDApID09PSAnXCInKSB7XG5cdFx0XHRcdFx0Y29va2llID0gY29va2llLnNsaWNlKDEsIC0xKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0dmFyIG5hbWUgPSBwYXJ0c1swXS5yZXBsYWNlKHJkZWNvZGUsIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdFx0XHRcdFx0Y29va2llID0gY29udmVydGVyLnJlYWQgP1xuXHRcdFx0XHRcdFx0Y29udmVydGVyLnJlYWQoY29va2llLCBuYW1lKSA6IGNvbnZlcnRlcihjb29raWUsIG5hbWUpIHx8XG5cdFx0XHRcdFx0XHRjb29raWUucmVwbGFjZShyZGVjb2RlLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXG5cdFx0XHRcdFx0aWYgKHRoaXMuanNvbikge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29va2llID0gSlNPTi5wYXJzZShjb29raWUpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoa2V5ID09PSBuYW1lKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBjb29raWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHRcdFx0cmVzdWx0W25hbWVdID0gY29va2llO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHRhcGkuc2V0ID0gYXBpO1xuXHRcdGFwaS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRyZXR1cm4gYXBpKGtleSk7XG5cdFx0fTtcblx0XHRhcGkuZ2V0SlNPTiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBhcGkuYXBwbHkoe1xuXHRcdFx0XHRqc29uOiB0cnVlXG5cdFx0XHR9LCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHRcdH07XG5cdFx0YXBpLmRlZmF1bHRzID0ge307XG5cblx0XHRhcGkucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgYXR0cmlidXRlcykge1xuXHRcdFx0YXBpKGtleSwgJycsIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG5cdFx0XHRcdGV4cGlyZXM6IC0xXG5cdFx0XHR9KSk7XG5cdFx0fTtcblxuXHRcdGFwaS53aXRoQ29udmVydGVyID0gaW5pdDtcblxuXHRcdHJldHVybiBhcGk7XG5cdH1cblxuXHRyZXR1cm4gaW5pdChmdW5jdGlvbiAoKSB7fSk7XG59KSk7XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIHV0aWxzID0gcmVxdWlyZShcIi4vdXRpbHMuanNcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJib3hBbGlnbmVkVGV4dDtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IEJib3hBbGlnbmVkVGV4dCBvYmplY3QgLSBhIHRleHQgb2JqZWN0IHRoYXQgY2FuIGJlIGRyYXduIHdpdGhcclxuICogYW5jaG9yIHBvaW50cyBiYXNlZCBvbiBhIHRpZ2h0IGJvdW5kaW5nIGJveCBhcm91bmQgdGhlIHRleHQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge29iamVjdH0gZm9udCAtIHA1LkZvbnQgb2JqZWN0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gU3RyaW5nIHRvIGRpc3BsYXlcclxuICogQHBhcmFtIHtudW1iZXJ9IFtmb250U2l6ZT0xMl0gLSBGb250IHNpemUgdG8gdXNlIGZvciBzdHJpbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PTBdIC0gSW5pdGlhbCB4IGxvY2F0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeT0wXSAtIEluaXRpYWwgeSBsb2NhdGlvblxyXG4gKiBAcGFyYW0ge29iamVjdH0gW3BJbnN0YW5jZT13aW5kb3ddIC0gUmVmZXJlbmNlIHRvIHA1IGluc3RhbmNlLCBsZWF2ZSBibGFuayBpZlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tldGNoIGlzIGdsb2JhbFxyXG4gKiBAZXhhbXBsZVxyXG4gKiB2YXIgZm9udCwgYmJveFRleHQ7XHJcbiAqIGZ1bmN0aW9uIHByZWxvYWQoKSB7XHJcbiAqICAgICBmb250ID0gbG9hZEZvbnQoXCIuL2Fzc2V0cy9SZWd1bGFyLnR0ZlwiKTtcclxuICogfVxyXG4gKiBmdW5jdGlvbiBzZXR1cCgpIHtcclxuICogICAgIGNyZWF0ZUNhbnZhcyg0MDAsIDYwMCk7XHJcbiAqICAgICBiYWNrZ3JvdW5kKDApO1xyXG4gKiAgICAgXHJcbiAqICAgICBiYm94VGV4dCA9IG5ldyBCYm94QWxpZ25lZFRleHQoZm9udCwgXCJIZXkhXCIsIDMwKTsgICAgXHJcbiAqICAgICBiYm94VGV4dC5zZXRSb3RhdGlvbihQSSAvIDQpO1xyXG4gKiAgICAgYmJveFRleHQuc2V0QW5jaG9yKEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfQ0VOVEVSLCBcclxuICogICAgICAgICAgICAgICAgICAgICAgICBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuQk9YX0NFTlRFUik7XHJcbiAqICAgICBcclxuICogICAgIGZpbGwoXCIjMDBBOEVBXCIpO1xyXG4gKiAgICAgbm9TdHJva2UoKTtcclxuICogICAgIGJib3hUZXh0LmRyYXcod2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gQmJveEFsaWduZWRUZXh0KGZvbnQsIHRleHQsIGZvbnRTaXplLCB4LCB5LCBwSW5zdGFuY2UpIHtcclxuICAgIHRoaXMuX2ZvbnQgPSBmb250O1xyXG4gICAgdGhpcy5fdGV4dCA9IHRleHQ7XHJcbiAgICB0aGlzLl94ID0gdXRpbHMuZGVmYXVsdCh4LCAwKTtcclxuICAgIHRoaXMuX3kgPSB1dGlscy5kZWZhdWx0KHksIDApO1xyXG4gICAgdGhpcy5fZm9udFNpemUgPSB1dGlscy5kZWZhdWx0KGZvbnRTaXplLCAxMik7XHJcbiAgICB0aGlzLl9wID0gdXRpbHMuZGVmYXVsdChwSW5zdGFuY2UsIHdpbmRvdyk7XHJcbiAgICB0aGlzLl9yb3RhdGlvbiA9IDA7XHJcbiAgICB0aGlzLl9oQWxpZ24gPSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX0NFTlRFUjtcclxuICAgIHRoaXMuX3ZBbGlnbiA9IEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTWV0cmljcyh0cnVlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZlcnRpY2FsIGFsaWdubWVudCB2YWx1ZXNcclxuICogQHB1YmxpY1xyXG4gKiBAc3RhdGljXHJcbiAqIEByZWFkb25seVxyXG4gKiBAZW51bSB7c3RyaW5nfVxyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LkFMSUdOID0ge1xyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgbGVmdCBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX0xFRlQ6IFwiYm94X2xlZnRcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIGNlbnRlciBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX0NFTlRFUjogXCJib3hfY2VudGVyXCIsXHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSByaWdodCBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX1JJR0hUOiBcImJveF9yaWdodFwiXHJcbn07XHJcblxyXG4vKipcclxuICogQmFzZWxpbmUgYWxpZ25tZW50IHZhbHVlc1xyXG4gKiBAcHVibGljXHJcbiAqIEBzdGF0aWNcclxuICogQHJlYWRvbmx5XHJcbiAqIEBlbnVtIHtzdHJpbmd9XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQuQkFTRUxJTkUgPSB7XHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSB0b3Agb2YgdGhlIGJib3ggKi9cclxuICAgIEJPWF9UT1A6IFwiYm94X3RvcFwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfQ0VOVEVSOiBcImJveF9jZW50ZXJcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX0JPVFRPTTogXCJib3hfYm90dG9tXCIsXHJcbiAgICAvKiogXHJcbiAgICAgKiBEcmF3IGZyb20gaGFsZiB0aGUgaGVpZ2h0IG9mIHRoZSBmb250LiBTcGVjaWZpY2FsbHkgdGhlIGhlaWdodCBpc1xyXG4gICAgICogY2FsY3VsYXRlZCBhczogYXNjZW50ICsgZGVzY2VudC5cclxuICAgICAqL1xyXG4gICAgRk9OVF9DRU5URVI6IFwiZm9udF9jZW50ZXJcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIHRoZSBub3JtYWwgZm9udCBiYXNlbGluZSAqL1xyXG4gICAgQUxQSEFCRVRJQzogXCJhbHBoYWJldGljXCJcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgY3VycmVudCB0ZXh0XHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyAtIFRleHQgc3RyaW5nIHRvIGRpc3BsYXlcclxuICogQHJldHVybnMge3RoaXN9IFVzZWZ1bCBmb3IgY2hhaW5pbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uKHN0cmluZykge1xyXG4gICAgdGhpcy5fdGV4dCA9IHN0cmluZztcclxuICAgIHRoaXMuX2NhbGN1bGF0ZU1ldHJpY3MoZmFsc2UpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IHRoZSB0ZXh0IHBvc2l0aW9uXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBYIHBvc2l0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gWSBwb3NpdGlvblxyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIHRoaXMuX3ggPSB1dGlscy5kZWZhdWx0KHgsIHRoaXMuX3gpO1xyXG4gICAgdGhpcy5feSA9IHV0aWxzLmRlZmF1bHQoeSwgdGhpcy5feSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHRleHQgcG9zaXRpb25cclxuICogQHB1YmxpY1xyXG4gKiBAcmV0dXJuIHtvYmplY3R9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggcHJvcGVydGllczogeCwgeVxyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB0aGlzLl94LFxyXG4gICAgICAgIHk6IHRoaXMuX3lcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IGN1cnJlbnQgdGV4dCBzaXplXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IGZvbnRTaXplIFRleHQgc2l6ZVxyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRUZXh0U2l6ZSA9IGZ1bmN0aW9uKGZvbnRTaXplKSB7XHJcbiAgICB0aGlzLl9mb250U2l6ZSA9IGZvbnRTaXplO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTWV0cmljcyh0cnVlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCByb3RhdGlvbiBvZiB0ZXh0XHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIC0gUm90YXRpb24gaW4gcmFkaWFuc1xyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKGFuZ2xlKSB7XHJcbiAgICB0aGlzLl9yb3RhdGlvbiA9IHV0aWxzLmRlZmF1bHQoYW5nbGUsIHRoaXMuX3JvdGF0aW9uKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCByb3RhdGlvbiBvZiB0ZXh0XHJcbiAqIEBwdWJsaWNcclxuICogQHJldHVybnMge251bWJlcn0gUm90YXRpb24gaW4gcmFkaWFuc1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5nZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKGFuZ2xlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcm90YXRpb247XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBwIGluc3RhbmNlIHRoYXQgaXMgdXNlZCBmb3IgZHJhd2luZ1xyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBwIC0gSW5zdGFuY2Ugb2YgcDUgZm9yIGRyYXdpbmcuIFRoaXMgaXMgb25seSBuZWVkZWQgd2hlbiBcclxuICogICAgICAgICAgICAgICAgICAgICB1c2luZyBhbiBvZmZzY3JlZW4gcmVuZGVyZXIgb3Igd2hlbiB1c2luZyBwNSBpbiBpbnN0YW5jZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgIG1vZGUuXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFBJbnN0YW5jZSA9IGZ1bmN0aW9uKHApIHtcclxuICAgIHRoaXMuX3AgPSB1dGlscy5kZWZhdWx0KHAsIHRoaXMuX3ApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IHJvdGF0aW9uIG9mIHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBJbnN0YW5jZSBvZiBwNSB0aGF0IGlzIGJlaW5nIHVzZWQgZm9yIGRyYXdpbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZ2V0UEluc3RhbmNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgYW5jaG9yIHBvaW50IGZvciB0ZXh0IChob3Jpem9uYWwgYW5kIHZlcnRpY2FsIGFsaWdubWVudCkgcmVsYXRpdmUgdG9cclxuICogYm91bmRpbmcgYm94XHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtzdHJpbmd9IFtoQWxpZ249Q0VOVEVSXSAtIEhvcml6b25hbCBhbGlnbm1lbnRcclxuICogQHBhcmFtIHtzdHJpbmd9IFt2QWxpZ249Q0VOVEVSXSAtIFZlcnRpY2FsIGJhc2VsaW5lXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VwZGF0ZVBvc2l0aW9uPWZhbHNlXSAtIElmIHNldCB0byB0cnVlLCB0aGUgcG9zaXRpb24gb2YgdGhlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSB0ZXh0IHdpbGwgYmUgc2hpZnRlZCBzbyB0aGF0XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSB0ZXh0IHdpbGwgYmUgZHJhd24gaW4gdGhlIHNhbWVcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2UgaXQgd2FzIGJlZm9yZSBjYWxsaW5nIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBbmNob3IuXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldEFuY2hvciA9IGZ1bmN0aW9uKGhBbGlnbiwgdkFsaWduLCB1cGRhdGVQb3NpdGlvbikge1xyXG4gICAgdmFyIG9sZFBvcyA9IHRoaXMuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHModGhpcy5feCwgdGhpcy5feSk7XHJcbiAgICB0aGlzLl9oQWxpZ24gPSB1dGlscy5kZWZhdWx0KGhBbGlnbiwgQmJveEFsaWduZWRUZXh0LkFMSUdOLkNFTlRFUik7XHJcbiAgICB0aGlzLl92QWxpZ24gPSB1dGlscy5kZWZhdWx0KHZBbGlnbiwgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkNFTlRFUik7XHJcbiAgICBpZiAodXBkYXRlUG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyh0aGlzLl94LCB0aGlzLl95KTtcclxuICAgICAgICB0aGlzLl94ICs9IG9sZFBvcy54IC0gbmV3UG9zLng7XHJcbiAgICAgICAgdGhpcy5feSArPSBvbGRQb3MueSAtIG5ld1Bvcy55O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBib3VuZGluZyBib3ggd2hlbiB0aGUgdGV4dCBpcyBwbGFjZWQgYXQgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcy5cclxuICogTm90ZTogdGhpcyBpcyB0aGUgdW5yb3RhdGVkIGJvdW5kaW5nIGJveCEgVE9ETzogRml4IHRoaXMuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeD1jdXJyZW50IHhdIC0gQSBuZXcgeCBjb29yZGluYXRlIG9mIHRleHQgYW5jaG9yLiBUaGlzXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbCBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1hbmVudGx5LiBcclxuICogQHBhcmFtIHtudW1iZXJ9IFt5PWN1cnJlbnQgeV0gLSBBIG5ldyB5IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWFuZW50bHkuXHJcbiAqIEByZXR1cm4ge29iamVjdH0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzOiB4LCB5LCB3LCBoXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldEJib3ggPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgdmFyIHBvcyA9IHRoaXMuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHModGhpcy5feCwgdGhpcy5feSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IHBvcy54ICsgdGhpcy5fYm91bmRzT2Zmc2V0LngsXHJcbiAgICAgICAgeTogcG9zLnkgKyB0aGlzLl9ib3VuZHNPZmZzZXQueSxcclxuICAgICAgICB3OiB0aGlzLndpZHRoLFxyXG4gICAgICAgIGg6IHRoaXMuaGVpZ2h0XHJcbiAgICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCBhbiBhcnJheSBvZiBwb2ludHMgdGhhdCBmb2xsb3cgYWxvbmcgdGhlIHRleHQgcGF0aC4gVGhpcyB3aWxsIHRha2UgaW50b1xyXG4gKiBjb25zaWRlcmF0aW9uIHRoZSBjdXJyZW50IGFsaWdubWVudCBzZXR0aW5ncy5cclxuICogTm90ZTogdGhpcyBpcyBhIHRoaW4gd3JhcHBlciBhcm91bmQgYSBwNSBtZXRob2QgYW5kIGRvZXNuJ3QgaGFuZGxlIHVucm90YXRlZFxyXG4gKiB0ZXh0ISBUT0RPOiBGaXggdGhpcy5cclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PWN1cnJlbnQgeF0gLSBBIG5ldyB4IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWFuZW50bHkuIFxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3k9Y3VycmVudCB5XSAtIEEgbmV3IHkgY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtYW5lbnRseS5cclxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIEFuIG9iamVjdCB0aGF0IGNhbiBoYXZlOlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIHNhbXBsZUZhY3RvcjogcmF0aW8gb2YgcGF0aC1sZW5ndGggdG8gbnVtYmVyXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Ygc2FtcGxlcyAoZGVmYXVsdD0wLjI1KS4gSGlnaGVyIHZhbHVlcyBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBtb3JlcG9pbnRzIGFuZCBhcmUgdGhlcmVmb3JlIG1vcmUgXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzZS4gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gc2ltcGxpZnlUaHJlc2hvbGQ6IGlmIHNldCB0byBhIG5vbi16ZXJvIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLCBjb2xsaW5lYXIgcG9pbnRzIHdpbGwgYmUgcmVtb3ZlZC4gVGhlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgcmVwcmVzZW50cyB0aGUgdGhyZXNob2xkIGFuZ2xlIHRvIHVzZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gZGV0ZXJtaW5pbmcgd2hldGhlciB0d28gZWRnZXMgYXJlIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpbmVhci5cclxuICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIHBvaW50cywgZWFjaCB3aXRoIHgsIHkgJiBhbHBoYSAodGhlIHBhdGggYW5nbGUpXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldFRleHRQb2ludHMgPSBmdW5jdGlvbih4LCB5LCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgdmFyIHBvaW50cyA9IHRoaXMuX2ZvbnQudGV4dFRvUG9pbnRzKHRoaXMuX3RleHQsIHRoaXMuX3gsIHRoaXMuX3ksIFxyXG4gICAgICAgIHRoaXMuX2ZvbnRTaXplLCBvcHRpb25zKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHMocG9pbnRzW2ldLngsIHBvaW50c1tpXS55KTtcclxuICAgICAgICBwb2ludHNbaV0ueCA9IHBvcy54O1xyXG4gICAgICAgIHBvaW50c1tpXS55ID0gcG9zLnk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9pbnRzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIERyYXdzIHRoZSB0ZXh0IHBhcnRpY2xlIHdpdGggdGhlIHNwZWNpZmllZCBzdHlsZSBwYXJhbWV0ZXJzLiBOb3RlOiB0aGlzIGlzXHJcbiAqIGdvaW5nIHRvIHNldCB0aGUgdGV4dEZvbnQsIHRleHRTaXplICYgcm90YXRpb24gYmVmb3JlIGRyYXdpbmcuIFlvdSBzaG91bGQgc2V0XHJcbiAqIHRoZSBjb2xvci9zdHJva2UvZmlsbCB0aGF0IHlvdSB3YW50IGJlZm9yZSBkcmF3aW5nLiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xlYW5cclxuICogdXAgYWZ0ZXIgaXRzZWxmIGFuZCByZXNldCBzdHlsaW5nIGJhY2sgdG8gd2hhdCBpdCB3YXMgYmVmb3JlIGl0IHdhcyBjYWxsZWQuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PWN1cnJlbnQgeF0gLSBBIG5ldyB4IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXMgd2lsbFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBwZXJtYW5lbnRseS4gXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeT1jdXJyZW50IHldIC0gQSBuZXcgeSBjb29yZGluYXRlIG9mIHRleHQgYW5jaG9yLiBUaGlzIHdpbGxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIHBlcm1hbmVudGx5LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtkcmF3Qm91bmRzPWZhbHNlXSAtIEZsYWcgZm9yIGRyYXdpbmcgYm91bmRpbmcgYm94XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbih4LCB5LCBkcmF3Qm91bmRzKSB7XHJcbiAgICBkcmF3Qm91bmRzID0gdXRpbHMuZGVmYXVsdChkcmF3Qm91bmRzLCBmYWxzZSk7XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgdmFyIHBvcyA9IHtcclxuICAgICAgICB4OiB0aGlzLl94LCBcclxuICAgICAgICB5OiB0aGlzLl95XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuX3AucHVzaCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcm90YXRpb24pIHtcclxuICAgICAgICAgICAgcG9zID0gdGhpcy5fY2FsY3VsYXRlUm90YXRlZENvb3Jkcyhwb3MueCwgcG9zLnksIHRoaXMuX3JvdGF0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5fcC5yb3RhdGUodGhpcy5fcm90YXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyhwb3MueCwgcG9zLnkpO1xyXG5cclxuICAgICAgICB0aGlzLl9wLnRleHRBbGlnbih0aGlzLl9wLkxFRlQsIHRoaXMuX3AuQkFTRUxJTkUpO1xyXG4gICAgICAgIHRoaXMuX3AudGV4dEZvbnQodGhpcy5fZm9udCk7XHJcbiAgICAgICAgdGhpcy5fcC50ZXh0U2l6ZSh0aGlzLl9mb250U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fcC50ZXh0KHRoaXMuX3RleHQsIHBvcy54LCBwb3MueSk7XHJcblxyXG4gICAgICAgIGlmIChkcmF3Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Auc3Ryb2tlKDIwMCk7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHNYID0gcG9zLnggKyB0aGlzLl9ib3VuZHNPZmZzZXQueDtcclxuICAgICAgICAgICAgdmFyIGJvdW5kc1kgPSBwb3MueSArIHRoaXMuX2JvdW5kc09mZnNldC55O1xyXG4gICAgICAgICAgICB0aGlzLl9wLm5vRmlsbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9wLnJlY3QoYm91bmRzWCwgYm91bmRzWSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICB0aGlzLl9wLnBvcCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFByb2plY3QgdGhlIGNvb3JkaW5hdGVzICh4LCB5KSBpbnRvIGEgcm90YXRlZCBjb29yZGluYXRlIHN5c3RlbVxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggY29vcmRpbmF0ZSAoaW4gdW5yb3RhdGVkIHNwYWNlKVxyXG4gKiBAcGFyYW0ge251bWJlcn0geSAtIFkgY29vcmRpbmF0ZSAoaW4gdW5yb3RhdGVkIHNwYWNlKVxyXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBSYWRpYW5zIG9mIHJvdGF0aW9uIHRvIGFwcGx5XHJcbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggeCAmIHkgcHJvcGVydGllc1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5fY2FsY3VsYXRlUm90YXRlZENvb3JkcyA9IGZ1bmN0aW9uICh4LCB5LCBhbmdsZSkgeyAgXHJcbiAgICB2YXIgcnggPSBNYXRoLmNvcyhhbmdsZSkgKiB4ICsgTWF0aC5jb3MoTWF0aC5QSSAvIDIgLSBhbmdsZSkgKiB5O1xyXG4gICAgdmFyIHJ5ID0gLU1hdGguc2luKGFuZ2xlKSAqIHggKyBNYXRoLnNpbihNYXRoLlBJIC8gMiAtIGFuZ2xlKSAqIHk7XHJcbiAgICByZXR1cm4ge3g6IHJ4LCB5OiByeX07XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBkcmF3IGNvb3JkaW5hdGVzIGZvciB0aGUgdGV4dCwgYWxpZ25pbmcgYmFzZWQgb24gdGhlIGJvdW5kaW5nIGJveC5cclxuICogVGhlIHRleHQgaXMgZXZlbnR1YWxseSBkcmF3biB3aXRoIGNhbnZhcyBhbGlnbm1lbnQgc2V0IHRvIGxlZnQgJiBiYXNlbGluZSwgc29cclxuICogdGhpcyBmdW5jdGlvbiB0YWtlcyBhIGRlc2lyZWQgcG9zICYgYWxpZ25tZW50IGFuZCByZXR1cm5zIHRoZSBhcHByb3ByaWF0ZVxyXG4gKiBjb29yZGluYXRlcyBmb3IgdGhlIGxlZnQgJiBiYXNlbGluZS5cclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBYIGNvb3JkaW5hdGVcclxuICogQHBhcmFtIHtudW1iZXJ9IHkgLSBZIGNvb3JkaW5hdGVcclxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCB4ICYgeSBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgdmFyIG5ld1gsIG5ld1k7XHJcbiAgICBzd2l0Y2ggKHRoaXMuX2hBbGlnbikge1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkFMSUdOLkJPWF9MRUZUOlxyXG4gICAgICAgICAgICBuZXdYID0geDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX0NFTlRFUjpcclxuICAgICAgICAgICAgbmV3WCA9IHggLSB0aGlzLmhhbGZXaWR0aDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX1JJR0hUOlxyXG4gICAgICAgICAgICBuZXdYID0geCAtIHRoaXMud2lkdGg7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIG5ld1ggPSB4O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVucmVjb2duaXplZCBob3Jpem9uYWwgYWxpZ246XCIsIHRoaXMuX2hBbGlnbik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoICh0aGlzLl92QWxpZ24pIHtcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfVE9QOlxyXG4gICAgICAgICAgICBuZXdZID0geSAtIHRoaXMuX2JvdW5kc09mZnNldC55O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSOlxyXG4gICAgICAgICAgICBuZXdZID0geSArIHRoaXMuX2Rpc3RCYXNlVG9NaWQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9CT1RUT006XHJcbiAgICAgICAgICAgIG5ld1kgPSB5IC0gdGhpcy5fZGlzdEJhc2VUb0JvdHRvbTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuRk9OVF9DRU5URVI6XHJcbiAgICAgICAgICAgIC8vIEhlaWdodCBpcyBhcHByb3hpbWF0ZWQgYXMgYXNjZW50ICsgZGVzY2VudFxyXG4gICAgICAgICAgICBuZXdZID0geSAtIHRoaXMuX2Rlc2NlbnQgKyAodGhpcy5fYXNjZW50ICsgdGhpcy5fZGVzY2VudCkgLyAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5BTFBIQUJFVElDOlxyXG4gICAgICAgICAgICBuZXdZID0geTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgbmV3WSA9IHk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5yZWNvZ25pemVkIHZlcnRpY2FsIGFsaWduOlwiLCB0aGlzLl92QWxpZ24pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiB7eDogbmV3WCwgeTogbmV3WX07XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgYm91bmRpbmcgYm94IGFuZCB2YXJpb3VzIG1ldHJpY3MgZm9yIHRoZSBjdXJyZW50IHRleHQgYW5kIGZvbnRcclxuICogQHByaXZhdGVcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuX2NhbGN1bGF0ZU1ldHJpY3MgPSBmdW5jdGlvbihzaG91bGRVcGRhdGVIZWlnaHQpIHsgIFxyXG4gICAgLy8gcDUgMC41LjAgaGFzIGEgYnVnIC0gdGV4dCBib3VuZHMgYXJlIGNsaXBwZWQgYnkgKDAsIDApXHJcbiAgICAvLyBDYWxjdWxhdGluZyBib3VuZHMgaGFja1xyXG4gICAgdmFyIGJvdW5kcyA9IHRoaXMuX2ZvbnQudGV4dEJvdW5kcyh0aGlzLl90ZXh0LCAxMDAwLCAxMDAwLCB0aGlzLl9mb250U2l6ZSk7XHJcbiAgICAvLyBCb3VuZHMgaXMgYSByZWZlcmVuY2UgLSBpZiB3ZSBtZXNzIHdpdGggaXQgZGlyZWN0bHksIHdlIGNhbiBtZXNzIHVwIFxyXG4gICAgLy8gZnV0dXJlIHZhbHVlcyEgKEl0IGNoYW5nZXMgdGhlIGJib3ggY2FjaGUgaW4gcDUuKVxyXG4gICAgYm91bmRzID0geyBcclxuICAgICAgICB4OiBib3VuZHMueCAtIDEwMDAsIFxyXG4gICAgICAgIHk6IGJvdW5kcy55IC0gMTAwMCwgXHJcbiAgICAgICAgdzogYm91bmRzLncsIFxyXG4gICAgICAgIGg6IGJvdW5kcy5oIFxyXG4gICAgfTsgXHJcblxyXG4gICAgaWYgKHNob3VsZFVwZGF0ZUhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuX2FzY2VudCA9IHRoaXMuX2ZvbnQuX3RleHRBc2NlbnQodGhpcy5fZm9udFNpemUpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NlbnQgPSB0aGlzLl9mb250Ll90ZXh0RGVzY2VudCh0aGlzLl9mb250U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNlIGJvdW5kcyB0byBjYWxjdWxhdGUgZm9udCBtZXRyaWNzXHJcbiAgICB0aGlzLndpZHRoID0gYm91bmRzLnc7XHJcbiAgICB0aGlzLmhlaWdodCA9IGJvdW5kcy5oO1xyXG4gICAgdGhpcy5oYWxmV2lkdGggPSB0aGlzLndpZHRoIC8gMjtcclxuICAgIHRoaXMuaGFsZkhlaWdodCA9IHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgIHRoaXMuX2JvdW5kc09mZnNldCA9IHsgeDogYm91bmRzLngsIHk6IGJvdW5kcy55IH07XHJcbiAgICB0aGlzLl9kaXN0QmFzZVRvTWlkID0gTWF0aC5hYnMoYm91bmRzLnkpIC0gdGhpcy5oYWxmSGVpZ2h0O1xyXG4gICAgdGhpcy5fZGlzdEJhc2VUb0JvdHRvbSA9IHRoaXMuaGVpZ2h0IC0gTWF0aC5hYnMoYm91bmRzLnkpO1xyXG59O1xufSx7XCIuL3V0aWxzLmpzXCI6M31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24odmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgcmV0dXJuICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSA/IHZhbHVlIDogZGVmYXVsdFZhbHVlO1xyXG59O1xufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IEhvdmVyU2xpZGVzaG93cztcclxuXHJcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKFwiLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG5mdW5jdGlvbiBIb3ZlclNsaWRlc2hvd3Moc2xpZGVzaG93RGVsYXksIHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgdGhpcy5fc2xpZGVzaG93RGVsYXkgPSAoc2xpZGVzaG93RGVsYXkgIT09IHVuZGVmaW5lZCkgPyBzbGlkZXNob3dEZWxheSA6IFxyXG4gICAgICAgIDIwMDA7XHJcbiAgICB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24gPSAodHJhbnNpdGlvbkR1cmF0aW9uICE9PSB1bmRlZmluZWQpID8gXHJcbiAgICAgICAgX3RyYW5zaXRpb25EdXJhdGlvbiA6IDEwMDA7ICAgXHJcblxyXG4gICAgdGhpcy5fc2xpZGVzaG93cyA9IFtdO1xyXG4gICAgdGhpcy5yZWxvYWQoKTtcclxufVxyXG5cclxuSG92ZXJTbGlkZXNob3dzLnByb3RvdHlwZS5yZWxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBOb3RlOiB0aGlzIGlzIGN1cnJlbnRseSBub3QgcmVhbGx5IGJlaW5nIHVzZWQuIFdoZW4gYSBwYWdlIGlzIGxvYWRlZCxcclxuICAgIC8vIG1haW4uanMgaXMganVzdCByZS1pbnN0YW5jaW5nIHRoZSBIb3ZlclNsaWRlc2hvd3NcclxuICAgIHZhciBvbGRTbGlkZXNob3dzID0gdGhpcy5fc2xpZGVzaG93cyB8fCBbXTtcclxuICAgIHRoaXMuX3NsaWRlc2hvd3MgPSBbXTtcclxuICAgICQoXCIuaG92ZXItc2xpZGVzaG93XCIpLmVhY2goZnVuY3Rpb24gKF8sIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmRJblNsaWRlc2hvd3MoZWxlbWVudCwgb2xkU2xpZGVzaG93cyk7XHJcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzaG93ID0gb2xkU2xpZGVzaG93cy5zcGxpY2UoaW5kZXgsIDEpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9zbGlkZXNob3dzLnB1c2goc2xpZGVzaG93KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zbGlkZXNob3dzLnB1c2gobmV3IFNsaWRlc2hvdygkZWxlbWVudCwgdGhpcy5fc2xpZGVzaG93RGVsYXksXHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuSG92ZXJTbGlkZXNob3dzLnByb3RvdHlwZS5fZmluZEluU2xpZGVzaG93cyA9IGZ1bmN0aW9uIChlbGVtZW50LCBzbGlkZXNob3dzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWRlc2hvd3MubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCA9PT0gc2xpZGVzaG93c1tpXS5nZXRFbGVtZW50KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIC0xO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gU2xpZGVzaG93KCRjb250YWluZXIsIHNsaWRlc2hvd0RlbGF5LCB0cmFuc2l0aW9uRHVyYXRpb24pIHtcclxuICAgIHRoaXMuXyRjb250YWluZXIgPSAkY29udGFpbmVyO1xyXG4gICAgdGhpcy5fc2xpZGVzaG93RGVsYXkgPSBzbGlkZXNob3dEZWxheTtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbjtcclxuICAgIHRoaXMuX3RpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0aGlzLl9pbWFnZUluZGV4ID0gMDtcclxuICAgIHRoaXMuXyRpbWFnZXMgPSBbXTtcclxuXHJcbiAgICAvLyBTZXQgdXAgYW5kIGNhY2hlIHJlZmVyZW5jZXMgdG8gaW1hZ2VzXHJcbiAgICB0aGlzLl8kY29udGFpbmVyLmZpbmQoXCJpbWdcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJGltYWdlID0gJChlbGVtZW50KTtcclxuICAgICAgICAkaW1hZ2UuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgdG9wOiBcIjBcIixcclxuICAgICAgICAgICAgbGVmdDogXCIwXCIsXHJcbiAgICAgICAgICAgIHpJbmRleDogKGluZGV4ID09PSAwKSA/IDIgOiAwIC8vIEZpcnN0IGltYWdlIHNob3VsZCBiZSBvbiB0b3BcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzLnB1c2goJGltYWdlKTtcclxuICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gYmluZCBpbnRlcmFjdGl2aXR5XHJcbiAgICB0aGlzLl9udW1JbWFnZXMgPSB0aGlzLl8kaW1hZ2VzLmxlbmd0aDtcclxuICAgIGlmICh0aGlzLl9udW1JbWFnZXMgPD0gMSkgcmV0dXJuO1xyXG5cclxuICAgIC8vIEJpbmQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl8kY29udGFpbmVyLm9uKFwibW91c2VlbnRlclwiLCB0aGlzLl9vbkVudGVyLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJGNvbnRhaW5lci5vbihcIm1vdXNlbGVhdmVcIiwgdGhpcy5fb25MZWF2ZS5iaW5kKHRoaXMpKTtcclxuXHJcbn1cclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl8kY29udGFpbmVyLmdldCgwKTtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0JEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJGNvbnRhaW5lcjtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuX29uRW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBGaXJzdCB0cmFuc2l0aW9uIHNob3VsZCBoYXBwZW4gcHJldHR5IHNvb24gYWZ0ZXIgaG92ZXJpbmcgaW4gb3JkZXJcclxuICAgIC8vIHRvIGNsdWUgdGhlIHVzZXIgaW50byB3aGF0IGlzIGhhcHBlbmluZ1xyXG4gICAgdGhpcy5fdGltZW91dElkID0gc2V0VGltZW91dCh0aGlzLl9hZHZhbmNlU2xpZGVzaG93LmJpbmQodGhpcyksIDUwMCk7XHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLl9vbkxlYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lb3V0SWQpOyAgXHJcbiAgICB0aGlzLl90aW1lb3V0SWQgPSBudWxsOyAgICAgIFxyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5fYWR2YW5jZVNsaWRlc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2ltYWdlSW5kZXggKz0gMTtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIC8vIE1vdmUgdGhlIGltYWdlIGZyb20gMiBzdGVwcyBhZ28gZG93biB0byB0aGUgYm90dG9tIHotaW5kZXggYW5kIG1ha2VcclxuICAgIC8vIGl0IGludmlzaWJsZVxyXG4gICAgaWYgKHRoaXMuX251bUltYWdlcyA+PSAzKSB7XHJcbiAgICAgICAgaSA9IHV0aWxpdGllcy53cmFwSW5kZXgodGhpcy5faW1hZ2VJbmRleCAtIDIsIHRoaXMuX251bUltYWdlcyk7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlc1tpXS5jc3Moe1xyXG4gICAgICAgICAgICB6SW5kZXg6IDAsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzW2ldLnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZlIHRoZSBpbWFnZSBmcm9tIDEgc3RlcHMgYWdvIGRvd24gdG8gdGhlIG1pZGRsZSB6LWluZGV4IGFuZCBtYWtlXHJcbiAgICAvLyBpdCBjb21wbGV0ZWx5IHZpc2libGVcclxuICAgIGlmICh0aGlzLl9udW1JbWFnZXMgPj0gMikge1xyXG4gICAgICAgIGkgPSB1dGlsaXRpZXMud3JhcEluZGV4KHRoaXMuX2ltYWdlSW5kZXggLSAxLCB0aGlzLl9udW1JbWFnZXMpO1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZXNbaV0uY3NzKHtcclxuICAgICAgICAgICAgekluZGV4OiAxLFxyXG4gICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlc1tpXS52ZWxvY2l0eShcInN0b3BcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW92ZSB0aGUgY3VycmVudCBpbWFnZSB0byB0aGUgdG9wIHotaW5kZXggYW5kIGZhZGUgaXQgaW5cclxuICAgIHRoaXMuX2ltYWdlSW5kZXggPSB1dGlsaXRpZXMud3JhcEluZGV4KHRoaXMuX2ltYWdlSW5kZXgsIHRoaXMuX251bUltYWdlcyk7XHJcbiAgICB0aGlzLl8kaW1hZ2VzW3RoaXMuX2ltYWdlSW5kZXhdLmNzcyh7XHJcbiAgICAgICAgekluZGV4OiAyLFxyXG4gICAgICAgIG9wYWNpdHk6IDBcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fJGltYWdlc1t0aGlzLl9pbWFnZUluZGV4XS52ZWxvY2l0eSh7XHJcbiAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgfSwgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uLCBcImVhc2VJbk91dFF1YWRcIik7XHJcblxyXG4gICAgLy8gU2NoZWR1bGUgbmV4dCB0cmFuc2l0aW9uXHJcbiAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX2FkdmFuY2VTbGlkZXNob3cuYmluZCh0aGlzKSwgXHJcbiAgICAgICAgdGhpcy5fc2xpZGVzaG93RGVsYXkpO1xyXG59O1xufSx7XCIuL3V0aWxpdGllcy5qc1wiOjE5fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IEJhc2VMb2dvU2tldGNoO1xyXG5cclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4uL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbmZ1bmN0aW9uIEJhc2VMb2dvU2tldGNoKCRuYXYsICRuYXZMb2dvLCBmb250UGF0aCkge1xyXG4gICAgdGhpcy5fJG5hdiA9ICRuYXY7XHJcbiAgICB0aGlzLl8kbmF2TG9nbyA9ICRuYXZMb2dvO1xyXG4gICAgdGhpcy5fZm9udFBhdGggPSBmb250UGF0aDtcclxuXHJcbiAgICB0aGlzLl90ZXh0ID0gdGhpcy5fJG5hdkxvZ28udGV4dCgpO1xyXG4gICAgdGhpcy5faXNGaXJzdEZyYW1lID0gdHJ1ZTtcclxuICAgIHRoaXMuX2lzTW91c2VPdmVyID0gZmFsc2U7XHJcbiAgICB0aGlzLl9pc092ZXJOYXZMb2dvID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5fdXBkYXRlVGV4dE9mZnNldCgpO1xyXG4gICAgdGhpcy5fdXBkYXRlU2l6ZSgpO1xyXG4gICAgdGhpcy5fdXBkYXRlRm9udFNpemUoKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSAocmVsYXRpdmUgcG9zaXRpb25lZCkgY29udGFpbmVyIGZvciB0aGUgc2tldGNoIGluc2lkZSBvZiB0aGVcclxuICAgIC8vIG5hdiwgYnV0IG1ha2Ugc3VyZSB0aGF0IGl0IGlzIEJFSElORCBldmVyeXRoaW5nIGVsc2UuIEV2ZW50dWFsbHksIHdlIHdpbGxcclxuICAgIC8vIGRyb3AganVzdCB0aGUgbmF2IGxvZ28gKG5vdCB0aGUgbmF2IGxpbmtzISkgYmVoaW5kIHRoZSBjYW52YXMuXHJcbiAgICB0aGlzLl8kY29udGFpbmVyID0gJChcIjxkaXY+XCIpXHJcbiAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXHJcbiAgICAgICAgICAgIHRvcDogXCIwcHhcIixcclxuICAgICAgICAgICAgbGVmdDogXCIwcHhcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnByZXBlbmRUbyh0aGlzLl8kbmF2KVxyXG4gICAgICAgIC5oaWRlKCk7XHJcblxyXG4gICAgdGhpcy5fY3JlYXRlUDVJbnN0YW5jZSgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgbmV3IHA1IGluc3RhbmNlIGFuZCBiaW5kIHRoZSBhcHByb3ByaWF0ZSBjbGFzcyBtZXRob2RzIHRvIHRoZVxyXG4gKiBpbnN0YW5jZS4gVGhpcyBhbHNvIGZpbGxzIGluIHRoZSBwIHBhcmFtZXRlciBvbiB0aGUgY2xhc3MgbWV0aG9kcyAoc2V0dXAsXHJcbiAqIGRyYXcsIGV0Yy4pIHNvIHRoYXQgdGhvc2UgZnVuY3Rpb25zIGNhbiBiZSBhIGxpdHRsZSBsZXNzIHZlcmJvc2UgOikgXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX2NyZWF0ZVA1SW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBuZXcgcDUoZnVuY3Rpb24ocCkge1xyXG4gICAgICAgIHRoaXMuX3AgPSBwO1xyXG4gICAgICAgIHAucHJlbG9hZCA9IHRoaXMuX3ByZWxvYWQuYmluZCh0aGlzLCBwKTtcclxuICAgICAgICBwLnNldHVwID0gdGhpcy5fc2V0dXAuYmluZCh0aGlzLCBwKTtcclxuICAgICAgICBwLmRyYXcgPSB0aGlzLl9kcmF3LmJpbmQodGhpcywgcCk7XHJcbiAgICB9LmJpbmQodGhpcyksIHRoaXMuXyRjb250YWluZXIuZ2V0KDApKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGaW5kIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSB0b3AgbGVmdCBvZiB0aGUgbmF2IHRvIHRoZSBicmFuZCBsb2dvJ3MgYmFzZWxpbmUuXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3VwZGF0ZVRleHRPZmZzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFzZWxpbmVEaXYgPSAkKFwiPGRpdj5cIilcclxuICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcclxuICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJiYXNlbGluZVwiXHJcbiAgICAgICAgfSkucHJlcGVuZFRvKHRoaXMuXyRuYXZMb2dvKTtcclxuICAgIHZhciBuYXZPZmZzZXQgPSB0aGlzLl8kbmF2Lm9mZnNldCgpO1xyXG4gICAgdmFyIGxvZ29CYXNlbGluZU9mZnNldCA9IGJhc2VsaW5lRGl2Lm9mZnNldCgpO1xyXG4gICAgdGhpcy5fdGV4dE9mZnNldCA9IHtcclxuICAgICAgICB0b3A6IGxvZ29CYXNlbGluZU9mZnNldC50b3AgLSBuYXZPZmZzZXQudG9wLFxyXG4gICAgICAgIGxlZnQ6IGxvZ29CYXNlbGluZU9mZnNldC5sZWZ0IC0gbmF2T2Zmc2V0LmxlZnRcclxuICAgIH07XHJcbiAgICBiYXNlbGluZURpdi5yZW1vdmUoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGaW5kIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIGJyYW5kIGxvZ28gaW4gdGhlIG5hdi4gVGhpcyBiYm94IGNhbiB0aGVuIGJlIFxyXG4gKiB1c2VkIHRvIGNvbnRyb2wgd2hlbiB0aGUgY3Vyc29yIHNob3VsZCBiZSBhIHBvaW50ZXIuXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX2NhbGN1bGF0ZU5hdkxvZ29Cb3VuZHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbmF2T2Zmc2V0ID0gdGhpcy5fJG5hdi5vZmZzZXQoKTtcclxuICAgIHZhciBsb2dvT2Zmc2V0ID0gdGhpcy5fJG5hdkxvZ28ub2Zmc2V0KCk7XHJcbiAgICB0aGlzLl9sb2dvQmJveCA9IHtcclxuICAgICAgICB5OiBsb2dvT2Zmc2V0LnRvcCAtIG5hdk9mZnNldC50b3AsXHJcbiAgICAgICAgeDogbG9nb09mZnNldC5sZWZ0IC0gbmF2T2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgdzogdGhpcy5fJG5hdkxvZ28ub3V0ZXJXaWR0aCgpLCAvLyBFeGNsdWRlIG1hcmdpbiBmcm9tIHRoZSBiYm94XHJcbiAgICAgICAgaDogdGhpcy5fJG5hdkxvZ28ub3V0ZXJIZWlnaHQoKSAvLyBMaW5rcyBhcmVuJ3QgY2xpY2thYmxlIG9uIG1hcmdpblxyXG4gICAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIGRpbWVuc2lvbnMgdG8gbWF0Y2ggdGhlIG5hdiAtIGV4Y2x1ZGluZyBhbnkgbWFyZ2luLCBwYWRkaW5nICYgXHJcbiAqIGJvcmRlci5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fdXBkYXRlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX3dpZHRoID0gdGhpcy5fJG5hdi5pbm5lcldpZHRoKCk7XHJcbiAgICB0aGlzLl9oZWlnaHQgPSB0aGlzLl8kbmF2LmlubmVySGVpZ2h0KCk7XHJcbn07XHJcblxyXG4vKipcclxuICogR3JhYiB0aGUgZm9udCBzaXplIGZyb20gdGhlIGJyYW5kIGxvZ28gbGluay4gVGhpcyBtYWtlcyB0aGUgZm9udCBzaXplIG9mIHRoZVxyXG4gKiBza2V0Y2ggcmVzcG9uc2l2ZS5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fdXBkYXRlRm9udFNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9mb250U2l6ZSA9IHRoaXMuXyRuYXZMb2dvLmNzcyhcImZvbnRTaXplXCIpLnJlcGxhY2UoXCJweFwiLCBcIlwiKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBXaGVuIHRoZSBicm93c2VyIGlzIHJlc2l6ZWQsIHJlY2FsY3VsYXRlIGFsbCB0aGUgbmVjZXNzYXJ5IHN0YXRzIHNvIHRoYXQgdGhlXHJcbiAqIHNrZXRjaCBjYW4gYmUgcmVzcG9uc2l2ZS4gVGhlIGxvZ28gaW4gdGhlIHNrZXRjaCBzaG91bGQgQUxXQVlTIGV4YWN0bHkgbWF0Y2hcclxuICogdGhlIGJyYW5nIGxvZ28gbGluayB0aGUgSFRNTC5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgdGhpcy5fdXBkYXRlU2l6ZSgpO1xyXG4gICAgdGhpcy5fdXBkYXRlRm9udFNpemUoKTtcclxuICAgIHRoaXMuX3VwZGF0ZVRleHRPZmZzZXQoKTtcclxuICAgIHRoaXMuX2NhbGN1bGF0ZU5hdkxvZ29Cb3VuZHMoKTtcclxuICAgIHAucmVzaXplQ2FudmFzKHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgX2lzTW91c2VPdmVyIHByb3BlcnR5LiBcclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fc2V0TW91c2VPdmVyID0gZnVuY3Rpb24gKGlzTW91c2VPdmVyKSB7XHJcbiAgICB0aGlzLl9pc01vdXNlT3ZlciA9IGlzTW91c2VPdmVyO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIElmIHRoZSBjdXJzb3IgaXMgc2V0IHRvIGEgcG9pbnRlciwgZm9yd2FyZCBhbnkgY2xpY2sgZXZlbnRzIHRvIHRoZSBuYXYgbG9nby5cclxuICogVGhpcyByZWR1Y2VzIHRoZSBuZWVkIGZvciB0aGUgY2FudmFzIHRvIGRvIGFueSBBSkFYLXkgc3R1ZmYuXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX29uQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKHRoaXMuX2lzT3Zlck5hdkxvZ28pIHRoaXMuXyRuYXZMb2dvLnRyaWdnZXIoZSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQmFzZSBwcmVsb2FkIG1ldGhvZCB0aGF0IGp1c3QgbG9hZHMgdGhlIG5lY2Vzc2FyeSBmb250XHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3ByZWxvYWQgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgdGhpcy5fZm9udCA9IHAubG9hZEZvbnQodGhpcy5fZm9udFBhdGgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEJhc2Ugc2V0dXAgbWV0aG9kIHRoYXQgZG9lcyBzb21lIGhlYXZ5IGxpZnRpbmcuIEl0IGhpZGVzIHRoZSBuYXYgYnJhbmQgbG9nb1xyXG4gKiBhbmQgcmV2ZWFscyB0aGUgY2FudmFzLiBJdCBhbHNvIHNldHMgdXAgYSBsb3Qgb2YgdGhlIGludGVybmFsIHZhcmlhYmxlcyBhbmRcclxuICogY2FudmFzIGV2ZW50cy5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fc2V0dXAgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgdmFyIHJlbmRlcmVyID0gcC5jcmVhdGVDYW52YXModGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XHJcbiAgICB0aGlzLl8kY2FudmFzID0gJChyZW5kZXJlci5jYW52YXMpO1xyXG5cclxuICAgIC8vIFNob3cgdGhlIGNhbnZhcyBhbmQgaGlkZSB0aGUgbG9nby4gVXNpbmcgc2hvdy9oaWRlIG9uIHRoZSBsb2dvIHdpbGwgY2F1c2VcclxuICAgIC8vIGpRdWVyeSB0byBtdWNrIHdpdGggdGhlIHBvc2l0aW9uaW5nLCB3aGljaCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB3aGVyZSB0b1xyXG4gICAgLy8gZHJhdyB0aGUgY2FudmFzIHRleHQuIEluc3RlYWQsIGp1c3QgcHVzaCB0aGUgbG9nbyBiZWhpbmQgdGhlIGNhbnZhcy4gVGhpc1xyXG4gICAgLy8gYWxsb3dzIG1ha2VzIGl0IHNvIHRoZSBjYW52YXMgaXMgc3RpbGwgYmVoaW5kIHRoZSBuYXYgbGlua3MuXHJcbiAgICB0aGlzLl8kY29udGFpbmVyLnNob3coKTtcclxuICAgIHRoaXMuXyRuYXZMb2dvLmNzcyhcInpJbmRleFwiLCAtMSk7XHJcblxyXG4gICAgLy8gVGhlcmUgaXNuJ3QgYSBnb29kIHdheSB0byBjaGVjayB3aGV0aGVyIHRoZSBza2V0Y2ggaGFzIHRoZSBtb3VzZSBvdmVyXHJcbiAgICAvLyBpdC4gcC5tb3VzZVggJiBwLm1vdXNlWSBhcmUgaW5pdGlhbGl6ZWQgdG8gKDAsIDApLCBhbmQgcC5mb2N1c2VkIGlzbid0IFxyXG4gICAgLy8gYWx3YXlzIHJlbGlhYmxlLlxyXG4gICAgdGhpcy5fJGNhbnZhcy5vbihcIm1vdXNlb3ZlclwiLCB0aGlzLl9zZXRNb3VzZU92ZXIuYmluZCh0aGlzLCB0cnVlKSk7XHJcbiAgICB0aGlzLl8kY2FudmFzLm9uKFwibW91c2VvdXRcIiwgdGhpcy5fc2V0TW91c2VPdmVyLmJpbmQodGhpcywgZmFsc2UpKTtcclxuXHJcbiAgICAvLyBGb3J3YXJkIG1vdXNlIGNsaWNrcyB0byB0aGUgbmF2IGxvZ29cclxuICAgIHRoaXMuXyRjYW52YXMub24oXCJjbGlja1wiLCB0aGlzLl9vbkNsaWNrLmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIHdpbmRvdyBpcyByZXNpemVkLCB0ZXh0ICYgY2FudmFzIHNpemluZyBhbmQgcGxhY2VtZW50IG5lZWQgdG8gYmVcclxuICAgIC8vIHJlY2FsY3VsYXRlZC4gVGhlIHNpdGUgaXMgcmVzcG9uc2l2ZSwgc28gdGhlIGludGVyYWN0aXZlIGNhbnZhcyBzaG91bGQgYmVcclxuICAgIC8vIHRvbyEgXHJcbiAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgdGhpcy5fb25SZXNpemUuYmluZCh0aGlzLCBwKSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQmFzZSBkcmF3IG1ldGhvZCB0aGF0IGNvbnRyb2xzIHdoZXRoZXIgb3Igbm90IHRoZSBjdXJzb3IgaXMgYSBwb2ludGVyLiBJdFxyXG4gKiBzaG91bGQgb25seSBiZSBhIHBvaW50ZXIgd2hlbiB0aGUgbW91c2UgaXMgb3ZlciB0aGUgbmF2IGJyYW5kIGxvZ28uXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX2RyYXcgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgaWYgKHRoaXMuX2lzTW91c2VPdmVyKSB7XHJcbiAgICAgICAgdmFyIGlzT3ZlckxvZ28gPSB1dGlscy5pc0luUmVjdChwLm1vdXNlWCwgcC5tb3VzZVksIHRoaXMuX2xvZ29CYm94KTtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzT3Zlck5hdkxvZ28gJiYgaXNPdmVyTG9nbykge1xyXG4gICAgICAgICAgICB0aGlzLl9pc092ZXJOYXZMb2dvID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fJGNhbnZhcy5jc3MoXCJjdXJzb3JcIiwgXCJwb2ludGVyXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5faXNPdmVyTmF2TG9nbyAmJiAhaXNPdmVyTG9nbykge1xyXG4gICAgICAgICAgICB0aGlzLl9pc092ZXJOYXZMb2dvID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuXyRjYW52YXMuY3NzKFwiY3Vyc29yXCIsIFwiaW5pdGlhbFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XG59LHtcIi4uL3V0aWxpdGllcy5qc1wiOjE5fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFNrZXRjaDtcclxuXHJcbnZhciBCYm94VGV4dCA9IHJlcXVpcmUoXCJwNS1iYm94LWFsaWduZWQtdGV4dFwiKTtcclxudmFyIEJhc2VMb2dvU2tldGNoID0gcmVxdWlyZShcIi4vYmFzZS1sb2dvLXNrZXRjaC5qc1wiKTtcclxudmFyIFNpbkdlbmVyYXRvciA9IHJlcXVpcmUoXCIuL2dlbmVyYXRvcnMvc2luLWdlbmVyYXRvci5qc1wiKTtcclxuXHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUpO1xyXG5cclxuZnVuY3Rpb24gU2tldGNoKCRuYXYsICRuYXZMb2dvKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5jYWxsKHRoaXMsICRuYXYsICRuYXZMb2dvLCBcIi4uL2ZvbnRzL2JpZ19qb2huLXdlYmZvbnQudHRmXCIpO1xyXG59XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplLmNhbGwodGhpcywgcCk7XHJcbiAgICB0aGlzLl9zcGFjaW5nID0gdXRpbHMubWFwKHRoaXMuX2ZvbnRTaXplLCAyMCwgNDAsIDIsIDUsIHtjbGFtcDogdHJ1ZSwgXHJcbiAgICAgICAgcm91bmQ6IHRydWV9KTtcclxuICAgIC8vIFVwZGF0ZSB0aGUgYmJveFRleHQsIHBsYWNlIG92ZXIgdGhlIG5hdiB0ZXh0IGxvZ28gYW5kIHRoZW4gc2hpZnQgaXRzIFxyXG4gICAgLy8gYW5jaG9yIGJhY2sgdG8gKGNlbnRlciwgY2VudGVyKSB3aGlsZSBwcmVzZXJ2aW5nIHRoZSB0ZXh0IHBvc2l0aW9uXHJcbiAgICB0aGlzLl9iYm94VGV4dC5zZXRUZXh0KHRoaXMuX3RleHQpXHJcbiAgICAgICAgLnNldFRleHRTaXplKHRoaXMuX2ZvbnRTaXplKVxyXG4gICAgICAgIC5zZXRBbmNob3IoQmJveFRleHQuQUxJR04uQk9YX0xFRlQsIEJib3hUZXh0LkJBU0VMSU5FLkFMUEhBQkVUSUMpXHJcbiAgICAgICAgLnNldFBvc2l0aW9uKHRoaXMuX3RleHRPZmZzZXQubGVmdCwgdGhpcy5fdGV4dE9mZnNldC50b3ApXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfQ0VOVEVSLCBCYm94VGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSLCBcclxuICAgICAgICAgICAgdHJ1ZSk7XHJcbiAgICB0aGlzLl9kcmF3U3RhdGlvbmFyeUxvZ28ocCk7XHJcbiAgICB0aGlzLl9wb2ludHMgPSB0aGlzLl9iYm94VGV4dC5nZXRUZXh0UG9pbnRzKCk7XHJcbiAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSB0cnVlO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhd1N0YXRpb25hcnlMb2dvID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgcC5zdHJva2UoMjU1KTtcclxuICAgIHAuZmlsbChcIiMwQTAwMEFcIik7XHJcbiAgICBwLnN0cm9rZVdlaWdodCgyKTtcclxuICAgIHRoaXMuX2Jib3hUZXh0LmRyYXcoKTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX3NldHVwID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fc2V0dXAuY2FsbCh0aGlzLCBwKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBCYm94QWxpZ25lZFRleHQgaW5zdGFuY2UgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGRyYXdpbmcgYW5kIFxyXG4gICAgLy8gcm90YXRpbmcgdGV4dFxyXG4gICAgdGhpcy5fYmJveFRleHQgPSBuZXcgQmJveFRleHQodGhpcy5fZm9udCwgdGhpcy5fdGV4dCwgdGhpcy5fZm9udFNpemUsIDAsIDAsXHJcbiAgICAgICAgcCk7XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBpbml0aWFsIHNldHVwIGJ5IHRyaWdnZXJpbmcgYSByZXNpemVcclxuICAgIHRoaXMuX29uUmVzaXplKHApO1xyXG5cclxuICAgIC8vIERyYXcgdGhlIHN0YXRpb25hcnkgbG9nb1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG5cclxuICAgIC8vIFN0YXJ0IHRoZSBzaW4gZ2VuZXJhdG9yIGF0IGl0cyBtYXggdmFsdWVcclxuICAgIHRoaXMuX3RocmVzaG9sZEdlbmVyYXRvciA9IG5ldyBTaW5HZW5lcmF0b3IocCwgMCwgMSwgMC4wMiwgcC5QSS8yKTsgXHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3ID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fZHJhdy5jYWxsKHRoaXMsIHApO1xyXG4gICAgaWYgKCF0aGlzLl9pc01vdXNlT3ZlciB8fCAhdGhpcy5faXNPdmVyTmF2TG9nbykgcmV0dXJuO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIHRleHQgaXMgYWJvdXQgdG8gYmVjb21lIGFjdGl2ZSBmb3IgdGhlIGZpcnN0IHRpbWUsIGNsZWFyXHJcbiAgICAvLyB0aGUgc3RhdGlvbmFyeSBsb2dvIHRoYXQgd2FzIHByZXZpb3VzbHkgZHJhd24uIFxyXG4gICAgaWYgKHRoaXMuX2lzRmlyc3RGcmFtZSkge1xyXG4gICAgICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLl9mb250U2l6ZSA+IDMwKSB7XHJcbiAgICAgICAgdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yLnNldEJvdW5kcygwLjIgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQsIFxyXG4gICAgICAgICAgICAwLjQ3ICogdGhpcy5fYmJveFRleHQuaGVpZ2h0KTsgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yLnNldEJvdW5kcygwLjIgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQsIFxyXG4gICAgICAgICAgICAwLjYgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQpOyAgICAgICAgICBcclxuICAgIH1cclxuICAgIHZhciBkaXN0YW5jZVRocmVzaG9sZCA9IHRoaXMuX3RocmVzaG9sZEdlbmVyYXRvci5nZW5lcmF0ZSgpO1xyXG4gICAgXHJcbiAgICBwLmJhY2tncm91bmQoMjU1LCAxMDApO1xyXG4gICAgcC5zdHJva2VXZWlnaHQoMSk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3BvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIHZhciBwb2ludDEgPSB0aGlzLl9wb2ludHNbaV07XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgaiArPSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDIgPSB0aGlzLl9wb2ludHNbal07XHJcbiAgICAgICAgICAgIHZhciBkaXN0ID0gcC5kaXN0KHBvaW50MS54LCBwb2ludDEueSwgcG9pbnQyLngsIHBvaW50Mi55KTtcclxuICAgICAgICAgICAgaWYgKGRpc3QgPCBkaXN0YW5jZVRocmVzaG9sZCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHAubm9TdHJva2UoKTtcclxuICAgICAgICAgICAgICAgIHAuZmlsbChcInJnYmEoMTY1LCAwLCAxNzMsIDAuMjUpXCIpO1xyXG4gICAgICAgICAgICAgICAgcC5lbGxpcHNlKChwb2ludDEueCArIHBvaW50Mi54KSAvIDIsIChwb2ludDEueSArIHBvaW50Mi55KSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdCwgZGlzdCk7ICBcclxuXHJcbiAgICAgICAgICAgICAgICBwLnN0cm9rZShcInJnYmEoMTY1LCAwLCAxNzMsIDAuMjUpXCIpO1xyXG4gICAgICAgICAgICAgICAgcC5ub0ZpbGwoKTtcclxuICAgICAgICAgICAgICAgIHAubGluZShwb2ludDEueCwgcG9pbnQxLnksIHBvaW50Mi54LCBwb2ludDIueSk7ICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcbn0se1wiLi4vdXRpbGl0aWVzLmpzXCI6MTksXCIuL2Jhc2UtbG9nby1za2V0Y2guanNcIjo1LFwiLi9nZW5lcmF0b3JzL3Npbi1nZW5lcmF0b3IuanNcIjo4LFwicDUtYmJveC1hbGlnbmVkLXRleHRcIjoyfV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIE5vaXNlR2VuZXJhdG9yMUQ6IE5vaXNlR2VuZXJhdG9yMUQsXHJcbiAgICBOb2lzZUdlbmVyYXRvcjJEOiBOb2lzZUdlbmVyYXRvcjJEXHJcbn07XHJcblxyXG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuLy8gLS0gMUQgTm9pc2UgR2VuZXJhdG9yIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgY2xhc3MgZm9yIGdlbmVyYXRpbmcgbm9pc2UgdmFsdWVzXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge29iamVjdH0gcCAgICAgICAgICAgICAgIFJlZmVyZW5jZSB0byBhIHA1IHNrZXRjaFxyXG4gKiBAcGFyYW0ge251bWJlcn0gW21pbj0wXSAgICAgICAgIE1pbmltdW0gdmFsdWUgZm9yIHRoZSBub2lzZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW21heD0xXSAgICAgICAgIE1heGltdW0gdmFsdWUgZm9yIHRoZSBub2lzZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW2luY3JlbWVudD0wLjFdIFNjYWxlIG9mIHRoZSBub2lzZSwgdXNlZCB3aGVuIHVwZGF0aW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb2Zmc2V0PXJhbmRvbV0gQSB2YWx1ZSB1c2VkIHRvIGVuc3VyZSBtdWx0aXBsZSBub2lzZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRvcnMgYXJlIHJldHVybmluZyBcImluZGVwZW5kZW50XCIgdmFsdWVzXHJcbiAqL1xyXG5mdW5jdGlvbiBOb2lzZUdlbmVyYXRvcjFEKHAsIG1pbiwgbWF4LCBpbmNyZW1lbnQsIG9mZnNldCkge1xyXG4gICAgdGhpcy5fcCA9IHA7XHJcbiAgICB0aGlzLl9taW4gPSB1dGlscy5kZWZhdWx0KG1pbiwgMCk7XHJcbiAgICB0aGlzLl9tYXggPSB1dGlscy5kZWZhdWx0KG1heCwgMSk7XHJcbiAgICB0aGlzLl9pbmNyZW1lbnQgPSB1dGlscy5kZWZhdWx0KGluY3JlbWVudCwgMC4xKTtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdXRpbHMuZGVmYXVsdChvZmZzZXQsIHAucmFuZG9tKC0xMDAwMDAwLCAxMDAwMDAwKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIG1pbiBhbmQgbWF4IG5vaXNlIHZhbHVlc1xyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG1pbiBNaW5pbXVtIG5vaXNlIHZhbHVlXHJcbiAqIEBwYXJhbSAge251bWJlcn0gbWF4IE1heGltdW0gbm9pc2UgdmFsdWVcclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMUQucHJvdG90eXBlLnNldEJvdW5kcyA9IGZ1bmN0aW9uIChtaW4sIG1heCkge1xyXG4gICAgdGhpcy5fbWluID0gdXRpbHMuZGVmYXVsdChtaW4sIHRoaXMuX21pbik7XHJcbiAgICB0aGlzLl9tYXggPSB1dGlscy5kZWZhdWx0KG1heCwgdGhpcy5fbWF4KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIG5vaXNlIGluY3JlbWVudCAoZS5nLiBzY2FsZSlcclxuICogQHBhcmFtICB7bnVtYmVyfSBpbmNyZW1lbnQgTmV3IGluY3JlbWVudCAoc2NhbGUpIHZhbHVlXHJcbiAqL1xyXG5Ob2lzZUdlbmVyYXRvcjFELnByb3RvdHlwZS5zZXRJbmNyZW1lbnQgPSBmdW5jdGlvbiAoaW5jcmVtZW50KSB7XHJcbiAgICB0aGlzLl9pbmNyZW1lbnQgPSB1dGlscy5kZWZhdWx0KGluY3JlbWVudCwgdGhpcy5faW5jcmVtZW50KTtcclxufTtcclxuXHJcbi8qKiBcclxuICogR2VuZXJhdGUgdGhlIG5leHQgbm9pc2UgdmFsdWVcclxuICogQHJldHVybiB7bnVtYmVyfSBBIG5vaXN5IHZhbHVlIGJldHdlZW4gb2JqZWN0J3MgbWluIGFuZCBtYXhcclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMUQucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fdXBkYXRlKCk7XHJcbiAgICB2YXIgbiA9IHRoaXMuX3Aubm9pc2UodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbiA9IHRoaXMuX3AubWFwKG4sIDAsIDEsIHRoaXMuX21pbiwgdGhpcy5fbWF4KTtcclxuICAgIHJldHVybiBuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludGVybmFsIHVwZGF0ZSBtZXRob2QgZm9yIGdlbmVyYXRpbmcgbmV4dCBub2lzZSB2YWx1ZVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IxRC5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX3Bvc2l0aW9uICs9IHRoaXMuX2luY3JlbWVudDtcclxufTtcclxuXHJcblxyXG4vLyAtLSAyRCBOb2lzZSBHZW5lcmF0b3IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gTm9pc2VHZW5lcmF0b3IyRChwLCB4TWluLCB4TWF4LCB5TWluLCB5TWF4LCB4SW5jcmVtZW50LCB5SW5jcmVtZW50LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0LCB5T2Zmc2V0KSB7XHJcbiAgICB0aGlzLl94Tm9pc2UgPSBuZXcgTm9pc2VHZW5lcmF0b3IxRChwLCB4TWluLCB4TWF4LCB4SW5jcmVtZW50LCB4T2Zmc2V0KTtcclxuICAgIHRoaXMuX3lOb2lzZSA9IG5ldyBOb2lzZUdlbmVyYXRvcjFEKHAsIHlNaW4sIHlNYXgsIHlJbmNyZW1lbnQsIHlPZmZzZXQpO1xyXG4gICAgdGhpcy5fcCA9IHA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIG1pbiBhbmQgbWF4IG5vaXNlIHZhbHVlc1xyXG4gKiBAcGFyYW0gIHtvYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggYm91bmRzIHRvIGJlIHVwZGF0ZWQgZS5nLiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHsgeE1pbjogMCwgeE1heDogMSwgeU1pbjogLTEsIHlNYXg6IDEgfVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IyRC5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmICghb3B0aW9ucykgcmV0dXJuOyAgXHJcbiAgICB0aGlzLl94Tm9pc2Uuc2V0Qm91bmRzKG9wdGlvbnMueE1pbiwgb3B0aW9ucy54TWF4KTtcclxuICAgIHRoaXMuX3lOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy55TWluLCBvcHRpb25zLnlNYXgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgaW5jcmVtZW50IChlLmcuIHNjYWxlKSBmb3IgdGhlIG5vaXNlIGdlbmVyYXRvclxyXG4gKiBAcGFyYW0gIHtvYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggYm91bmRzIHRvIGJlIHVwZGF0ZWQgZS5nLiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHsgeEluY3JlbWVudDogMC4wNSwgeUluY3JlbWVudDogMC4xIH1cclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMkQucHJvdG90eXBlLnNldEJvdW5kcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHJldHVybjtcclxuICAgIHRoaXMuX3hOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy54SW5jcmVtZW50KTtcclxuICAgIHRoaXMuX3lOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy55SW5jcmVtZW50KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZSB0aGUgbmV4dCBwYWlyIG9mIG5vaXNlIHZhbHVlc1xyXG4gKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIHggYW5kIHkgcHJvcGVydGllcyB0aGF0IGNvbnRhaW4gdGhlIG5leHQgbm9pc2VcclxuICogICAgICAgICAgICAgICAgICB2YWx1ZXMgYWxvbmcgZWFjaCBkaW1lbnNpb25cclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMkQucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB0aGlzLl94Tm9pc2UuZ2VuZXJhdGUoKSxcclxuICAgICAgICB5OiB0aGlzLl95Tm9pc2UuZ2VuZXJhdGUoKVxyXG4gICAgfTtcclxufTtcbn0se1wiLi4vLi4vdXRpbGl0aWVzLmpzXCI6MTl9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gU2luR2VuZXJhdG9yO1xyXG5cclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4uLy4uL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgY2xhc3MgZm9yIGdlbmVyYXRpbmcgdmFsdWVzIGFsb25nIGEgc2lud2F2ZVxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtvYmplY3R9IHAgICAgICAgICAgICAgICBSZWZlcmVuY2UgdG8gYSBwNSBza2V0Y2hcclxuICogQHBhcmFtIHtudW1iZXJ9IFttaW49MF0gICAgICAgICBNaW5pbXVtIHZhbHVlIGZvciB0aGUgbm9pc2VcclxuICogQHBhcmFtIHtudW1iZXJ9IFttYXg9MV0gICAgICAgICBNYXhpbXVtIHZhbHVlIGZvciB0aGUgbm9pc2VcclxuICogQHBhcmFtIHtudW1iZXJ9IFtpbmNyZW1lbnQ9MC4xXSBJbmNyZW1lbnQgdXNlZCB3aGVuIHVwZGF0aW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb2Zmc2V0PXJhbmRvbV0gV2hlcmUgdG8gc3RhcnQgYWxvbmcgdGhlIHNpbmV3YXZlXHJcbiAqL1xyXG5mdW5jdGlvbiBTaW5HZW5lcmF0b3IocCwgbWluLCBtYXgsIGFuZ2xlSW5jcmVtZW50LCBzdGFydGluZ0FuZ2xlKSB7XHJcbiAgICB0aGlzLl9wID0gcDtcclxuICAgIHRoaXMuX21pbiA9IHV0aWxzLmRlZmF1bHQobWluLCAwKTtcclxuICAgIHRoaXMuX21heCA9IHV0aWxzLmRlZmF1bHQobWF4LCAwKTtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoYW5nbGVJbmNyZW1lbnQsIDAuMSk7XHJcbiAgICB0aGlzLl9hbmdsZSA9IHV0aWxzLmRlZmF1bHQoc3RhcnRpbmdBbmdsZSwgcC5yYW5kb20oLTEwMDAwMDAsIDEwMDAwMDApKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbWluIGFuZCBtYXggdmFsdWVzXHJcbiAqIEBwYXJhbSAge251bWJlcn0gbWluIE1pbmltdW0gdmFsdWVcclxuICogQHBhcmFtICB7bnVtYmVyfSBtYXggTWF4aW11bSB2YWx1ZVxyXG4gKi9cclxuU2luR2VuZXJhdG9yLnByb3RvdHlwZS5zZXRCb3VuZHMgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcclxuICAgIHRoaXMuX21pbiA9IHV0aWxzLmRlZmF1bHQobWluLCB0aGlzLl9taW4pO1xyXG4gICAgdGhpcy5fbWF4ID0gdXRpbHMuZGVmYXVsdChtYXgsIHRoaXMuX21heCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBhbmdsZSBpbmNyZW1lbnQgKGUuZy4gaG93IGZhc3Qgd2UgbW92ZSB0aHJvdWdoIHRoZSBzaW53YXZlKVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGluY3JlbWVudCBOZXcgaW5jcmVtZW50IHZhbHVlXHJcbiAqL1xyXG5TaW5HZW5lcmF0b3IucHJvdG90eXBlLnNldEluY3JlbWVudCA9IGZ1bmN0aW9uIChpbmNyZW1lbnQpIHtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoaW5jcmVtZW50LCB0aGlzLl9pbmNyZW1lbnQpO1xyXG59O1xyXG5cclxuLyoqIFxyXG4gKiBHZW5lcmF0ZSB0aGUgbmV4dCB2YWx1ZVxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgdmFsdWUgYmV0d2VlbiBnZW5lcmF0b3JzJ3MgbWluIGFuZCBtYXhcclxuICovXHJcblNpbkdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgIHZhciBuID0gdGhpcy5fcC5zaW4odGhpcy5fYW5nbGUpO1xyXG4gICAgbiA9IHRoaXMuX3AubWFwKG4sIC0xLCAxLCB0aGlzLl9taW4sIHRoaXMuX21heCk7XHJcbiAgICByZXR1cm4gbjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbnRlcm5hbCB1cGRhdGUgbWV0aG9kIGZvciBnZW5lcmF0aW5nIG5leHQgdmFsdWVcclxuICogQHByaXZhdGVcclxuICovXHJcblNpbkdlbmVyYXRvci5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2FuZ2xlICs9IHRoaXMuX2luY3JlbWVudDtcclxufTtcbn0se1wiLi4vLi4vdXRpbGl0aWVzLmpzXCI6MTl9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gU2tldGNoO1xyXG5cclxudmFyIEJib3hUZXh0ID0gcmVxdWlyZShcInA1LWJib3gtYWxpZ25lZC10ZXh0XCIpO1xyXG52YXIgQmFzZUxvZ29Ta2V0Y2ggPSByZXF1aXJlKFwiLi9iYXNlLWxvZ28tc2tldGNoLmpzXCIpO1xyXG5cclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4uL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZSk7XHJcblxyXG5mdW5jdGlvbiBTa2V0Y2goJG5hdiwgJG5hdkxvZ28pIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLmNhbGwodGhpcywgJG5hdiwgJG5hdkxvZ28sIFwiLi4vZm9udHMvYmlnX2pvaG4td2ViZm9udC50dGZcIik7XHJcbn1cclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUuY2FsbCh0aGlzLCBwKTtcclxuICAgIHRoaXMuX3NwYWNpbmcgPSB1dGlscy5tYXAodGhpcy5fZm9udFNpemUsIDIwLCA0MCwgMiwgNSwge2NsYW1wOiB0cnVlLCBcclxuICAgICAgICByb3VuZDogdHJ1ZX0pO1xyXG4gICAgLy8gVXBkYXRlIHRoZSBiYm94VGV4dCwgcGxhY2Ugb3ZlciB0aGUgbmF2IHRleHQgbG9nbyBhbmQgdGhlbiBzaGlmdCBpdHMgXHJcbiAgICAvLyBhbmNob3IgYmFjayB0byAoY2VudGVyLCBjZW50ZXIpIHdoaWxlIHByZXNlcnZpbmcgdGhlIHRleHQgcG9zaXRpb25cclxuICAgIHRoaXMuX2Jib3hUZXh0LnNldFRleHQodGhpcy5fdGV4dClcclxuICAgICAgICAuc2V0VGV4dFNpemUodGhpcy5fZm9udFNpemUpXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfTEVGVCwgQmJveFRleHQuQkFTRUxJTkUuQUxQSEFCRVRJQylcclxuICAgICAgICAuc2V0UG9zaXRpb24odGhpcy5fdGV4dE9mZnNldC5sZWZ0LCB0aGlzLl90ZXh0T2Zmc2V0LnRvcClcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9DRU5URVIsIEJib3hUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVIsIFxyXG4gICAgICAgICAgICB0cnVlKTtcclxuICAgIHRoaXMuX2RyYXdTdGF0aW9uYXJ5TG9nbyhwKTtcclxuICAgIHRoaXMuX2NhbGN1bGF0ZUNpcmNsZXMocCk7XHJcbiAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSB0cnVlO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhd1N0YXRpb25hcnlMb2dvID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgcC5zdHJva2UoMjU1KTtcclxuICAgIHAuZmlsbChcIiMwQTAwMEFcIik7XHJcbiAgICBwLnN0cm9rZVdlaWdodCgyKTtcclxuICAgIHRoaXMuX2Jib3hUZXh0LmRyYXcoKTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX3NldHVwID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fc2V0dXAuY2FsbCh0aGlzLCBwKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBCYm94QWxpZ25lZFRleHQgaW5zdGFuY2UgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGRyYXdpbmcgYW5kIFxyXG4gICAgLy8gcm90YXRpbmcgdGV4dFxyXG4gICAgdGhpcy5fYmJveFRleHQgPSBuZXcgQmJveFRleHQodGhpcy5fZm9udCwgdGhpcy5fdGV4dCwgdGhpcy5fZm9udFNpemUsIDAsIDAsIFxyXG4gICAgICAgIHApO1xyXG5cclxuICAgIC8vIEhhbmRsZSB0aGUgaW5pdGlhbCBzZXR1cCBieSB0cmlnZ2VyaW5nIGEgcmVzaXplXHJcbiAgICB0aGlzLl9vblJlc2l6ZShwKTtcclxuXHJcbiAgICAvLyBEcmF3IHRoZSBzdGF0aW9uYXJ5IGxvZ29cclxuICAgIHRoaXMuX2RyYXdTdGF0aW9uYXJ5TG9nbyhwKTtcclxuXHJcbiAgICB0aGlzLl9jYWxjdWxhdGVDaXJjbGVzKHApO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fY2FsY3VsYXRlQ2lyY2xlcyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICAvLyBUT0RPOiBEb24ndCBuZWVkIEFMTCB0aGUgcGl4ZWxzLiBUaGlzIGNvdWxkIGhhdmUgYW4gb2Zmc2NyZWVuIHJlbmRlcmVyXHJcbiAgICAvLyB0aGF0IGlzIGp1c3QgYmlnIGVub3VnaCB0byBmaXQgdGhlIHRleHQuXHJcbiAgICAvLyBMb29wIG92ZXIgdGhlIHBpeGVscyBpbiB0aGUgdGV4dCdzIGJvdW5kaW5nIGJveCB0byBzYW1wbGUgdGhlIHdvcmRcclxuICAgIHZhciBiYm94ID0gdGhpcy5fYmJveFRleHQuZ2V0QmJveCgpO1xyXG4gICAgdmFyIHN0YXJ0WCA9IE1hdGguZmxvb3IoTWF0aC5tYXgoYmJveC54IC0gNSwgMCkpO1xyXG4gICAgdmFyIGVuZFggPSBNYXRoLmNlaWwoTWF0aC5taW4oYmJveC54ICsgYmJveC53ICsgNSwgcC53aWR0aCkpO1xyXG4gICAgdmFyIHN0YXJ0WSA9IE1hdGguZmxvb3IoTWF0aC5tYXgoYmJveC55IC0gNSwgMCkpO1xyXG4gICAgdmFyIGVuZFkgPSBNYXRoLmNlaWwoTWF0aC5taW4oYmJveC55ICsgYmJveC5oICsgNSwgcC5oZWlnaHQpKTtcclxuICAgIHAubG9hZFBpeGVscygpO1xyXG4gICAgcC5waXhlbERlbnNpdHkoMSk7XHJcbiAgICB0aGlzLl9jaXJjbGVzID0gW107XHJcbiAgICBmb3IgKHZhciB5ID0gc3RhcnRZOyB5IDwgZW5kWTsgeSArPSB0aGlzLl9zcGFjaW5nKSB7XHJcbiAgICAgICAgZm9yICh2YXIgeCA9IHN0YXJ0WDsgeCA8IGVuZFg7IHggKz0gdGhpcy5fc3BhY2luZykgeyAgXHJcbiAgICAgICAgICAgIHZhciBpID0gNCAqICgoeSAqIHAud2lkdGgpICsgeCk7XHJcbiAgICAgICAgICAgIHZhciByID0gcC5waXhlbHNbaV07XHJcbiAgICAgICAgICAgIHZhciBnID0gcC5waXhlbHNbaSArIDFdO1xyXG4gICAgICAgICAgICB2YXIgYiA9IHAucGl4ZWxzW2kgKyAyXTtcclxuICAgICAgICAgICAgdmFyIGEgPSBwLnBpeGVsc1tpICsgM107XHJcbiAgICAgICAgICAgIHZhciBjID0gcC5jb2xvcihyLCBnLCBiLCBhKTtcclxuICAgICAgICAgICAgaWYgKHAuc2F0dXJhdGlvbihjKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NpcmNsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogeCArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICB5OiB5ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBwLmNvbG9yKFwiIzA2RkZGRlwiKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaXJjbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHggKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeSArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogcC5jb2xvcihcIiNGRTAwRkVcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2lyY2xlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB4OiB4ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHkgKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHAuY29sb3IoXCIjRkZGRjA0XCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2RyYXcgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9kcmF3LmNhbGwodGhpcywgcCk7XHJcbiAgICBpZiAoIXRoaXMuX2lzTW91c2VPdmVyIHx8ICF0aGlzLl9pc092ZXJOYXZMb2dvKSByZXR1cm47XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgdGV4dCBpcyBhYm91dCB0byBiZWNvbWUgYWN0aXZlIGZvciB0aGUgZmlyc3QgdGltZSwgY2xlYXJcclxuICAgIC8vIHRoZSBzdGF0aW9uYXJ5IGxvZ28gdGhhdCB3YXMgcHJldmlvdXNseSBkcmF3bi4gXHJcbiAgICBpZiAodGhpcy5faXNGaXJzdEZyYW1lKSB7XHJcbiAgICAgICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICAgICAgdGhpcy5faXNGaXJzdEZyYW1lID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xlYXJcclxuICAgIHAuYmxlbmRNb2RlKHAuQkxFTkQpO1xyXG4gICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcblxyXG4gICAgLy8gRHJhdyBcImhhbGZ0b25lXCIgbG9nb1xyXG4gICAgcC5ub1N0cm9rZSgpOyAgIFxyXG4gICAgcC5ibGVuZE1vZGUocC5NVUxUSVBMWSk7XHJcblxyXG4gICAgdmFyIG1heERpc3QgPSB0aGlzLl9iYm94VGV4dC5oYWxmV2lkdGg7XHJcbiAgICB2YXIgbWF4UmFkaXVzID0gMiAqIHRoaXMuX3NwYWNpbmc7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaXJjbGVzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9IHRoaXMuX2NpcmNsZXNbaV07XHJcbiAgICAgICAgdmFyIGMgPSBjaXJjbGUuY29sb3I7XHJcbiAgICAgICAgdmFyIGRpc3QgPSBwLmRpc3QoY2lyY2xlLngsIGNpcmNsZS55LCBwLm1vdXNlWCwgcC5tb3VzZVkpO1xyXG4gICAgICAgIHZhciByYWRpdXMgPSB1dGlscy5tYXAoZGlzdCwgMCwgbWF4RGlzdCwgMSwgbWF4UmFkaXVzLCB7Y2xhbXA6IHRydWV9KTtcclxuICAgICAgICBwLmZpbGwoYyk7XHJcbiAgICAgICAgcC5lbGxpcHNlKGNpcmNsZS54LCBjaXJjbGUueSwgcmFkaXVzLCByYWRpdXMpO1xyXG4gICAgfVxyXG59O1xufSx7XCIuLi91dGlsaXRpZXMuanNcIjoxOSxcIi4vYmFzZS1sb2dvLXNrZXRjaC5qc1wiOjUsXCJwNS1iYm94LWFsaWduZWQtdGV4dFwiOjJ9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFNrZXRjaDtcclxuXHJcbnZhciBOb2lzZSA9IHJlcXVpcmUoXCIuL2dlbmVyYXRvcnMvbm9pc2UtZ2VuZXJhdG9ycy5qc1wiKTtcclxudmFyIEJib3hUZXh0ID0gcmVxdWlyZShcInA1LWJib3gtYWxpZ25lZC10ZXh0XCIpO1xyXG52YXIgQmFzZUxvZ29Ta2V0Y2ggPSByZXF1aXJlKFwiLi9iYXNlLWxvZ28tc2tldGNoLmpzXCIpO1xyXG5cclxuU2tldGNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlKTtcclxuXHJcbmZ1bmN0aW9uIFNrZXRjaCgkbmF2LCAkbmF2TG9nbykge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2guY2FsbCh0aGlzLCAkbmF2LCAkbmF2TG9nbywgXCIuLi9mb250cy9iaWdfam9obi13ZWJmb250LnR0ZlwiKTtcclxufVxyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZS5jYWxsKHRoaXMsIHApO1xyXG4gICAgLy8gVXBkYXRlIHRoZSBiYm94VGV4dCwgcGxhY2Ugb3ZlciB0aGUgbmF2IHRleHQgbG9nbyBhbmQgdGhlbiBzaGlmdCBpdHMgXHJcbiAgICAvLyBhbmNob3IgYmFjayB0byAoY2VudGVyLCBjZW50ZXIpIHdoaWxlIHByZXNlcnZpbmcgdGhlIHRleHQgcG9zaXRpb25cclxuICAgIHRoaXMuX2Jib3hUZXh0LnNldFRleHQodGhpcy5fdGV4dClcclxuICAgICAgICAuc2V0VGV4dFNpemUodGhpcy5fZm9udFNpemUpXHJcbiAgICAgICAgLnNldFJvdGF0aW9uKDApXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfTEVGVCwgQmJveFRleHQuQkFTRUxJTkUuQUxQSEFCRVRJQylcclxuICAgICAgICAuc2V0UG9zaXRpb24odGhpcy5fdGV4dE9mZnNldC5sZWZ0LCB0aGlzLl90ZXh0T2Zmc2V0LnRvcClcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9DRU5URVIsIEJib3hUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVIsIFxyXG4gICAgICAgICAgICB0cnVlKTtcclxuICAgIHRoaXMuX3RleHRQb3MgPSB0aGlzLl9iYm94VGV4dC5nZXRQb3NpdGlvbigpO1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG4gICAgdGhpcy5faXNGaXJzdEZyYW1lID0gdHJ1ZTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2RyYXdTdGF0aW9uYXJ5TG9nbyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuICAgIHAuc3Ryb2tlKDI1NSk7XHJcbiAgICBwLmZpbGwoXCIjMEEwMDBBXCIpO1xyXG4gICAgcC5zdHJva2VXZWlnaHQoMik7XHJcbiAgICB0aGlzLl9iYm94VGV4dC5kcmF3KCk7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3NldHVwLmNhbGwodGhpcywgcCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgQmJveEFsaWduZWRUZXh0IGluc3RhbmNlIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBkcmF3aW5nIGFuZCBcclxuICAgIC8vIHJvdGF0aW5nIHRleHRcclxuICAgIHRoaXMuX2Jib3hUZXh0ID0gbmV3IEJib3hUZXh0KHRoaXMuX2ZvbnQsIHRoaXMuX3RleHQsIHRoaXMuX2ZvbnRTaXplLCAwLCAwLCBcclxuICAgICAgICBwKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGluaXRpYWwgc2V0dXAgYnkgdHJpZ2dlcmluZyBhIHJlc2l6ZVxyXG4gICAgdGhpcy5fb25SZXNpemUocCk7XHJcblxyXG4gICAgLy8gU2V0IHVwIG5vaXNlIGdlbmVyYXRvcnNcclxuICAgIHRoaXMuX3JvdGF0aW9uTm9pc2UgPSBuZXcgTm9pc2UuTm9pc2VHZW5lcmF0b3IxRChwLCAtcC5QSS80LCBwLlBJLzQsIDAuMDIpOyBcclxuICAgIHRoaXMuX3h5Tm9pc2UgPSBuZXcgTm9pc2UuTm9pc2VHZW5lcmF0b3IyRChwLCAtMTAwLCAxMDAsIC01MCwgNTAsIDAuMDEsIFxyXG4gICAgICAgIDAuMDEpO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhdyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX2RyYXcuY2FsbCh0aGlzLCBwKTtcclxuICAgIGlmICghdGhpcy5faXNNb3VzZU92ZXIgfHwgIXRoaXMuX2lzT3Zlck5hdkxvZ28pIHJldHVybjtcclxuXHJcbiAgICAvLyBXaGVuIHRoZSB0ZXh0IGlzIGFib3V0IHRvIGJlY29tZSBhY3RpdmUgZm9yIHRoZSBmaXJzdCB0aW1lLCBjbGVhclxyXG4gICAgLy8gdGhlIHN0YXRpb25hcnkgbG9nbyB0aGF0IHdhcyBwcmV2aW91c2x5IGRyYXduLiBcclxuICAgIGlmICh0aGlzLl9pc0ZpcnN0RnJhbWUpIHtcclxuICAgICAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuICAgICAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgcG9zaXRpb24gYW5kIHJvdGF0aW9uIHRvIGNyZWF0ZSBhIGppdHRlcnkgbG9nb1xyXG4gICAgdmFyIHJvdGF0aW9uID0gdGhpcy5fcm90YXRpb25Ob2lzZS5nZW5lcmF0ZSgpO1xyXG4gICAgdmFyIHh5T2Zmc2V0ID0gdGhpcy5feHlOb2lzZS5nZW5lcmF0ZSgpO1xyXG4gICAgdGhpcy5fYmJveFRleHQuc2V0Um90YXRpb24ocm90YXRpb24pXHJcbiAgICAgICAgLnNldFBvc2l0aW9uKHRoaXMuX3RleHRQb3MueCArIHh5T2Zmc2V0LngsIHRoaXMuX3RleHRQb3MueSArIHh5T2Zmc2V0LnkpXHJcbiAgICAgICAgLmRyYXcoKTtcclxufTtcbn0se1wiLi9iYXNlLWxvZ28tc2tldGNoLmpzXCI6NSxcIi4vZ2VuZXJhdG9ycy9ub2lzZS1nZW5lcmF0b3JzLmpzXCI6NyxcInA1LWJib3gtYWxpZ25lZC10ZXh0XCI6Mn1dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gTWFpbk5hdjtcclxuXHJcbmZ1bmN0aW9uIE1haW5OYXYobG9hZGVyKSB7XHJcbiAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XHJcbiAgICB0aGlzLl8kbG9nbyA9ICQoXCJuYXYubmF2YmFyIC5uYXZiYXItYnJhbmRcIik7XHJcbiAgICB0aGlzLl8kbmF2ID0gJChcIiNtYWluLW5hdlwiKTtcclxuICAgIHRoaXMuXyRuYXZMaW5rcyA9IHRoaXMuXyRuYXYuZmluZChcImFcIik7XHJcbiAgICB0aGlzLl8kYWN0aXZlTmF2ID0gdGhpcy5fJG5hdkxpbmtzLmZpbmQoXCIuYWN0aXZlXCIpOyBcclxuICAgIHRoaXMuXyRuYXZMaW5rcy5vbihcImNsaWNrXCIsIHRoaXMuX29uTmF2Q2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kbG9nby5vbihcImNsaWNrXCIsIHRoaXMuX29uTG9nb0NsaWNrLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5NYWluTmF2LnByb3RvdHlwZS5zZXRBY3RpdmVGcm9tVXJsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xyXG4gICAgdmFyIHVybCA9IGxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgaWYgKHVybCA9PT0gXCIvaW5kZXguaHRtbFwiIHx8IHVybCA9PT0gXCIvXCIpIHtcclxuICAgICAgICB0aGlzLl9hY3RpdmF0ZUxpbmsodGhpcy5fJG5hdkxpbmtzLmZpbHRlcihcIiNhYm91dC1saW5rXCIpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVybCA9PT0gXCIvd29yay5odG1sXCIpIHsgICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlTGluayh0aGlzLl8kbmF2TGlua3MuZmlsdGVyKFwiI3dvcmstbGlua1wiKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5NYWluTmF2LnByb3RvdHlwZS5fZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLl8kYWN0aXZlTmF2Lmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuXyRhY3RpdmVOYXYucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdiA9ICQoKTtcclxuICAgIH1cclxufTtcclxuXHJcbk1haW5OYXYucHJvdG90eXBlLl9hY3RpdmF0ZUxpbmsgPSBmdW5jdGlvbiAoJGxpbmspIHtcclxuICAgICRsaW5rLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fJGFjdGl2ZU5hdiA9ICRsaW5rO1xyXG59O1xyXG5cclxuTWFpbk5hdi5wcm90b3R5cGUuX29uTG9nb0NsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgdmFyIHVybCA9ICR0YXJnZXQuYXR0cihcImhyZWZcIik7XHJcbiAgICB0aGlzLl9sb2FkZXIubG9hZFBhZ2UodXJsLCB7fSwgdHJ1ZSk7XHJcbn07XHJcblxyXG5NYWluTmF2LnByb3RvdHlwZS5fb25OYXZDbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl8kbmF2LmNvbGxhcHNlKFwiaGlkZVwiKTsgLy8gQ2xvc2UgdGhlIG5hdiAtIG9ubHkgbWF0dGVycyBvbiBtb2JpbGVcclxuICAgIHZhciAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgaWYgKCR0YXJnZXQuaXModGhpcy5fJGFjdGl2ZU5hdikpIHJldHVybjtcclxuICAgIHRoaXMuX2RlYWN0aXZhdGUoKTtcclxuICAgIHRoaXMuX2FjdGl2YXRlTGluaygkdGFyZ2V0KTtcclxuICAgIHZhciB1cmwgPSAkdGFyZ2V0LmF0dHIoXCJocmVmXCIpO1xyXG4gICAgdGhpcy5fbG9hZGVyLmxvYWRQYWdlKHVybCwge30sIHRydWUpOyAgICBcclxufTtcbn0se31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBMb2FkZXIgPSByZXF1aXJlKFwiLi9wYWdlLWxvYWRlci5qc1wiKTtcclxudmFyIE1haW5OYXYgPSByZXF1aXJlKFwiLi9tYWluLW5hdi5qc1wiKTtcclxudmFyIEhvdmVyU2xpZGVzaG93cyA9IHJlcXVpcmUoXCIuL2hvdmVyLXNsaWRlc2hvdy5qc1wiKTtcclxudmFyIFBvcnRmb2xpb0ZpbHRlciA9IHJlcXVpcmUoXCIuL3BvcnRmb2xpby1maWx0ZXIuanNcIik7XHJcbnZhciBzbGlkZXNob3dzID0gcmVxdWlyZShcIi4vdGh1bWJuYWlsLXNsaWRlc2hvdy9zbGlkZXNob3cuanNcIik7XHJcblxyXG4vLyBQaWNraW5nIGEgcmFuZG9tIHNrZXRjaCB0aGF0IHRoZSB1c2VyIGhhc24ndCBzZWVuIGJlZm9yZVxyXG52YXIgU2tldGNoID0gcmVxdWlyZShcIi4vcGljay1yYW5kb20tc2tldGNoLmpzXCIpKCk7XHJcblxyXG4vLyBBSkFYIHBhZ2UgbG9hZGVyLCB3aXRoIGNhbGxiYWNrIGZvciByZWxvYWRpbmcgd2lkZ2V0c1xyXG52YXIgbG9hZGVyID0gbmV3IExvYWRlcihvblBhZ2VMb2FkKTtcclxuXHJcbi8vIE1haW4gbmF2IHdpZGdldFxyXG52YXIgbWFpbk5hdiA9IG5ldyBNYWluTmF2KGxvYWRlcik7XHJcblxyXG4vLyBJbnRlcmFjdGl2ZSBsb2dvIGluIG5hdmJhclxyXG52YXIgbmF2ID0gJChcIm5hdi5uYXZiYXJcIik7XHJcbnZhciBuYXZMb2dvID0gbmF2LmZpbmQoXCIubmF2YmFyLWJyYW5kXCIpO1xyXG52YXIgc2tldGNoID0gbmV3IFNrZXRjaChuYXYsIG5hdkxvZ28pO1xyXG5cclxuLy8gV2lkZ2V0IGdsb2JhbHNcclxudmFyIGhvdmVyU2xpZGVzaG93cywgcG9ydGZvbGlvRmlsdGVyO1xyXG5cclxuLy8gTG9hZCBhbGwgd2lkZ2V0c1xyXG5vblBhZ2VMb2FkKCk7XHJcblxyXG4vLyBIYW5kbGUgYmFjay9mb3J3YXJkIGJ1dHRvbnNcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBvblBvcFN0YXRlKTtcclxuXHJcbmZ1bmN0aW9uIG9uUG9wU3RhdGUoZSkge1xyXG4gICAgLy8gTG9hZGVyIHN0b3JlcyBjdXN0b20gZGF0YSBpbiB0aGUgc3RhdGUgLSBpbmNsdWRpbmcgdGhlIHVybCBhbmQgdGhlIHF1ZXJ5XHJcbiAgICB2YXIgdXJsID0gKGUuc3RhdGUgJiYgZS5zdGF0ZS51cmwpIHx8IFwiL2luZGV4Lmh0bWxcIjtcclxuICAgIHZhciBxdWVyeU9iamVjdCA9IChlLnN0YXRlICYmIGUuc3RhdGUucXVlcnkpIHx8IHt9O1xyXG5cclxuICAgIGlmICgodXJsID09PSBsb2FkZXIuZ2V0TG9hZGVkUGF0aCgpKSAmJiAodXJsID09PSBcIi93b3JrLmh0bWxcIikpIHtcclxuICAgICAgICAvLyBUaGUgY3VycmVudCAmIHByZXZpb3VzIGxvYWRlZCBzdGF0ZXMgd2VyZSB3b3JrLmh0bWwsIHNvIGp1c3QgcmVmaWx0ZXJcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSBxdWVyeU9iamVjdC5jYXRlZ29yeSB8fCBcImFsbFwiO1xyXG4gICAgICAgIHBvcnRmb2xpb0ZpbHRlci5zZWxlY3RDYXRlZ29yeShjYXRlZ29yeSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIExvYWQgdGhlIG5ldyBwYWdlXHJcbiAgICAgICAgbG9hZGVyLmxvYWRQYWdlKHVybCwge30sIGZhbHNlKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25QYWdlTG9hZCgpIHtcclxuICAgIC8vIFJlbG9hZCBhbGwgcGx1Z2lucy93aWRnZXRzXHJcbiAgICBob3ZlclNsaWRlc2hvd3MgPSBuZXcgSG92ZXJTbGlkZXNob3dzKCk7XHJcbiAgICBwb3J0Zm9saW9GaWx0ZXIgPSBuZXcgUG9ydGZvbGlvRmlsdGVyKGxvYWRlcik7XHJcbiAgICBzbGlkZXNob3dzLmluaXQoKTtcclxuICAgIG9iamVjdEZpdEltYWdlcygpO1xyXG4gICAgc21hcnRxdW90ZXMoKTtcclxuXHJcbiAgICAvLyBTbGlnaHRseSByZWR1bmRhbnQsIGJ1dCB1cGRhdGUgdGhlIG1haW4gbmF2IHVzaW5nIHRoZSBjdXJyZW50IFVSTC4gVGhpc1xyXG4gICAgLy8gaXMgaW1wb3J0YW50IGlmIGEgcGFnZSBpcyBsb2FkZWQgYnkgdHlwaW5nIGEgZnVsbCBVUkwgKGUuZy4gZ29pbmdcclxuICAgIC8vIGRpcmVjdGx5IHRvIC93b3JrLmh0bWwpIG9yIHdoZW4gbW92aW5nIGZyb20gd29yay5odG1sIHRvIGEgcHJvamVjdC4gXHJcbiAgICBtYWluTmF2LnNldEFjdGl2ZUZyb21VcmwoKTtcclxufVxyXG5cclxuLy8gV2UndmUgaGl0IHRoZSBsYW5kaW5nIHBhZ2UsIGxvYWQgdGhlIGFib3V0IHBhZ2VcclxuLy8gaWYgKGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9eKFxcL3xcXC9pbmRleC5odG1sfGluZGV4Lmh0bWwpJC8pKSB7XHJcbi8vICAgICBsb2FkZXIubG9hZFBhZ2UoXCIvYWJvdXQuaHRtbFwiLCB7fSwgZmFsc2UpO1xyXG4vLyB9XG59LHtcIi4vaG92ZXItc2xpZGVzaG93LmpzXCI6NCxcIi4vbWFpbi1uYXYuanNcIjoxMSxcIi4vcGFnZS1sb2FkZXIuanNcIjoxMyxcIi4vcGljay1yYW5kb20tc2tldGNoLmpzXCI6MTQsXCIuL3BvcnRmb2xpby1maWx0ZXIuanNcIjoxNSxcIi4vdGh1bWJuYWlsLXNsaWRlc2hvdy9zbGlkZXNob3cuanNcIjoxN31dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gTG9hZGVyO1xyXG5cclxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoXCIuL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbmZ1bmN0aW9uIExvYWRlcihvblJlbG9hZCwgZmFkZUR1cmF0aW9uKSB7XHJcbiAgICB0aGlzLl8kY29udGVudCA9ICQoXCIjY29udGVudFwiKTtcclxuICAgIHRoaXMuX29uUmVsb2FkID0gb25SZWxvYWQ7XHJcbiAgICB0aGlzLl9mYWRlRHVyYXRpb24gPSAoZmFkZUR1cmF0aW9uICE9PSB1bmRlZmluZWQpID8gZmFkZUR1cmF0aW9uIDogMjUwO1xyXG4gICAgdGhpcy5fcGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lO1xyXG59XHJcblxyXG5Mb2FkZXIucHJvdG90eXBlLmdldExvYWRlZFBhdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcGF0aDtcclxufTtcclxuXHJcbkxvYWRlci5wcm90b3R5cGUubG9hZFBhZ2UgPSBmdW5jdGlvbiAodXJsLCBxdWVyeU9iamVjdCwgc2hvdWxkUHVzaEhpc3RvcnkpIHtcclxuICAgIC8vIEZhZGUgdGhlbiBlbXB0eSB0aGUgY3VycmVudCBjb250ZW50c1xyXG4gICAgdGhpcy5fJGNvbnRlbnQudmVsb2NpdHkoeyBvcGFjaXR5OiAwIH0sIHRoaXMuX2ZhZGVEdXJhdGlvbiwgXCJzd2luZ1wiLFxyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl8kY29udGVudC5lbXB0eSgpO1xyXG4gICAgICAgIHRoaXMuXyRjb250ZW50LmxvYWQodXJsICsgXCIgI2NvbnRlbnRcIiwgb25Db250ZW50RmV0Y2hlZC5iaW5kKHRoaXMpKTtcclxuICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gRmFkZSB0aGUgbmV3IGNvbnRlbnQgaW4gYWZ0ZXIgaXQgaGFzIGJlZW4gZmV0Y2hlZFxyXG4gICAgZnVuY3Rpb24gb25Db250ZW50RmV0Y2hlZChyZXNwb25zZVRleHQsIHRleHRTdGF0dXMsIGpxWGhyKSB7XHJcbiAgICAgICAgaWYgKHRleHRTdGF0dXMgPT09IFwiZXJyb3JcIikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyB0aGUgcGFnZS5cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHV0aWxpdGllcy5jcmVhdGVRdWVyeVN0cmluZyhxdWVyeU9iamVjdCk7XHJcbiAgICAgICAgaWYgKHNob3VsZFB1c2hIaXN0b3J5KSB7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5T2JqZWN0XHJcbiAgICAgICAgICAgIH0sIG51bGwsIHVybCArIHF1ZXJ5U3RyaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBHb29nbGUgYW5hbHl0aWNzXHJcbiAgICAgICAgZ2EoXCJzZXRcIiwgXCJwYWdlXCIsIHVybCArIHF1ZXJ5U3RyaW5nKTtcclxuICAgICAgICBnYShcInNlbmRcIiwgXCJwYWdldmlld1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgICAgIHRoaXMuXyRjb250ZW50LnZlbG9jaXR5KHsgb3BhY2l0eTogMSB9LCB0aGlzLl9mYWRlRHVyYXRpb24sIFxyXG4gICAgICAgICAgICBcInN3aW5nXCIpO1xyXG4gICAgICAgIHRoaXMuX29uUmVsb2FkKCk7XHJcbiAgICB9XHJcbn07XG59LHtcIi4vdXRpbGl0aWVzLmpzXCI6MTl9XSwxNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgY29va2llcyA9IHJlcXVpcmUoXCJqcy1jb29raWVcIik7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbnZhciBza2V0Y2hDb25zdHJ1Y3RvcnMgPSB7XHJcbiAgICBcImhhbGZ0b25lLWZsYXNobGlnaHRcIjogXHJcbiAgICAgICAgcmVxdWlyZShcIi4vaW50ZXJhY3RpdmUtbG9nb3MvaGFsZnRvbmUtZmxhc2hsaWdodC13b3JkLmpzXCIpLFxyXG4gICAgXCJub2lzeS13b3JkXCI6XHJcbiAgICAgICAgcmVxdWlyZShcIi4vaW50ZXJhY3RpdmUtbG9nb3Mvbm9pc3ktd29yZC1za2V0Y2guanNcIiksXHJcbiAgICBcImNvbm5lY3QtcG9pbnRzXCI6XHJcbiAgICAgICAgcmVxdWlyZShcIi4vaW50ZXJhY3RpdmUtbG9nb3MvY29ubmVjdC1wb2ludHMtc2tldGNoLmpzXCIpXHJcbn07XHJcbnZhciBudW1Ta2V0Y2hlcyA9IE9iamVjdC5rZXlzKHNrZXRjaENvbnN0cnVjdG9ycykubGVuZ3RoO1xyXG52YXIgY29va2llS2V5ID0gXCJzZWVuLXNrZXRjaC1uYW1lc1wiO1xyXG5cclxuLyoqXHJcbiAqIFBpY2sgYSByYW5kb20gc2tldGNoIHRoYXQgdXNlciBoYXNuJ3Qgc2VlbiB5ZXQuIElmIHRoZSB1c2VyIGhhcyBzZWVuIGFsbCB0aGVcclxuICogc2tldGNoZXMsIGp1c3QgcGljayBhIHJhbmRvbSBvbmUuIFRoaXMgdXNlcyBjb29raWVzIHRvIHRyYWNrIHdoYXQgdGhlIHVzZXIgXHJcbiAqIGhhcyBzZWVuIGFscmVhZHkuXHJcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBDb25zdHJ1Y3RvciBmb3IgYSBTa2V0Y2ggY2xhc3NcclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGlja1JhbmRvbVNrZXRjaCgpIHtcclxuICAgIHZhciBzZWVuU2tldGNoTmFtZXMgPSBjb29raWVzLmdldEpTT04oY29va2llS2V5KSB8fCBbXTtcclxuXHJcbiAgICAvLyBGaW5kIHRoZSBuYW1lcyBvZiB0aGUgdW5zZWVuIHNrZXRjaGVzXHJcbiAgICB2YXIgdW5zZWVuU2tldGNoTmFtZXMgPSBmaW5kVW5zZWVuU2tldGNoZXMoc2VlblNrZXRjaE5hbWVzKTtcclxuXHJcbiAgICAvLyBBbGwgc2tldGNoZXMgaGF2ZSBiZWVuIHNlZW5cclxuICAgIGlmICh1bnNlZW5Ta2V0Y2hOYW1lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAvLyBJZiB3ZSd2ZSBnb3QgbW9yZSB0aGVuIG9uZSBza2V0Y2gsIHRoZW4gbWFrZSBzdXJlIHRvIGNob29zZSBhIHJhbmRvbVxyXG4gICAgICAgIC8vIHNrZXRjaCBleGNsdWRpbmcgdGhlIG1vc3QgcmVjZW50bHkgc2VlbiBza2V0Y2hcclxuICAgICAgICBpZiAobnVtU2tldGNoZXMgPiAxKSB7XHJcbiAgICAgICAgICAgIHNlZW5Ta2V0Y2hOYW1lcyA9IFtzZWVuU2tldGNoTmFtZXMucG9wKCldO1xyXG4gICAgICAgICAgICB1bnNlZW5Ta2V0Y2hOYW1lcyA9IGZpbmRVbnNlZW5Ta2V0Y2hlcyhzZWVuU2tldGNoTmFtZXMpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgLy8gSWYgd2UndmUgb25seSBnb3Qgb25lIHNrZXRjaCwgdGhlbiB3ZSBjYW4ndCBkbyBtdWNoLi4uXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlZW5Ta2V0Y2hOYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICB1bnNlZW5Ta2V0Y2hOYW1lcyA9IE9iamVjdC5rZXlzKHNrZXRjaENvbnN0cnVjdG9ycyk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciByYW5kU2tldGNoTmFtZSA9IHV0aWxzLnJhbmRBcnJheUVsZW1lbnQodW5zZWVuU2tldGNoTmFtZXMpO1xyXG4gICAgc2VlblNrZXRjaE5hbWVzLnB1c2gocmFuZFNrZXRjaE5hbWUpO1xyXG5cclxuICAgIC8vIFN0b3JlIHRoZSBnZW5lcmF0ZWQgc2tldGNoIGluIGEgY29va2llLiBUaGlzIGNyZWF0ZXMgYSBtb3ZpbmcgNyBkYXlcclxuICAgIC8vIHdpbmRvdyAtIGFueXRpbWUgdGhlIHNpdGUgaXMgdmlzaXRlZCwgdGhlIGNvb2tpZSBpcyByZWZyZXNoZWQuXHJcbiAgICBjb29raWVzLnNldChjb29raWVLZXksIHNlZW5Ta2V0Y2hOYW1lcywgeyBleHBpcmVzOiA3IH0pO1xyXG5cclxuICAgIHJldHVybiBza2V0Y2hDb25zdHJ1Y3RvcnNbcmFuZFNrZXRjaE5hbWVdO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZmluZFVuc2VlblNrZXRjaGVzKHNlZW5Ta2V0Y2hOYW1lcykge1xyXG4gICAgdmFyIHVuc2VlblNrZXRjaE5hbWVzID0gW107XHJcbiAgICBmb3IgKHZhciBza2V0Y2hOYW1lIGluIHNrZXRjaENvbnN0cnVjdG9ycykge1xyXG4gICAgICAgIGlmIChzZWVuU2tldGNoTmFtZXMuaW5kZXhPZihza2V0Y2hOYW1lKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdW5zZWVuU2tldGNoTmFtZXMucHVzaChza2V0Y2hOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5zZWVuU2tldGNoTmFtZXM7XHJcbn1cbn0se1wiLi9pbnRlcmFjdGl2ZS1sb2dvcy9jb25uZWN0LXBvaW50cy1za2V0Y2guanNcIjo2LFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9oYWxmdG9uZS1mbGFzaGxpZ2h0LXdvcmQuanNcIjo5LFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9ub2lzeS13b3JkLXNrZXRjaC5qc1wiOjEwLFwiLi91dGlsaXRpZXMuanNcIjoxOSxcImpzLWNvb2tpZVwiOjF9XSwxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFBvcnRmb2xpb0ZpbHRlcjtcclxuXHJcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKFwiLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG52YXIgZGVmYXVsdEJyZWFrcG9pbnRzID0gW1xyXG4gICAgeyB3aWR0aDogMTIwMCwgY29sczogMywgc3BhY2luZzogMTUgfSxcclxuICAgIHsgd2lkdGg6IDk5MiwgY29sczogMywgc3BhY2luZzogMTUgfSxcclxuICAgIHsgd2lkdGg6IDcwMCwgY29sczogMywgc3BhY2luZzogMTUgfSxcclxuICAgIHsgd2lkdGg6IDYwMCwgY29sczogMiwgc3BhY2luZzogMTAgfSxcclxuICAgIHsgd2lkdGg6IDQ4MCwgY29sczogMiwgc3BhY2luZzogMTAgfSxcclxuICAgIHsgd2lkdGg6IDMyMCwgY29sczogMSwgc3BhY2luZzogMTAgfVxyXG5dO1xyXG5cclxuZnVuY3Rpb24gUG9ydGZvbGlvRmlsdGVyKGxvYWRlciwgYnJlYWtwb2ludHMsIGFzcGVjdFJhdGlvLCB0cmFuc2l0aW9uRHVyYXRpb24pIHtcclxuICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcclxuICAgIHRoaXMuX2dyaWRTcGFjaW5nID0gMDtcclxuICAgIHRoaXMuX2FzcGVjdFJhdGlvID0gKGFzcGVjdFJhdGlvICE9PSB1bmRlZmluZWQpID8gYXNwZWN0UmF0aW8gOiAoMTYvOSk7XHJcbiAgICB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24gPSAodHJhbnNpdGlvbkR1cmF0aW9uICE9PSB1bmRlZmluZWQpID8gXHJcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uIDogODAwO1xyXG4gICAgdGhpcy5fYnJlYWtwb2ludHMgPSAoYnJlYWtwb2ludHMgIT09IHVuZGVmaW5lZCkgPyBcclxuICAgICAgICBicmVha3BvaW50cy5zbGljZSgpIDogZGVmYXVsdEJyZWFrcG9pbnRzLnNsaWNlKCk7XHJcbiAgICB0aGlzLl8kZ3JpZCA9ICQoXCIjcG9ydGZvbGlvLWdyaWRcIik7XHJcbiAgICB0aGlzLl8kbmF2ID0gJChcIiNwb3J0Zm9saW8tbmF2XCIpO1xyXG4gICAgdGhpcy5fJHByb2plY3RzID0gW107XHJcbiAgICB0aGlzLl8kY2F0ZWdvcmllcyA9IHt9O1xyXG4gICAgdGhpcy5fcm93cyA9IDA7XHJcbiAgICB0aGlzLl9jb2xzID0gMDtcclxuICAgIHRoaXMuX2ltYWdlSGVpZ2h0ID0gMDtcclxuICAgIHRoaXMuX2ltYWdlV2lkdGggPSAwO1xyXG5cclxuICAgIC8vIFNvcnQgdGhlIGJyZWFrcG9pbnRzIGluIGRlc2NlbmRpbmcgb3JkZXJcclxuICAgIHRoaXMuX2JyZWFrcG9pbnRzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIGlmIChhLndpZHRoIDwgYi53aWR0aCkgcmV0dXJuIC0xO1xyXG4gICAgICAgIGVsc2UgaWYgKGEud2lkdGggPiBiLndpZHRoKSByZXR1cm4gMTtcclxuICAgICAgICBlbHNlIHJldHVybiAwO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FjaGVQcm9qZWN0cygpO1xyXG4gICAgdGhpcy5fY3JlYXRlR3JpZCgpO1xyXG5cclxuICAgIHRoaXMuXyRncmlkLmZpbmQoXCIucHJvamVjdCBhXCIpLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25Qcm9qZWN0Q2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdmFyIHFzID0gdXRpbGl0aWVzLmdldFF1ZXJ5UGFyYW1ldGVycygpO1xyXG4gICAgdmFyIGluaXRpYWxDYXRlZ29yeSA9IHFzLmNhdGVnb3J5IHx8IFwiYWxsXCI7XHJcbiAgICB2YXIgY2F0ZWdvcnkgPSBpbml0aWFsQ2F0ZWdvcnkudG9Mb3dlckNhc2UoKTtcclxuICAgIHRoaXMuXyRhY3RpdmVOYXZJdGVtID0gdGhpcy5fJG5hdi5maW5kKFwiYVtkYXRhLWNhdGVnb3J5PVwiICsgY2F0ZWdvcnkgKyBcIl1cIik7XHJcbiAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2ZpbHRlclByb2plY3RzKGNhdGVnb3J5KTtcclxuICAgICQoXCIjcG9ydGZvbGlvLW5hdiBhXCIpLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25OYXZDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgdGhpcy5fY3JlYXRlR3JpZC5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5zZWxlY3RDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgY2F0ZWdvcnkgPSAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSkgfHwgXCJhbGxcIjtcclxuICAgIHZhciAkc2VsZWN0ZWROYXYgPSB0aGlzLl8kbmF2LmZpbmQoXCJhW2RhdGEtY2F0ZWdvcnk9XCIgKyBjYXRlZ29yeSArIFwiXVwiKTtcclxuICAgIGlmICgkc2VsZWN0ZWROYXYubGVuZ3RoICYmICEkc2VsZWN0ZWROYXYuaXModGhpcy5fJGFjdGl2ZU5hdkl0ZW0pKSB7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0ucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0gPSAkc2VsZWN0ZWROYXY7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0uYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyUHJvamVjdHMoY2F0ZWdvcnkpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fZmlsdGVyUHJvamVjdHMgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICAgIHZhciAkc2VsZWN0ZWRFbGVtZW50cyA9IHRoaXMuX2dldFByb2plY3RzSW5DYXRlZ29yeShjYXRlZ29yeSk7XHJcblxyXG4gICAgLy8gQW5pbWF0ZSB0aGUgZ3JpZCB0byB0aGUgY29ycmVjdCBoZWlnaHQgdG8gY29udGFpbiB0aGUgcm93c1xyXG4gICAgdGhpcy5fYW5pbWF0ZUdyaWRIZWlnaHQoJHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoKTtcclxuICAgIFxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBwcm9qZWN0c1xyXG4gICAgdGhpcy5fJHByb2plY3RzLmZvckVhY2goZnVuY3Rpb24gKCRlbGVtZW50KSB7XHJcbiAgICAgICAgLy8gU3RvcCBhbGwgYW5pbWF0aW9uc1xyXG4gICAgICAgICRlbGVtZW50LnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgICAgICAvLyBJZiBhbiBlbGVtZW50IGlzIG5vdCBzZWxlY3RlZDogZHJvcCB6LWluZGV4ICYgYW5pbWF0ZSBvcGFjaXR5IC0+IGhpZGVcclxuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9ICRzZWxlY3RlZEVsZW1lbnRzLmluZGV4T2YoJGVsZW1lbnQpOyBcclxuICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwiekluZGV4XCIsIC0xKTtcclxuICAgICAgICAgICAgJGVsZW1lbnQudmVsb2NpdHkoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24sIFwiZWFzZUluT3V0Q3ViaWNcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgYW4gZWxlbWVudCBpcyBzZWxlY3RlZDogc2hvdyAmIGJ1bXAgei1pbmRleCAmIGFuaW1hdGUgdG8gcG9zaXRpb24gXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRlbGVtZW50LnNob3coKTtcclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwiekluZGV4XCIsIDApO1xyXG4gICAgICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5faW5kZXhUb1hZKHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgICAgICAkZWxlbWVudC52ZWxvY2l0eSh7IFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgIHRvcDogbmV3UG9zLnkgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBuZXdQb3MueCArIFwicHhcIlxyXG4gICAgICAgICAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24sIFwiZWFzZUluT3V0Q3ViaWNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2FuaW1hdGVHcmlkSGVpZ2h0ID0gZnVuY3Rpb24gKG51bUVsZW1lbnRzKSB7XHJcbiAgICB0aGlzLl8kZ3JpZC52ZWxvY2l0eShcInN0b3BcIik7XHJcbiAgICB2YXIgY3VyUm93cyA9IE1hdGguY2VpbChudW1FbGVtZW50cyAvIHRoaXMuX2NvbHMpO1xyXG4gICAgdGhpcy5fJGdyaWQudmVsb2NpdHkoe1xyXG4gICAgICAgIGhlaWdodDogdGhpcy5faW1hZ2VIZWlnaHQgKiBjdXJSb3dzICsgXHJcbiAgICAgICAgICAgIHRoaXMuX2dyaWRTcGFjaW5nICogKGN1clJvd3MgLSAxKSArIFwicHhcIlxyXG4gICAgfSwgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uKTtcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2dldFByb2plY3RzSW5DYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgaWYgKGNhdGVnb3J5ID09PSBcImFsbFwiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuXyRwcm9qZWN0cztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl8kY2F0ZWdvcmllc1tjYXRlZ29yeV0gfHwgW10pO1xyXG4gICAgfSAgICAgICAgXHJcbn07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jYWNoZVByb2plY3RzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fJHByb2plY3RzID0gW107XHJcbiAgICB0aGlzLl8kY2F0ZWdvcmllcyA9IHt9O1xyXG4gICAgdGhpcy5fJGdyaWQuZmluZChcIi5wcm9qZWN0XCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuICAgICAgICB0aGlzLl8kcHJvamVjdHMucHVzaCgkZWxlbWVudCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5TmFtZXMgPSAkZWxlbWVudC5kYXRhKFwiY2F0ZWdvcmllc1wiKS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYXRlZ29yeU5hbWVzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXRlZ29yeSA9ICQudHJpbShjYXRlZ29yeU5hbWVzW2ldKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuXyRjYXRlZ29yaWVzW2NhdGVnb3J5XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGNhdGVnb3JpZXNbY2F0ZWdvcnldID0gWyRlbGVtZW50XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRjYXRlZ29yaWVzW2NhdGVnb3J5XS5wdXNoKCRlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbn07XHJcblxyXG4vLyBQb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jYWxjdWxhdGVHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgdmFyIGdyaWRXaWR0aCA9IHRoaXMuXyRncmlkLmlubmVyV2lkdGgoKTtcclxuLy8gICAgIHRoaXMuX2NvbHMgPSBNYXRoLmZsb29yKChncmlkV2lkdGggKyB0aGlzLl9ncmlkU3BhY2luZykgLyBcclxuLy8gICAgICAgICAodGhpcy5fbWluSW1hZ2VXaWR0aCArIHRoaXMuX2dyaWRTcGFjaW5nKSk7XHJcbi8vICAgICB0aGlzLl9yb3dzID0gTWF0aC5jZWlsKHRoaXMuXyRwcm9qZWN0cy5sZW5ndGggLyB0aGlzLl9jb2xzKTtcclxuLy8gICAgIHRoaXMuX2ltYWdlV2lkdGggPSAoZ3JpZFdpZHRoIC0gKCh0aGlzLl9jb2xzIC0gMSkgKiB0aGlzLl9ncmlkU3BhY2luZykpIC8gXHJcbi8vICAgICAgICAgdGhpcy5fY29scztcclxuLy8gICAgIHRoaXMuX2ltYWdlSGVpZ2h0ID0gdGhpcy5faW1hZ2VXaWR0aCAqICgxIC8gdGhpcy5fYXNwZWN0UmF0aW8pO1xyXG4vLyB9O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fY2FsY3VsYXRlR3JpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBncmlkV2lkdGggPSB0aGlzLl8kZ3JpZC5pbm5lcldpZHRoKCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2JyZWFrcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgaWYgKGdyaWRXaWR0aCA8PSB0aGlzLl9icmVha3BvaW50c1tpXS53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb2xzID0gdGhpcy5fYnJlYWtwb2ludHNbaV0uY29scztcclxuICAgICAgICAgICAgdGhpcy5fZ3JpZFNwYWNpbmcgPSB0aGlzLl9icmVha3BvaW50c1tpXS5zcGFjaW5nO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yb3dzID0gTWF0aC5jZWlsKHRoaXMuXyRwcm9qZWN0cy5sZW5ndGggLyB0aGlzLl9jb2xzKTtcclxuICAgIHRoaXMuX2ltYWdlV2lkdGggPSAoZ3JpZFdpZHRoIC0gKCh0aGlzLl9jb2xzIC0gMSkgKiB0aGlzLl9ncmlkU3BhY2luZykpIC8gXHJcbiAgICAgICAgdGhpcy5fY29scztcclxuICAgIHRoaXMuX2ltYWdlSGVpZ2h0ID0gdGhpcy5faW1hZ2VXaWR0aCAqICgxIC8gdGhpcy5fYXNwZWN0UmF0aW8pO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fY3JlYXRlR3JpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2NhbGN1bGF0ZUdyaWQoKTtcclxuXHJcbiAgICB0aGlzLl8kZ3JpZC5jc3MoXCJwb3NpdGlvblwiLCBcInJlbGF0aXZlXCIpO1xyXG4gICAgdGhpcy5fJGdyaWQuY3NzKHtcclxuICAgICAgICBoZWlnaHQ6IHRoaXMuX2ltYWdlSGVpZ2h0ICogdGhpcy5fcm93cyArIFxyXG4gICAgICAgICAgICB0aGlzLl9ncmlkU3BhY2luZyAqICh0aGlzLl9yb3dzIC0gMSkgKyBcInB4XCJcclxuICAgIH0pOyAgICBcclxuXHJcbiAgICB0aGlzLl8kcHJvamVjdHMuZm9yRWFjaChmdW5jdGlvbiAoJGVsZW1lbnQsIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuX2luZGV4VG9YWShpbmRleCk7XHJcbiAgICAgICAgJGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgdG9wOiBwb3MueSArIFwicHhcIixcclxuICAgICAgICAgICAgbGVmdDogcG9zLnggKyBcInB4XCIsXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLl9pbWFnZVdpZHRoICsgXCJweFwiLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX2ltYWdlSGVpZ2h0ICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LmJpbmQodGhpcykpOyAgICBcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX29uTmF2Q2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgIGlmICgkdGFyZ2V0LmlzKHRoaXMuXyRhY3RpdmVOYXZJdGVtKSkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuXyRhY3RpdmVOYXZJdGVtLmxlbmd0aCkgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0ucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkdGFyZ2V0LmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0gPSAkdGFyZ2V0O1xyXG4gICAgdmFyIGNhdGVnb3J5ID0gJHRhcmdldC5kYXRhKFwiY2F0ZWdvcnlcIikudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7XHJcbiAgICAgICAgdXJsOiBcIi93b3JrLmh0bWxcIixcclxuICAgICAgICBxdWVyeTogeyBjYXRlZ29yeTogY2F0ZWdvcnkgfVxyXG4gICAgfSwgbnVsbCwgXCIvd29yay5odG1sP2NhdGVnb3J5PVwiICsgY2F0ZWdvcnkpO1xyXG5cclxuICAgIHRoaXMuX2ZpbHRlclByb2plY3RzKGNhdGVnb3J5KTtcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX29uUHJvamVjdENsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgdmFyIHByb2plY3ROYW1lID0gJHRhcmdldC5kYXRhKFwibmFtZVwiKTtcclxuICAgIHZhciB1cmwgPSBcIi9wcm9qZWN0cy9cIiArIHByb2plY3ROYW1lICsgXCIuaHRtbFwiO1xyXG4gICAgdGhpcy5fbG9hZGVyLmxvYWRQYWdlKHVybCwge30sIHRydWUpO1xyXG59O1xyXG5cclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2luZGV4VG9YWSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgdmFyIHIgPSBNYXRoLmZsb29yKGluZGV4IC8gdGhpcy5fY29scyk7XHJcbiAgICB2YXIgYyA9IGluZGV4ICUgdGhpcy5fY29sczsgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IGMgKiB0aGlzLl9pbWFnZVdpZHRoICsgYyAqIHRoaXMuX2dyaWRTcGFjaW5nLFxyXG4gICAgICAgIHk6IHIgKiB0aGlzLl9pbWFnZUhlaWdodCArIHIgKiB0aGlzLl9ncmlkU3BhY2luZ1xyXG4gICAgfTtcclxufTtcbn0se1wiLi91dGlsaXRpZXMuanNcIjoxOX1dLDE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gU2xpZGVzaG93TW9kYWw7XHJcblxyXG52YXIgS0VZX0NPREVTID0ge1xyXG4gICAgTEVGVF9BUlJPVzogMzcsXHJcbiAgICBSSUdIVF9BUlJPVzogMzksXHJcbiAgICBFU0NBUEU6IDI3XHJcbn07XHJcblxyXG5mdW5jdGlvbiBTbGlkZXNob3dNb2RhbCgkY29udGFpbmVyLCBzbGlkZXNob3cpIHtcclxuICAgIHRoaXMuX3NsaWRlc2hvdyA9IHNsaWRlc2hvdztcclxuXHJcbiAgICB0aGlzLl8kbW9kYWwgPSAkY29udGFpbmVyLmZpbmQoXCIuc2xpZGVzaG93LW1vZGFsXCIpO1xyXG4gICAgdGhpcy5fJG92ZXJsYXkgPSB0aGlzLl8kbW9kYWwuZmluZChcIi5tb2RhbC1vdmVybGF5XCIpO1xyXG4gICAgdGhpcy5fJGNvbnRlbnQgPSB0aGlzLl8kbW9kYWwuZmluZChcIi5tb2RhbC1jb250ZW50c1wiKTtcclxuICAgIHRoaXMuXyRjYXB0aW9uID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIubW9kYWwtY2FwdGlvblwiKTtcclxuICAgIHRoaXMuXyRpbWFnZUNvbnRhaW5lciA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLm1vZGFsLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fJGltYWdlTGVmdCA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLmltYWdlLWFkdmFuY2UtbGVmdFwiKTtcclxuICAgIHRoaXMuXyRpbWFnZVJpZ2h0ID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIuaW1hZ2UtYWR2YW5jZS1yaWdodFwiKTtcclxuXHJcbiAgICB0aGlzLl9pbmRleCA9IDA7IC8vIEluZGV4IG9mIHNlbGVjdGVkIGltYWdlXHJcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgIFxyXG4gICAgdGhpcy5fJGltYWdlTGVmdC5vbihcImNsaWNrXCIsIHRoaXMuYWR2YW5jZUxlZnQuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kaW1hZ2VSaWdodC5vbihcImNsaWNrXCIsIHRoaXMuYWR2YW5jZVJpZ2h0LmJpbmQodGhpcykpO1xyXG4gICAgJChkb2N1bWVudCkub24oXCJrZXlkb3duXCIsIHRoaXMuX29uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBHaXZlIGpRdWVyeSBjb250cm9sIG92ZXIgc2hvd2luZy9oaWRpbmdcclxuICAgIHRoaXMuXyRtb2RhbC5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICB0aGlzLl8kbW9kYWwuaGlkZSgpO1xyXG5cclxuICAgIC8vIEV2ZW50c1xyXG4gICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIHRoaXMuX29uUmVzaXplLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJG92ZXJsYXkub24oXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJG1vZGFsLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub24oXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgXHJcbiAgICB0aGlzLl91cGRhdGVDb250cm9scygpO1xyXG5cclxuICAgIC8vIFNpemUgb2YgZm9udGF3ZXNvbWUgaWNvbnMgbmVlZHMgYSBzbGlnaHQgZGVsYXkgKHVudGlsIHN0YWNrIGlzIGNsZWFyKSBmb3JcclxuICAgIC8vIHNvbWUgcmVhc29uXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9vblJlc2l6ZSgpO1xyXG4gICAgfS5iaW5kKHRoaXMpLCAwKTtcclxufVxyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLmFkdmFuY2VMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5zaG93SW1hZ2VBdCh0aGlzLl9pbmRleCAtIDEpO1xyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLmFkdmFuY2VSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuc2hvd0ltYWdlQXQodGhpcy5faW5kZXggKyAxKTtcclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5zaG93SW1hZ2VBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgaW5kZXggPSBNYXRoLm1heChpbmRleCwgMCk7XHJcbiAgICBpbmRleCA9IE1hdGgubWluKGluZGV4LCB0aGlzLl9zbGlkZXNob3cuZ2V0TnVtSW1hZ2VzKCkgLSAxKTtcclxuICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XHJcbiAgICB2YXIgJGltZyA9IHRoaXMuX3NsaWRlc2hvdy5nZXRHYWxsZXJ5SW1hZ2UodGhpcy5faW5kZXgpO1xyXG4gICAgdmFyIGNhcHRpb24gPSB0aGlzLl9zbGlkZXNob3cuZ2V0Q2FwdGlvbih0aGlzLl9pbmRleCk7XHJcblxyXG4gICAgdGhpcy5fJGltYWdlQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAkKFwiPGltZz5cIiwge3NyYzogJGltZy5hdHRyKFwic3JjXCIpfSlcclxuICAgICAgICAuYXBwZW5kVG8odGhpcy5fJGltYWdlQ29udGFpbmVyKTtcclxuXHJcbiAgICB0aGlzLl8kY2FwdGlvbi5lbXB0eSgpO1xyXG4gICAgaWYgKGNhcHRpb24pIHtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiZmlndXJlLW51bWJlclwiKVxyXG4gICAgICAgICAgICAudGV4dChcIkZpZy4gXCIgKyAodGhpcy5faW5kZXggKyAxKSArIFwiOiBcIilcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRjYXB0aW9uKTtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiY2FwdGlvbi10ZXh0XCIpXHJcbiAgICAgICAgICAgIC50ZXh0KGNhcHRpb24pXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kY2FwdGlvbik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuX29uUmVzaXplKCk7XHJcbiAgICB0aGlzLl91cGRhdGVDb250cm9scygpO1xyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIGluZGV4ID0gaW5kZXggfHwgMDtcclxuICAgIHRoaXMuXyRtb2RhbC5zaG93KCk7XHJcbiAgICB0aGlzLnNob3dJbWFnZUF0KGluZGV4KTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl8kbW9kYWwuaGlkZSgpO1xyXG4gICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuX29uS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzT3BlbikgcmV0dXJuO1xyXG4gICAgaWYgKGUud2hpY2ggPT09IEtFWV9DT0RFUy5MRUZUX0FSUk9XKSB7XHJcbiAgICAgICAgdGhpcy5hZHZhbmNlTGVmdCgpO1xyXG4gICAgfSBlbHNlIGlmIChlLndoaWNoID09PSBLRVlfQ09ERVMuUklHSFRfQVJST1cpIHtcclxuICAgICAgICB0aGlzLmFkdmFuY2VSaWdodCgpO1xyXG4gICAgfSBlbHNlIGlmIChlLndoaWNoID09PSBLRVlfQ09ERVMuRVNDQVBFKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpOyAgIFxyXG4gICAgfVxyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLl91cGRhdGVDb250cm9scyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIFJlLWVuYWJsZVxyXG4gICAgdGhpcy5fJGltYWdlUmlnaHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIHRoaXMuXyRpbWFnZUxlZnQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIFxyXG4gICAgLy8gRGlzYWJsZSBpZiB3ZSd2ZSByZWFjaGVkIHRoZSB0aGUgbWF4IG9yIG1pbiBsaW1pdFxyXG4gICAgaWYgKHRoaXMuX2luZGV4ID49ICh0aGlzLl9zbGlkZXNob3cuZ2V0TnVtSW1hZ2VzKCkgLSAxKSkge1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZVJpZ2h0LmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2luZGV4IDw9IDApIHtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VMZWZ0LmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyICRpbWFnZSA9IHRoaXMuXyRpbWFnZUNvbnRhaW5lci5maW5kKFwiaW1nXCIpO1xyXG5cclxuICAgIC8vIFJlc2V0IHRoZSBjb250ZW50J3Mgd2lkdGhcclxuICAgIHRoaXMuXyRjb250ZW50LndpZHRoKFwiXCIpO1xyXG5cclxuICAgIC8vIEZpbmQgdGhlIHNpemUgb2YgdGhlIGNvbXBvbmVudHMgdGhhdCBuZWVkIHRvIGJlIGRpc3BsYXllZCBpbiBhZGRpdGlvbiB0byBcclxuICAgIC8vIHRoZSBpbWFnZVxyXG4gICAgdmFyIGNvbnRyb2xzV2lkdGggPSB0aGlzLl8kaW1hZ2VMZWZ0Lm91dGVyV2lkdGgodHJ1ZSkgKyBcclxuICAgICAgICB0aGlzLl8kaW1hZ2VSaWdodC5vdXRlcldpZHRoKHRydWUpO1xyXG4gICAgLy8gSGFjayBmb3Igbm93IC0gYnVkZ2V0IGZvciAyeCB0aGUgY2FwdGlvbiBoZWlnaHQuIFxyXG4gICAgdmFyIGNhcHRpb25IZWlnaHQgPSAyICogdGhpcy5fJGNhcHRpb24ub3V0ZXJIZWlnaHQodHJ1ZSk7IFxyXG4gICAgdmFyIGltYWdlUGFkZGluZyA9ICRpbWFnZS5pbm5lcldpZHRoKCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBhdmFpbGFibGUgYXJlYSBmb3IgdGhlIG1vZGFsXHJcbiAgICB2YXIgbXcgPSB0aGlzLl8kbW9kYWwud2lkdGgoKSAtIGNvbnRyb2xzV2lkdGg7XHJcbiAgICB2YXIgbWggPSB0aGlzLl8kbW9kYWwuaGVpZ2h0KCkgLSBjYXB0aW9uSGVpZ2h0O1xyXG5cclxuICAgIC8vIEZpdCB0aGUgaW1hZ2UgdG8gdGhlIHJlbWFpbmluZyBzY3JlZW4gcmVhbCBlc3RhdGUgXHJcbiAgICB2YXIgc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaXcgPSAkaW1hZ2UucHJvcChcIm5hdHVyYWxXaWR0aFwiKTtcclxuICAgICAgICB2YXIgaWggPSAkaW1hZ2UucHJvcChcIm5hdHVyYWxIZWlnaHRcIik7XHJcbiAgICAgICAgdmFyIHN3ID0gaXcgLyBtdztcclxuICAgICAgICB2YXIgc2ggPSBpaCAvIG1oO1xyXG4gICAgICAgIHZhciBzID0gTWF0aC5tYXgoc3csIHNoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHdpZHRoL2hlaWdodCB1c2luZyBDU1MgaW4gb3JkZXIgdG8gcmVzcGVjdCBib3gtc2l6aW5nXHJcbiAgICAgICAgaWYgKHMgPiAxKSB7XHJcbiAgICAgICAgICAgICRpbWFnZS5jc3MoXCJ3aWR0aFwiLCBpdyAvIHMgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAkaW1hZ2UuY3NzKFwiaGVpZ2h0XCIsIGloIC8gcyArIFwicHhcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGltYWdlLmNzcyhcIndpZHRoXCIsIGl3ICsgXCJweFwiKTtcclxuICAgICAgICAgICAgJGltYWdlLmNzcyhcImhlaWdodFwiLCBpaCArIFwicHhcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl8kaW1hZ2VSaWdodC5jc3MoXCJ0b3BcIiwgJGltYWdlLm91dGVySGVpZ2h0KCkgLyAyICsgXCJweFwiKTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VMZWZ0LmNzcyhcInRvcFwiLCAkaW1hZ2Uub3V0ZXJIZWlnaHQoKSAvIDIgKyBcInB4XCIpO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIGNvbnRlbnQgd3JhcHBlciB0byBiZSB0aGUgd2lkdGggb2YgdGhlIGltYWdlLiBUaGlzIHdpbGwga2VlcCBcclxuICAgICAgICAvLyB0aGUgY2FwdGlvbiBmcm9tIGV4cGFuZGluZyBiZXlvbmQgdGhlIGltYWdlLlxyXG4gICAgICAgIHRoaXMuXyRjb250ZW50LndpZHRoKCRpbWFnZS5vdXRlcldpZHRoKHRydWUpKTsgICAgICAgIFxyXG4gICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgIGlmICgkaW1hZ2UucHJvcChcImNvbXBsZXRlXCIpKSBzZXRTaXplKCk7XHJcbiAgICBlbHNlICRpbWFnZS5vbmUoXCJsb2FkXCIsIHNldFNpemUpO1xyXG59O1xyXG5cbn0se31dLDE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBTbGlkZXNob3dNb2RhbCA9IHJlcXVpcmUoXCIuL3NsaWRlc2hvdy1tb2RhbC5qc1wiKTtcclxudmFyIFRodW1ibmFpbFNsaWRlciA9IHJlcXVpcmUoXCIuL3RodW1ibmFpbC1zbGlkZXIuanNcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uKHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9ICh0cmFuc2l0aW9uRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgP1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24gOiA0MDA7XHJcbiAgICAgICAgdGhpcy5fc2xpZGVzaG93cyA9IFtdO1xyXG4gICAgICAgICQoXCIuc2xpZGVzaG93XCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZXNob3cgPSBuZXcgU2xpZGVzaG93KCQoZWxlbWVudCksIHRyYW5zaXRpb25EdXJhdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NsaWRlc2hvd3MucHVzaChzbGlkZXNob3cpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBTbGlkZXNob3coJGNvbnRhaW5lciwgdHJhbnNpdGlvbkR1cmF0aW9uKSB7XHJcbiAgICB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24gPSB0cmFuc2l0aW9uRHVyYXRpb247XHJcbiAgICB0aGlzLl8kY29udGFpbmVyID0gJGNvbnRhaW5lcjtcclxuICAgIHRoaXMuX2luZGV4ID0gMDsgLy8gSW5kZXggb2Ygc2VsZWN0ZWQgaW1hZ2VcclxuXHJcbiAgICAvLyBDcmVhdGUgY29tcG9uZW50c1xyXG4gICAgdGhpcy5fdGh1bWJuYWlsU2xpZGVyID0gbmV3IFRodW1ibmFpbFNsaWRlcigkY29udGFpbmVyLCB0aGlzKTtcclxuICAgIHRoaXMuX21vZGFsID0gbmV3IFNsaWRlc2hvd01vZGFsKCRjb250YWluZXIsIHRoaXMpO1xyXG5cclxuICAgIC8vIENhY2hlIGFuZCBjcmVhdGUgbmVjZXNzYXJ5IERPTSBlbGVtZW50cyAgIFxyXG4gICAgdGhpcy5fJGNhcHRpb25Db250YWluZXIgPSAkY29udGFpbmVyLmZpbmQoXCIuY2FwdGlvblwiKTtcclxuICAgIHRoaXMuXyRzZWxlY3RlZEltYWdlQ29udGFpbmVyID0gJGNvbnRhaW5lci5maW5kKFwiLnNlbGVjdGVkLWltYWdlXCIpO1xyXG5cclxuICAgIC8vIE9wZW4gbW9kYWwgb24gY2xpY2tpbmcgc2VsZWN0ZWQgaW1hZ2VcclxuICAgIHRoaXMuXyRzZWxlY3RlZEltYWdlQ29udGFpbmVyLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX21vZGFsLm9wZW4odGhpcy5faW5kZXgpOyAgICBcclxuICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gTG9hZCBpbWFnZXNcclxuICAgIHRoaXMuXyRnYWxsZXJ5SW1hZ2VzID0gdGhpcy5fbG9hZEdhbGxlcnlJbWFnZXMoKTtcclxuICAgIHRoaXMuX251bUltYWdlcyA9IHRoaXMuXyRnYWxsZXJ5SW1hZ2VzLmxlbmd0aDtcclxuXHJcbiAgICAvLyBTaG93IHRoZSBmaXJzdCBpbWFnZVxyXG4gICAgdGhpcy5zaG93SW1hZ2UoMCk7XHJcbn1cclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0QWN0aXZlSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5kZXg7XHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLmdldE51bUltYWdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9udW1JbWFnZXM7XHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLmdldEdhbGxlcnlJbWFnZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgcmV0dXJuIHRoaXMuXyRnYWxsZXJ5SW1hZ2VzW2luZGV4XTtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0Q2FwdGlvbiA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgcmV0dXJuIHRoaXMuXyRnYWxsZXJ5SW1hZ2VzW2luZGV4XS5kYXRhKFwiY2FwdGlvblwiKTtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuc2hvd0ltYWdlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAvLyBSZXNldCBhbGwgaW1hZ2VzIHRvIGludmlzaWJsZSBhbmQgbG93ZXN0IHotaW5kZXguIFRoaXMgY291bGQgYmUgc21hcnRlcixcclxuICAgIC8vIGxpa2UgSG92ZXJTbGlkZXNob3csIGFuZCBvbmx5IHJlc2V0IGV4YWN0bHkgd2hhdCB3ZSBuZWVkLCBidXQgd2UgYXJlbid0IFxyXG4gICAgLy8gd2FzdGluZyB0aGF0IG1hbnkgY3ljbGVzLlxyXG4gICAgdGhpcy5fJGdhbGxlcnlJbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoJGdhbGxlcnlJbWFnZSkge1xyXG4gICAgICAgICRnYWxsZXJ5SW1hZ2UuY3NzKHtcclxuICAgICAgICAgICAgXCJ6SW5kZXhcIjogMCxcclxuICAgICAgICAgICAgXCJvcGFjaXR5XCI6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgICAkZ2FsbGVyeUltYWdlLnZlbG9jaXR5KFwic3RvcFwiKTsgLy8gU3RvcCBhbnkgYW5pbWF0aW9uc1xyXG4gICAgfSwgdGhpcyk7XHJcblxyXG4gICAgLy8gQ2FjaGUgcmVmZXJlbmNlcyB0byB0aGUgbGFzdCBhbmQgY3VycmVudCBpbWFnZVxyXG4gICAgdmFyICRsYXN0SW1hZ2UgPSB0aGlzLl8kZ2FsbGVyeUltYWdlc1t0aGlzLl9pbmRleF07XHJcbiAgICB2YXIgJGN1cnJlbnRJbWFnZSA9IHRoaXMuXyRnYWxsZXJ5SW1hZ2VzW2luZGV4XTtcclxuICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XHJcblxyXG4gICAgLy8gTWFrZSB0aGUgbGFzdCBpbWFnZSB2aXNpc2JsZSBhbmQgdGhlbiBhbmltYXRlIHRoZSBjdXJyZW50IGltYWdlIGludG8gdmlld1xyXG4gICAgLy8gb24gdG9wIG9mIHRoZSBsYXN0XHJcbiAgICAkbGFzdEltYWdlLmNzcyhcInpJbmRleFwiLCAxKTtcclxuICAgICRjdXJyZW50SW1hZ2UuY3NzKFwiekluZGV4XCIsIDIpO1xyXG4gICAgJGxhc3RJbWFnZS5jc3MoXCJvcGFjaXR5XCIsIDEpO1xyXG4gICAgJGN1cnJlbnRJbWFnZS52ZWxvY2l0eSh7XCJvcGFjaXR5XCI6IDF9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24sIFxyXG4gICAgICAgIFwiZWFzZUluT3V0UXVhZFwiKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGNhcHRpb24sIGlmIGl0IGV4aXN0cyBvbiB0aGUgdGh1bWJuYWlsXHJcbiAgICB2YXIgY2FwdGlvbiA9ICRjdXJyZW50SW1hZ2UuZGF0YShcImNhcHRpb25cIik7XHJcbiAgICBpZiAoY2FwdGlvbikge1xyXG4gICAgICAgIHRoaXMuXyRjYXB0aW9uQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgJChcIjxzcGFuPlwiKS5hZGRDbGFzcyhcImZpZ3VyZS1udW1iZXJcIilcclxuICAgICAgICAgICAgLnRleHQoXCJGaWcuIFwiICsgKHRoaXMuX2luZGV4ICsgMSkgKyBcIjogXCIpXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kY2FwdGlvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgJChcIjxzcGFuPlwiKS5hZGRDbGFzcyhcImNhcHRpb24tdGV4dFwiKVxyXG4gICAgICAgICAgICAudGV4dChjYXB0aW9uKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8odGhpcy5fJGNhcHRpb25Db250YWluZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE9iamVjdCBpbWFnZSBmaXQgcG9seWZpbGwgYnJlYWtzIGpRdWVyeSBhdHRyKC4uLiksIHNvIGZhbGxiYWNrIHRvIGp1c3QgXHJcbiAgICAvLyB1c2luZyBlbGVtZW50LnNyY1xyXG4gICAgLy8gVE9ETzogTGF6eSFcclxuICAgIC8vIGlmICgkY3VycmVudEltYWdlLmdldCgwKS5zcmMgPT09IFwiXCIpIHtcclxuICAgIC8vICAgICAkY3VycmVudEltYWdlLmdldCgwKS5zcmMgPSAkY3VycmVudEltYWdlLmRhdGEoXCJpbWFnZS11cmxcIik7XHJcbiAgICAvLyB9XHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLl9sb2FkR2FsbGVyeUltYWdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIENyZWF0ZSBlbXB0eSBpbWFnZXMgaW4gdGhlIGdhbGxlcnkgZm9yIGVhY2ggdGh1bWJuYWlsLiBUaGlzIGhlbHBzIHVzIGRvXHJcbiAgICAvLyBsYXp5IGxvYWRpbmcgb2YgZ2FsbGVyeSBpbWFnZXMgYW5kIGFsbG93cyB1cyB0byBjcm9zcy1mYWRlIGltYWdlcy5cclxuICAgIHZhciAkZ2FsbGVyeUltYWdlcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90aHVtYm5haWxTbGlkZXIuZ2V0TnVtVGh1bWJuYWlscygpOyBpICs9IDEpIHtcclxuICAgICAgICAvLyBHZXQgdGhlIHRodW1ibmFpbCBlbGVtZW50IHdoaWNoIGhhcyBwYXRoIGFuZCBjYXB0aW9uIGRhdGFcclxuICAgICAgICB2YXIgJHRodW1iID0gdGhpcy5fdGh1bWJuYWlsU2xpZGVyLmdldCRUaHVtYm5haWwoaSk7XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgaWQgZnJvbSB0aGUgcGF0aCB0byB0aGUgbGFyZ2UgaW1hZ2VcclxuICAgICAgICB2YXIgbGFyZ2VQYXRoID0gJHRodW1iLmRhdGEoXCJsYXJnZS1wYXRoXCIpO1xyXG4gICAgICAgIHZhciBpZCA9IGxhcmdlUGF0aC5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCIuXCIpWzBdO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBnYWxsZXJ5IGltYWdlIGVsZW1lbnRcclxuICAgICAgICB2YXIgJGdhbGxlcnlJbWFnZSA9ICQoXCI8aW1nPlwiLCB7aWQ6IGlkfSlcclxuICAgICAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgdG9wOiBcIjBweFwiLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogXCIwcHhcIixcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgICAgICAgICB6SW5kZXg6IDBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmRhdGEoXCJpbWFnZS11cmxcIiwgbGFyZ2VQYXRoKSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuZGF0YShcImNhcHRpb25cIiwgJHRodW1iLmRhdGEoXCJjYXB0aW9uXCIpKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8odGhpcy5fJHNlbGVjdGVkSW1hZ2VDb250YWluZXIpO1xyXG4gICAgICAgICRnYWxsZXJ5SW1hZ2UuZ2V0KDApLnNyYyA9IGxhcmdlUGF0aDsgLy8gVE9ETzogTWFrZSB0aGlzIGxhenkhXHJcbiAgICAgICAgJGdhbGxlcnlJbWFnZXMucHVzaCgkZ2FsbGVyeUltYWdlKTtcclxuICAgIH1cclxuICAgIHJldHVybiAkZ2FsbGVyeUltYWdlcztcclxufTtcbn0se1wiLi9zbGlkZXNob3ctbW9kYWwuanNcIjoxNixcIi4vdGh1bWJuYWlsLXNsaWRlci5qc1wiOjE4fV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBUaHVtYm5haWxTbGlkZXI7XHJcblxyXG5mdW5jdGlvbiBUaHVtYm5haWxTbGlkZXIoJGNvbnRhaW5lciwgc2xpZGVzaG93KSB7XHJcbiAgICB0aGlzLl8kY29udGFpbmVyID0gJGNvbnRhaW5lcjtcclxuICAgIHRoaXMuX3NsaWRlc2hvdyA9IHNsaWRlc2hvdztcclxuXHJcbiAgICB0aGlzLl9pbmRleCA9IDA7IC8vIEluZGV4IG9mIHNlbGVjdGVkIHRodW1ibmFpbFxyXG4gICAgdGhpcy5fc2Nyb2xsSW5kZXggPSAwOyAvLyBJbmRleCBvZiB0aGUgdGh1bWJuYWlsIHRoYXQgaXMgY3VycmVudGx5IGNlbnRlcmVkXHJcblxyXG4gICAgLy8gQ2FjaGUgYW5kIGNyZWF0ZSBuZWNlc3NhcnkgRE9NIGVsZW1lbnRzXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyID0gJGNvbnRhaW5lci5maW5kKFwiLnRodW1ibmFpbHNcIik7XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsSW1hZ2VzID0gdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci5maW5kKFwiaW1nXCIpO1xyXG4gICAgdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwID0gJGNvbnRhaW5lci5maW5kKFwiLnZpc2libGUtdGh1bWJuYWlsc1wiKTtcclxuICAgIHRoaXMuXyRhZHZhbmNlTGVmdCA9ICRjb250YWluZXIuZmluZChcIi50aHVtYm5haWwtYWR2YW5jZS1sZWZ0XCIpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VSaWdodCA9ICRjb250YWluZXIuZmluZChcIi50aHVtYm5haWwtYWR2YW5jZS1yaWdodFwiKTtcclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggdGhlIHRodW1ibmFpbHMsIGdpdmUgdGhlbSBhbiBpbmRleCBkYXRhIGF0dHJpYnV0ZSBhbmQgY2FjaGVcclxuICAgIC8vIGEgcmVmZXJlbmNlIHRvIHRoZW0gaW4gYW4gYXJyYXlcclxuICAgIHRoaXMuXyR0aHVtYm5haWxzID0gW107XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsSW1hZ2VzLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyICR0aHVtYm5haWwgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICR0aHVtYm5haWwuZGF0YShcImluZGV4XCIsIGluZGV4KTtcclxuICAgICAgICB0aGlzLl8kdGh1bWJuYWlscy5wdXNoKCR0aHVtYm5haWwpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX251bUltYWdlcyA9IHRoaXMuXyR0aHVtYm5haWxzLmxlbmd0aDtcclxuXHJcbiAgICAvLyBMZWZ0L3JpZ2h0IGNvbnRyb2xzXHJcbiAgICB0aGlzLl8kYWR2YW5jZUxlZnQub24oXCJjbGlja1wiLCB0aGlzLmFkdmFuY2VMZWZ0LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VSaWdodC5vbihcImNsaWNrXCIsIHRoaXMuYWR2YW5jZVJpZ2h0LmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIENsaWNraW5nIGEgdGh1bWJuYWlsXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsSW1hZ2VzLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25DbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9hY3RpdmF0ZVRodW1ibmFpbCgwKTtcclxuXHJcbiAgICAvLyBSZXNpemVcclxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCB0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBGb3Igc29tZSByZWFzb24sIHRoZSBzaXppbmcgb24gdGhlIGNvbnRyb2xzIGlzIG1lc3NlZCB1cCBpZiBpdCBydW5zXHJcbiAgICAvLyBpbW1lZGlhdGVseSAtIGRlbGF5IHNpemluZyB1bnRpbCBzdGFjayBpcyBjbGVhclxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fb25SZXNpemUoKTtcclxuICAgIH0uYmluZCh0aGlzKSwgMCk7XHJcbn1cclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuZ2V0QWN0aXZlSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5kZXg7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLmdldE51bVRodW1ibmFpbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbnVtSW1hZ2VzO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5nZXQkVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJHRodW1ibmFpbHNbaW5kZXhdO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5hZHZhbmNlTGVmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdJbmRleCA9IHRoaXMuX3Njcm9sbEluZGV4IC0gdGhpcy5fbnVtVmlzaWJsZTtcclxuICAgIG5ld0luZGV4ID0gTWF0aC5tYXgobmV3SW5kZXgsIDApO1xyXG4gICAgdGhpcy5fc2Nyb2xsVG9UaHVtYm5haWwobmV3SW5kZXgpO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5hZHZhbmNlUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbmV3SW5kZXggPSB0aGlzLl9zY3JvbGxJbmRleCArIHRoaXMuX251bVZpc2libGU7XHJcbiAgICBuZXdJbmRleCA9IE1hdGgubWluKG5ld0luZGV4LCB0aGlzLl9udW1JbWFnZXMgLSAxKTtcclxuICAgIHRoaXMuX3Njcm9sbFRvVGh1bWJuYWlsKG5ld0luZGV4KTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX3Jlc2V0U2l6aW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gUmVzZXQgc2l6aW5nIHZhcmlhYmxlcy4gVGhpcyBpbmNsdWRlcyByZXNldHRpbmcgYW55IGlubGluZSBzdHlsZSB0aGF0IGhhc1xyXG4gICAgLy8gYmVlbiBhcHBsaWVkLCBzbyB0aGF0IGFueSBzaXplIGNhbGN1bGF0aW9ucyBjYW4gYmUgYmFzZWQgb24gdGhlIENTU1xyXG4gICAgLy8gc3R5bGluZy5cclxuICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIuY3NzKHtcclxuICAgICAgICB0b3A6IFwiXCIsIGxlZnQ6IFwiXCIsIHdpZHRoOiBcIlwiLCBoZWlnaHQ6IFwiXCJcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwLndpZHRoKFwiXCIpO1xyXG4gICAgdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwLmhlaWdodChcIlwiKTtcclxuICAgIC8vIE1ha2UgYWxsIHRodW1ibmFpbHMgc3F1YXJlIGFuZCByZXNldCBhbnkgaGVpZ2h0XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlscy5mb3JFYWNoKGZ1bmN0aW9uICgkZWxlbWVudCkgeyBcclxuICAgICAgICAkZWxlbWVudC5oZWlnaHQoXCJcIik7IC8vIFJlc2V0IGhlaWdodCBiZWZvcmUgc2V0dGluZyB3aWR0aFxyXG4gICAgICAgICRlbGVtZW50LndpZHRoKCRlbGVtZW50LmhlaWdodCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9yZXNldFNpemluZygpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2l6ZSBvZiB0aGUgZmlyc3QgdGh1bWJuYWlsLiBUaGlzIGFzc3VtZXMgdGhlIGZpcnN0IGltYWdlXHJcbiAgICAvLyBvbmx5IGhhcyBhIHJpZ2h0LXNpZGUgbWFyZ2luLlxyXG4gICAgdmFyICRmaXJzdFRodW1iID0gdGhpcy5fJHRodW1ibmFpbHNbMF07XHJcbiAgICB2YXIgdGh1bWJTaXplID0gJGZpcnN0VGh1bWIub3V0ZXJIZWlnaHQoZmFsc2UpO1xyXG4gICAgdmFyIHRodW1iTWFyZ2luID0gMiAqICgkZmlyc3RUaHVtYi5vdXRlcldpZHRoKHRydWUpIC0gdGh1bWJTaXplKTtcclxuXHJcbiAgICAvLyBNZWFzdXJlIGNvbnRyb2xzLiBUaGV5IG5lZWQgdG8gYmUgdmlzaWJsZSBpbiBvcmRlciB0byBiZSBtZWFzdXJlZC5cclxuICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VMZWZ0LmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgIHZhciB0aHVtYkNvbnRyb2xXaWR0aCA9IHRoaXMuXyRhZHZhbmNlUmlnaHQub3V0ZXJXaWR0aCh0cnVlKSArXHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VMZWZ0Lm91dGVyV2lkdGgodHJ1ZSk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGhvdyBtYW55IGZ1bGwgdGh1bWJuYWlscyBjYW4gZml0IHdpdGhpbiB0aGUgdGh1bWJuYWlsIGFyZWFcclxuICAgIHZhciB2aXNpYmxlV2lkdGggPSB0aGlzLl8kdmlzaWJsZVRodW1ibmFpbFdyYXAub3V0ZXJXaWR0aChmYWxzZSk7XHJcbiAgICB2YXIgbnVtVGh1bWJzVmlzaWJsZSA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgKHZpc2libGVXaWR0aCAtIHRodW1iTWFyZ2luKSAvICh0aHVtYlNpemUgKyB0aHVtYk1hcmdpbilcclxuICAgICk7XHJcblxyXG4gICAgLy8gQ2hlY2sgd2hldGhlciBhbGwgdGhlIHRodW1ibmFpbHMgY2FuIGZpdCBvbiB0aGUgc2NyZWVuIGF0IG9uY2VcclxuICAgIGlmIChudW1UaHVtYnNWaXNpYmxlIDwgdGhpcy5fbnVtSW1hZ2VzKSB7XHJcbiAgICAgICAgLy8gVGFrZSBhIGJlc3QgZ3Vlc3MgYXQgaG93IHRvIHNpemUgdGhlIHRodW1ibmFpbHMuIFNpemUgZm9ybXVsYTpcclxuICAgICAgICAvLyAgd2lkdGggPSBudW0gKiB0aHVtYlNpemUgKyAobnVtIC0gMSkgKiB0aHVtYk1hcmdpbiArIGNvbnRyb2xTaXplXHJcbiAgICAgICAgLy8gU29sdmUgZm9yIG51bWJlciBvZiB0aHVtYm5haWxzIGFuZCByb3VuZCB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIHNvIFxyXG4gICAgICAgIC8vIHRoYXQgd2UgZG9uJ3QgaGF2ZSBhbnkgcGFydGlhbCB0aHVtYm5haWxzIHNob3dpbmcuXHJcbiAgICAgICAgbnVtVGh1bWJzVmlzaWJsZSA9IE1hdGgucm91bmQoXHJcbiAgICAgICAgICAgICh2aXNpYmxlV2lkdGggLSB0aHVtYkNvbnRyb2xXaWR0aCArIHRodW1iTWFyZ2luKSAvIFxyXG4gICAgICAgICAgICAodGh1bWJTaXplICsgdGh1bWJNYXJnaW4pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gVXNlIHRoaXMgbnVtYmVyIG9mIHRodW1ibmFpbHMgdG8gY2FsY3VsYXRlIHRoZSB0aHVtYm5haWwgc2l6ZVxyXG4gICAgICAgIHZhciBuZXdTaXplID0gKHZpc2libGVXaWR0aCAtIHRodW1iQ29udHJvbFdpZHRoICsgdGh1bWJNYXJnaW4pIC8gXHJcbiAgICAgICAgICAgIG51bVRodW1ic1Zpc2libGUgLSB0aHVtYk1hcmdpbjtcclxuICAgICAgICB0aGlzLl8kdGh1bWJuYWlscy5mb3JFYWNoKGZ1bmN0aW9uICgkZWxlbWVudCkge1xyXG4gICAgICAgICAgICAvLyAkLndpZHRoIGFuZCAkLmhlaWdodCBzZXQgdGhlIGNvbnRlbnQgc2l6ZSByZWdhcmRsZXNzIG9mIHRoZSBcclxuICAgICAgICAgICAgLy8gYm94LXNpemluZy4gVGhlIGltYWdlcyBhcmUgYm9yZGVyLWJveCwgc28gd2Ugd2FudCB0aGUgQ1NTIHdpZHRoXHJcbiAgICAgICAgICAgIC8vIGFuZCBoZWlnaHQuIFRoaXMgYWxsb3dzIHRoZSBhY3RpdmUgaW1hZ2UgdG8gaGF2ZSBhIGJvcmRlciBhbmQgdGhlXHJcbiAgICAgICAgICAgIC8vIG90aGVyIGltYWdlcyB0byBoYXZlIHBhZGRpbmcuIFxyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3MoXCJ3aWR0aFwiLCBuZXdTaXplICsgXCJweFwiKTtcclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwiaGVpZ2h0XCIsIG5ld1NpemUgKyBcInB4XCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIHRodW1ibmFpbCB3cmFwIHNpemUuIEl0IHNob3VsZCBiZSBqdXN0IHRhbGwgZW5vdWdoIHRvIGZpdCBhXHJcbiAgICAgICAgLy8gdGh1bWJuYWlsIGFuZCBsb25nIGVub3VnaCB0byBob2xkIGFsbCB0aGUgdGh1bWJuYWlscyBpbiBvbmUgbGluZTpcclxuICAgICAgICB2YXIgdG90YWxTaXplID0gbmV3U2l6ZSAqIHRoaXMuX251bUltYWdlcyArIFxyXG4gICAgICAgICAgICB0aHVtYk1hcmdpbiAqICh0aGlzLl9udW1JbWFnZXMgLSAxKTtcclxuICAgICAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyLmNzcyh7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0b3RhbFNpemUgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIGhlaWdodDogJGZpcnN0VGh1bWIub3V0ZXJIZWlnaHQodHJ1ZSkgKyBcInB4XCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRoZSB2aXNpYmxlIHRodW1ibmFpbCB3cmFwIHNpemUuIFRoaXMgaXMgdXNlZCB0byBtYWtzIHRoZSBtdWNoIFxyXG4gICAgICAgIC8vIGxhcmdlciB0aHVtYm5haWwgY29udGFpbmVyLiBJdCBzaG91bGQgYmUgYXMgd2lkZSBhcyBpdCBjYW4gYmUsIG1pbnVzXHJcbiAgICAgICAgLy8gdGhlIHNwYWNlIG5lZWRlZCBmb3IgdGhlIGxlZnQvcmlnaHQgY29udG9scy5cclxuICAgICAgICB0aGlzLl8kdmlzaWJsZVRodW1ibmFpbFdyYXAuY3NzKHtcclxuICAgICAgICAgICAgd2lkdGg6IHZpc2libGVXaWR0aCAtIHRodW1iQ29udHJvbFdpZHRoICsgXCJweFwiLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICRmaXJzdFRodW1iLm91dGVySGVpZ2h0KHRydWUpICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEFsbCB0aHVtYm5haWxzIGFyZSB2aXNpYmxlLCB3ZSBjYW4gaGlkZSB0aGUgY29udHJvbHMgYW5kIGV4cGFuZCB0aGVcclxuICAgICAgICAvLyB0aHVtYm5haWwgY29udGFpbmVyIHRvIDEwMCVcclxuICAgICAgICBudW1UaHVtYnNWaXNpYmxlID0gdGhpcy5fbnVtSW1hZ2VzO1xyXG4gICAgICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIuY3NzKFwid2lkdGhcIiwgXCIxMDAlXCIpO1xyXG4gICAgICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VMZWZ0LmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX251bVZpc2libGUgPSBudW1UaHVtYnNWaXNpYmxlO1xyXG4gICAgdmFyIG1pZGRsZUluZGV4ID0gTWF0aC5mbG9vcigodGhpcy5fbnVtVmlzaWJsZSAtIDEpIC8gMik7XHJcbiAgICB0aGlzLl9zY3JvbGxCb3VuZHMgPSB7XHJcbiAgICAgICAgbWluOiBtaWRkbGVJbmRleCxcclxuICAgICAgICBtYXg6IHRoaXMuX251bUltYWdlcyAtIDEgLSBtaWRkbGVJbmRleFxyXG4gICAgfTtcclxuICAgIGlmICh0aGlzLl9udW1WaXNpYmxlICUgMiA9PT0gMCkgdGhpcy5fc2Nyb2xsQm91bmRzLm1heCAtPSAxO1xyXG5cclxuICAgIHRoaXMuX3VwZGF0ZVRodW1ibmFpbENvbnRyb2xzKCk7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9hY3RpdmF0ZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgLy8gQWN0aXZhdGUvZGVhY3RpdmF0ZSB0aHVtYm5haWxzXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsc1t0aGlzLl9pbmRleF0ucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsc1tpbmRleF0uYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9zY3JvbGxUb1RodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgLy8gTm8gbmVlZCB0byBzY3JvbGwgaWYgYWxsIHRodW1ibmFpbHMgYXJlIHZpc2libGVcclxuICAgIGlmICh0aGlzLl9udW1WaXNpYmxlID09PSB0aGlzLl9udW1JbWFnZXMpIHJldHVybjtcclxuXHJcbiAgICAvLyBDb25zdHJhaW4gaW5kZXggc28gdGhhdCB3ZSBjYW4ndCBzY3JvbGwgb3V0IG9mIGJvdW5kcyBcclxuICAgIGluZGV4ID0gTWF0aC5tYXgoaW5kZXgsIHRoaXMuX3Njcm9sbEJvdW5kcy5taW4pO1xyXG4gICAgaW5kZXggPSBNYXRoLm1pbihpbmRleCwgdGhpcy5fc2Nyb2xsQm91bmRzLm1heCk7XHJcbiAgICB0aGlzLl9zY3JvbGxJbmRleCA9IGluZGV4O1xyXG5cclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX3Njcm9sbEluZGV4KTtcclxuICAgIFxyXG4gICAgLy8gRmluZCB0aGUgXCJsZWZ0XCIgcG9zaXRpb24gb2YgdGhlIHRodW1ibmFpbCBjb250YWluZXIgdGhhdCB3b3VsZCBwdXQgdGhlIFxyXG4gICAgLy8gdGh1bWJuYWlsIGF0IGluZGV4IGF0IHRoZSBjZW50ZXJcclxuICAgIHZhciAkdGh1bWIgPSB0aGlzLl8kdGh1bWJuYWlsc1swXTtcclxuICAgIHZhciBzaXplID0gcGFyc2VGbG9hdCgkdGh1bWIuY3NzKFwid2lkdGhcIikpO1xyXG4gICAgdmFyIG1hcmdpbiA9IDIgKiBwYXJzZUZsb2F0KCR0aHVtYi5jc3MoXCJtYXJnaW4tcmlnaHRcIikpOyBcclxuICAgIHZhciBjZW50ZXJYID0gc2l6ZSAqIHRoaXMuX3Njcm9sbEJvdW5kcy5taW4gKyBcclxuICAgICAgICBtYXJnaW4gKiAodGhpcy5fc2Nyb2xsQm91bmRzLm1pbiAtIDEpO1xyXG4gICAgdmFyIHRodW1iWCA9IHNpemUgKiBpbmRleCArIG1hcmdpbiAqIChpbmRleCAtIDEpO1xyXG4gICAgdmFyIGxlZnQgPSBjZW50ZXJYIC0gdGh1bWJYO1xyXG5cclxuICAgIC8vIEFuaW1hdGUgdGhlIHRodW1ibmFpbCBjb250YWluZXJcclxuICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIudmVsb2NpdHkoXCJzdG9wXCIpO1xyXG4gICAgdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci52ZWxvY2l0eSh7XHJcbiAgICAgICAgXCJsZWZ0XCI6IGxlZnQgKyBcInB4XCJcclxuICAgIH0sIDYwMCwgXCJlYXNlSW5PdXRRdWFkXCIpO1xyXG5cclxuICAgIHRoaXMuX3VwZGF0ZVRodW1ibmFpbENvbnRyb2xzKCk7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9vbkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICB2YXIgaW5kZXggPSAkdGFyZ2V0LmRhdGEoXCJpbmRleFwiKTtcclxuICAgIFxyXG4gICAgLy8gQ2xpY2tlZCBvbiB0aGUgYWN0aXZlIGltYWdlIC0gbm8gbmVlZCB0byBkbyBhbnl0aGluZ1xyXG4gICAgaWYgKHRoaXMuX2luZGV4ICE9PSBpbmRleCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgICB0aGlzLl9zY3JvbGxUb1RodW1ibmFpbChpbmRleCk7XHJcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLl9zbGlkZXNob3cuc2hvd0ltYWdlKGluZGV4KTtcclxuICAgIH1cclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX3VwZGF0ZVRodW1ibmFpbENvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gUmUtZW5hYmxlXHJcbiAgICB0aGlzLl8kYWR2YW5jZUxlZnQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIFxyXG4gICAgLy8gRGlzYWJsZSBpZiB3ZSd2ZSByZWFjaGVkIHRoZSB0aGUgbWF4IG9yIG1pbiBsaW1pdFxyXG4gICAgdmFyIG1pZFNjcm9sbEluZGV4ID0gTWF0aC5mbG9vcigodGhpcy5fbnVtVmlzaWJsZSAtIDEpIC8gMik7XHJcbiAgICB2YXIgbWluU2Nyb2xsSW5kZXggPSBtaWRTY3JvbGxJbmRleDtcclxuICAgIHZhciBtYXhTY3JvbGxJbmRleCA9IHRoaXMuX251bUltYWdlcyAtIDEgLSBtaWRTY3JvbGxJbmRleDtcclxuICAgIGlmICh0aGlzLl9zY3JvbGxJbmRleCA+PSB0aGlzLl9zY3JvbGxCb3VuZHMubWF4KSB7XHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VSaWdodC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLl9zY3JvbGxJbmRleCA8PSB0aGlzLl9zY3JvbGxCb3VuZHMubWluKSB7XHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VMZWZ0LmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbn07XG59LHt9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAodmFsLCBkZWZhdWx0VmFsKSB7XHJcbiAgICByZXR1cm4gKHZhbCAhPT0gdW5kZWZpbmVkKSA/IHZhbCA6IGRlZmF1bHRWYWw7XHJcbn07XHJcblxyXG4vLyBVbnRlc3RlZFxyXG4vLyBleHBvcnRzLmRlZmF1bHRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmYXVsdFByb3BlcnRpZXMgKG9iaiwgcHJvcHMpIHtcclxuLy8gICAgIGZvciAodmFyIHByb3AgaW4gcHJvcHMpIHtcclxuLy8gICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcHMsIHByb3ApKSB7XHJcbi8vICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGV4cG9ydHMuZGVmYXVsdFZhbHVlKHByb3BzLnZhbHVlLCBwcm9wcy5kZWZhdWx0KTtcclxuLy8gICAgICAgICAgICAgb2JqW3Byb3BdID0gdmFsdWU7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyAgICAgcmV0dXJuIG9iajtcclxuLy8gfTtcclxuLy8gXHJcbmV4cG9ydHMudGltZUl0ID0gZnVuY3Rpb24gKGZ1bmMpIHtcclxuICAgIHZhciBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgZnVuYygpO1xyXG4gICAgdmFyIGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgcmV0dXJuIGVuZCAtIHN0YXJ0O1xyXG59O1xyXG5cclxuZXhwb3J0cy5pc0luUmVjdCA9IGZ1bmN0aW9uICh4LCB5LCByZWN0KSB7XHJcbiAgICBpZiAoeCA+PSByZWN0LnggJiYgeCA8PSAocmVjdC54ICsgcmVjdC53KSAmJlxyXG4gICAgICAgIHkgPj0gcmVjdC55ICYmIHkgPD0gKHJlY3QueSArIHJlY3QuaCkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbmV4cG9ydHMucmFuZEludCA9IGZ1bmN0aW9uIChtaW4sIG1heCkge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbn07XHJcblxyXG5leHBvcnRzLnJhbmRBcnJheUVsZW1lbnQgPSBmdW5jdGlvbiAoYXJyYXkpIHtcclxuICAgIHZhciBpID0gZXhwb3J0cy5yYW5kSW50KDAsIGFycmF5Lmxlbmd0aCAtIDEpOyAgICBcclxuICAgIHJldHVybiBhcnJheVtpXTtcclxufTtcclxuXHJcbmV4cG9ydHMubWFwID0gZnVuY3Rpb24gKG51bSwgbWluMSwgbWF4MSwgbWluMiwgbWF4Miwgb3B0aW9ucykge1xyXG4gICAgdmFyIG1hcHBlZCA9IChudW0gLSBtaW4xKSAvIChtYXgxIC0gbWluMSkgKiAobWF4MiAtIG1pbjIpICsgbWluMjtcclxuICAgIGlmICghb3B0aW9ucykgcmV0dXJuIG1hcHBlZDtcclxuICAgIGlmIChvcHRpb25zLnJvdW5kICYmIG9wdGlvbnMucm91bmQgPT09IHRydWUpIHtcclxuICAgICAgICBtYXBwZWQgPSBNYXRoLnJvdW5kKG1hcHBlZCk7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5mbG9vciAmJiBvcHRpb25zLmZsb29yID09PSB0cnVlKSB7XHJcbiAgICAgICAgbWFwcGVkID0gTWF0aC5mbG9vcihtYXBwZWQpOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5jZWlsICYmIG9wdGlvbnMuY2VpbCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1hcHBlZCA9IE1hdGguY2VpbChtYXBwZWQpOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5jbGFtcCAmJiBvcHRpb25zLmNsYW1wID09PSB0cnVlKSB7XHJcbiAgICAgICAgbWFwcGVkID0gTWF0aC5taW4obWFwcGVkLCBtYXgyKTtcclxuICAgICAgICBtYXBwZWQgPSBNYXRoLm1heChtYXBwZWQsIG1pbjIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcHBlZDtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0UXVlcnlQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gQ2hlY2sgZm9yIHF1ZXJ5IHN0cmluZ1xyXG4gICAgcXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xyXG4gICAgaWYgKHFzLmxlbmd0aCA8PSAxKSByZXR1cm4ge307XHJcbiAgICAvLyBRdWVyeSBzdHJpbmcgZXhpc3RzLCBwYXJzZSBpdCBpbnRvIGEgcXVlcnkgb2JqZWN0XHJcbiAgICBxcyA9IHFzLnN1YnN0cmluZygxKTsgLy8gUmVtb3ZlIHRoZSBcIj9cIiBkZWxpbWl0ZXJcclxuICAgIHZhciBrZXlWYWxQYWlycyA9IHFzLnNwbGl0KFwiJlwiKTtcclxuICAgIHZhciBxdWVyeU9iamVjdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlWYWxQYWlycy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIHZhciBrZXlWYWwgPSBrZXlWYWxQYWlyc1tpXS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgaWYgKGtleVZhbC5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChrZXlWYWxbMF0pO1xyXG4gICAgICAgICAgICB2YXIgdmFsID0gZGVjb2RlVVJJQ29tcG9uZW50KGtleVZhbFsxXSk7XHJcbiAgICAgICAgICAgIHF1ZXJ5T2JqZWN0W2tleV0gPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHF1ZXJ5T2JqZWN0O1xyXG59O1xyXG5cclxuZXhwb3J0cy5jcmVhdGVRdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChxdWVyeU9iamVjdCkge1xyXG4gICAgaWYgKHR5cGVvZiBxdWVyeU9iamVjdCAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFwiXCI7XHJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHF1ZXJ5T2JqZWN0KTtcclxuICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XHJcbiAgICB2YXIgcXVlcnlTdHJpbmcgPSBcIj9cIjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xyXG4gICAgICAgIHZhciB2YWwgPSBxdWVyeU9iamVjdFtrZXldO1xyXG4gICAgICAgIHF1ZXJ5U3RyaW5nICs9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKTtcclxuICAgICAgICBpZiAoaSAhPT0ga2V5cy5sZW5ndGggLSAxKSBxdWVyeVN0cmluZyArPSBcIiZcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBxdWVyeVN0cmluZztcclxufTtcclxuXHJcbmV4cG9ydHMud3JhcEluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBsZW5ndGgpIHtcclxuICAgIHZhciB3cmFwcGVkSW5kZXggPSAoaW5kZXggJSBsZW5ndGgpOyBcclxuICAgIGlmICh3cmFwcGVkSW5kZXggPCAwKSB7XHJcbiAgICAgICAgLy8gSWYgbmVnYXRpdmUsIGZsaXAgdGhlIGluZGV4IHNvIHRoYXQgLTEgYmVjb21lcyB0aGUgbGFzdCBpdGVtIGluIGxpc3QgXHJcbiAgICAgICAgd3JhcHBlZEluZGV4ID0gbGVuZ3RoICsgd3JhcHBlZEluZGV4O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHdyYXBwZWRJbmRleDtcclxufTtcclxuXG59LHt9XX0se30sWzEyXSlcblxuIiwidmFyIHV0aWxzID0gcmVxdWlyZShcIi4vdXRpbHMuanNcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJib3hBbGlnbmVkVGV4dDtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IEJib3hBbGlnbmVkVGV4dCBvYmplY3QgLSBhIHRleHQgb2JqZWN0IHRoYXQgY2FuIGJlIGRyYXduIHdpdGhcclxuICogYW5jaG9yIHBvaW50cyBiYXNlZCBvbiBhIHRpZ2h0IGJvdW5kaW5nIGJveCBhcm91bmQgdGhlIHRleHQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge29iamVjdH0gZm9udCAtIHA1LkZvbnQgb2JqZWN0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gU3RyaW5nIHRvIGRpc3BsYXlcclxuICogQHBhcmFtIHtudW1iZXJ9IFtmb250U2l6ZT0xMl0gLSBGb250IHNpemUgdG8gdXNlIGZvciBzdHJpbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PTBdIC0gSW5pdGlhbCB4IGxvY2F0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeT0wXSAtIEluaXRpYWwgeSBsb2NhdGlvblxyXG4gKiBAcGFyYW0ge29iamVjdH0gW3BJbnN0YW5jZT13aW5kb3ddIC0gUmVmZXJlbmNlIHRvIHA1IGluc3RhbmNlLCBsZWF2ZSBibGFuayBpZlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tldGNoIGlzIGdsb2JhbFxyXG4gKiBAZXhhbXBsZVxyXG4gKiB2YXIgZm9udCwgYmJveFRleHQ7XHJcbiAqIGZ1bmN0aW9uIHByZWxvYWQoKSB7XHJcbiAqICAgICBmb250ID0gbG9hZEZvbnQoXCIuL2Fzc2V0cy9SZWd1bGFyLnR0ZlwiKTtcclxuICogfVxyXG4gKiBmdW5jdGlvbiBzZXR1cCgpIHtcclxuICogICAgIGNyZWF0ZUNhbnZhcyg0MDAsIDYwMCk7XHJcbiAqICAgICBiYWNrZ3JvdW5kKDApO1xyXG4gKiAgICAgXHJcbiAqICAgICBiYm94VGV4dCA9IG5ldyBCYm94QWxpZ25lZFRleHQoZm9udCwgXCJIZXkhXCIsIDMwKTsgICAgXHJcbiAqICAgICBiYm94VGV4dC5zZXRSb3RhdGlvbihQSSAvIDQpO1xyXG4gKiAgICAgYmJveFRleHQuc2V0QW5jaG9yKEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfQ0VOVEVSLCBcclxuICogICAgICAgICAgICAgICAgICAgICAgICBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuQk9YX0NFTlRFUik7XHJcbiAqICAgICBcclxuICogICAgIGZpbGwoXCIjMDBBOEVBXCIpO1xyXG4gKiAgICAgbm9TdHJva2UoKTtcclxuICogICAgIGJib3hUZXh0LmRyYXcod2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gQmJveEFsaWduZWRUZXh0KGZvbnQsIHRleHQsIGZvbnRTaXplLCB4LCB5LCBwSW5zdGFuY2UpIHtcclxuICAgIHRoaXMuX2ZvbnQgPSBmb250O1xyXG4gICAgdGhpcy5fdGV4dCA9IHRleHQ7XHJcbiAgICB0aGlzLl94ID0gdXRpbHMuZGVmYXVsdCh4LCAwKTtcclxuICAgIHRoaXMuX3kgPSB1dGlscy5kZWZhdWx0KHksIDApO1xyXG4gICAgdGhpcy5fZm9udFNpemUgPSB1dGlscy5kZWZhdWx0KGZvbnRTaXplLCAxMik7XHJcbiAgICB0aGlzLl9wID0gdXRpbHMuZGVmYXVsdChwSW5zdGFuY2UsIHdpbmRvdyk7XHJcbiAgICB0aGlzLl9yb3RhdGlvbiA9IDA7XHJcbiAgICB0aGlzLl9oQWxpZ24gPSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX0NFTlRFUjtcclxuICAgIHRoaXMuX3ZBbGlnbiA9IEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTWV0cmljcyh0cnVlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZlcnRpY2FsIGFsaWdubWVudCB2YWx1ZXNcclxuICogQHB1YmxpY1xyXG4gKiBAc3RhdGljXHJcbiAqIEByZWFkb25seVxyXG4gKiBAZW51bSB7c3RyaW5nfVxyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LkFMSUdOID0ge1xyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgbGVmdCBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX0xFRlQ6IFwiYm94X2xlZnRcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIGNlbnRlciBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX0NFTlRFUjogXCJib3hfY2VudGVyXCIsXHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSByaWdodCBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX1JJR0hUOiBcImJveF9yaWdodFwiXHJcbn07XHJcblxyXG4vKipcclxuICogQmFzZWxpbmUgYWxpZ25tZW50IHZhbHVlc1xyXG4gKiBAcHVibGljXHJcbiAqIEBzdGF0aWNcclxuICogQHJlYWRvbmx5XHJcbiAqIEBlbnVtIHtzdHJpbmd9XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQuQkFTRUxJTkUgPSB7XHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSB0b3Agb2YgdGhlIGJib3ggKi9cclxuICAgIEJPWF9UT1A6IFwiYm94X3RvcFwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfQ0VOVEVSOiBcImJveF9jZW50ZXJcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX0JPVFRPTTogXCJib3hfYm90dG9tXCIsXHJcbiAgICAvKiogXHJcbiAgICAgKiBEcmF3IGZyb20gaGFsZiB0aGUgaGVpZ2h0IG9mIHRoZSBmb250LiBTcGVjaWZpY2FsbHkgdGhlIGhlaWdodCBpc1xyXG4gICAgICogY2FsY3VsYXRlZCBhczogYXNjZW50ICsgZGVzY2VudC5cclxuICAgICAqL1xyXG4gICAgRk9OVF9DRU5URVI6IFwiZm9udF9jZW50ZXJcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIHRoZSBub3JtYWwgZm9udCBiYXNlbGluZSAqL1xyXG4gICAgQUxQSEFCRVRJQzogXCJhbHBoYWJldGljXCJcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgY3VycmVudCB0ZXh0XHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyAtIFRleHQgc3RyaW5nIHRvIGRpc3BsYXlcclxuICogQHJldHVybnMge3RoaXN9IFVzZWZ1bCBmb3IgY2hhaW5pbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uKHN0cmluZykge1xyXG4gICAgdGhpcy5fdGV4dCA9IHN0cmluZztcclxuICAgIHRoaXMuX2NhbGN1bGF0ZU1ldHJpY3MoZmFsc2UpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IHRoZSB0ZXh0IHBvc2l0aW9uXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBYIHBvc2l0aW9uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gWSBwb3NpdGlvblxyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIHRoaXMuX3ggPSB1dGlscy5kZWZhdWx0KHgsIHRoaXMuX3gpO1xyXG4gICAgdGhpcy5feSA9IHV0aWxzLmRlZmF1bHQoeSwgdGhpcy5feSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHRleHQgcG9zaXRpb25cclxuICogQHB1YmxpY1xyXG4gKiBAcmV0dXJuIHtvYmplY3R9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggcHJvcGVydGllczogeCwgeVxyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB0aGlzLl94LFxyXG4gICAgICAgIHk6IHRoaXMuX3lcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IGN1cnJlbnQgdGV4dCBzaXplXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IGZvbnRTaXplIFRleHQgc2l6ZVxyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRUZXh0U2l6ZSA9IGZ1bmN0aW9uKGZvbnRTaXplKSB7XHJcbiAgICB0aGlzLl9mb250U2l6ZSA9IGZvbnRTaXplO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTWV0cmljcyh0cnVlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCByb3RhdGlvbiBvZiB0ZXh0XHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIC0gUm90YXRpb24gaW4gcmFkaWFuc1xyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKGFuZ2xlKSB7XHJcbiAgICB0aGlzLl9yb3RhdGlvbiA9IHV0aWxzLmRlZmF1bHQoYW5nbGUsIHRoaXMuX3JvdGF0aW9uKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCByb3RhdGlvbiBvZiB0ZXh0XHJcbiAqIEBwdWJsaWNcclxuICogQHJldHVybnMge251bWJlcn0gUm90YXRpb24gaW4gcmFkaWFuc1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5nZXRSb3RhdGlvbiA9IGZ1bmN0aW9uKGFuZ2xlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcm90YXRpb247XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBwIGluc3RhbmNlIHRoYXQgaXMgdXNlZCBmb3IgZHJhd2luZ1xyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBwIC0gSW5zdGFuY2Ugb2YgcDUgZm9yIGRyYXdpbmcuIFRoaXMgaXMgb25seSBuZWVkZWQgd2hlbiBcclxuICogICAgICAgICAgICAgICAgICAgICB1c2luZyBhbiBvZmZzY3JlZW4gcmVuZGVyZXIgb3Igd2hlbiB1c2luZyBwNSBpbiBpbnN0YW5jZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgIG1vZGUuXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFBJbnN0YW5jZSA9IGZ1bmN0aW9uKHApIHtcclxuICAgIHRoaXMuX3AgPSB1dGlscy5kZWZhdWx0KHAsIHRoaXMuX3ApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IHJvdGF0aW9uIG9mIHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBJbnN0YW5jZSBvZiBwNSB0aGF0IGlzIGJlaW5nIHVzZWQgZm9yIGRyYXdpbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZ2V0UEluc3RhbmNlID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgYW5jaG9yIHBvaW50IGZvciB0ZXh0IChob3Jpem9uYWwgYW5kIHZlcnRpY2FsIGFsaWdubWVudCkgcmVsYXRpdmUgdG9cclxuICogYm91bmRpbmcgYm94XHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtzdHJpbmd9IFtoQWxpZ249Q0VOVEVSXSAtIEhvcml6b25hbCBhbGlnbm1lbnRcclxuICogQHBhcmFtIHtzdHJpbmd9IFt2QWxpZ249Q0VOVEVSXSAtIFZlcnRpY2FsIGJhc2VsaW5lXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VwZGF0ZVBvc2l0aW9uPWZhbHNlXSAtIElmIHNldCB0byB0cnVlLCB0aGUgcG9zaXRpb24gb2YgdGhlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSB0ZXh0IHdpbGwgYmUgc2hpZnRlZCBzbyB0aGF0XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSB0ZXh0IHdpbGwgYmUgZHJhd24gaW4gdGhlIHNhbWVcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2UgaXQgd2FzIGJlZm9yZSBjYWxsaW5nIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBbmNob3IuXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldEFuY2hvciA9IGZ1bmN0aW9uKGhBbGlnbiwgdkFsaWduLCB1cGRhdGVQb3NpdGlvbikge1xyXG4gICAgdmFyIG9sZFBvcyA9IHRoaXMuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHModGhpcy5feCwgdGhpcy5feSk7XHJcbiAgICB0aGlzLl9oQWxpZ24gPSB1dGlscy5kZWZhdWx0KGhBbGlnbiwgQmJveEFsaWduZWRUZXh0LkFMSUdOLkNFTlRFUik7XHJcbiAgICB0aGlzLl92QWxpZ24gPSB1dGlscy5kZWZhdWx0KHZBbGlnbiwgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkNFTlRFUik7XHJcbiAgICBpZiAodXBkYXRlUG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyh0aGlzLl94LCB0aGlzLl95KTtcclxuICAgICAgICB0aGlzLl94ICs9IG9sZFBvcy54IC0gbmV3UG9zLng7XHJcbiAgICAgICAgdGhpcy5feSArPSBvbGRQb3MueSAtIG5ld1Bvcy55O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBib3VuZGluZyBib3ggd2hlbiB0aGUgdGV4dCBpcyBwbGFjZWQgYXQgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlcy5cclxuICogTm90ZTogdGhpcyBpcyB0aGUgdW5yb3RhdGVkIGJvdW5kaW5nIGJveCEgVE9ETzogRml4IHRoaXMuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeD1jdXJyZW50IHhdIC0gQSBuZXcgeCBjb29yZGluYXRlIG9mIHRleHQgYW5jaG9yLiBUaGlzXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbCBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1hbmVudGx5LiBcclxuICogQHBhcmFtIHtudW1iZXJ9IFt5PWN1cnJlbnQgeV0gLSBBIG5ldyB5IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWFuZW50bHkuXHJcbiAqIEByZXR1cm4ge29iamVjdH0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzOiB4LCB5LCB3LCBoXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldEJib3ggPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgdmFyIHBvcyA9IHRoaXMuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHModGhpcy5feCwgdGhpcy5feSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IHBvcy54ICsgdGhpcy5fYm91bmRzT2Zmc2V0LngsXHJcbiAgICAgICAgeTogcG9zLnkgKyB0aGlzLl9ib3VuZHNPZmZzZXQueSxcclxuICAgICAgICB3OiB0aGlzLndpZHRoLFxyXG4gICAgICAgIGg6IHRoaXMuaGVpZ2h0XHJcbiAgICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCBhbiBhcnJheSBvZiBwb2ludHMgdGhhdCBmb2xsb3cgYWxvbmcgdGhlIHRleHQgcGF0aC4gVGhpcyB3aWxsIHRha2UgaW50b1xyXG4gKiBjb25zaWRlcmF0aW9uIHRoZSBjdXJyZW50IGFsaWdubWVudCBzZXR0aW5ncy5cclxuICogTm90ZTogdGhpcyBpcyBhIHRoaW4gd3JhcHBlciBhcm91bmQgYSBwNSBtZXRob2QgYW5kIGRvZXNuJ3QgaGFuZGxlIHVucm90YXRlZFxyXG4gKiB0ZXh0ISBUT0RPOiBGaXggdGhpcy5cclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PWN1cnJlbnQgeF0gLSBBIG5ldyB4IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWFuZW50bHkuIFxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3k9Y3VycmVudCB5XSAtIEEgbmV3IHkgY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtYW5lbnRseS5cclxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIEFuIG9iamVjdCB0aGF0IGNhbiBoYXZlOlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIHNhbXBsZUZhY3RvcjogcmF0aW8gb2YgcGF0aC1sZW5ndGggdG8gbnVtYmVyXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Ygc2FtcGxlcyAoZGVmYXVsdD0wLjI1KS4gSGlnaGVyIHZhbHVlcyBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBtb3JlcG9pbnRzIGFuZCBhcmUgdGhlcmVmb3JlIG1vcmUgXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzZS4gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gc2ltcGxpZnlUaHJlc2hvbGQ6IGlmIHNldCB0byBhIG5vbi16ZXJvIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLCBjb2xsaW5lYXIgcG9pbnRzIHdpbGwgYmUgcmVtb3ZlZC4gVGhlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgcmVwcmVzZW50cyB0aGUgdGhyZXNob2xkIGFuZ2xlIHRvIHVzZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoZW4gZGV0ZXJtaW5pbmcgd2hldGhlciB0d28gZWRnZXMgYXJlIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpbmVhci5cclxuICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIHBvaW50cywgZWFjaCB3aXRoIHgsIHkgJiBhbHBoYSAodGhlIHBhdGggYW5nbGUpXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldFRleHRQb2ludHMgPSBmdW5jdGlvbih4LCB5LCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgdmFyIHBvaW50cyA9IHRoaXMuX2ZvbnQudGV4dFRvUG9pbnRzKHRoaXMuX3RleHQsIHRoaXMuX3gsIHRoaXMuX3ksIFxyXG4gICAgICAgIHRoaXMuX2ZvbnRTaXplLCBvcHRpb25zKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHMocG9pbnRzW2ldLngsIHBvaW50c1tpXS55KTtcclxuICAgICAgICBwb2ludHNbaV0ueCA9IHBvcy54O1xyXG4gICAgICAgIHBvaW50c1tpXS55ID0gcG9zLnk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9pbnRzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIERyYXdzIHRoZSB0ZXh0IHBhcnRpY2xlIHdpdGggdGhlIHNwZWNpZmllZCBzdHlsZSBwYXJhbWV0ZXJzLiBOb3RlOiB0aGlzIGlzXHJcbiAqIGdvaW5nIHRvIHNldCB0aGUgdGV4dEZvbnQsIHRleHRTaXplICYgcm90YXRpb24gYmVmb3JlIGRyYXdpbmcuIFlvdSBzaG91bGQgc2V0XHJcbiAqIHRoZSBjb2xvci9zdHJva2UvZmlsbCB0aGF0IHlvdSB3YW50IGJlZm9yZSBkcmF3aW5nLiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xlYW5cclxuICogdXAgYWZ0ZXIgaXRzZWxmIGFuZCByZXNldCBzdHlsaW5nIGJhY2sgdG8gd2hhdCBpdCB3YXMgYmVmb3JlIGl0IHdhcyBjYWxsZWQuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PWN1cnJlbnQgeF0gLSBBIG5ldyB4IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXMgd2lsbFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBwZXJtYW5lbnRseS4gXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeT1jdXJyZW50IHldIC0gQSBuZXcgeSBjb29yZGluYXRlIG9mIHRleHQgYW5jaG9yLiBUaGlzIHdpbGxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIHBlcm1hbmVudGx5LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtkcmF3Qm91bmRzPWZhbHNlXSAtIEZsYWcgZm9yIGRyYXdpbmcgYm91bmRpbmcgYm94XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbih4LCB5LCBkcmF3Qm91bmRzKSB7XHJcbiAgICBkcmF3Qm91bmRzID0gdXRpbHMuZGVmYXVsdChkcmF3Qm91bmRzLCBmYWxzZSk7XHJcbiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xyXG4gICAgdmFyIHBvcyA9IHtcclxuICAgICAgICB4OiB0aGlzLl94LCBcclxuICAgICAgICB5OiB0aGlzLl95XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuX3AucHVzaCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcm90YXRpb24pIHtcclxuICAgICAgICAgICAgcG9zID0gdGhpcy5fY2FsY3VsYXRlUm90YXRlZENvb3Jkcyhwb3MueCwgcG9zLnksIHRoaXMuX3JvdGF0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5fcC5yb3RhdGUodGhpcy5fcm90YXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyhwb3MueCwgcG9zLnkpO1xyXG5cclxuICAgICAgICB0aGlzLl9wLnRleHRBbGlnbih0aGlzLl9wLkxFRlQsIHRoaXMuX3AuQkFTRUxJTkUpO1xyXG4gICAgICAgIHRoaXMuX3AudGV4dEZvbnQodGhpcy5fZm9udCk7XHJcbiAgICAgICAgdGhpcy5fcC50ZXh0U2l6ZSh0aGlzLl9mb250U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fcC50ZXh0KHRoaXMuX3RleHQsIHBvcy54LCBwb3MueSk7XHJcblxyXG4gICAgICAgIGlmIChkcmF3Qm91bmRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Auc3Ryb2tlKDIwMCk7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHNYID0gcG9zLnggKyB0aGlzLl9ib3VuZHNPZmZzZXQueDtcclxuICAgICAgICAgICAgdmFyIGJvdW5kc1kgPSBwb3MueSArIHRoaXMuX2JvdW5kc09mZnNldC55O1xyXG4gICAgICAgICAgICB0aGlzLl9wLm5vRmlsbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9wLnJlY3QoYm91bmRzWCwgYm91bmRzWSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICB0aGlzLl9wLnBvcCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFByb2plY3QgdGhlIGNvb3JkaW5hdGVzICh4LCB5KSBpbnRvIGEgcm90YXRlZCBjb29yZGluYXRlIHN5c3RlbVxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggY29vcmRpbmF0ZSAoaW4gdW5yb3RhdGVkIHNwYWNlKVxyXG4gKiBAcGFyYW0ge251bWJlcn0geSAtIFkgY29vcmRpbmF0ZSAoaW4gdW5yb3RhdGVkIHNwYWNlKVxyXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBSYWRpYW5zIG9mIHJvdGF0aW9uIHRvIGFwcGx5XHJcbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggeCAmIHkgcHJvcGVydGllc1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5fY2FsY3VsYXRlUm90YXRlZENvb3JkcyA9IGZ1bmN0aW9uICh4LCB5LCBhbmdsZSkgeyAgXHJcbiAgICB2YXIgcnggPSBNYXRoLmNvcyhhbmdsZSkgKiB4ICsgTWF0aC5jb3MoTWF0aC5QSSAvIDIgLSBhbmdsZSkgKiB5O1xyXG4gICAgdmFyIHJ5ID0gLU1hdGguc2luKGFuZ2xlKSAqIHggKyBNYXRoLnNpbihNYXRoLlBJIC8gMiAtIGFuZ2xlKSAqIHk7XHJcbiAgICByZXR1cm4ge3g6IHJ4LCB5OiByeX07XHJcbn07XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBkcmF3IGNvb3JkaW5hdGVzIGZvciB0aGUgdGV4dCwgYWxpZ25pbmcgYmFzZWQgb24gdGhlIGJvdW5kaW5nIGJveC5cclxuICogVGhlIHRleHQgaXMgZXZlbnR1YWxseSBkcmF3biB3aXRoIGNhbnZhcyBhbGlnbm1lbnQgc2V0IHRvIGxlZnQgJiBiYXNlbGluZSwgc29cclxuICogdGhpcyBmdW5jdGlvbiB0YWtlcyBhIGRlc2lyZWQgcG9zICYgYWxpZ25tZW50IGFuZCByZXR1cm5zIHRoZSBhcHByb3ByaWF0ZVxyXG4gKiBjb29yZGluYXRlcyBmb3IgdGhlIGxlZnQgJiBiYXNlbGluZS5cclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBYIGNvb3JkaW5hdGVcclxuICogQHBhcmFtIHtudW1iZXJ9IHkgLSBZIGNvb3JkaW5hdGVcclxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCB4ICYgeSBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgdmFyIG5ld1gsIG5ld1k7XHJcbiAgICBzd2l0Y2ggKHRoaXMuX2hBbGlnbikge1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkFMSUdOLkJPWF9MRUZUOlxyXG4gICAgICAgICAgICBuZXdYID0geDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX0NFTlRFUjpcclxuICAgICAgICAgICAgbmV3WCA9IHggLSB0aGlzLmhhbGZXaWR0aDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX1JJR0hUOlxyXG4gICAgICAgICAgICBuZXdYID0geCAtIHRoaXMud2lkdGg7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIG5ld1ggPSB4O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVucmVjb2duaXplZCBob3Jpem9uYWwgYWxpZ246XCIsIHRoaXMuX2hBbGlnbik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoICh0aGlzLl92QWxpZ24pIHtcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfVE9QOlxyXG4gICAgICAgICAgICBuZXdZID0geSAtIHRoaXMuX2JvdW5kc09mZnNldC55O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSOlxyXG4gICAgICAgICAgICBuZXdZID0geSArIHRoaXMuX2Rpc3RCYXNlVG9NaWQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9CT1RUT006XHJcbiAgICAgICAgICAgIG5ld1kgPSB5IC0gdGhpcy5fZGlzdEJhc2VUb0JvdHRvbTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuRk9OVF9DRU5URVI6XHJcbiAgICAgICAgICAgIC8vIEhlaWdodCBpcyBhcHByb3hpbWF0ZWQgYXMgYXNjZW50ICsgZGVzY2VudFxyXG4gICAgICAgICAgICBuZXdZID0geSAtIHRoaXMuX2Rlc2NlbnQgKyAodGhpcy5fYXNjZW50ICsgdGhpcy5fZGVzY2VudCkgLyAyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5BTFBIQUJFVElDOlxyXG4gICAgICAgICAgICBuZXdZID0geTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgbmV3WSA9IHk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5yZWNvZ25pemVkIHZlcnRpY2FsIGFsaWduOlwiLCB0aGlzLl92QWxpZ24pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiB7eDogbmV3WCwgeTogbmV3WX07XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgYm91bmRpbmcgYm94IGFuZCB2YXJpb3VzIG1ldHJpY3MgZm9yIHRoZSBjdXJyZW50IHRleHQgYW5kIGZvbnRcclxuICogQHByaXZhdGVcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuX2NhbGN1bGF0ZU1ldHJpY3MgPSBmdW5jdGlvbihzaG91bGRVcGRhdGVIZWlnaHQpIHsgIFxyXG4gICAgLy8gcDUgMC41LjAgaGFzIGEgYnVnIC0gdGV4dCBib3VuZHMgYXJlIGNsaXBwZWQgYnkgKDAsIDApXHJcbiAgICAvLyBDYWxjdWxhdGluZyBib3VuZHMgaGFja1xyXG4gICAgdmFyIGJvdW5kcyA9IHRoaXMuX2ZvbnQudGV4dEJvdW5kcyh0aGlzLl90ZXh0LCAxMDAwLCAxMDAwLCB0aGlzLl9mb250U2l6ZSk7XHJcbiAgICAvLyBCb3VuZHMgaXMgYSByZWZlcmVuY2UgLSBpZiB3ZSBtZXNzIHdpdGggaXQgZGlyZWN0bHksIHdlIGNhbiBtZXNzIHVwIFxyXG4gICAgLy8gZnV0dXJlIHZhbHVlcyEgKEl0IGNoYW5nZXMgdGhlIGJib3ggY2FjaGUgaW4gcDUuKVxyXG4gICAgYm91bmRzID0geyBcclxuICAgICAgICB4OiBib3VuZHMueCAtIDEwMDAsIFxyXG4gICAgICAgIHk6IGJvdW5kcy55IC0gMTAwMCwgXHJcbiAgICAgICAgdzogYm91bmRzLncsIFxyXG4gICAgICAgIGg6IGJvdW5kcy5oIFxyXG4gICAgfTsgXHJcblxyXG4gICAgaWYgKHNob3VsZFVwZGF0ZUhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuX2FzY2VudCA9IHRoaXMuX2ZvbnQuX3RleHRBc2NlbnQodGhpcy5fZm9udFNpemUpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NlbnQgPSB0aGlzLl9mb250Ll90ZXh0RGVzY2VudCh0aGlzLl9mb250U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNlIGJvdW5kcyB0byBjYWxjdWxhdGUgZm9udCBtZXRyaWNzXHJcbiAgICB0aGlzLndpZHRoID0gYm91bmRzLnc7XHJcbiAgICB0aGlzLmhlaWdodCA9IGJvdW5kcy5oO1xyXG4gICAgdGhpcy5oYWxmV2lkdGggPSB0aGlzLndpZHRoIC8gMjtcclxuICAgIHRoaXMuaGFsZkhlaWdodCA9IHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgIHRoaXMuX2JvdW5kc09mZnNldCA9IHsgeDogYm91bmRzLngsIHk6IGJvdW5kcy55IH07XHJcbiAgICB0aGlzLl9kaXN0QmFzZVRvTWlkID0gTWF0aC5hYnMoYm91bmRzLnkpIC0gdGhpcy5oYWxmSGVpZ2h0O1xyXG4gICAgdGhpcy5fZGlzdEJhc2VUb0JvdHRvbSA9IHRoaXMuaGVpZ2h0IC0gTWF0aC5hYnMoYm91bmRzLnkpO1xyXG59OyIsImV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIHJldHVybiAodmFsdWUgIT09IHVuZGVmaW5lZCkgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IEhvdmVyU2xpZGVzaG93cztcclxuXHJcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKFwiLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG5mdW5jdGlvbiBIb3ZlclNsaWRlc2hvd3Moc2xpZGVzaG93RGVsYXksIHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgdGhpcy5fc2xpZGVzaG93RGVsYXkgPSAoc2xpZGVzaG93RGVsYXkgIT09IHVuZGVmaW5lZCkgPyBzbGlkZXNob3dEZWxheSA6IFxyXG4gICAgICAgIDIwMDA7XHJcbiAgICB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24gPSAodHJhbnNpdGlvbkR1cmF0aW9uICE9PSB1bmRlZmluZWQpID8gXHJcbiAgICAgICAgX3RyYW5zaXRpb25EdXJhdGlvbiA6IDEwMDA7ICAgXHJcblxyXG4gICAgdGhpcy5fc2xpZGVzaG93cyA9IFtdO1xyXG4gICAgdGhpcy5yZWxvYWQoKTtcclxufVxyXG5cclxuSG92ZXJTbGlkZXNob3dzLnByb3RvdHlwZS5yZWxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBOb3RlOiB0aGlzIGlzIGN1cnJlbnRseSBub3QgcmVhbGx5IGJlaW5nIHVzZWQuIFdoZW4gYSBwYWdlIGlzIGxvYWRlZCxcclxuICAgIC8vIG1haW4uanMgaXMganVzdCByZS1pbnN0YW5jaW5nIHRoZSBIb3ZlclNsaWRlc2hvd3NcclxuICAgIHZhciBvbGRTbGlkZXNob3dzID0gdGhpcy5fc2xpZGVzaG93cyB8fCBbXTtcclxuICAgIHRoaXMuX3NsaWRlc2hvd3MgPSBbXTtcclxuICAgICQoXCIuaG92ZXItc2xpZGVzaG93XCIpLmVhY2goZnVuY3Rpb24gKF8sIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmRJblNsaWRlc2hvd3MoZWxlbWVudCwgb2xkU2xpZGVzaG93cyk7XHJcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzaG93ID0gb2xkU2xpZGVzaG93cy5zcGxpY2UoaW5kZXgsIDEpWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9zbGlkZXNob3dzLnB1c2goc2xpZGVzaG93KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zbGlkZXNob3dzLnB1c2gobmV3IFNsaWRlc2hvdygkZWxlbWVudCwgdGhpcy5fc2xpZGVzaG93RGVsYXksXHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuSG92ZXJTbGlkZXNob3dzLnByb3RvdHlwZS5fZmluZEluU2xpZGVzaG93cyA9IGZ1bmN0aW9uIChlbGVtZW50LCBzbGlkZXNob3dzKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWRlc2hvd3MubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCA9PT0gc2xpZGVzaG93c1tpXS5nZXRFbGVtZW50KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIC0xO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gU2xpZGVzaG93KCRjb250YWluZXIsIHNsaWRlc2hvd0RlbGF5LCB0cmFuc2l0aW9uRHVyYXRpb24pIHtcclxuICAgIHRoaXMuXyRjb250YWluZXIgPSAkY29udGFpbmVyO1xyXG4gICAgdGhpcy5fc2xpZGVzaG93RGVsYXkgPSBzbGlkZXNob3dEZWxheTtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbjtcclxuICAgIHRoaXMuX3RpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0aGlzLl9pbWFnZUluZGV4ID0gMDtcclxuICAgIHRoaXMuXyRpbWFnZXMgPSBbXTtcclxuXHJcbiAgICAvLyBTZXQgdXAgYW5kIGNhY2hlIHJlZmVyZW5jZXMgdG8gaW1hZ2VzXHJcbiAgICB0aGlzLl8kY29udGFpbmVyLmZpbmQoXCJpbWdcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJGltYWdlID0gJChlbGVtZW50KTtcclxuICAgICAgICAkaW1hZ2UuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgdG9wOiBcIjBcIixcclxuICAgICAgICAgICAgbGVmdDogXCIwXCIsXHJcbiAgICAgICAgICAgIHpJbmRleDogKGluZGV4ID09PSAwKSA/IDIgOiAwIC8vIEZpcnN0IGltYWdlIHNob3VsZCBiZSBvbiB0b3BcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzLnB1c2goJGltYWdlKTtcclxuICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gYmluZCBpbnRlcmFjdGl2aXR5XHJcbiAgICB0aGlzLl9udW1JbWFnZXMgPSB0aGlzLl8kaW1hZ2VzLmxlbmd0aDtcclxuICAgIGlmICh0aGlzLl9udW1JbWFnZXMgPD0gMSkgcmV0dXJuO1xyXG5cclxuICAgIC8vIEJpbmQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl8kY29udGFpbmVyLm9uKFwibW91c2VlbnRlclwiLCB0aGlzLl9vbkVudGVyLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJGNvbnRhaW5lci5vbihcIm1vdXNlbGVhdmVcIiwgdGhpcy5fb25MZWF2ZS5iaW5kKHRoaXMpKTtcclxuXHJcbn1cclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl8kY29udGFpbmVyLmdldCgwKTtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0JEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJGNvbnRhaW5lcjtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuX29uRW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBGaXJzdCB0cmFuc2l0aW9uIHNob3VsZCBoYXBwZW4gcHJldHR5IHNvb24gYWZ0ZXIgaG92ZXJpbmcgaW4gb3JkZXJcclxuICAgIC8vIHRvIGNsdWUgdGhlIHVzZXIgaW50byB3aGF0IGlzIGhhcHBlbmluZ1xyXG4gICAgdGhpcy5fdGltZW91dElkID0gc2V0VGltZW91dCh0aGlzLl9hZHZhbmNlU2xpZGVzaG93LmJpbmQodGhpcyksIDUwMCk7XHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLl9vbkxlYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lb3V0SWQpOyAgXHJcbiAgICB0aGlzLl90aW1lb3V0SWQgPSBudWxsOyAgICAgIFxyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5fYWR2YW5jZVNsaWRlc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2ltYWdlSW5kZXggKz0gMTtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIC8vIE1vdmUgdGhlIGltYWdlIGZyb20gMiBzdGVwcyBhZ28gZG93biB0byB0aGUgYm90dG9tIHotaW5kZXggYW5kIG1ha2VcclxuICAgIC8vIGl0IGludmlzaWJsZVxyXG4gICAgaWYgKHRoaXMuX251bUltYWdlcyA+PSAzKSB7XHJcbiAgICAgICAgaSA9IHV0aWxpdGllcy53cmFwSW5kZXgodGhpcy5faW1hZ2VJbmRleCAtIDIsIHRoaXMuX251bUltYWdlcyk7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlc1tpXS5jc3Moe1xyXG4gICAgICAgICAgICB6SW5kZXg6IDAsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzW2ldLnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZlIHRoZSBpbWFnZSBmcm9tIDEgc3RlcHMgYWdvIGRvd24gdG8gdGhlIG1pZGRsZSB6LWluZGV4IGFuZCBtYWtlXHJcbiAgICAvLyBpdCBjb21wbGV0ZWx5IHZpc2libGVcclxuICAgIGlmICh0aGlzLl9udW1JbWFnZXMgPj0gMikge1xyXG4gICAgICAgIGkgPSB1dGlsaXRpZXMud3JhcEluZGV4KHRoaXMuX2ltYWdlSW5kZXggLSAxLCB0aGlzLl9udW1JbWFnZXMpO1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZXNbaV0uY3NzKHtcclxuICAgICAgICAgICAgekluZGV4OiAxLFxyXG4gICAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlc1tpXS52ZWxvY2l0eShcInN0b3BcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW92ZSB0aGUgY3VycmVudCBpbWFnZSB0byB0aGUgdG9wIHotaW5kZXggYW5kIGZhZGUgaXQgaW5cclxuICAgIHRoaXMuX2ltYWdlSW5kZXggPSB1dGlsaXRpZXMud3JhcEluZGV4KHRoaXMuX2ltYWdlSW5kZXgsIHRoaXMuX251bUltYWdlcyk7XHJcbiAgICB0aGlzLl8kaW1hZ2VzW3RoaXMuX2ltYWdlSW5kZXhdLmNzcyh7XHJcbiAgICAgICAgekluZGV4OiAyLFxyXG4gICAgICAgIG9wYWNpdHk6IDBcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fJGltYWdlc1t0aGlzLl9pbWFnZUluZGV4XS52ZWxvY2l0eSh7XHJcbiAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgfSwgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uLCBcImVhc2VJbk91dFF1YWRcIik7XHJcblxyXG4gICAgLy8gU2NoZWR1bGUgbmV4dCB0cmFuc2l0aW9uXHJcbiAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX2FkdmFuY2VTbGlkZXNob3cuYmluZCh0aGlzKSwgXHJcbiAgICAgICAgdGhpcy5fc2xpZGVzaG93RGVsYXkpO1xyXG59OyIsIm1vZHVsZS5leHBvcnRzID0gQmFzZUxvZ29Ta2V0Y2g7XHJcblxyXG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuZnVuY3Rpb24gQmFzZUxvZ29Ta2V0Y2goJG5hdiwgJG5hdkxvZ28sIGZvbnRQYXRoKSB7XHJcbiAgICB0aGlzLl8kbmF2ID0gJG5hdjtcclxuICAgIHRoaXMuXyRuYXZMb2dvID0gJG5hdkxvZ287XHJcbiAgICB0aGlzLl9mb250UGF0aCA9IGZvbnRQYXRoO1xyXG5cclxuICAgIHRoaXMuX3RleHQgPSB0aGlzLl8kbmF2TG9nby50ZXh0KCk7XHJcbiAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSB0cnVlO1xyXG4gICAgdGhpcy5faXNNb3VzZU92ZXIgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzT3Zlck5hdkxvZ28gPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLl91cGRhdGVUZXh0T2Zmc2V0KCk7XHJcbiAgICB0aGlzLl91cGRhdGVTaXplKCk7XHJcbiAgICB0aGlzLl91cGRhdGVGb250U2l6ZSgpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIChyZWxhdGl2ZSBwb3NpdGlvbmVkKSBjb250YWluZXIgZm9yIHRoZSBza2V0Y2ggaW5zaWRlIG9mIHRoZVxyXG4gICAgLy8gbmF2LCBidXQgbWFrZSBzdXJlIHRoYXQgaXQgaXMgQkVISU5EIGV2ZXJ5dGhpbmcgZWxzZS4gRXZlbnR1YWxseSwgd2Ugd2lsbFxyXG4gICAgLy8gZHJvcCBqdXN0IHRoZSBuYXYgbG9nbyAobm90IHRoZSBuYXYgbGlua3MhKSBiZWhpbmQgdGhlIGNhbnZhcy5cclxuICAgIHRoaXMuXyRjb250YWluZXIgPSAkKFwiPGRpdj5cIilcclxuICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgdG9wOiBcIjBweFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBcIjBweFwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICAucHJlcGVuZFRvKHRoaXMuXyRuYXYpXHJcbiAgICAgICAgLmhpZGUoKTtcclxuXHJcbiAgICB0aGlzLl9jcmVhdGVQNUluc3RhbmNlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBuZXcgcDUgaW5zdGFuY2UgYW5kIGJpbmQgdGhlIGFwcHJvcHJpYXRlIGNsYXNzIG1ldGhvZHMgdG8gdGhlXHJcbiAqIGluc3RhbmNlLiBUaGlzIGFsc28gZmlsbHMgaW4gdGhlIHAgcGFyYW1ldGVyIG9uIHRoZSBjbGFzcyBtZXRob2RzIChzZXR1cCxcclxuICogZHJhdywgZXRjLikgc28gdGhhdCB0aG9zZSBmdW5jdGlvbnMgY2FuIGJlIGEgbGl0dGxlIGxlc3MgdmVyYm9zZSA6KSBcclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fY3JlYXRlUDVJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIG5ldyBwNShmdW5jdGlvbihwKSB7XHJcbiAgICAgICAgdGhpcy5fcCA9IHA7XHJcbiAgICAgICAgcC5wcmVsb2FkID0gdGhpcy5fcHJlbG9hZC5iaW5kKHRoaXMsIHApO1xyXG4gICAgICAgIHAuc2V0dXAgPSB0aGlzLl9zZXR1cC5iaW5kKHRoaXMsIHApO1xyXG4gICAgICAgIHAuZHJhdyA9IHRoaXMuX2RyYXcuYmluZCh0aGlzLCBwKTtcclxuICAgIH0uYmluZCh0aGlzKSwgdGhpcy5fJGNvbnRhaW5lci5nZXQoMCkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZpbmQgdGhlIGRpc3RhbmNlIGZyb20gdGhlIHRvcCBsZWZ0IG9mIHRoZSBuYXYgdG8gdGhlIGJyYW5kIGxvZ28ncyBiYXNlbGluZS5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fdXBkYXRlVGV4dE9mZnNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYXNlbGluZURpdiA9ICQoXCI8ZGl2PlwiKVxyXG4gICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxyXG4gICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcImJhc2VsaW5lXCJcclxuICAgICAgICB9KS5wcmVwZW5kVG8odGhpcy5fJG5hdkxvZ28pO1xyXG4gICAgdmFyIG5hdk9mZnNldCA9IHRoaXMuXyRuYXYub2Zmc2V0KCk7XHJcbiAgICB2YXIgbG9nb0Jhc2VsaW5lT2Zmc2V0ID0gYmFzZWxpbmVEaXYub2Zmc2V0KCk7XHJcbiAgICB0aGlzLl90ZXh0T2Zmc2V0ID0ge1xyXG4gICAgICAgIHRvcDogbG9nb0Jhc2VsaW5lT2Zmc2V0LnRvcCAtIG5hdk9mZnNldC50b3AsXHJcbiAgICAgICAgbGVmdDogbG9nb0Jhc2VsaW5lT2Zmc2V0LmxlZnQgLSBuYXZPZmZzZXQubGVmdFxyXG4gICAgfTtcclxuICAgIGJhc2VsaW5lRGl2LnJlbW92ZSgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZpbmQgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgYnJhbmQgbG9nbyBpbiB0aGUgbmF2LiBUaGlzIGJib3ggY2FuIHRoZW4gYmUgXHJcbiAqIHVzZWQgdG8gY29udHJvbCB3aGVuIHRoZSBjdXJzb3Igc2hvdWxkIGJlIGEgcG9pbnRlci5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fY2FsY3VsYXRlTmF2TG9nb0JvdW5kcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuYXZPZmZzZXQgPSB0aGlzLl8kbmF2Lm9mZnNldCgpO1xyXG4gICAgdmFyIGxvZ29PZmZzZXQgPSB0aGlzLl8kbmF2TG9nby5vZmZzZXQoKTtcclxuICAgIHRoaXMuX2xvZ29CYm94ID0ge1xyXG4gICAgICAgIHk6IGxvZ29PZmZzZXQudG9wIC0gbmF2T2Zmc2V0LnRvcCxcclxuICAgICAgICB4OiBsb2dvT2Zmc2V0LmxlZnQgLSBuYXZPZmZzZXQubGVmdCxcclxuICAgICAgICB3OiB0aGlzLl8kbmF2TG9nby5vdXRlcldpZHRoKCksIC8vIEV4Y2x1ZGUgbWFyZ2luIGZyb20gdGhlIGJib3hcclxuICAgICAgICBoOiB0aGlzLl8kbmF2TG9nby5vdXRlckhlaWdodCgpIC8vIExpbmtzIGFyZW4ndCBjbGlja2FibGUgb24gbWFyZ2luXHJcbiAgICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgZGltZW5zaW9ucyB0byBtYXRjaCB0aGUgbmF2IC0gZXhjbHVkaW5nIGFueSBtYXJnaW4sIHBhZGRpbmcgJiBcclxuICogYm9yZGVyLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl91cGRhdGVTaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fd2lkdGggPSB0aGlzLl8kbmF2LmlubmVyV2lkdGgoKTtcclxuICAgIHRoaXMuX2hlaWdodCA9IHRoaXMuXyRuYXYuaW5uZXJIZWlnaHQoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHcmFiIHRoZSBmb250IHNpemUgZnJvbSB0aGUgYnJhbmQgbG9nbyBsaW5rLiBUaGlzIG1ha2VzIHRoZSBmb250IHNpemUgb2YgdGhlXHJcbiAqIHNrZXRjaCByZXNwb25zaXZlLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl91cGRhdGVGb250U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2ZvbnRTaXplID0gdGhpcy5fJG5hdkxvZ28uY3NzKFwiZm9udFNpemVcIikucmVwbGFjZShcInB4XCIsIFwiXCIpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFdoZW4gdGhlIGJyb3dzZXIgaXMgcmVzaXplZCwgcmVjYWxjdWxhdGUgYWxsIHRoZSBuZWNlc3Nhcnkgc3RhdHMgc28gdGhhdCB0aGVcclxuICogc2tldGNoIGNhbiBiZSByZXNwb25zaXZlLiBUaGUgbG9nbyBpbiB0aGUgc2tldGNoIHNob3VsZCBBTFdBWVMgZXhhY3RseSBtYXRjaFxyXG4gKiB0aGUgYnJhbmcgbG9nbyBsaW5rIHRoZSBIVE1MLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICB0aGlzLl91cGRhdGVTaXplKCk7XHJcbiAgICB0aGlzLl91cGRhdGVGb250U2l6ZSgpO1xyXG4gICAgdGhpcy5fdXBkYXRlVGV4dE9mZnNldCgpO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTmF2TG9nb0JvdW5kcygpO1xyXG4gICAgcC5yZXNpemVDYW52YXModGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBfaXNNb3VzZU92ZXIgcHJvcGVydHkuIFxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXRNb3VzZU92ZXIgPSBmdW5jdGlvbiAoaXNNb3VzZU92ZXIpIHtcclxuICAgIHRoaXMuX2lzTW91c2VPdmVyID0gaXNNb3VzZU92ZXI7XHJcbn07XHJcblxyXG4vKipcclxuICogSWYgdGhlIGN1cnNvciBpcyBzZXQgdG8gYSBwb2ludGVyLCBmb3J3YXJkIGFueSBjbGljayBldmVudHMgdG8gdGhlIG5hdiBsb2dvLlxyXG4gKiBUaGlzIHJlZHVjZXMgdGhlIG5lZWQgZm9yIHRoZSBjYW52YXMgdG8gZG8gYW55IEFKQVgteSBzdHVmZi5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fb25DbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAodGhpcy5faXNPdmVyTmF2TG9nbykgdGhpcy5fJG5hdkxvZ28udHJpZ2dlcihlKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIHByZWxvYWQgbWV0aG9kIHRoYXQganVzdCBsb2FkcyB0aGUgbmVjZXNzYXJ5IGZvbnRcclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fcHJlbG9hZCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICB0aGlzLl9mb250ID0gcC5sb2FkRm9udCh0aGlzLl9mb250UGF0aCk7XHJcbn07XHJcblxyXG4vKipcclxuICogQmFzZSBzZXR1cCBtZXRob2QgdGhhdCBkb2VzIHNvbWUgaGVhdnkgbGlmdGluZy4gSXQgaGlkZXMgdGhlIG5hdiBicmFuZCBsb2dvXHJcbiAqIGFuZCByZXZlYWxzIHRoZSBjYW52YXMuIEl0IGFsc28gc2V0cyB1cCBhIGxvdCBvZiB0aGUgaW50ZXJuYWwgdmFyaWFibGVzIGFuZFxyXG4gKiBjYW52YXMgZXZlbnRzLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICB2YXIgcmVuZGVyZXIgPSBwLmNyZWF0ZUNhbnZhcyh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcclxuICAgIHRoaXMuXyRjYW52YXMgPSAkKHJlbmRlcmVyLmNhbnZhcyk7XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgY2FudmFzIGFuZCBoaWRlIHRoZSBsb2dvLiBVc2luZyBzaG93L2hpZGUgb24gdGhlIGxvZ28gd2lsbCBjYXVzZVxyXG4gICAgLy8galF1ZXJ5IHRvIG11Y2sgd2l0aCB0aGUgcG9zaXRpb25pbmcsIHdoaWNoIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHdoZXJlIHRvXHJcbiAgICAvLyBkcmF3IHRoZSBjYW52YXMgdGV4dC4gSW5zdGVhZCwganVzdCBwdXNoIHRoZSBsb2dvIGJlaGluZCB0aGUgY2FudmFzLiBUaGlzXHJcbiAgICAvLyBhbGxvd3MgbWFrZXMgaXQgc28gdGhlIGNhbnZhcyBpcyBzdGlsbCBiZWhpbmQgdGhlIG5hdiBsaW5rcy5cclxuICAgIHRoaXMuXyRjb250YWluZXIuc2hvdygpO1xyXG4gICAgdGhpcy5fJG5hdkxvZ28uY3NzKFwiekluZGV4XCIsIC0xKTtcclxuXHJcbiAgICAvLyBUaGVyZSBpc24ndCBhIGdvb2Qgd2F5IHRvIGNoZWNrIHdoZXRoZXIgdGhlIHNrZXRjaCBoYXMgdGhlIG1vdXNlIG92ZXJcclxuICAgIC8vIGl0LiBwLm1vdXNlWCAmIHAubW91c2VZIGFyZSBpbml0aWFsaXplZCB0byAoMCwgMCksIGFuZCBwLmZvY3VzZWQgaXNuJ3QgXHJcbiAgICAvLyBhbHdheXMgcmVsaWFibGUuXHJcbiAgICB0aGlzLl8kY2FudmFzLm9uKFwibW91c2VvdmVyXCIsIHRoaXMuX3NldE1vdXNlT3Zlci5iaW5kKHRoaXMsIHRydWUpKTtcclxuICAgIHRoaXMuXyRjYW52YXMub24oXCJtb3VzZW91dFwiLCB0aGlzLl9zZXRNb3VzZU92ZXIuYmluZCh0aGlzLCBmYWxzZSkpO1xyXG5cclxuICAgIC8vIEZvcndhcmQgbW91c2UgY2xpY2tzIHRvIHRoZSBuYXYgbG9nb1xyXG4gICAgdGhpcy5fJGNhbnZhcy5vbihcImNsaWNrXCIsIHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgd2luZG93IGlzIHJlc2l6ZWQsIHRleHQgJiBjYW52YXMgc2l6aW5nIGFuZCBwbGFjZW1lbnQgbmVlZCB0byBiZVxyXG4gICAgLy8gcmVjYWxjdWxhdGVkLiBUaGUgc2l0ZSBpcyByZXNwb25zaXZlLCBzbyB0aGUgaW50ZXJhY3RpdmUgY2FudmFzIHNob3VsZCBiZVxyXG4gICAgLy8gdG9vISBcclxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCB0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMsIHApKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIGRyYXcgbWV0aG9kIHRoYXQgY29udHJvbHMgd2hldGhlciBvciBub3QgdGhlIGN1cnNvciBpcyBhIHBvaW50ZXIuIEl0XHJcbiAqIHNob3VsZCBvbmx5IGJlIGEgcG9pbnRlciB3aGVuIHRoZSBtb3VzZSBpcyBvdmVyIHRoZSBuYXYgYnJhbmQgbG9nby5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fZHJhdyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBpZiAodGhpcy5faXNNb3VzZU92ZXIpIHtcclxuICAgICAgICB2YXIgaXNPdmVyTG9nbyA9IHV0aWxzLmlzSW5SZWN0KHAubW91c2VYLCBwLm1vdXNlWSwgdGhpcy5fbG9nb0Jib3gpO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNPdmVyTmF2TG9nbyAmJiBpc092ZXJMb2dvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3Zlck5hdkxvZ28gPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl8kY2FudmFzLmNzcyhcImN1cnNvclwiLCBcInBvaW50ZXJcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9pc092ZXJOYXZMb2dvICYmICFpc092ZXJMb2dvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3Zlck5hdkxvZ28gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fJGNhbnZhcy5jc3MoXCJjdXJzb3JcIiwgXCJpbml0aWFsXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IFNrZXRjaDtcclxuXHJcbnZhciBCYm94VGV4dCA9IHJlcXVpcmUoXCJwNS1iYm94LWFsaWduZWQtdGV4dFwiKTtcclxudmFyIEJhc2VMb2dvU2tldGNoID0gcmVxdWlyZShcIi4vYmFzZS1sb2dvLXNrZXRjaC5qc1wiKTtcclxudmFyIFNpbkdlbmVyYXRvciA9IHJlcXVpcmUoXCIuL2dlbmVyYXRvcnMvc2luLWdlbmVyYXRvci5qc1wiKTtcclxuXHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUpO1xyXG5cclxuZnVuY3Rpb24gU2tldGNoKCRuYXYsICRuYXZMb2dvKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5jYWxsKHRoaXMsICRuYXYsICRuYXZMb2dvLCBcIi4uL2ZvbnRzL2JpZ19qb2huLXdlYmZvbnQudHRmXCIpO1xyXG59XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplLmNhbGwodGhpcywgcCk7XHJcbiAgICB0aGlzLl9zcGFjaW5nID0gdXRpbHMubWFwKHRoaXMuX2ZvbnRTaXplLCAyMCwgNDAsIDIsIDUsIHtjbGFtcDogdHJ1ZSwgXHJcbiAgICAgICAgcm91bmQ6IHRydWV9KTtcclxuICAgIC8vIFVwZGF0ZSB0aGUgYmJveFRleHQsIHBsYWNlIG92ZXIgdGhlIG5hdiB0ZXh0IGxvZ28gYW5kIHRoZW4gc2hpZnQgaXRzIFxyXG4gICAgLy8gYW5jaG9yIGJhY2sgdG8gKGNlbnRlciwgY2VudGVyKSB3aGlsZSBwcmVzZXJ2aW5nIHRoZSB0ZXh0IHBvc2l0aW9uXHJcbiAgICB0aGlzLl9iYm94VGV4dC5zZXRUZXh0KHRoaXMuX3RleHQpXHJcbiAgICAgICAgLnNldFRleHRTaXplKHRoaXMuX2ZvbnRTaXplKVxyXG4gICAgICAgIC5zZXRBbmNob3IoQmJveFRleHQuQUxJR04uQk9YX0xFRlQsIEJib3hUZXh0LkJBU0VMSU5FLkFMUEhBQkVUSUMpXHJcbiAgICAgICAgLnNldFBvc2l0aW9uKHRoaXMuX3RleHRPZmZzZXQubGVmdCwgdGhpcy5fdGV4dE9mZnNldC50b3ApXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfQ0VOVEVSLCBCYm94VGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSLCBcclxuICAgICAgICAgICAgdHJ1ZSk7XHJcbiAgICB0aGlzLl9kcmF3U3RhdGlvbmFyeUxvZ28ocCk7XHJcbiAgICB0aGlzLl9wb2ludHMgPSB0aGlzLl9iYm94VGV4dC5nZXRUZXh0UG9pbnRzKCk7XHJcbiAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSB0cnVlO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhd1N0YXRpb25hcnlMb2dvID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgcC5zdHJva2UoMjU1KTtcclxuICAgIHAuZmlsbChcIiMwQTAwMEFcIik7XHJcbiAgICBwLnN0cm9rZVdlaWdodCgyKTtcclxuICAgIHRoaXMuX2Jib3hUZXh0LmRyYXcoKTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX3NldHVwID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fc2V0dXAuY2FsbCh0aGlzLCBwKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBCYm94QWxpZ25lZFRleHQgaW5zdGFuY2UgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGRyYXdpbmcgYW5kIFxyXG4gICAgLy8gcm90YXRpbmcgdGV4dFxyXG4gICAgdGhpcy5fYmJveFRleHQgPSBuZXcgQmJveFRleHQodGhpcy5fZm9udCwgdGhpcy5fdGV4dCwgdGhpcy5fZm9udFNpemUsIDAsIDAsXHJcbiAgICAgICAgcCk7XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBpbml0aWFsIHNldHVwIGJ5IHRyaWdnZXJpbmcgYSByZXNpemVcclxuICAgIHRoaXMuX29uUmVzaXplKHApO1xyXG5cclxuICAgIC8vIERyYXcgdGhlIHN0YXRpb25hcnkgbG9nb1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG5cclxuICAgIC8vIFN0YXJ0IHRoZSBzaW4gZ2VuZXJhdG9yIGF0IGl0cyBtYXggdmFsdWVcclxuICAgIHRoaXMuX3RocmVzaG9sZEdlbmVyYXRvciA9IG5ldyBTaW5HZW5lcmF0b3IocCwgMCwgMSwgMC4wMiwgcC5QSS8yKTsgXHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3ID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fZHJhdy5jYWxsKHRoaXMsIHApO1xyXG4gICAgaWYgKCF0aGlzLl9pc01vdXNlT3ZlciB8fCAhdGhpcy5faXNPdmVyTmF2TG9nbykgcmV0dXJuO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIHRleHQgaXMgYWJvdXQgdG8gYmVjb21lIGFjdGl2ZSBmb3IgdGhlIGZpcnN0IHRpbWUsIGNsZWFyXHJcbiAgICAvLyB0aGUgc3RhdGlvbmFyeSBsb2dvIHRoYXQgd2FzIHByZXZpb3VzbHkgZHJhd24uIFxyXG4gICAgaWYgKHRoaXMuX2lzRmlyc3RGcmFtZSkge1xyXG4gICAgICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLl9mb250U2l6ZSA+IDMwKSB7XHJcbiAgICAgICAgdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yLnNldEJvdW5kcygwLjIgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQsIFxyXG4gICAgICAgICAgICAwLjQ3ICogdGhpcy5fYmJveFRleHQuaGVpZ2h0KTsgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yLnNldEJvdW5kcygwLjIgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQsIFxyXG4gICAgICAgICAgICAwLjYgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQpOyAgICAgICAgICBcclxuICAgIH1cclxuICAgIHZhciBkaXN0YW5jZVRocmVzaG9sZCA9IHRoaXMuX3RocmVzaG9sZEdlbmVyYXRvci5nZW5lcmF0ZSgpO1xyXG4gICAgXHJcbiAgICBwLmJhY2tncm91bmQoMjU1LCAxMDApO1xyXG4gICAgcC5zdHJva2VXZWlnaHQoMSk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3BvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIHZhciBwb2ludDEgPSB0aGlzLl9wb2ludHNbaV07XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgaiArPSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludDIgPSB0aGlzLl9wb2ludHNbal07XHJcbiAgICAgICAgICAgIHZhciBkaXN0ID0gcC5kaXN0KHBvaW50MS54LCBwb2ludDEueSwgcG9pbnQyLngsIHBvaW50Mi55KTtcclxuICAgICAgICAgICAgaWYgKGRpc3QgPCBkaXN0YW5jZVRocmVzaG9sZCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHAubm9TdHJva2UoKTtcclxuICAgICAgICAgICAgICAgIHAuZmlsbChcInJnYmEoMTY1LCAwLCAxNzMsIDAuMjUpXCIpO1xyXG4gICAgICAgICAgICAgICAgcC5lbGxpcHNlKChwb2ludDEueCArIHBvaW50Mi54KSAvIDIsIChwb2ludDEueSArIHBvaW50Mi55KSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdCwgZGlzdCk7ICBcclxuXHJcbiAgICAgICAgICAgICAgICBwLnN0cm9rZShcInJnYmEoMTY1LCAwLCAxNzMsIDAuMjUpXCIpO1xyXG4gICAgICAgICAgICAgICAgcC5ub0ZpbGwoKTtcclxuICAgICAgICAgICAgICAgIHAubGluZShwb2ludDEueCwgcG9pbnQxLnksIHBvaW50Mi54LCBwb2ludDIueSk7ICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIE5vaXNlR2VuZXJhdG9yMUQ6IE5vaXNlR2VuZXJhdG9yMUQsXHJcbiAgICBOb2lzZUdlbmVyYXRvcjJEOiBOb2lzZUdlbmVyYXRvcjJEXHJcbn07XHJcblxyXG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuLy8gLS0gMUQgTm9pc2UgR2VuZXJhdG9yIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgY2xhc3MgZm9yIGdlbmVyYXRpbmcgbm9pc2UgdmFsdWVzXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge29iamVjdH0gcCAgICAgICAgICAgICAgIFJlZmVyZW5jZSB0byBhIHA1IHNrZXRjaFxyXG4gKiBAcGFyYW0ge251bWJlcn0gW21pbj0wXSAgICAgICAgIE1pbmltdW0gdmFsdWUgZm9yIHRoZSBub2lzZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW21heD0xXSAgICAgICAgIE1heGltdW0gdmFsdWUgZm9yIHRoZSBub2lzZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW2luY3JlbWVudD0wLjFdIFNjYWxlIG9mIHRoZSBub2lzZSwgdXNlZCB3aGVuIHVwZGF0aW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb2Zmc2V0PXJhbmRvbV0gQSB2YWx1ZSB1c2VkIHRvIGVuc3VyZSBtdWx0aXBsZSBub2lzZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRvcnMgYXJlIHJldHVybmluZyBcImluZGVwZW5kZW50XCIgdmFsdWVzXHJcbiAqL1xyXG5mdW5jdGlvbiBOb2lzZUdlbmVyYXRvcjFEKHAsIG1pbiwgbWF4LCBpbmNyZW1lbnQsIG9mZnNldCkge1xyXG4gICAgdGhpcy5fcCA9IHA7XHJcbiAgICB0aGlzLl9taW4gPSB1dGlscy5kZWZhdWx0KG1pbiwgMCk7XHJcbiAgICB0aGlzLl9tYXggPSB1dGlscy5kZWZhdWx0KG1heCwgMSk7XHJcbiAgICB0aGlzLl9pbmNyZW1lbnQgPSB1dGlscy5kZWZhdWx0KGluY3JlbWVudCwgMC4xKTtcclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdXRpbHMuZGVmYXVsdChvZmZzZXQsIHAucmFuZG9tKC0xMDAwMDAwLCAxMDAwMDAwKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIG1pbiBhbmQgbWF4IG5vaXNlIHZhbHVlc1xyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG1pbiBNaW5pbXVtIG5vaXNlIHZhbHVlXHJcbiAqIEBwYXJhbSAge251bWJlcn0gbWF4IE1heGltdW0gbm9pc2UgdmFsdWVcclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMUQucHJvdG90eXBlLnNldEJvdW5kcyA9IGZ1bmN0aW9uIChtaW4sIG1heCkge1xyXG4gICAgdGhpcy5fbWluID0gdXRpbHMuZGVmYXVsdChtaW4sIHRoaXMuX21pbik7XHJcbiAgICB0aGlzLl9tYXggPSB1dGlscy5kZWZhdWx0KG1heCwgdGhpcy5fbWF4KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIG5vaXNlIGluY3JlbWVudCAoZS5nLiBzY2FsZSlcclxuICogQHBhcmFtICB7bnVtYmVyfSBpbmNyZW1lbnQgTmV3IGluY3JlbWVudCAoc2NhbGUpIHZhbHVlXHJcbiAqL1xyXG5Ob2lzZUdlbmVyYXRvcjFELnByb3RvdHlwZS5zZXRJbmNyZW1lbnQgPSBmdW5jdGlvbiAoaW5jcmVtZW50KSB7XHJcbiAgICB0aGlzLl9pbmNyZW1lbnQgPSB1dGlscy5kZWZhdWx0KGluY3JlbWVudCwgdGhpcy5faW5jcmVtZW50KTtcclxufTtcclxuXHJcbi8qKiBcclxuICogR2VuZXJhdGUgdGhlIG5leHQgbm9pc2UgdmFsdWVcclxuICogQHJldHVybiB7bnVtYmVyfSBBIG5vaXN5IHZhbHVlIGJldHdlZW4gb2JqZWN0J3MgbWluIGFuZCBtYXhcclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMUQucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fdXBkYXRlKCk7XHJcbiAgICB2YXIgbiA9IHRoaXMuX3Aubm9pc2UodGhpcy5fcG9zaXRpb24pO1xyXG4gICAgbiA9IHRoaXMuX3AubWFwKG4sIDAsIDEsIHRoaXMuX21pbiwgdGhpcy5fbWF4KTtcclxuICAgIHJldHVybiBuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludGVybmFsIHVwZGF0ZSBtZXRob2QgZm9yIGdlbmVyYXRpbmcgbmV4dCBub2lzZSB2YWx1ZVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IxRC5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX3Bvc2l0aW9uICs9IHRoaXMuX2luY3JlbWVudDtcclxufTtcclxuXHJcblxyXG4vLyAtLSAyRCBOb2lzZSBHZW5lcmF0b3IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gTm9pc2VHZW5lcmF0b3IyRChwLCB4TWluLCB4TWF4LCB5TWluLCB5TWF4LCB4SW5jcmVtZW50LCB5SW5jcmVtZW50LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0LCB5T2Zmc2V0KSB7XHJcbiAgICB0aGlzLl94Tm9pc2UgPSBuZXcgTm9pc2VHZW5lcmF0b3IxRChwLCB4TWluLCB4TWF4LCB4SW5jcmVtZW50LCB4T2Zmc2V0KTtcclxuICAgIHRoaXMuX3lOb2lzZSA9IG5ldyBOb2lzZUdlbmVyYXRvcjFEKHAsIHlNaW4sIHlNYXgsIHlJbmNyZW1lbnQsIHlPZmZzZXQpO1xyXG4gICAgdGhpcy5fcCA9IHA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIG1pbiBhbmQgbWF4IG5vaXNlIHZhbHVlc1xyXG4gKiBAcGFyYW0gIHtvYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggYm91bmRzIHRvIGJlIHVwZGF0ZWQgZS5nLiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHsgeE1pbjogMCwgeE1heDogMSwgeU1pbjogLTEsIHlNYXg6IDEgfVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IyRC5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmICghb3B0aW9ucykgcmV0dXJuOyAgXHJcbiAgICB0aGlzLl94Tm9pc2Uuc2V0Qm91bmRzKG9wdGlvbnMueE1pbiwgb3B0aW9ucy54TWF4KTtcclxuICAgIHRoaXMuX3lOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy55TWluLCBvcHRpb25zLnlNYXgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgaW5jcmVtZW50IChlLmcuIHNjYWxlKSBmb3IgdGhlIG5vaXNlIGdlbmVyYXRvclxyXG4gKiBAcGFyYW0gIHtvYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggYm91bmRzIHRvIGJlIHVwZGF0ZWQgZS5nLiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHsgeEluY3JlbWVudDogMC4wNSwgeUluY3JlbWVudDogMC4xIH1cclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMkQucHJvdG90eXBlLnNldEJvdW5kcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHJldHVybjtcclxuICAgIHRoaXMuX3hOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy54SW5jcmVtZW50KTtcclxuICAgIHRoaXMuX3lOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy55SW5jcmVtZW50KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZSB0aGUgbmV4dCBwYWlyIG9mIG5vaXNlIHZhbHVlc1xyXG4gKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIHggYW5kIHkgcHJvcGVydGllcyB0aGF0IGNvbnRhaW4gdGhlIG5leHQgbm9pc2VcclxuICogICAgICAgICAgICAgICAgICB2YWx1ZXMgYWxvbmcgZWFjaCBkaW1lbnNpb25cclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMkQucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB0aGlzLl94Tm9pc2UuZ2VuZXJhdGUoKSxcclxuICAgICAgICB5OiB0aGlzLl95Tm9pc2UuZ2VuZXJhdGUoKVxyXG4gICAgfTtcclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IFNpbkdlbmVyYXRvcjtcclxuXHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuLi8uLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG4vKipcclxuICogQSB1dGlsaXR5IGNsYXNzIGZvciBnZW5lcmF0aW5nIHZhbHVlcyBhbG9uZyBhIHNpbndhdmVcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBwICAgICAgICAgICAgICAgUmVmZXJlbmNlIHRvIGEgcDUgc2tldGNoXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWluPTBdICAgICAgICAgTWluaW11bSB2YWx1ZSBmb3IgdGhlIG5vaXNlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4PTFdICAgICAgICAgTWF4aW11bSB2YWx1ZSBmb3IgdGhlIG5vaXNlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW5jcmVtZW50PTAuMV0gSW5jcmVtZW50IHVzZWQgd2hlbiB1cGRhdGluZ1xyXG4gKiBAcGFyYW0ge251bWJlcn0gW29mZnNldD1yYW5kb21dIFdoZXJlIHRvIHN0YXJ0IGFsb25nIHRoZSBzaW5ld2F2ZVxyXG4gKi9cclxuZnVuY3Rpb24gU2luR2VuZXJhdG9yKHAsIG1pbiwgbWF4LCBhbmdsZUluY3JlbWVudCwgc3RhcnRpbmdBbmdsZSkge1xyXG4gICAgdGhpcy5fcCA9IHA7XHJcbiAgICB0aGlzLl9taW4gPSB1dGlscy5kZWZhdWx0KG1pbiwgMCk7XHJcbiAgICB0aGlzLl9tYXggPSB1dGlscy5kZWZhdWx0KG1heCwgMCk7XHJcbiAgICB0aGlzLl9pbmNyZW1lbnQgPSB1dGlscy5kZWZhdWx0KGFuZ2xlSW5jcmVtZW50LCAwLjEpO1xyXG4gICAgdGhpcy5fYW5nbGUgPSB1dGlscy5kZWZhdWx0KHN0YXJ0aW5nQW5nbGUsIHAucmFuZG9tKC0xMDAwMDAwLCAxMDAwMDAwKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIG1pbiBhbmQgbWF4IHZhbHVlc1xyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG1pbiBNaW5pbXVtIHZhbHVlXHJcbiAqIEBwYXJhbSAge251bWJlcn0gbWF4IE1heGltdW0gdmFsdWVcclxuICovXHJcblNpbkdlbmVyYXRvci5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICB0aGlzLl9taW4gPSB1dGlscy5kZWZhdWx0KG1pbiwgdGhpcy5fbWluKTtcclxuICAgIHRoaXMuX21heCA9IHV0aWxzLmRlZmF1bHQobWF4LCB0aGlzLl9tYXgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgYW5nbGUgaW5jcmVtZW50IChlLmcuIGhvdyBmYXN0IHdlIG1vdmUgdGhyb3VnaCB0aGUgc2lud2F2ZSlcclxuICogQHBhcmFtICB7bnVtYmVyfSBpbmNyZW1lbnQgTmV3IGluY3JlbWVudCB2YWx1ZVxyXG4gKi9cclxuU2luR2VuZXJhdG9yLnByb3RvdHlwZS5zZXRJbmNyZW1lbnQgPSBmdW5jdGlvbiAoaW5jcmVtZW50KSB7XHJcbiAgICB0aGlzLl9pbmNyZW1lbnQgPSB1dGlscy5kZWZhdWx0KGluY3JlbWVudCwgdGhpcy5faW5jcmVtZW50KTtcclxufTtcclxuXHJcbi8qKiBcclxuICogR2VuZXJhdGUgdGhlIG5leHQgdmFsdWVcclxuICogQHJldHVybiB7bnVtYmVyfSBBIHZhbHVlIGJldHdlZW4gZ2VuZXJhdG9ycydzIG1pbiBhbmQgbWF4XHJcbiAqL1xyXG5TaW5HZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fdXBkYXRlKCk7XHJcbiAgICB2YXIgbiA9IHRoaXMuX3Auc2luKHRoaXMuX2FuZ2xlKTtcclxuICAgIG4gPSB0aGlzLl9wLm1hcChuLCAtMSwgMSwgdGhpcy5fbWluLCB0aGlzLl9tYXgpO1xyXG4gICAgcmV0dXJuIG47XHJcbn07XHJcblxyXG4vKipcclxuICogSW50ZXJuYWwgdXBkYXRlIG1ldGhvZCBmb3IgZ2VuZXJhdGluZyBuZXh0IHZhbHVlXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5TaW5HZW5lcmF0b3IucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9hbmdsZSArPSB0aGlzLl9pbmNyZW1lbnQ7XHJcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBTa2V0Y2g7XHJcblxyXG52YXIgQmJveFRleHQgPSByZXF1aXJlKFwicDUtYmJveC1hbGlnbmVkLXRleHRcIik7XHJcbnZhciBCYXNlTG9nb1NrZXRjaCA9IHJlcXVpcmUoXCIuL2Jhc2UtbG9nby1za2V0Y2guanNcIik7XHJcblxyXG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuU2tldGNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlKTtcclxuXHJcbmZ1bmN0aW9uIFNrZXRjaCgkbmF2LCAkbmF2TG9nbykge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2guY2FsbCh0aGlzLCAkbmF2LCAkbmF2TG9nbywgXCIuLi9mb250cy9iaWdfam9obi13ZWJmb250LnR0ZlwiKTtcclxufVxyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZS5jYWxsKHRoaXMsIHApO1xyXG4gICAgdGhpcy5fc3BhY2luZyA9IHV0aWxzLm1hcCh0aGlzLl9mb250U2l6ZSwgMjAsIDQwLCAyLCA1LCB7Y2xhbXA6IHRydWUsIFxyXG4gICAgICAgIHJvdW5kOiB0cnVlfSk7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGJib3hUZXh0LCBwbGFjZSBvdmVyIHRoZSBuYXYgdGV4dCBsb2dvIGFuZCB0aGVuIHNoaWZ0IGl0cyBcclxuICAgIC8vIGFuY2hvciBiYWNrIHRvIChjZW50ZXIsIGNlbnRlcikgd2hpbGUgcHJlc2VydmluZyB0aGUgdGV4dCBwb3NpdGlvblxyXG4gICAgdGhpcy5fYmJveFRleHQuc2V0VGV4dCh0aGlzLl90ZXh0KVxyXG4gICAgICAgIC5zZXRUZXh0U2l6ZSh0aGlzLl9mb250U2l6ZSlcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9MRUZULCBCYm94VGV4dC5CQVNFTElORS5BTFBIQUJFVElDKVxyXG4gICAgICAgIC5zZXRQb3NpdGlvbih0aGlzLl90ZXh0T2Zmc2V0LmxlZnQsIHRoaXMuX3RleHRPZmZzZXQudG9wKVxyXG4gICAgICAgIC5zZXRBbmNob3IoQmJveFRleHQuQUxJR04uQk9YX0NFTlRFUiwgQmJveFRleHQuQkFTRUxJTkUuQk9YX0NFTlRFUiwgXHJcbiAgICAgICAgICAgIHRydWUpO1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlQ2lyY2xlcyhwKTtcclxuICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IHRydWU7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3U3RhdGlvbmFyeUxvZ28gPSBmdW5jdGlvbiAocCkge1xyXG4gICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICBwLnN0cm9rZSgyNTUpO1xyXG4gICAgcC5maWxsKFwiIzBBMDAwQVwiKTtcclxuICAgIHAuc3Ryb2tlV2VpZ2h0KDIpO1xyXG4gICAgdGhpcy5fYmJveFRleHQuZHJhdygpO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fc2V0dXAgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cC5jYWxsKHRoaXMsIHApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIEJib3hBbGlnbmVkVGV4dCBpbnN0YW5jZSB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgZHJhd2luZyBhbmQgXHJcbiAgICAvLyByb3RhdGluZyB0ZXh0XHJcbiAgICB0aGlzLl9iYm94VGV4dCA9IG5ldyBCYm94VGV4dCh0aGlzLl9mb250LCB0aGlzLl90ZXh0LCB0aGlzLl9mb250U2l6ZSwgMCwgMCwgXHJcbiAgICAgICAgcCk7XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBpbml0aWFsIHNldHVwIGJ5IHRyaWdnZXJpbmcgYSByZXNpemVcclxuICAgIHRoaXMuX29uUmVzaXplKHApO1xyXG5cclxuICAgIC8vIERyYXcgdGhlIHN0YXRpb25hcnkgbG9nb1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG5cclxuICAgIHRoaXMuX2NhbGN1bGF0ZUNpcmNsZXMocCk7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9jYWxjdWxhdGVDaXJjbGVzID0gZnVuY3Rpb24gKHApIHtcclxuICAgIC8vIFRPRE86IERvbid0IG5lZWQgQUxMIHRoZSBwaXhlbHMuIFRoaXMgY291bGQgaGF2ZSBhbiBvZmZzY3JlZW4gcmVuZGVyZXJcclxuICAgIC8vIHRoYXQgaXMganVzdCBiaWcgZW5vdWdoIHRvIGZpdCB0aGUgdGV4dC5cclxuICAgIC8vIExvb3Agb3ZlciB0aGUgcGl4ZWxzIGluIHRoZSB0ZXh0J3MgYm91bmRpbmcgYm94IHRvIHNhbXBsZSB0aGUgd29yZFxyXG4gICAgdmFyIGJib3ggPSB0aGlzLl9iYm94VGV4dC5nZXRCYm94KCk7XHJcbiAgICB2YXIgc3RhcnRYID0gTWF0aC5mbG9vcihNYXRoLm1heChiYm94LnggLSA1LCAwKSk7XHJcbiAgICB2YXIgZW5kWCA9IE1hdGguY2VpbChNYXRoLm1pbihiYm94LnggKyBiYm94LncgKyA1LCBwLndpZHRoKSk7XHJcbiAgICB2YXIgc3RhcnRZID0gTWF0aC5mbG9vcihNYXRoLm1heChiYm94LnkgLSA1LCAwKSk7XHJcbiAgICB2YXIgZW5kWSA9IE1hdGguY2VpbChNYXRoLm1pbihiYm94LnkgKyBiYm94LmggKyA1LCBwLmhlaWdodCkpO1xyXG4gICAgcC5sb2FkUGl4ZWxzKCk7XHJcbiAgICBwLnBpeGVsRGVuc2l0eSgxKTtcclxuICAgIHRoaXMuX2NpcmNsZXMgPSBbXTtcclxuICAgIGZvciAodmFyIHkgPSBzdGFydFk7IHkgPCBlbmRZOyB5ICs9IHRoaXMuX3NwYWNpbmcpIHtcclxuICAgICAgICBmb3IgKHZhciB4ID0gc3RhcnRYOyB4IDwgZW5kWDsgeCArPSB0aGlzLl9zcGFjaW5nKSB7ICBcclxuICAgICAgICAgICAgdmFyIGkgPSA0ICogKCh5ICogcC53aWR0aCkgKyB4KTtcclxuICAgICAgICAgICAgdmFyIHIgPSBwLnBpeGVsc1tpXTtcclxuICAgICAgICAgICAgdmFyIGcgPSBwLnBpeGVsc1tpICsgMV07XHJcbiAgICAgICAgICAgIHZhciBiID0gcC5waXhlbHNbaSArIDJdO1xyXG4gICAgICAgICAgICB2YXIgYSA9IHAucGl4ZWxzW2kgKyAzXTtcclxuICAgICAgICAgICAgdmFyIGMgPSBwLmNvbG9yKHIsIGcsIGIsIGEpO1xyXG4gICAgICAgICAgICBpZiAocC5zYXR1cmF0aW9uKGMpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2lyY2xlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB4OiB4ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHkgKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHAuY29sb3IoXCIjMDZGRkZGXCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NpcmNsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogeCArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICB5OiB5ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBwLmNvbG9yKFwiI0ZFMDBGRVwiKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaXJjbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHggKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeSArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogcC5jb2xvcihcIiNGRkZGMDRcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhdyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX2RyYXcuY2FsbCh0aGlzLCBwKTtcclxuICAgIGlmICghdGhpcy5faXNNb3VzZU92ZXIgfHwgIXRoaXMuX2lzT3Zlck5hdkxvZ28pIHJldHVybjtcclxuXHJcbiAgICAvLyBXaGVuIHRoZSB0ZXh0IGlzIGFib3V0IHRvIGJlY29tZSBhY3RpdmUgZm9yIHRoZSBmaXJzdCB0aW1lLCBjbGVhclxyXG4gICAgLy8gdGhlIHN0YXRpb25hcnkgbG9nbyB0aGF0IHdhcyBwcmV2aW91c2x5IGRyYXduLiBcclxuICAgIGlmICh0aGlzLl9pc0ZpcnN0RnJhbWUpIHtcclxuICAgICAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuICAgICAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGVhclxyXG4gICAgcC5ibGVuZE1vZGUocC5CTEVORCk7XHJcbiAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuXHJcbiAgICAvLyBEcmF3IFwiaGFsZnRvbmVcIiBsb2dvXHJcbiAgICBwLm5vU3Ryb2tlKCk7ICAgXHJcbiAgICBwLmJsZW5kTW9kZShwLk1VTFRJUExZKTtcclxuXHJcbiAgICB2YXIgbWF4RGlzdCA9IHRoaXMuX2Jib3hUZXh0LmhhbGZXaWR0aDtcclxuICAgIHZhciBtYXhSYWRpdXMgPSAyICogdGhpcy5fc3BhY2luZztcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2NpcmNsZXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICB2YXIgY2lyY2xlID0gdGhpcy5fY2lyY2xlc1tpXTtcclxuICAgICAgICB2YXIgYyA9IGNpcmNsZS5jb2xvcjtcclxuICAgICAgICB2YXIgZGlzdCA9IHAuZGlzdChjaXJjbGUueCwgY2lyY2xlLnksIHAubW91c2VYLCBwLm1vdXNlWSk7XHJcbiAgICAgICAgdmFyIHJhZGl1cyA9IHV0aWxzLm1hcChkaXN0LCAwLCBtYXhEaXN0LCAxLCBtYXhSYWRpdXMsIHtjbGFtcDogdHJ1ZX0pO1xyXG4gICAgICAgIHAuZmlsbChjKTtcclxuICAgICAgICBwLmVsbGlwc2UoY2lyY2xlLngsIGNpcmNsZS55LCByYWRpdXMsIHJhZGl1cyk7XHJcbiAgICB9XHJcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBTa2V0Y2g7XHJcblxyXG52YXIgTm9pc2UgPSByZXF1aXJlKFwiLi9nZW5lcmF0b3JzL25vaXNlLWdlbmVyYXRvcnMuanNcIik7XHJcbnZhciBCYm94VGV4dCA9IHJlcXVpcmUoXCJwNS1iYm94LWFsaWduZWQtdGV4dFwiKTtcclxudmFyIEJhc2VMb2dvU2tldGNoID0gcmVxdWlyZShcIi4vYmFzZS1sb2dvLXNrZXRjaC5qc1wiKTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZSk7XHJcblxyXG5mdW5jdGlvbiBTa2V0Y2goJG5hdiwgJG5hdkxvZ28pIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLmNhbGwodGhpcywgJG5hdiwgJG5hdkxvZ28sIFwiLi4vZm9udHMvYmlnX2pvaG4td2ViZm9udC50dGZcIik7XHJcbn1cclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUuY2FsbCh0aGlzLCBwKTtcclxuICAgIC8vIFVwZGF0ZSB0aGUgYmJveFRleHQsIHBsYWNlIG92ZXIgdGhlIG5hdiB0ZXh0IGxvZ28gYW5kIHRoZW4gc2hpZnQgaXRzIFxyXG4gICAgLy8gYW5jaG9yIGJhY2sgdG8gKGNlbnRlciwgY2VudGVyKSB3aGlsZSBwcmVzZXJ2aW5nIHRoZSB0ZXh0IHBvc2l0aW9uXHJcbiAgICB0aGlzLl9iYm94VGV4dC5zZXRUZXh0KHRoaXMuX3RleHQpXHJcbiAgICAgICAgLnNldFRleHRTaXplKHRoaXMuX2ZvbnRTaXplKVxyXG4gICAgICAgIC5zZXRSb3RhdGlvbigwKVxyXG4gICAgICAgIC5zZXRBbmNob3IoQmJveFRleHQuQUxJR04uQk9YX0xFRlQsIEJib3hUZXh0LkJBU0VMSU5FLkFMUEhBQkVUSUMpXHJcbiAgICAgICAgLnNldFBvc2l0aW9uKHRoaXMuX3RleHRPZmZzZXQubGVmdCwgdGhpcy5fdGV4dE9mZnNldC50b3ApXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfQ0VOVEVSLCBCYm94VGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSLCBcclxuICAgICAgICAgICAgdHJ1ZSk7XHJcbiAgICB0aGlzLl90ZXh0UG9zID0gdGhpcy5fYmJveFRleHQuZ2V0UG9zaXRpb24oKTtcclxuICAgIHRoaXMuX2RyYXdTdGF0aW9uYXJ5TG9nbyhwKTtcclxuICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IHRydWU7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3U3RhdGlvbmFyeUxvZ28gPSBmdW5jdGlvbiAocCkge1xyXG4gICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICBwLnN0cm9rZSgyNTUpO1xyXG4gICAgcC5maWxsKFwiIzBBMDAwQVwiKTtcclxuICAgIHAuc3Ryb2tlV2VpZ2h0KDIpO1xyXG4gICAgdGhpcy5fYmJveFRleHQuZHJhdygpO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fc2V0dXAgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cC5jYWxsKHRoaXMsIHApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIEJib3hBbGlnbmVkVGV4dCBpbnN0YW5jZSB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgZHJhd2luZyBhbmQgXHJcbiAgICAvLyByb3RhdGluZyB0ZXh0XHJcbiAgICB0aGlzLl9iYm94VGV4dCA9IG5ldyBCYm94VGV4dCh0aGlzLl9mb250LCB0aGlzLl90ZXh0LCB0aGlzLl9mb250U2l6ZSwgMCwgMCwgXHJcbiAgICAgICAgcCk7XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBpbml0aWFsIHNldHVwIGJ5IHRyaWdnZXJpbmcgYSByZXNpemVcclxuICAgIHRoaXMuX29uUmVzaXplKHApO1xyXG5cclxuICAgIC8vIFNldCB1cCBub2lzZSBnZW5lcmF0b3JzXHJcbiAgICB0aGlzLl9yb3RhdGlvbk5vaXNlID0gbmV3IE5vaXNlLk5vaXNlR2VuZXJhdG9yMUQocCwgLXAuUEkvNCwgcC5QSS80LCAwLjAyKTsgXHJcbiAgICB0aGlzLl94eU5vaXNlID0gbmV3IE5vaXNlLk5vaXNlR2VuZXJhdG9yMkQocCwgLTEwMCwgMTAwLCAtNTAsIDUwLCAwLjAxLCBcclxuICAgICAgICAwLjAxKTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2RyYXcgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9kcmF3LmNhbGwodGhpcywgcCk7XHJcbiAgICBpZiAoIXRoaXMuX2lzTW91c2VPdmVyIHx8ICF0aGlzLl9pc092ZXJOYXZMb2dvKSByZXR1cm47XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgdGV4dCBpcyBhYm91dCB0byBiZWNvbWUgYWN0aXZlIGZvciB0aGUgZmlyc3QgdGltZSwgY2xlYXJcclxuICAgIC8vIHRoZSBzdGF0aW9uYXJ5IGxvZ28gdGhhdCB3YXMgcHJldmlvdXNseSBkcmF3bi4gXHJcbiAgICBpZiAodGhpcy5faXNGaXJzdEZyYW1lKSB7XHJcbiAgICAgICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICAgICAgdGhpcy5faXNGaXJzdEZyYW1lID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHBvc2l0aW9uIGFuZCByb3RhdGlvbiB0byBjcmVhdGUgYSBqaXR0ZXJ5IGxvZ29cclxuICAgIHZhciByb3RhdGlvbiA9IHRoaXMuX3JvdGF0aW9uTm9pc2UuZ2VuZXJhdGUoKTtcclxuICAgIHZhciB4eU9mZnNldCA9IHRoaXMuX3h5Tm9pc2UuZ2VuZXJhdGUoKTtcclxuICAgIHRoaXMuX2Jib3hUZXh0LnNldFJvdGF0aW9uKHJvdGF0aW9uKVxyXG4gICAgICAgIC5zZXRQb3NpdGlvbih0aGlzLl90ZXh0UG9zLnggKyB4eU9mZnNldC54LCB0aGlzLl90ZXh0UG9zLnkgKyB4eU9mZnNldC55KVxyXG4gICAgICAgIC5kcmF3KCk7XHJcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBNYWluTmF2O1xyXG5cclxuZnVuY3Rpb24gTWFpbk5hdihsb2FkZXIpIHtcclxuICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcclxuICAgIHRoaXMuXyRsb2dvID0gJChcIm5hdi5uYXZiYXIgLm5hdmJhci1icmFuZFwiKTtcclxuICAgIHRoaXMuXyRuYXYgPSAkKFwiI21haW4tbmF2XCIpO1xyXG4gICAgdGhpcy5fJG5hdkxpbmtzID0gdGhpcy5fJG5hdi5maW5kKFwiYVwiKTtcclxuICAgIHRoaXMuXyRhY3RpdmVOYXYgPSB0aGlzLl8kbmF2TGlua3MuZmluZChcIi5hY3RpdmVcIik7IFxyXG4gICAgdGhpcy5fJG5hdkxpbmtzLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25OYXZDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuXyRsb2dvLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25Mb2dvQ2xpY2suYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcbk1haW5OYXYucHJvdG90eXBlLnNldEFjdGl2ZUZyb21VcmwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9kZWFjdGl2YXRlKCk7XHJcbiAgICB2YXIgdXJsID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICBpZiAodXJsID09PSBcIi9pbmRleC5odG1sXCIgfHwgdXJsID09PSBcIi9cIikge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlTGluayh0aGlzLl8kbmF2TGlua3MuZmlsdGVyKFwiI2Fib3V0LWxpbmtcIikpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodXJsID09PSBcIi93b3JrLmh0bWxcIikgeyAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fYWN0aXZhdGVMaW5rKHRoaXMuXyRuYXZMaW5rcy5maWx0ZXIoXCIjd29yay1saW5rXCIpKTtcclxuICAgIH1cclxufTtcclxuXHJcbk1haW5OYXYucHJvdG90eXBlLl9kZWFjdGl2YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuXyRhY3RpdmVOYXYubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2ID0gJCgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTWFpbk5hdi5wcm90b3R5cGUuX2FjdGl2YXRlTGluayA9IGZ1bmN0aW9uICgkbGluaykge1xyXG4gICAgJGxpbmsuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB0aGlzLl8kYWN0aXZlTmF2ID0gJGxpbms7XHJcbn07XHJcblxyXG5NYWluTmF2LnByb3RvdHlwZS5fb25Mb2dvQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICB2YXIgdXJsID0gJHRhcmdldC5hdHRyKFwiaHJlZlwiKTtcclxuICAgIHRoaXMuX2xvYWRlci5sb2FkUGFnZSh1cmwsIHt9LCB0cnVlKTtcclxufTtcclxuXHJcbk1haW5OYXYucHJvdG90eXBlLl9vbk5hdkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuXyRuYXYuY29sbGFwc2UoXCJoaWRlXCIpOyAvLyBDbG9zZSB0aGUgbmF2IC0gb25seSBtYXR0ZXJzIG9uIG1vYmlsZVxyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBpZiAoJHRhcmdldC5pcyh0aGlzLl8kYWN0aXZlTmF2KSkgcmV0dXJuO1xyXG4gICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xyXG4gICAgdGhpcy5fYWN0aXZhdGVMaW5rKCR0YXJnZXQpO1xyXG4gICAgdmFyIHVybCA9ICR0YXJnZXQuYXR0cihcImhyZWZcIik7XHJcbiAgICB0aGlzLl9sb2FkZXIubG9hZFBhZ2UodXJsLCB7fSwgdHJ1ZSk7ICAgIFxyXG59OyIsInZhciBMb2FkZXIgPSByZXF1aXJlKFwiLi9wYWdlLWxvYWRlci5qc1wiKTtcclxudmFyIE1haW5OYXYgPSByZXF1aXJlKFwiLi9tYWluLW5hdi5qc1wiKTtcclxudmFyIEhvdmVyU2xpZGVzaG93cyA9IHJlcXVpcmUoXCIuL2hvdmVyLXNsaWRlc2hvdy5qc1wiKTtcclxudmFyIFBvcnRmb2xpb0ZpbHRlciA9IHJlcXVpcmUoXCIuL3BvcnRmb2xpby1maWx0ZXIuanNcIik7XHJcbnZhciBzbGlkZXNob3dzID0gcmVxdWlyZShcIi4vdGh1bWJuYWlsLXNsaWRlc2hvdy9zbGlkZXNob3cuanNcIik7XHJcblxyXG4vLyBQaWNraW5nIGEgcmFuZG9tIHNrZXRjaCB0aGF0IHRoZSB1c2VyIGhhc24ndCBzZWVuIGJlZm9yZVxyXG52YXIgU2tldGNoID0gcmVxdWlyZShcIi4vcGljay1yYW5kb20tc2tldGNoLmpzXCIpKCk7XHJcblxyXG4vLyBBSkFYIHBhZ2UgbG9hZGVyLCB3aXRoIGNhbGxiYWNrIGZvciByZWxvYWRpbmcgd2lkZ2V0c1xyXG52YXIgbG9hZGVyID0gbmV3IExvYWRlcihvblBhZ2VMb2FkKTtcclxuXHJcbi8vIE1haW4gbmF2IHdpZGdldFxyXG52YXIgbWFpbk5hdiA9IG5ldyBNYWluTmF2KGxvYWRlcik7XHJcblxyXG4vLyBJbnRlcmFjdGl2ZSBsb2dvIGluIG5hdmJhclxyXG52YXIgbmF2ID0gJChcIm5hdi5uYXZiYXJcIik7XHJcbnZhciBuYXZMb2dvID0gbmF2LmZpbmQoXCIubmF2YmFyLWJyYW5kXCIpO1xyXG52YXIgc2tldGNoID0gbmV3IFNrZXRjaChuYXYsIG5hdkxvZ28pO1xyXG5cclxuLy8gV2lkZ2V0IGdsb2JhbHNcclxudmFyIGhvdmVyU2xpZGVzaG93cywgcG9ydGZvbGlvRmlsdGVyO1xyXG5cclxuLy8gTG9hZCBhbGwgd2lkZ2V0c1xyXG5vblBhZ2VMb2FkKCk7XHJcblxyXG4vLyBIYW5kbGUgYmFjay9mb3J3YXJkIGJ1dHRvbnNcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBvblBvcFN0YXRlKTtcclxuXHJcbmZ1bmN0aW9uIG9uUG9wU3RhdGUoZSkge1xyXG4gICAgLy8gTG9hZGVyIHN0b3JlcyBjdXN0b20gZGF0YSBpbiB0aGUgc3RhdGUgLSBpbmNsdWRpbmcgdGhlIHVybCBhbmQgdGhlIHF1ZXJ5XHJcbiAgICB2YXIgdXJsID0gKGUuc3RhdGUgJiYgZS5zdGF0ZS51cmwpIHx8IFwiL2luZGV4Lmh0bWxcIjtcclxuICAgIHZhciBxdWVyeU9iamVjdCA9IChlLnN0YXRlICYmIGUuc3RhdGUucXVlcnkpIHx8IHt9O1xyXG5cclxuICAgIGlmICgodXJsID09PSBsb2FkZXIuZ2V0TG9hZGVkUGF0aCgpKSAmJiAodXJsID09PSBcIi93b3JrLmh0bWxcIikpIHtcclxuICAgICAgICAvLyBUaGUgY3VycmVudCAmIHByZXZpb3VzIGxvYWRlZCBzdGF0ZXMgd2VyZSB3b3JrLmh0bWwsIHNvIGp1c3QgcmVmaWx0ZXJcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSBxdWVyeU9iamVjdC5jYXRlZ29yeSB8fCBcImFsbFwiO1xyXG4gICAgICAgIHBvcnRmb2xpb0ZpbHRlci5zZWxlY3RDYXRlZ29yeShjYXRlZ29yeSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIExvYWQgdGhlIG5ldyBwYWdlXHJcbiAgICAgICAgbG9hZGVyLmxvYWRQYWdlKHVybCwge30sIGZhbHNlKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25QYWdlTG9hZCgpIHtcclxuICAgIC8vIFJlbG9hZCBhbGwgcGx1Z2lucy93aWRnZXRzXHJcbiAgICBob3ZlclNsaWRlc2hvd3MgPSBuZXcgSG92ZXJTbGlkZXNob3dzKCk7XHJcbiAgICBwb3J0Zm9saW9GaWx0ZXIgPSBuZXcgUG9ydGZvbGlvRmlsdGVyKGxvYWRlcik7XHJcbiAgICBzbGlkZXNob3dzLmluaXQoKTtcclxuICAgIG9iamVjdEZpdEltYWdlcygpO1xyXG4gICAgc21hcnRxdW90ZXMoKTtcclxuXHJcbiAgICAvLyBTbGlnaHRseSByZWR1bmRhbnQsIGJ1dCB1cGRhdGUgdGhlIG1haW4gbmF2IHVzaW5nIHRoZSBjdXJyZW50IFVSTC4gVGhpc1xyXG4gICAgLy8gaXMgaW1wb3J0YW50IGlmIGEgcGFnZSBpcyBsb2FkZWQgYnkgdHlwaW5nIGEgZnVsbCBVUkwgKGUuZy4gZ29pbmdcclxuICAgIC8vIGRpcmVjdGx5IHRvIC93b3JrLmh0bWwpIG9yIHdoZW4gbW92aW5nIGZyb20gd29yay5odG1sIHRvIGEgcHJvamVjdC4gXHJcbiAgICBtYWluTmF2LnNldEFjdGl2ZUZyb21VcmwoKTtcclxufVxyXG5cclxuLy8gV2UndmUgaGl0IHRoZSBsYW5kaW5nIHBhZ2UsIGxvYWQgdGhlIGFib3V0IHBhZ2VcclxuLy8gaWYgKGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9eKFxcL3xcXC9pbmRleC5odG1sfGluZGV4Lmh0bWwpJC8pKSB7XHJcbi8vICAgICBsb2FkZXIubG9hZFBhZ2UoXCIvYWJvdXQuaHRtbFwiLCB7fSwgZmFsc2UpO1xyXG4vLyB9IiwibW9kdWxlLmV4cG9ydHMgPSBMb2FkZXI7XHJcblxyXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZShcIi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuZnVuY3Rpb24gTG9hZGVyKG9uUmVsb2FkLCBmYWRlRHVyYXRpb24pIHtcclxuICAgIHRoaXMuXyRjb250ZW50ID0gJChcIiNjb250ZW50XCIpO1xyXG4gICAgdGhpcy5fb25SZWxvYWQgPSBvblJlbG9hZDtcclxuICAgIHRoaXMuX2ZhZGVEdXJhdGlvbiA9IChmYWRlRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgPyBmYWRlRHVyYXRpb24gOiAyNTA7XHJcbiAgICB0aGlzLl9wYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbn1cclxuXHJcbkxvYWRlci5wcm90b3R5cGUuZ2V0TG9hZGVkUGF0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wYXRoO1xyXG59O1xyXG5cclxuTG9hZGVyLnByb3RvdHlwZS5sb2FkUGFnZSA9IGZ1bmN0aW9uICh1cmwsIHF1ZXJ5T2JqZWN0LCBzaG91bGRQdXNoSGlzdG9yeSkge1xyXG4gICAgLy8gRmFkZSB0aGVuIGVtcHR5IHRoZSBjdXJyZW50IGNvbnRlbnRzXHJcbiAgICB0aGlzLl8kY29udGVudC52ZWxvY2l0eSh7IG9wYWNpdHk6IDAgfSwgdGhpcy5fZmFkZUR1cmF0aW9uLCBcInN3aW5nXCIsXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuXyRjb250ZW50LmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5fJGNvbnRlbnQubG9hZCh1cmwgKyBcIiAjY29udGVudFwiLCBvbkNvbnRlbnRGZXRjaGVkLmJpbmQodGhpcykpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBGYWRlIHRoZSBuZXcgY29udGVudCBpbiBhZnRlciBpdCBoYXMgYmVlbiBmZXRjaGVkXHJcbiAgICBmdW5jdGlvbiBvbkNvbnRlbnRGZXRjaGVkKHJlc3BvbnNlVGV4dCwgdGV4dFN0YXR1cywganFYaHIpIHtcclxuICAgICAgICBpZiAodGV4dFN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBwYWdlLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gdXRpbGl0aWVzLmNyZWF0ZVF1ZXJ5U3RyaW5nKHF1ZXJ5T2JqZWN0KTtcclxuICAgICAgICBpZiAoc2hvdWxkUHVzaEhpc3RvcnkpIHtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlPYmplY3RcclxuICAgICAgICAgICAgfSwgbnVsbCwgdXJsICsgcXVlcnlTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIEdvb2dsZSBhbmFseXRpY3NcclxuICAgICAgICBnYShcInNldFwiLCBcInBhZ2VcIiwgdXJsICsgcXVlcnlTdHJpbmcpO1xyXG4gICAgICAgIGdhKFwic2VuZFwiLCBcInBhZ2V2aWV3XCIpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgdGhpcy5fJGNvbnRlbnQudmVsb2NpdHkoeyBvcGFjaXR5OiAxIH0sIHRoaXMuX2ZhZGVEdXJhdGlvbiwgXHJcbiAgICAgICAgICAgIFwic3dpbmdcIik7XHJcbiAgICAgICAgdGhpcy5fb25SZWxvYWQoKTtcclxuICAgIH1cclxufTsiLCJ2YXIgY29va2llcyA9IHJlcXVpcmUoXCJqcy1jb29raWVcIik7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbnZhciBza2V0Y2hDb25zdHJ1Y3RvcnMgPSB7XHJcbiAgICBcImhhbGZ0b25lLWZsYXNobGlnaHRcIjogXHJcbiAgICAgICAgcmVxdWlyZShcIi4vaW50ZXJhY3RpdmUtbG9nb3MvaGFsZnRvbmUtZmxhc2hsaWdodC13b3JkLmpzXCIpLFxyXG4gICAgXCJub2lzeS13b3JkXCI6XHJcbiAgICAgICAgcmVxdWlyZShcIi4vaW50ZXJhY3RpdmUtbG9nb3Mvbm9pc3ktd29yZC1za2V0Y2guanNcIiksXHJcbiAgICBcImNvbm5lY3QtcG9pbnRzXCI6XHJcbiAgICAgICAgcmVxdWlyZShcIi4vaW50ZXJhY3RpdmUtbG9nb3MvY29ubmVjdC1wb2ludHMtc2tldGNoLmpzXCIpXHJcbn07XHJcbnZhciBudW1Ta2V0Y2hlcyA9IE9iamVjdC5rZXlzKHNrZXRjaENvbnN0cnVjdG9ycykubGVuZ3RoO1xyXG52YXIgY29va2llS2V5ID0gXCJzZWVuLXNrZXRjaC1uYW1lc1wiO1xyXG5cclxuLyoqXHJcbiAqIFBpY2sgYSByYW5kb20gc2tldGNoIHRoYXQgdXNlciBoYXNuJ3Qgc2VlbiB5ZXQuIElmIHRoZSB1c2VyIGhhcyBzZWVuIGFsbCB0aGVcclxuICogc2tldGNoZXMsIGp1c3QgcGljayBhIHJhbmRvbSBvbmUuIFRoaXMgdXNlcyBjb29raWVzIHRvIHRyYWNrIHdoYXQgdGhlIHVzZXIgXHJcbiAqIGhhcyBzZWVuIGFscmVhZHkuXHJcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBDb25zdHJ1Y3RvciBmb3IgYSBTa2V0Y2ggY2xhc3NcclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGlja1JhbmRvbVNrZXRjaCgpIHtcclxuICAgIHZhciBzZWVuU2tldGNoTmFtZXMgPSBjb29raWVzLmdldEpTT04oY29va2llS2V5KSB8fCBbXTtcclxuXHJcbiAgICAvLyBGaW5kIHRoZSBuYW1lcyBvZiB0aGUgdW5zZWVuIHNrZXRjaGVzXHJcbiAgICB2YXIgdW5zZWVuU2tldGNoTmFtZXMgPSBmaW5kVW5zZWVuU2tldGNoZXMoc2VlblNrZXRjaE5hbWVzKTtcclxuXHJcbiAgICAvLyBBbGwgc2tldGNoZXMgaGF2ZSBiZWVuIHNlZW5cclxuICAgIGlmICh1bnNlZW5Ta2V0Y2hOYW1lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAvLyBJZiB3ZSd2ZSBnb3QgbW9yZSB0aGVuIG9uZSBza2V0Y2gsIHRoZW4gbWFrZSBzdXJlIHRvIGNob29zZSBhIHJhbmRvbVxyXG4gICAgICAgIC8vIHNrZXRjaCBleGNsdWRpbmcgdGhlIG1vc3QgcmVjZW50bHkgc2VlbiBza2V0Y2hcclxuICAgICAgICBpZiAobnVtU2tldGNoZXMgPiAxKSB7XHJcbiAgICAgICAgICAgIHNlZW5Ta2V0Y2hOYW1lcyA9IFtzZWVuU2tldGNoTmFtZXMucG9wKCldO1xyXG4gICAgICAgICAgICB1bnNlZW5Ta2V0Y2hOYW1lcyA9IGZpbmRVbnNlZW5Ta2V0Y2hlcyhzZWVuU2tldGNoTmFtZXMpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgLy8gSWYgd2UndmUgb25seSBnb3Qgb25lIHNrZXRjaCwgdGhlbiB3ZSBjYW4ndCBkbyBtdWNoLi4uXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlZW5Ta2V0Y2hOYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICB1bnNlZW5Ta2V0Y2hOYW1lcyA9IE9iamVjdC5rZXlzKHNrZXRjaENvbnN0cnVjdG9ycyk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciByYW5kU2tldGNoTmFtZSA9IHV0aWxzLnJhbmRBcnJheUVsZW1lbnQodW5zZWVuU2tldGNoTmFtZXMpO1xyXG4gICAgc2VlblNrZXRjaE5hbWVzLnB1c2gocmFuZFNrZXRjaE5hbWUpO1xyXG5cclxuICAgIC8vIFN0b3JlIHRoZSBnZW5lcmF0ZWQgc2tldGNoIGluIGEgY29va2llLiBUaGlzIGNyZWF0ZXMgYSBtb3ZpbmcgNyBkYXlcclxuICAgIC8vIHdpbmRvdyAtIGFueXRpbWUgdGhlIHNpdGUgaXMgdmlzaXRlZCwgdGhlIGNvb2tpZSBpcyByZWZyZXNoZWQuXHJcbiAgICBjb29raWVzLnNldChjb29raWVLZXksIHNlZW5Ta2V0Y2hOYW1lcywgeyBleHBpcmVzOiA3IH0pO1xyXG5cclxuICAgIHJldHVybiBza2V0Y2hDb25zdHJ1Y3RvcnNbcmFuZFNrZXRjaE5hbWVdO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZmluZFVuc2VlblNrZXRjaGVzKHNlZW5Ta2V0Y2hOYW1lcykge1xyXG4gICAgdmFyIHVuc2VlblNrZXRjaE5hbWVzID0gW107XHJcbiAgICBmb3IgKHZhciBza2V0Y2hOYW1lIGluIHNrZXRjaENvbnN0cnVjdG9ycykge1xyXG4gICAgICAgIGlmIChzZWVuU2tldGNoTmFtZXMuaW5kZXhPZihza2V0Y2hOYW1lKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdW5zZWVuU2tldGNoTmFtZXMucHVzaChza2V0Y2hOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5zZWVuU2tldGNoTmFtZXM7XHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IFBvcnRmb2xpb0ZpbHRlcjtcclxuXHJcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKFwiLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG52YXIgZGVmYXVsdEJyZWFrcG9pbnRzID0gW1xyXG4gICAgeyB3aWR0aDogMTIwMCwgY29sczogMywgc3BhY2luZzogMTUgfSxcclxuICAgIHsgd2lkdGg6IDk5MiwgY29sczogMywgc3BhY2luZzogMTUgfSxcclxuICAgIHsgd2lkdGg6IDcwMCwgY29sczogMywgc3BhY2luZzogMTUgfSxcclxuICAgIHsgd2lkdGg6IDYwMCwgY29sczogMiwgc3BhY2luZzogMTAgfSxcclxuICAgIHsgd2lkdGg6IDQ4MCwgY29sczogMiwgc3BhY2luZzogMTAgfSxcclxuICAgIHsgd2lkdGg6IDMyMCwgY29sczogMSwgc3BhY2luZzogMTAgfVxyXG5dO1xyXG5cclxuZnVuY3Rpb24gUG9ydGZvbGlvRmlsdGVyKGxvYWRlciwgYnJlYWtwb2ludHMsIGFzcGVjdFJhdGlvLCB0cmFuc2l0aW9uRHVyYXRpb24pIHtcclxuICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcclxuICAgIHRoaXMuX2dyaWRTcGFjaW5nID0gMDtcclxuICAgIHRoaXMuX2FzcGVjdFJhdGlvID0gKGFzcGVjdFJhdGlvICE9PSB1bmRlZmluZWQpID8gYXNwZWN0UmF0aW8gOiAoMTYvOSk7XHJcbiAgICB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24gPSAodHJhbnNpdGlvbkR1cmF0aW9uICE9PSB1bmRlZmluZWQpID8gXHJcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uIDogODAwO1xyXG4gICAgdGhpcy5fYnJlYWtwb2ludHMgPSAoYnJlYWtwb2ludHMgIT09IHVuZGVmaW5lZCkgPyBcclxuICAgICAgICBicmVha3BvaW50cy5zbGljZSgpIDogZGVmYXVsdEJyZWFrcG9pbnRzLnNsaWNlKCk7XHJcbiAgICB0aGlzLl8kZ3JpZCA9ICQoXCIjcG9ydGZvbGlvLWdyaWRcIik7XHJcbiAgICB0aGlzLl8kbmF2ID0gJChcIiNwb3J0Zm9saW8tbmF2XCIpO1xyXG4gICAgdGhpcy5fJHByb2plY3RzID0gW107XHJcbiAgICB0aGlzLl8kY2F0ZWdvcmllcyA9IHt9O1xyXG4gICAgdGhpcy5fcm93cyA9IDA7XHJcbiAgICB0aGlzLl9jb2xzID0gMDtcclxuICAgIHRoaXMuX2ltYWdlSGVpZ2h0ID0gMDtcclxuICAgIHRoaXMuX2ltYWdlV2lkdGggPSAwO1xyXG5cclxuICAgIC8vIFNvcnQgdGhlIGJyZWFrcG9pbnRzIGluIGRlc2NlbmRpbmcgb3JkZXJcclxuICAgIHRoaXMuX2JyZWFrcG9pbnRzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIGlmIChhLndpZHRoIDwgYi53aWR0aCkgcmV0dXJuIC0xO1xyXG4gICAgICAgIGVsc2UgaWYgKGEud2lkdGggPiBiLndpZHRoKSByZXR1cm4gMTtcclxuICAgICAgICBlbHNlIHJldHVybiAwO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FjaGVQcm9qZWN0cygpO1xyXG4gICAgdGhpcy5fY3JlYXRlR3JpZCgpO1xyXG5cclxuICAgIHRoaXMuXyRncmlkLmZpbmQoXCIucHJvamVjdCBhXCIpLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25Qcm9qZWN0Q2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdmFyIHFzID0gdXRpbGl0aWVzLmdldFF1ZXJ5UGFyYW1ldGVycygpO1xyXG4gICAgdmFyIGluaXRpYWxDYXRlZ29yeSA9IHFzLmNhdGVnb3J5IHx8IFwiYWxsXCI7XHJcbiAgICB2YXIgY2F0ZWdvcnkgPSBpbml0aWFsQ2F0ZWdvcnkudG9Mb3dlckNhc2UoKTtcclxuICAgIHRoaXMuXyRhY3RpdmVOYXZJdGVtID0gdGhpcy5fJG5hdi5maW5kKFwiYVtkYXRhLWNhdGVnb3J5PVwiICsgY2F0ZWdvcnkgKyBcIl1cIik7XHJcbiAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIHRoaXMuX2ZpbHRlclByb2plY3RzKGNhdGVnb3J5KTtcclxuICAgICQoXCIjcG9ydGZvbGlvLW5hdiBhXCIpLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25OYXZDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgdGhpcy5fY3JlYXRlR3JpZC5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5zZWxlY3RDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgY2F0ZWdvcnkgPSAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSkgfHwgXCJhbGxcIjtcclxuICAgIHZhciAkc2VsZWN0ZWROYXYgPSB0aGlzLl8kbmF2LmZpbmQoXCJhW2RhdGEtY2F0ZWdvcnk9XCIgKyBjYXRlZ29yeSArIFwiXVwiKTtcclxuICAgIGlmICgkc2VsZWN0ZWROYXYubGVuZ3RoICYmICEkc2VsZWN0ZWROYXYuaXModGhpcy5fJGFjdGl2ZU5hdkl0ZW0pKSB7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0ucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0gPSAkc2VsZWN0ZWROYXY7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0uYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyUHJvamVjdHMoY2F0ZWdvcnkpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fZmlsdGVyUHJvamVjdHMgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICAgIHZhciAkc2VsZWN0ZWRFbGVtZW50cyA9IHRoaXMuX2dldFByb2plY3RzSW5DYXRlZ29yeShjYXRlZ29yeSk7XHJcblxyXG4gICAgLy8gQW5pbWF0ZSB0aGUgZ3JpZCB0byB0aGUgY29ycmVjdCBoZWlnaHQgdG8gY29udGFpbiB0aGUgcm93c1xyXG4gICAgdGhpcy5fYW5pbWF0ZUdyaWRIZWlnaHQoJHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoKTtcclxuICAgIFxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBwcm9qZWN0c1xyXG4gICAgdGhpcy5fJHByb2plY3RzLmZvckVhY2goZnVuY3Rpb24gKCRlbGVtZW50KSB7XHJcbiAgICAgICAgLy8gU3RvcCBhbGwgYW5pbWF0aW9uc1xyXG4gICAgICAgICRlbGVtZW50LnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgICAgICAvLyBJZiBhbiBlbGVtZW50IGlzIG5vdCBzZWxlY3RlZDogZHJvcCB6LWluZGV4ICYgYW5pbWF0ZSBvcGFjaXR5IC0+IGhpZGVcclxuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9ICRzZWxlY3RlZEVsZW1lbnRzLmluZGV4T2YoJGVsZW1lbnQpOyBcclxuICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwiekluZGV4XCIsIC0xKTtcclxuICAgICAgICAgICAgJGVsZW1lbnQudmVsb2NpdHkoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24sIFwiZWFzZUluT3V0Q3ViaWNcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgYW4gZWxlbWVudCBpcyBzZWxlY3RlZDogc2hvdyAmIGJ1bXAgei1pbmRleCAmIGFuaW1hdGUgdG8gcG9zaXRpb24gXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRlbGVtZW50LnNob3coKTtcclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwiekluZGV4XCIsIDApO1xyXG4gICAgICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5faW5kZXhUb1hZKHNlbGVjdGVkSW5kZXgpO1xyXG4gICAgICAgICAgICAkZWxlbWVudC52ZWxvY2l0eSh7IFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcclxuICAgICAgICAgICAgICAgIHRvcDogbmV3UG9zLnkgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBuZXdQb3MueCArIFwicHhcIlxyXG4gICAgICAgICAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24sIFwiZWFzZUluT3V0Q3ViaWNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2FuaW1hdGVHcmlkSGVpZ2h0ID0gZnVuY3Rpb24gKG51bUVsZW1lbnRzKSB7XHJcbiAgICB0aGlzLl8kZ3JpZC52ZWxvY2l0eShcInN0b3BcIik7XHJcbiAgICB2YXIgY3VyUm93cyA9IE1hdGguY2VpbChudW1FbGVtZW50cyAvIHRoaXMuX2NvbHMpO1xyXG4gICAgdGhpcy5fJGdyaWQudmVsb2NpdHkoe1xyXG4gICAgICAgIGhlaWdodDogdGhpcy5faW1hZ2VIZWlnaHQgKiBjdXJSb3dzICsgXHJcbiAgICAgICAgICAgIHRoaXMuX2dyaWRTcGFjaW5nICogKGN1clJvd3MgLSAxKSArIFwicHhcIlxyXG4gICAgfSwgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uKTtcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2dldFByb2plY3RzSW5DYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgaWYgKGNhdGVnb3J5ID09PSBcImFsbFwiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuXyRwcm9qZWN0cztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl8kY2F0ZWdvcmllc1tjYXRlZ29yeV0gfHwgW10pO1xyXG4gICAgfSAgICAgICAgXHJcbn07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jYWNoZVByb2plY3RzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fJHByb2plY3RzID0gW107XHJcbiAgICB0aGlzLl8kY2F0ZWdvcmllcyA9IHt9O1xyXG4gICAgdGhpcy5fJGdyaWQuZmluZChcIi5wcm9qZWN0XCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuICAgICAgICB0aGlzLl8kcHJvamVjdHMucHVzaCgkZWxlbWVudCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5TmFtZXMgPSAkZWxlbWVudC5kYXRhKFwiY2F0ZWdvcmllc1wiKS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYXRlZ29yeU5hbWVzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXRlZ29yeSA9ICQudHJpbShjYXRlZ29yeU5hbWVzW2ldKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuXyRjYXRlZ29yaWVzW2NhdGVnb3J5XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGNhdGVnb3JpZXNbY2F0ZWdvcnldID0gWyRlbGVtZW50XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRjYXRlZ29yaWVzW2NhdGVnb3J5XS5wdXNoKCRlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbn07XHJcblxyXG4vLyBQb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jYWxjdWxhdGVHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgdmFyIGdyaWRXaWR0aCA9IHRoaXMuXyRncmlkLmlubmVyV2lkdGgoKTtcclxuLy8gICAgIHRoaXMuX2NvbHMgPSBNYXRoLmZsb29yKChncmlkV2lkdGggKyB0aGlzLl9ncmlkU3BhY2luZykgLyBcclxuLy8gICAgICAgICAodGhpcy5fbWluSW1hZ2VXaWR0aCArIHRoaXMuX2dyaWRTcGFjaW5nKSk7XHJcbi8vICAgICB0aGlzLl9yb3dzID0gTWF0aC5jZWlsKHRoaXMuXyRwcm9qZWN0cy5sZW5ndGggLyB0aGlzLl9jb2xzKTtcclxuLy8gICAgIHRoaXMuX2ltYWdlV2lkdGggPSAoZ3JpZFdpZHRoIC0gKCh0aGlzLl9jb2xzIC0gMSkgKiB0aGlzLl9ncmlkU3BhY2luZykpIC8gXHJcbi8vICAgICAgICAgdGhpcy5fY29scztcclxuLy8gICAgIHRoaXMuX2ltYWdlSGVpZ2h0ID0gdGhpcy5faW1hZ2VXaWR0aCAqICgxIC8gdGhpcy5fYXNwZWN0UmF0aW8pO1xyXG4vLyB9O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fY2FsY3VsYXRlR3JpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBncmlkV2lkdGggPSB0aGlzLl8kZ3JpZC5pbm5lcldpZHRoKCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2JyZWFrcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgaWYgKGdyaWRXaWR0aCA8PSB0aGlzLl9icmVha3BvaW50c1tpXS53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb2xzID0gdGhpcy5fYnJlYWtwb2ludHNbaV0uY29scztcclxuICAgICAgICAgICAgdGhpcy5fZ3JpZFNwYWNpbmcgPSB0aGlzLl9icmVha3BvaW50c1tpXS5zcGFjaW5nO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yb3dzID0gTWF0aC5jZWlsKHRoaXMuXyRwcm9qZWN0cy5sZW5ndGggLyB0aGlzLl9jb2xzKTtcclxuICAgIHRoaXMuX2ltYWdlV2lkdGggPSAoZ3JpZFdpZHRoIC0gKCh0aGlzLl9jb2xzIC0gMSkgKiB0aGlzLl9ncmlkU3BhY2luZykpIC8gXHJcbiAgICAgICAgdGhpcy5fY29scztcclxuICAgIHRoaXMuX2ltYWdlSGVpZ2h0ID0gdGhpcy5faW1hZ2VXaWR0aCAqICgxIC8gdGhpcy5fYXNwZWN0UmF0aW8pO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fY3JlYXRlR3JpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2NhbGN1bGF0ZUdyaWQoKTtcclxuXHJcbiAgICB0aGlzLl8kZ3JpZC5jc3MoXCJwb3NpdGlvblwiLCBcInJlbGF0aXZlXCIpO1xyXG4gICAgdGhpcy5fJGdyaWQuY3NzKHtcclxuICAgICAgICBoZWlnaHQ6IHRoaXMuX2ltYWdlSGVpZ2h0ICogdGhpcy5fcm93cyArIFxyXG4gICAgICAgICAgICB0aGlzLl9ncmlkU3BhY2luZyAqICh0aGlzLl9yb3dzIC0gMSkgKyBcInB4XCJcclxuICAgIH0pOyAgICBcclxuXHJcbiAgICB0aGlzLl8kcHJvamVjdHMuZm9yRWFjaChmdW5jdGlvbiAoJGVsZW1lbnQsIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuX2luZGV4VG9YWShpbmRleCk7XHJcbiAgICAgICAgJGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgdG9wOiBwb3MueSArIFwicHhcIixcclxuICAgICAgICAgICAgbGVmdDogcG9zLnggKyBcInB4XCIsXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLl9pbWFnZVdpZHRoICsgXCJweFwiLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX2ltYWdlSGVpZ2h0ICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LmJpbmQodGhpcykpOyAgICBcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX29uTmF2Q2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgIGlmICgkdGFyZ2V0LmlzKHRoaXMuXyRhY3RpdmVOYXZJdGVtKSkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuXyRhY3RpdmVOYXZJdGVtLmxlbmd0aCkgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0ucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAkdGFyZ2V0LmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0gPSAkdGFyZ2V0O1xyXG4gICAgdmFyIGNhdGVnb3J5ID0gJHRhcmdldC5kYXRhKFwiY2F0ZWdvcnlcIikudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7XHJcbiAgICAgICAgdXJsOiBcIi93b3JrLmh0bWxcIixcclxuICAgICAgICBxdWVyeTogeyBjYXRlZ29yeTogY2F0ZWdvcnkgfVxyXG4gICAgfSwgbnVsbCwgXCIvd29yay5odG1sP2NhdGVnb3J5PVwiICsgY2F0ZWdvcnkpO1xyXG5cclxuICAgIHRoaXMuX2ZpbHRlclByb2plY3RzKGNhdGVnb3J5KTtcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX29uUHJvamVjdENsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgdmFyIHByb2plY3ROYW1lID0gJHRhcmdldC5kYXRhKFwibmFtZVwiKTtcclxuICAgIHZhciB1cmwgPSBcIi9wcm9qZWN0cy9cIiArIHByb2plY3ROYW1lICsgXCIuaHRtbFwiO1xyXG4gICAgdGhpcy5fbG9hZGVyLmxvYWRQYWdlKHVybCwge30sIHRydWUpO1xyXG59O1xyXG5cclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2luZGV4VG9YWSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgdmFyIHIgPSBNYXRoLmZsb29yKGluZGV4IC8gdGhpcy5fY29scyk7XHJcbiAgICB2YXIgYyA9IGluZGV4ICUgdGhpcy5fY29sczsgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IGMgKiB0aGlzLl9pbWFnZVdpZHRoICsgYyAqIHRoaXMuX2dyaWRTcGFjaW5nLFxyXG4gICAgICAgIHk6IHIgKiB0aGlzLl9pbWFnZUhlaWdodCArIHIgKiB0aGlzLl9ncmlkU3BhY2luZ1xyXG4gICAgfTtcclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IFNsaWRlc2hvd01vZGFsO1xyXG5cclxudmFyIEtFWV9DT0RFUyA9IHtcclxuICAgIExFRlRfQVJST1c6IDM3LFxyXG4gICAgUklHSFRfQVJST1c6IDM5LFxyXG4gICAgRVNDQVBFOiAyN1xyXG59O1xyXG5cclxuZnVuY3Rpb24gU2xpZGVzaG93TW9kYWwoJGNvbnRhaW5lciwgc2xpZGVzaG93KSB7XHJcbiAgICB0aGlzLl9zbGlkZXNob3cgPSBzbGlkZXNob3c7XHJcblxyXG4gICAgdGhpcy5fJG1vZGFsID0gJGNvbnRhaW5lci5maW5kKFwiLnNsaWRlc2hvdy1tb2RhbFwiKTtcclxuICAgIHRoaXMuXyRvdmVybGF5ID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIubW9kYWwtb3ZlcmxheVwiKTtcclxuICAgIHRoaXMuXyRjb250ZW50ID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIubW9kYWwtY29udGVudHNcIik7XHJcbiAgICB0aGlzLl8kY2FwdGlvbiA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLm1vZGFsLWNhcHRpb25cIik7XHJcbiAgICB0aGlzLl8kaW1hZ2VDb250YWluZXIgPSB0aGlzLl8kbW9kYWwuZmluZChcIi5tb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuXyRpbWFnZUxlZnQgPSB0aGlzLl8kbW9kYWwuZmluZChcIi5pbWFnZS1hZHZhbmNlLWxlZnRcIik7XHJcbiAgICB0aGlzLl8kaW1hZ2VSaWdodCA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLmltYWdlLWFkdmFuY2UtcmlnaHRcIik7XHJcblxyXG4gICAgdGhpcy5faW5kZXggPSAwOyAvLyBJbmRleCBvZiBzZWxlY3RlZCBpbWFnZVxyXG4gICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XHJcbiAgICBcclxuICAgIHRoaXMuXyRpbWFnZUxlZnQub24oXCJjbGlja1wiLCB0aGlzLmFkdmFuY2VMZWZ0LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJGltYWdlUmlnaHQub24oXCJjbGlja1wiLCB0aGlzLmFkdmFuY2VSaWdodC5iaW5kKHRoaXMpKTtcclxuICAgICQoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCB0aGlzLl9vbktleURvd24uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gR2l2ZSBqUXVlcnkgY29udHJvbCBvdmVyIHNob3dpbmcvaGlkaW5nXHJcbiAgICB0aGlzLl8kbW9kYWwuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgdGhpcy5fJG1vZGFsLmhpZGUoKTtcclxuXHJcbiAgICAvLyBFdmVudHNcclxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCB0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuXyRvdmVybGF5Lm9uKFwiY2xpY2tcIiwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuXyRtb2RhbC5maW5kKFwiLm1vZGFsLWNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcclxuICAgIFxyXG4gICAgdGhpcy5fdXBkYXRlQ29udHJvbHMoKTtcclxuXHJcbiAgICAvLyBTaXplIG9mIGZvbnRhd2Vzb21lIGljb25zIG5lZWRzIGEgc2xpZ2h0IGRlbGF5ICh1bnRpbCBzdGFjayBpcyBjbGVhcikgZm9yXHJcbiAgICAvLyBzb21lIHJlYXNvblxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fb25SZXNpemUoKTtcclxuICAgIH0uYmluZCh0aGlzKSwgMCk7XHJcbn1cclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5hZHZhbmNlTGVmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuc2hvd0ltYWdlQXQodGhpcy5faW5kZXggLSAxKTtcclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5hZHZhbmNlUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnNob3dJbWFnZUF0KHRoaXMuX2luZGV4ICsgMSk7XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuc2hvd0ltYWdlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIGluZGV4ID0gTWF0aC5tYXgoaW5kZXgsIDApO1xyXG4gICAgaW5kZXggPSBNYXRoLm1pbihpbmRleCwgdGhpcy5fc2xpZGVzaG93LmdldE51bUltYWdlcygpIC0gMSk7XHJcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xyXG4gICAgdmFyICRpbWcgPSB0aGlzLl9zbGlkZXNob3cuZ2V0R2FsbGVyeUltYWdlKHRoaXMuX2luZGV4KTtcclxuICAgIHZhciBjYXB0aW9uID0gdGhpcy5fc2xpZGVzaG93LmdldENhcHRpb24odGhpcy5faW5kZXgpO1xyXG5cclxuICAgIHRoaXMuXyRpbWFnZUNvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgJChcIjxpbWc+XCIsIHtzcmM6ICRpbWcuYXR0cihcInNyY1wiKX0pXHJcbiAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRpbWFnZUNvbnRhaW5lcik7XHJcblxyXG4gICAgdGhpcy5fJGNhcHRpb24uZW1wdHkoKTtcclxuICAgIGlmIChjYXB0aW9uKSB7XHJcbiAgICAgICAgJChcIjxzcGFuPlwiKS5hZGRDbGFzcyhcImZpZ3VyZS1udW1iZXJcIilcclxuICAgICAgICAgICAgLnRleHQoXCJGaWcuIFwiICsgKHRoaXMuX2luZGV4ICsgMSkgKyBcIjogXCIpXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kY2FwdGlvbik7XHJcbiAgICAgICAgJChcIjxzcGFuPlwiKS5hZGRDbGFzcyhcImNhcHRpb24tdGV4dFwiKVxyXG4gICAgICAgICAgICAudGV4dChjYXB0aW9uKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8odGhpcy5fJGNhcHRpb24pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLl9vblJlc2l6ZSgpO1xyXG4gICAgdGhpcy5fdXBkYXRlQ29udHJvbHMoKTtcclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICBpbmRleCA9IGluZGV4IHx8IDA7XHJcbiAgICB0aGlzLl8kbW9kYWwuc2hvdygpO1xyXG4gICAgdGhpcy5zaG93SW1hZ2VBdChpbmRleCk7XHJcbiAgICB0aGlzLl9pc09wZW4gPSB0cnVlO1xyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fJG1vZGFsLmhpZGUoKTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLl9vbktleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKCF0aGlzLl9pc09wZW4pIHJldHVybjtcclxuICAgIGlmIChlLndoaWNoID09PSBLRVlfQ09ERVMuTEVGVF9BUlJPVykge1xyXG4gICAgICAgIHRoaXMuYWR2YW5jZUxlZnQoKTtcclxuICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gS0VZX0NPREVTLlJJR0hUX0FSUk9XKSB7XHJcbiAgICAgICAgdGhpcy5hZHZhbmNlUmlnaHQoKTtcclxuICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gS0VZX0NPREVTLkVTQ0FQRSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTsgICBcclxuICAgIH1cclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5fdXBkYXRlQ29udHJvbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBSZS1lbmFibGVcclxuICAgIHRoaXMuXyRpbWFnZVJpZ2h0LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB0aGlzLl8kaW1hZ2VMZWZ0LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICBcclxuICAgIC8vIERpc2FibGUgaWYgd2UndmUgcmVhY2hlZCB0aGUgdGhlIG1heCBvciBtaW4gbGltaXRcclxuICAgIGlmICh0aGlzLl9pbmRleCA+PSAodGhpcy5fc2xpZGVzaG93LmdldE51bUltYWdlcygpIC0gMSkpIHtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VSaWdodC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLl9pbmRleCA8PSAwKSB7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlTGVmdC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciAkaW1hZ2UgPSB0aGlzLl8kaW1hZ2VDb250YWluZXIuZmluZChcImltZ1wiKTtcclxuXHJcbiAgICAvLyBSZXNldCB0aGUgY29udGVudCdzIHdpZHRoXHJcbiAgICB0aGlzLl8kY29udGVudC53aWR0aChcIlwiKTtcclxuXHJcbiAgICAvLyBGaW5kIHRoZSBzaXplIG9mIHRoZSBjb21wb25lbnRzIHRoYXQgbmVlZCB0byBiZSBkaXNwbGF5ZWQgaW4gYWRkaXRpb24gdG8gXHJcbiAgICAvLyB0aGUgaW1hZ2VcclxuICAgIHZhciBjb250cm9sc1dpZHRoID0gdGhpcy5fJGltYWdlTGVmdC5vdXRlcldpZHRoKHRydWUpICsgXHJcbiAgICAgICAgdGhpcy5fJGltYWdlUmlnaHQub3V0ZXJXaWR0aCh0cnVlKTtcclxuICAgIC8vIEhhY2sgZm9yIG5vdyAtIGJ1ZGdldCBmb3IgMnggdGhlIGNhcHRpb24gaGVpZ2h0LiBcclxuICAgIHZhciBjYXB0aW9uSGVpZ2h0ID0gMiAqIHRoaXMuXyRjYXB0aW9uLm91dGVySGVpZ2h0KHRydWUpOyBcclxuICAgIHZhciBpbWFnZVBhZGRpbmcgPSAkaW1hZ2UuaW5uZXJXaWR0aCgpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgYXZhaWxhYmxlIGFyZWEgZm9yIHRoZSBtb2RhbFxyXG4gICAgdmFyIG13ID0gdGhpcy5fJG1vZGFsLndpZHRoKCkgLSBjb250cm9sc1dpZHRoO1xyXG4gICAgdmFyIG1oID0gdGhpcy5fJG1vZGFsLmhlaWdodCgpIC0gY2FwdGlvbkhlaWdodDtcclxuXHJcbiAgICAvLyBGaXQgdGhlIGltYWdlIHRvIHRoZSByZW1haW5pbmcgc2NyZWVuIHJlYWwgZXN0YXRlIFxyXG4gICAgdmFyIHNldFNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGl3ID0gJGltYWdlLnByb3AoXCJuYXR1cmFsV2lkdGhcIik7XHJcbiAgICAgICAgdmFyIGloID0gJGltYWdlLnByb3AoXCJuYXR1cmFsSGVpZ2h0XCIpO1xyXG4gICAgICAgIHZhciBzdyA9IGl3IC8gbXc7XHJcbiAgICAgICAgdmFyIHNoID0gaWggLyBtaDtcclxuICAgICAgICB2YXIgcyA9IE1hdGgubWF4KHN3LCBzaCk7XHJcblxyXG4gICAgICAgIC8vIFNldCB3aWR0aC9oZWlnaHQgdXNpbmcgQ1NTIGluIG9yZGVyIHRvIHJlc3BlY3QgYm94LXNpemluZ1xyXG4gICAgICAgIGlmIChzID4gMSkge1xyXG4gICAgICAgICAgICAkaW1hZ2UuY3NzKFwid2lkdGhcIiwgaXcgLyBzICsgXCJweFwiKTtcclxuICAgICAgICAgICAgJGltYWdlLmNzcyhcImhlaWdodFwiLCBpaCAvIHMgKyBcInB4XCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRpbWFnZS5jc3MoXCJ3aWR0aFwiLCBpdyArIFwicHhcIik7XHJcbiAgICAgICAgICAgICRpbWFnZS5jc3MoXCJoZWlnaHRcIiwgaWggKyBcInB4XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fJGltYWdlUmlnaHQuY3NzKFwidG9wXCIsICRpbWFnZS5vdXRlckhlaWdodCgpIC8gMiArIFwicHhcIik7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlTGVmdC5jc3MoXCJ0b3BcIiwgJGltYWdlLm91dGVySGVpZ2h0KCkgLyAyICsgXCJweFwiKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRoZSBjb250ZW50IHdyYXBwZXIgdG8gYmUgdGhlIHdpZHRoIG9mIHRoZSBpbWFnZS4gVGhpcyB3aWxsIGtlZXAgXHJcbiAgICAgICAgLy8gdGhlIGNhcHRpb24gZnJvbSBleHBhbmRpbmcgYmV5b25kIHRoZSBpbWFnZS5cclxuICAgICAgICB0aGlzLl8kY29udGVudC53aWR0aCgkaW1hZ2Uub3V0ZXJXaWR0aCh0cnVlKSk7ICAgICAgICBcclxuICAgIH0uYmluZCh0aGlzKTtcclxuXHJcbiAgICBpZiAoJGltYWdlLnByb3AoXCJjb21wbGV0ZVwiKSkgc2V0U2l6ZSgpO1xyXG4gICAgZWxzZSAkaW1hZ2Uub25lKFwibG9hZFwiLCBzZXRTaXplKTtcclxufTtcclxuIiwidmFyIFNsaWRlc2hvd01vZGFsID0gcmVxdWlyZShcIi4vc2xpZGVzaG93LW1vZGFsLmpzXCIpO1xyXG52YXIgVGh1bWJuYWlsU2xpZGVyID0gcmVxdWlyZShcIi4vdGh1bWJuYWlsLXNsaWRlci5qc1wiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24odHJhbnNpdGlvbkR1cmF0aW9uKSB7XHJcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uID0gKHRyYW5zaXRpb25EdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSA/XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA6IDQwMDtcclxuICAgICAgICB0aGlzLl9zbGlkZXNob3dzID0gW107XHJcbiAgICAgICAgJChcIi5zbGlkZXNob3dcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHNsaWRlc2hvdyA9IG5ldyBTbGlkZXNob3coJChlbGVtZW50KSwgdHJhbnNpdGlvbkR1cmF0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5fc2xpZGVzaG93cy5wdXNoKHNsaWRlc2hvdyk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIFNsaWRlc2hvdygkY29udGFpbmVyLCB0cmFuc2l0aW9uRHVyYXRpb24pIHtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbjtcclxuICAgIHRoaXMuXyRjb250YWluZXIgPSAkY29udGFpbmVyO1xyXG4gICAgdGhpcy5faW5kZXggPSAwOyAvLyBJbmRleCBvZiBzZWxlY3RlZCBpbWFnZVxyXG5cclxuICAgIC8vIENyZWF0ZSBjb21wb25lbnRzXHJcbiAgICB0aGlzLl90aHVtYm5haWxTbGlkZXIgPSBuZXcgVGh1bWJuYWlsU2xpZGVyKCRjb250YWluZXIsIHRoaXMpO1xyXG4gICAgdGhpcy5fbW9kYWwgPSBuZXcgU2xpZGVzaG93TW9kYWwoJGNvbnRhaW5lciwgdGhpcyk7XHJcblxyXG4gICAgLy8gQ2FjaGUgYW5kIGNyZWF0ZSBuZWNlc3NhcnkgRE9NIGVsZW1lbnRzICAgXHJcbiAgICB0aGlzLl8kY2FwdGlvbkNvbnRhaW5lciA9ICRjb250YWluZXIuZmluZChcIi5jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5fJHNlbGVjdGVkSW1hZ2VDb250YWluZXIgPSAkY29udGFpbmVyLmZpbmQoXCIuc2VsZWN0ZWQtaW1hZ2VcIik7XHJcblxyXG4gICAgLy8gT3BlbiBtb2RhbCBvbiBjbGlja2luZyBzZWxlY3RlZCBpbWFnZVxyXG4gICAgdGhpcy5fJHNlbGVjdGVkSW1hZ2VDb250YWluZXIub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbW9kYWwub3Blbih0aGlzLl9pbmRleCk7ICAgIFxyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBMb2FkIGltYWdlc1xyXG4gICAgdGhpcy5fJGdhbGxlcnlJbWFnZXMgPSB0aGlzLl9sb2FkR2FsbGVyeUltYWdlcygpO1xyXG4gICAgdGhpcy5fbnVtSW1hZ2VzID0gdGhpcy5fJGdhbGxlcnlJbWFnZXMubGVuZ3RoO1xyXG5cclxuICAgIC8vIFNob3cgdGhlIGZpcnN0IGltYWdlXHJcbiAgICB0aGlzLnNob3dJbWFnZSgwKTtcclxufVxyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXRBY3RpdmVJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbmRleDtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0TnVtSW1hZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX251bUltYWdlcztcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0R2FsbGVyeUltYWdlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJGdhbGxlcnlJbWFnZXNbaW5kZXhdO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXRDYXB0aW9uID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJGdhbGxlcnlJbWFnZXNbaW5kZXhdLmRhdGEoXCJjYXB0aW9uXCIpO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5zaG93SW1hZ2UgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIC8vIFJlc2V0IGFsbCBpbWFnZXMgdG8gaW52aXNpYmxlIGFuZCBsb3dlc3Qgei1pbmRleC4gVGhpcyBjb3VsZCBiZSBzbWFydGVyLFxyXG4gICAgLy8gbGlrZSBIb3ZlclNsaWRlc2hvdywgYW5kIG9ubHkgcmVzZXQgZXhhY3RseSB3aGF0IHdlIG5lZWQsIGJ1dCB3ZSBhcmVuJ3QgXHJcbiAgICAvLyB3YXN0aW5nIHRoYXQgbWFueSBjeWNsZXMuXHJcbiAgICB0aGlzLl8kZ2FsbGVyeUltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uICgkZ2FsbGVyeUltYWdlKSB7XHJcbiAgICAgICAgJGdhbGxlcnlJbWFnZS5jc3Moe1xyXG4gICAgICAgICAgICBcInpJbmRleFwiOiAwLFxyXG4gICAgICAgICAgICBcIm9wYWNpdHlcIjogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRnYWxsZXJ5SW1hZ2UudmVsb2NpdHkoXCJzdG9wXCIpOyAvLyBTdG9wIGFueSBhbmltYXRpb25zXHJcbiAgICB9LCB0aGlzKTtcclxuXHJcbiAgICAvLyBDYWNoZSByZWZlcmVuY2VzIHRvIHRoZSBsYXN0IGFuZCBjdXJyZW50IGltYWdlXHJcbiAgICB2YXIgJGxhc3RJbWFnZSA9IHRoaXMuXyRnYWxsZXJ5SW1hZ2VzW3RoaXMuX2luZGV4XTtcclxuICAgIHZhciAkY3VycmVudEltYWdlID0gdGhpcy5fJGdhbGxlcnlJbWFnZXNbaW5kZXhdO1xyXG4gICAgdGhpcy5faW5kZXggPSBpbmRleDtcclxuXHJcbiAgICAvLyBNYWtlIHRoZSBsYXN0IGltYWdlIHZpc2lzYmxlIGFuZCB0aGVuIGFuaW1hdGUgdGhlIGN1cnJlbnQgaW1hZ2UgaW50byB2aWV3XHJcbiAgICAvLyBvbiB0b3Agb2YgdGhlIGxhc3RcclxuICAgICRsYXN0SW1hZ2UuY3NzKFwiekluZGV4XCIsIDEpO1xyXG4gICAgJGN1cnJlbnRJbWFnZS5jc3MoXCJ6SW5kZXhcIiwgMik7XHJcbiAgICAkbGFzdEltYWdlLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAkY3VycmVudEltYWdlLnZlbG9jaXR5KHtcIm9wYWNpdHlcIjogMX0sIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiwgXHJcbiAgICAgICAgXCJlYXNlSW5PdXRRdWFkXCIpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgY2FwdGlvbiwgaWYgaXQgZXhpc3RzIG9uIHRoZSB0aHVtYm5haWxcclxuICAgIHZhciBjYXB0aW9uID0gJGN1cnJlbnRJbWFnZS5kYXRhKFwiY2FwdGlvblwiKTtcclxuICAgIGlmIChjYXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fJGNhcHRpb25Db250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiZmlndXJlLW51bWJlclwiKVxyXG4gICAgICAgICAgICAudGV4dChcIkZpZy4gXCIgKyAodGhpcy5faW5kZXggKyAxKSArIFwiOiBcIilcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRjYXB0aW9uQ29udGFpbmVyKTtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiY2FwdGlvbi10ZXh0XCIpXHJcbiAgICAgICAgICAgIC50ZXh0KGNhcHRpb24pXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kY2FwdGlvbkNvbnRhaW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT2JqZWN0IGltYWdlIGZpdCBwb2x5ZmlsbCBicmVha3MgalF1ZXJ5IGF0dHIoLi4uKSwgc28gZmFsbGJhY2sgdG8ganVzdCBcclxuICAgIC8vIHVzaW5nIGVsZW1lbnQuc3JjXHJcbiAgICAvLyBUT0RPOiBMYXp5IVxyXG4gICAgLy8gaWYgKCRjdXJyZW50SW1hZ2UuZ2V0KDApLnNyYyA9PT0gXCJcIikge1xyXG4gICAgLy8gICAgICRjdXJyZW50SW1hZ2UuZ2V0KDApLnNyYyA9ICRjdXJyZW50SW1hZ2UuZGF0YShcImltYWdlLXVybFwiKTtcclxuICAgIC8vIH1cclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuX2xvYWRHYWxsZXJ5SW1hZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gQ3JlYXRlIGVtcHR5IGltYWdlcyBpbiB0aGUgZ2FsbGVyeSBmb3IgZWFjaCB0aHVtYm5haWwuIFRoaXMgaGVscHMgdXMgZG9cclxuICAgIC8vIGxhenkgbG9hZGluZyBvZiBnYWxsZXJ5IGltYWdlcyBhbmQgYWxsb3dzIHVzIHRvIGNyb3NzLWZhZGUgaW1hZ2VzLlxyXG4gICAgdmFyICRnYWxsZXJ5SW1hZ2VzID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RodW1ibmFpbFNsaWRlci5nZXROdW1UaHVtYm5haWxzKCk7IGkgKz0gMSkge1xyXG4gICAgICAgIC8vIEdldCB0aGUgdGh1bWJuYWlsIGVsZW1lbnQgd2hpY2ggaGFzIHBhdGggYW5kIGNhcHRpb24gZGF0YVxyXG4gICAgICAgIHZhciAkdGh1bWIgPSB0aGlzLl90aHVtYm5haWxTbGlkZXIuZ2V0JFRodW1ibmFpbChpKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBpZCBmcm9tIHRoZSBwYXRoIHRvIHRoZSBsYXJnZSBpbWFnZVxyXG4gICAgICAgIHZhciBsYXJnZVBhdGggPSAkdGh1bWIuZGF0YShcImxhcmdlLXBhdGhcIik7XHJcbiAgICAgICAgdmFyIGlkID0gbGFyZ2VQYXRoLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIilbMF07XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIGdhbGxlcnkgaW1hZ2UgZWxlbWVudFxyXG4gICAgICAgIHZhciAkZ2FsbGVyeUltYWdlID0gJChcIjxpbWc+XCIsIHtpZDogaWR9KVxyXG4gICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXHJcbiAgICAgICAgICAgICAgICB0b3A6IFwiMHB4XCIsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBcIjBweFwiLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgIHpJbmRleDogMFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZGF0YShcImltYWdlLXVybFwiLCBsYXJnZVBhdGgpICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC5kYXRhKFwiY2FwdGlvblwiLCAkdGh1bWIuZGF0YShcImNhcHRpb25cIikpXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kc2VsZWN0ZWRJbWFnZUNvbnRhaW5lcik7XHJcbiAgICAgICAgJGdhbGxlcnlJbWFnZS5nZXQoMCkuc3JjID0gbGFyZ2VQYXRoOyAvLyBUT0RPOiBNYWtlIHRoaXMgbGF6eSFcclxuICAgICAgICAkZ2FsbGVyeUltYWdlcy5wdXNoKCRnYWxsZXJ5SW1hZ2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICRnYWxsZXJ5SW1hZ2VzO1xyXG59OyIsIm1vZHVsZS5leHBvcnRzID0gVGh1bWJuYWlsU2xpZGVyO1xyXG5cclxuZnVuY3Rpb24gVGh1bWJuYWlsU2xpZGVyKCRjb250YWluZXIsIHNsaWRlc2hvdykge1xyXG4gICAgdGhpcy5fJGNvbnRhaW5lciA9ICRjb250YWluZXI7XHJcbiAgICB0aGlzLl9zbGlkZXNob3cgPSBzbGlkZXNob3c7XHJcblxyXG4gICAgdGhpcy5faW5kZXggPSAwOyAvLyBJbmRleCBvZiBzZWxlY3RlZCB0aHVtYm5haWxcclxuICAgIHRoaXMuX3Njcm9sbEluZGV4ID0gMDsgLy8gSW5kZXggb2YgdGhlIHRodW1ibmFpbCB0aGF0IGlzIGN1cnJlbnRseSBjZW50ZXJlZFxyXG5cclxuICAgIC8vIENhY2hlIGFuZCBjcmVhdGUgbmVjZXNzYXJ5IERPTSBlbGVtZW50c1xyXG4gICAgdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lciA9ICRjb250YWluZXIuZmluZChcIi50aHVtYm5haWxzXCIpO1xyXG4gICAgdGhpcy5fJHRodW1ibmFpbEltYWdlcyA9IHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIuZmluZChcImltZ1wiKTtcclxuICAgIHRoaXMuXyR2aXNpYmxlVGh1bWJuYWlsV3JhcCA9ICRjb250YWluZXIuZmluZChcIi52aXNpYmxlLXRodW1ibmFpbHNcIik7XHJcbiAgICB0aGlzLl8kYWR2YW5jZUxlZnQgPSAkY29udGFpbmVyLmZpbmQoXCIudGh1bWJuYWlsLWFkdmFuY2UtbGVmdFwiKTtcclxuICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQgPSAkY29udGFpbmVyLmZpbmQoXCIudGh1bWJuYWlsLWFkdmFuY2UtcmlnaHRcIik7XHJcblxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIHRoZSB0aHVtYm5haWxzLCBnaXZlIHRoZW0gYW4gaW5kZXggZGF0YSBhdHRyaWJ1dGUgYW5kIGNhY2hlXHJcbiAgICAvLyBhIHJlZmVyZW5jZSB0byB0aGVtIGluIGFuIGFycmF5XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlscyA9IFtdO1xyXG4gICAgdGhpcy5fJHRodW1ibmFpbEltYWdlcy5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciAkdGh1bWJuYWlsID0gJChlbGVtZW50KTtcclxuICAgICAgICAkdGh1bWJuYWlsLmRhdGEoXCJpbmRleFwiLCBpbmRleCk7XHJcbiAgICAgICAgdGhpcy5fJHRodW1ibmFpbHMucHVzaCgkdGh1bWJuYWlsKTtcclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl9udW1JbWFnZXMgPSB0aGlzLl8kdGh1bWJuYWlscy5sZW5ndGg7XHJcblxyXG4gICAgLy8gTGVmdC9yaWdodCBjb250cm9sc1xyXG4gICAgdGhpcy5fJGFkdmFuY2VMZWZ0Lm9uKFwiY2xpY2tcIiwgdGhpcy5hZHZhbmNlTGVmdC5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQub24oXCJjbGlja1wiLCB0aGlzLmFkdmFuY2VSaWdodC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBDbGlja2luZyBhIHRodW1ibmFpbFxyXG4gICAgdGhpcy5fJHRodW1ibmFpbEltYWdlcy5vbihcImNsaWNrXCIsIHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5fYWN0aXZhdGVUaHVtYm5haWwoMCk7XHJcblxyXG4gICAgLy8gUmVzaXplXHJcbiAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgdGhpcy5fb25SZXNpemUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gRm9yIHNvbWUgcmVhc29uLCB0aGUgc2l6aW5nIG9uIHRoZSBjb250cm9scyBpcyBtZXNzZWQgdXAgaWYgaXQgcnVuc1xyXG4gICAgLy8gaW1tZWRpYXRlbHkgLSBkZWxheSBzaXppbmcgdW50aWwgc3RhY2sgaXMgY2xlYXJcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX29uUmVzaXplKCk7XHJcbiAgICB9LmJpbmQodGhpcyksIDApO1xyXG59XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLmdldEFjdGl2ZUluZGV4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2luZGV4O1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5nZXROdW1UaHVtYm5haWxzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX251bUltYWdlcztcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuZ2V0JFRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgcmV0dXJuIHRoaXMuXyR0aHVtYm5haWxzW2luZGV4XTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuYWR2YW5jZUxlZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbmV3SW5kZXggPSB0aGlzLl9zY3JvbGxJbmRleCAtIHRoaXMuX251bVZpc2libGU7XHJcbiAgICBuZXdJbmRleCA9IE1hdGgubWF4KG5ld0luZGV4LCAwKTtcclxuICAgIHRoaXMuX3Njcm9sbFRvVGh1bWJuYWlsKG5ld0luZGV4KTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuYWR2YW5jZVJpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld0luZGV4ID0gdGhpcy5fc2Nyb2xsSW5kZXggKyB0aGlzLl9udW1WaXNpYmxlO1xyXG4gICAgbmV3SW5kZXggPSBNYXRoLm1pbihuZXdJbmRleCwgdGhpcy5fbnVtSW1hZ2VzIC0gMSk7XHJcbiAgICB0aGlzLl9zY3JvbGxUb1RodW1ibmFpbChuZXdJbmRleCk7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9yZXNldFNpemluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIFJlc2V0IHNpemluZyB2YXJpYWJsZXMuIFRoaXMgaW5jbHVkZXMgcmVzZXR0aW5nIGFueSBpbmxpbmUgc3R5bGUgdGhhdCBoYXNcclxuICAgIC8vIGJlZW4gYXBwbGllZCwgc28gdGhhdCBhbnkgc2l6ZSBjYWxjdWxhdGlvbnMgY2FuIGJlIGJhc2VkIG9uIHRoZSBDU1NcclxuICAgIC8vIHN0eWxpbmcuXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyLmNzcyh7XHJcbiAgICAgICAgdG9wOiBcIlwiLCBsZWZ0OiBcIlwiLCB3aWR0aDogXCJcIiwgaGVpZ2h0OiBcIlwiXHJcbiAgICB9KTtcclxuICAgIHRoaXMuXyR2aXNpYmxlVGh1bWJuYWlsV3JhcC53aWR0aChcIlwiKTtcclxuICAgIHRoaXMuXyR2aXNpYmxlVGh1bWJuYWlsV3JhcC5oZWlnaHQoXCJcIik7XHJcbiAgICAvLyBNYWtlIGFsbCB0aHVtYm5haWxzIHNxdWFyZSBhbmQgcmVzZXQgYW55IGhlaWdodFxyXG4gICAgdGhpcy5fJHRodW1ibmFpbHMuZm9yRWFjaChmdW5jdGlvbiAoJGVsZW1lbnQpIHsgXHJcbiAgICAgICAgJGVsZW1lbnQuaGVpZ2h0KFwiXCIpOyAvLyBSZXNldCBoZWlnaHQgYmVmb3JlIHNldHRpbmcgd2lkdGhcclxuICAgICAgICAkZWxlbWVudC53aWR0aCgkZWxlbWVudC5oZWlnaHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fcmVzZXRTaXppbmcoKTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNpemUgb2YgdGhlIGZpcnN0IHRodW1ibmFpbC4gVGhpcyBhc3N1bWVzIHRoZSBmaXJzdCBpbWFnZVxyXG4gICAgLy8gb25seSBoYXMgYSByaWdodC1zaWRlIG1hcmdpbi5cclxuICAgIHZhciAkZmlyc3RUaHVtYiA9IHRoaXMuXyR0aHVtYm5haWxzWzBdO1xyXG4gICAgdmFyIHRodW1iU2l6ZSA9ICRmaXJzdFRodW1iLm91dGVySGVpZ2h0KGZhbHNlKTtcclxuICAgIHZhciB0aHVtYk1hcmdpbiA9IDIgKiAoJGZpcnN0VGh1bWIub3V0ZXJXaWR0aCh0cnVlKSAtIHRodW1iU2l6ZSk7XHJcblxyXG4gICAgLy8gTWVhc3VyZSBjb250cm9scy4gVGhleSBuZWVkIHRvIGJlIHZpc2libGUgaW4gb3JkZXIgdG8gYmUgbWVhc3VyZWQuXHJcbiAgICB0aGlzLl8kYWR2YW5jZVJpZ2h0LmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgIHRoaXMuXyRhZHZhbmNlTGVmdC5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICB2YXIgdGh1bWJDb250cm9sV2lkdGggPSB0aGlzLl8kYWR2YW5jZVJpZ2h0Lm91dGVyV2lkdGgodHJ1ZSkgK1xyXG4gICAgICAgIHRoaXMuXyRhZHZhbmNlTGVmdC5vdXRlcldpZHRoKHRydWUpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBob3cgbWFueSBmdWxsIHRodW1ibmFpbHMgY2FuIGZpdCB3aXRoaW4gdGhlIHRodW1ibmFpbCBhcmVhXHJcbiAgICB2YXIgdmlzaWJsZVdpZHRoID0gdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwLm91dGVyV2lkdGgoZmFsc2UpO1xyXG4gICAgdmFyIG51bVRodW1ic1Zpc2libGUgPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICh2aXNpYmxlV2lkdGggLSB0aHVtYk1hcmdpbikgLyAodGh1bWJTaXplICsgdGh1bWJNYXJnaW4pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIENoZWNrIHdoZXRoZXIgYWxsIHRoZSB0aHVtYm5haWxzIGNhbiBmaXQgb24gdGhlIHNjcmVlbiBhdCBvbmNlXHJcbiAgICBpZiAobnVtVGh1bWJzVmlzaWJsZSA8IHRoaXMuX251bUltYWdlcykge1xyXG4gICAgICAgIC8vIFRha2UgYSBiZXN0IGd1ZXNzIGF0IGhvdyB0byBzaXplIHRoZSB0aHVtYm5haWxzLiBTaXplIGZvcm11bGE6XHJcbiAgICAgICAgLy8gIHdpZHRoID0gbnVtICogdGh1bWJTaXplICsgKG51bSAtIDEpICogdGh1bWJNYXJnaW4gKyBjb250cm9sU2l6ZVxyXG4gICAgICAgIC8vIFNvbHZlIGZvciBudW1iZXIgb2YgdGh1bWJuYWlscyBhbmQgcm91bmQgdG8gdGhlIG5lYXJlc3QgaW50ZWdlciBzbyBcclxuICAgICAgICAvLyB0aGF0IHdlIGRvbid0IGhhdmUgYW55IHBhcnRpYWwgdGh1bWJuYWlscyBzaG93aW5nLlxyXG4gICAgICAgIG51bVRodW1ic1Zpc2libGUgPSBNYXRoLnJvdW5kKFxyXG4gICAgICAgICAgICAodmlzaWJsZVdpZHRoIC0gdGh1bWJDb250cm9sV2lkdGggKyB0aHVtYk1hcmdpbikgLyBcclxuICAgICAgICAgICAgKHRodW1iU2l6ZSArIHRodW1iTWFyZ2luKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIFVzZSB0aGlzIG51bWJlciBvZiB0aHVtYm5haWxzIHRvIGNhbGN1bGF0ZSB0aGUgdGh1bWJuYWlsIHNpemVcclxuICAgICAgICB2YXIgbmV3U2l6ZSA9ICh2aXNpYmxlV2lkdGggLSB0aHVtYkNvbnRyb2xXaWR0aCArIHRodW1iTWFyZ2luKSAvIFxyXG4gICAgICAgICAgICBudW1UaHVtYnNWaXNpYmxlIC0gdGh1bWJNYXJnaW47XHJcbiAgICAgICAgdGhpcy5fJHRodW1ibmFpbHMuZm9yRWFjaChmdW5jdGlvbiAoJGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gJC53aWR0aCBhbmQgJC5oZWlnaHQgc2V0IHRoZSBjb250ZW50IHNpemUgcmVnYXJkbGVzcyBvZiB0aGUgXHJcbiAgICAgICAgICAgIC8vIGJveC1zaXppbmcuIFRoZSBpbWFnZXMgYXJlIGJvcmRlci1ib3gsIHNvIHdlIHdhbnQgdGhlIENTUyB3aWR0aFxyXG4gICAgICAgICAgICAvLyBhbmQgaGVpZ2h0LiBUaGlzIGFsbG93cyB0aGUgYWN0aXZlIGltYWdlIHRvIGhhdmUgYSBib3JkZXIgYW5kIHRoZVxyXG4gICAgICAgICAgICAvLyBvdGhlciBpbWFnZXMgdG8gaGF2ZSBwYWRkaW5nLiBcclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwid2lkdGhcIiwgbmV3U2l6ZSArIFwicHhcIik7XHJcbiAgICAgICAgICAgICRlbGVtZW50LmNzcyhcImhlaWdodFwiLCBuZXdTaXplICsgXCJweFwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRoZSB0aHVtYm5haWwgd3JhcCBzaXplLiBJdCBzaG91bGQgYmUganVzdCB0YWxsIGVub3VnaCB0byBmaXQgYVxyXG4gICAgICAgIC8vIHRodW1ibmFpbCBhbmQgbG9uZyBlbm91Z2ggdG8gaG9sZCBhbGwgdGhlIHRodW1ibmFpbHMgaW4gb25lIGxpbmU6XHJcbiAgICAgICAgdmFyIHRvdGFsU2l6ZSA9IG5ld1NpemUgKiB0aGlzLl9udW1JbWFnZXMgKyBcclxuICAgICAgICAgICAgdGh1bWJNYXJnaW4gKiAodGhpcy5fbnVtSW1hZ2VzIC0gMSk7XHJcbiAgICAgICAgdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci5jc3Moe1xyXG4gICAgICAgICAgICB3aWR0aDogdG90YWxTaXplICsgXCJweFwiLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICRmaXJzdFRodW1iLm91dGVySGVpZ2h0KHRydWUpICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgdmlzaWJsZSB0aHVtYm5haWwgd3JhcCBzaXplLiBUaGlzIGlzIHVzZWQgdG8gbWFrcyB0aGUgbXVjaCBcclxuICAgICAgICAvLyBsYXJnZXIgdGh1bWJuYWlsIGNvbnRhaW5lci4gSXQgc2hvdWxkIGJlIGFzIHdpZGUgYXMgaXQgY2FuIGJlLCBtaW51c1xyXG4gICAgICAgIC8vIHRoZSBzcGFjZSBuZWVkZWQgZm9yIHRoZSBsZWZ0L3JpZ2h0IGNvbnRvbHMuXHJcbiAgICAgICAgdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwLmNzcyh7XHJcbiAgICAgICAgICAgIHdpZHRoOiB2aXNpYmxlV2lkdGggLSB0aHVtYkNvbnRyb2xXaWR0aCArIFwicHhcIixcclxuICAgICAgICAgICAgaGVpZ2h0OiAkZmlyc3RUaHVtYi5vdXRlckhlaWdodCh0cnVlKSArIFwicHhcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBbGwgdGh1bWJuYWlscyBhcmUgdmlzaWJsZSwgd2UgY2FuIGhpZGUgdGhlIGNvbnRyb2xzIGFuZCBleHBhbmQgdGhlXHJcbiAgICAgICAgLy8gdGh1bWJuYWlsIGNvbnRhaW5lciB0byAxMDAlXHJcbiAgICAgICAgbnVtVGh1bWJzVmlzaWJsZSA9IHRoaXMuX251bUltYWdlcztcclxuICAgICAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyLmNzcyhcIndpZHRoXCIsIFwiMTAwJVwiKTtcclxuICAgICAgICB0aGlzLl8kYWR2YW5jZVJpZ2h0LmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgIHRoaXMuXyRhZHZhbmNlTGVmdC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9udW1WaXNpYmxlID0gbnVtVGh1bWJzVmlzaWJsZTtcclxuICAgIHZhciBtaWRkbGVJbmRleCA9IE1hdGguZmxvb3IoKHRoaXMuX251bVZpc2libGUgLSAxKSAvIDIpO1xyXG4gICAgdGhpcy5fc2Nyb2xsQm91bmRzID0ge1xyXG4gICAgICAgIG1pbjogbWlkZGxlSW5kZXgsXHJcbiAgICAgICAgbWF4OiB0aGlzLl9udW1JbWFnZXMgLSAxIC0gbWlkZGxlSW5kZXhcclxuICAgIH07XHJcbiAgICBpZiAodGhpcy5fbnVtVmlzaWJsZSAlIDIgPT09IDApIHRoaXMuX3Njcm9sbEJvdW5kcy5tYXggLT0gMTtcclxuXHJcbiAgICB0aGlzLl91cGRhdGVUaHVtYm5haWxDb250cm9scygpO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5fYWN0aXZhdGVUaHVtYm5haWwgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIC8vIEFjdGl2YXRlL2RlYWN0aXZhdGUgdGh1bWJuYWlsc1xyXG4gICAgdGhpcy5fJHRodW1ibmFpbHNbdGhpcy5faW5kZXhdLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fJHRodW1ibmFpbHNbaW5kZXhdLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5fc2Nyb2xsVG9UaHVtYm5haWwgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIC8vIE5vIG5lZWQgdG8gc2Nyb2xsIGlmIGFsbCB0aHVtYm5haWxzIGFyZSB2aXNpYmxlXHJcbiAgICBpZiAodGhpcy5fbnVtVmlzaWJsZSA9PT0gdGhpcy5fbnVtSW1hZ2VzKSByZXR1cm47XHJcblxyXG4gICAgLy8gQ29uc3RyYWluIGluZGV4IHNvIHRoYXQgd2UgY2FuJ3Qgc2Nyb2xsIG91dCBvZiBib3VuZHMgXHJcbiAgICBpbmRleCA9IE1hdGgubWF4KGluZGV4LCB0aGlzLl9zY3JvbGxCb3VuZHMubWluKTtcclxuICAgIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHRoaXMuX3Njcm9sbEJvdW5kcy5tYXgpO1xyXG4gICAgdGhpcy5fc2Nyb2xsSW5kZXggPSBpbmRleDtcclxuXHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9zY3JvbGxJbmRleCk7XHJcbiAgICBcclxuICAgIC8vIEZpbmQgdGhlIFwibGVmdFwiIHBvc2l0aW9uIG9mIHRoZSB0aHVtYm5haWwgY29udGFpbmVyIHRoYXQgd291bGQgcHV0IHRoZSBcclxuICAgIC8vIHRodW1ibmFpbCBhdCBpbmRleCBhdCB0aGUgY2VudGVyXHJcbiAgICB2YXIgJHRodW1iID0gdGhpcy5fJHRodW1ibmFpbHNbMF07XHJcbiAgICB2YXIgc2l6ZSA9IHBhcnNlRmxvYXQoJHRodW1iLmNzcyhcIndpZHRoXCIpKTtcclxuICAgIHZhciBtYXJnaW4gPSAyICogcGFyc2VGbG9hdCgkdGh1bWIuY3NzKFwibWFyZ2luLXJpZ2h0XCIpKTsgXHJcbiAgICB2YXIgY2VudGVyWCA9IHNpemUgKiB0aGlzLl9zY3JvbGxCb3VuZHMubWluICsgXHJcbiAgICAgICAgbWFyZ2luICogKHRoaXMuX3Njcm9sbEJvdW5kcy5taW4gLSAxKTtcclxuICAgIHZhciB0aHVtYlggPSBzaXplICogaW5kZXggKyBtYXJnaW4gKiAoaW5kZXggLSAxKTtcclxuICAgIHZhciBsZWZ0ID0gY2VudGVyWCAtIHRodW1iWDtcclxuXHJcbiAgICAvLyBBbmltYXRlIHRoZSB0aHVtYm5haWwgY29udGFpbmVyXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyLnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIudmVsb2NpdHkoe1xyXG4gICAgICAgIFwibGVmdFwiOiBsZWZ0ICsgXCJweFwiXHJcbiAgICB9LCA2MDAsIFwiZWFzZUluT3V0UXVhZFwiKTtcclxuXHJcbiAgICB0aGlzLl91cGRhdGVUaHVtYm5haWxDb250cm9scygpO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5fb25DbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgdmFyIGluZGV4ID0gJHRhcmdldC5kYXRhKFwiaW5kZXhcIik7XHJcbiAgICBcclxuICAgIC8vIENsaWNrZWQgb24gdGhlIGFjdGl2ZSBpbWFnZSAtIG5vIG5lZWQgdG8gZG8gYW55dGhpbmdcclxuICAgIGlmICh0aGlzLl9pbmRleCAhPT0gaW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9hY3RpdmF0ZVRodW1ibmFpbChpbmRleCk7XHJcbiAgICAgICAgdGhpcy5fc2Nyb2xsVG9UaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5fc2xpZGVzaG93LnNob3dJbWFnZShpbmRleCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl91cGRhdGVUaHVtYm5haWxDb250cm9scyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIFJlLWVuYWJsZVxyXG4gICAgdGhpcy5fJGFkdmFuY2VMZWZ0LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB0aGlzLl8kYWR2YW5jZVJpZ2h0LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICBcclxuICAgIC8vIERpc2FibGUgaWYgd2UndmUgcmVhY2hlZCB0aGUgdGhlIG1heCBvciBtaW4gbGltaXRcclxuICAgIHZhciBtaWRTY3JvbGxJbmRleCA9IE1hdGguZmxvb3IoKHRoaXMuX251bVZpc2libGUgLSAxKSAvIDIpO1xyXG4gICAgdmFyIG1pblNjcm9sbEluZGV4ID0gbWlkU2Nyb2xsSW5kZXg7XHJcbiAgICB2YXIgbWF4U2Nyb2xsSW5kZXggPSB0aGlzLl9udW1JbWFnZXMgLSAxIC0gbWlkU2Nyb2xsSW5kZXg7XHJcbiAgICBpZiAodGhpcy5fc2Nyb2xsSW5kZXggPj0gdGhpcy5fc2Nyb2xsQm91bmRzLm1heCkge1xyXG4gICAgICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5fc2Nyb2xsSW5kZXggPD0gdGhpcy5fc2Nyb2xsQm91bmRzLm1pbikge1xyXG4gICAgICAgIHRoaXMuXyRhZHZhbmNlTGVmdC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG59OyIsImV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICh2YWwsIGRlZmF1bHRWYWwpIHtcclxuICAgIHJldHVybiAodmFsICE9PSB1bmRlZmluZWQpID8gdmFsIDogZGVmYXVsdFZhbDtcclxufTtcclxuXHJcbi8vIFVudGVzdGVkXHJcbi8vIGV4cG9ydHMuZGVmYXVsdFByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZhdWx0UHJvcGVydGllcyAob2JqLCBwcm9wcykge1xyXG4vLyAgICAgZm9yICh2YXIgcHJvcCBpbiBwcm9wcykge1xyXG4vLyAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wcywgcHJvcCkpIHtcclxuLy8gICAgICAgICAgICAgdmFyIHZhbHVlID0gZXhwb3J0cy5kZWZhdWx0VmFsdWUocHJvcHMudmFsdWUsIHByb3BzLmRlZmF1bHQpO1xyXG4vLyAgICAgICAgICAgICBvYmpbcHJvcF0gPSB2YWx1ZTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcbi8vICAgICByZXR1cm4gb2JqO1xyXG4vLyB9O1xyXG4vLyBcclxuZXhwb3J0cy50aW1lSXQgPSBmdW5jdGlvbiAoZnVuYykge1xyXG4gICAgdmFyIHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBmdW5jKCk7XHJcbiAgICB2YXIgZW5kID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICByZXR1cm4gZW5kIC0gc3RhcnQ7XHJcbn07XHJcblxyXG5leHBvcnRzLmlzSW5SZWN0ID0gZnVuY3Rpb24gKHgsIHksIHJlY3QpIHtcclxuICAgIGlmICh4ID49IHJlY3QueCAmJiB4IDw9IChyZWN0LnggKyByZWN0LncpICYmXHJcbiAgICAgICAgeSA+PSByZWN0LnkgJiYgeSA8PSAocmVjdC55ICsgcmVjdC5oKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuZXhwb3J0cy5yYW5kSW50ID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxufTtcclxuXHJcbmV4cG9ydHMucmFuZEFycmF5RWxlbWVudCA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgdmFyIGkgPSBleHBvcnRzLnJhbmRJbnQoMCwgYXJyYXkubGVuZ3RoIC0gMSk7ICAgIFxyXG4gICAgcmV0dXJuIGFycmF5W2ldO1xyXG59O1xyXG5cclxuZXhwb3J0cy5tYXAgPSBmdW5jdGlvbiAobnVtLCBtaW4xLCBtYXgxLCBtaW4yLCBtYXgyLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgbWFwcGVkID0gKG51bSAtIG1pbjEpIC8gKG1heDEgLSBtaW4xKSAqIChtYXgyIC0gbWluMikgKyBtaW4yO1xyXG4gICAgaWYgKCFvcHRpb25zKSByZXR1cm4gbWFwcGVkO1xyXG4gICAgaWYgKG9wdGlvbnMucm91bmQgJiYgb3B0aW9ucy5yb3VuZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1hcHBlZCA9IE1hdGgucm91bmQobWFwcGVkKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmZsb29yICYmIG9wdGlvbnMuZmxvb3IgPT09IHRydWUpIHtcclxuICAgICAgICBtYXBwZWQgPSBNYXRoLmZsb29yKG1hcHBlZCk7ICAgICAgICBcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNlaWwgJiYgb3B0aW9ucy5jZWlsID09PSB0cnVlKSB7XHJcbiAgICAgICAgbWFwcGVkID0gTWF0aC5jZWlsKG1hcHBlZCk7ICAgICAgICBcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNsYW1wICYmIG9wdGlvbnMuY2xhbXAgPT09IHRydWUpIHtcclxuICAgICAgICBtYXBwZWQgPSBNYXRoLm1pbihtYXBwZWQsIG1heDIpO1xyXG4gICAgICAgIG1hcHBlZCA9IE1hdGgubWF4KG1hcHBlZCwgbWluMik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFwcGVkO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRRdWVyeVBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBDaGVjayBmb3IgcXVlcnkgc3RyaW5nXHJcbiAgICBxcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcbiAgICBpZiAocXMubGVuZ3RoIDw9IDEpIHJldHVybiB7fTtcclxuICAgIC8vIFF1ZXJ5IHN0cmluZyBleGlzdHMsIHBhcnNlIGl0IGludG8gYSBxdWVyeSBvYmplY3RcclxuICAgIHFzID0gcXMuc3Vic3RyaW5nKDEpOyAvLyBSZW1vdmUgdGhlIFwiP1wiIGRlbGltaXRlclxyXG4gICAgdmFyIGtleVZhbFBhaXJzID0gcXMuc3BsaXQoXCImXCIpO1xyXG4gICAgdmFyIHF1ZXJ5T2JqZWN0ID0ge307XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleVZhbFBhaXJzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIGtleVZhbCA9IGtleVZhbFBhaXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBpZiAoa2V5VmFsLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KGtleVZhbFswXSk7XHJcbiAgICAgICAgICAgIHZhciB2YWwgPSBkZWNvZGVVUklDb21wb25lbnQoa2V5VmFsWzFdKTtcclxuICAgICAgICAgICAgcXVlcnlPYmplY3Rba2V5XSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlcnlPYmplY3Q7XHJcbn07XHJcblxyXG5leHBvcnRzLmNyZWF0ZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHF1ZXJ5T2JqZWN0KSB7XHJcbiAgICBpZiAodHlwZW9mIHF1ZXJ5T2JqZWN0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gXCJcIjtcclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocXVlcnlPYmplY3QpO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIjtcclxuICAgIHZhciBxdWVyeVN0cmluZyA9IFwiP1wiO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgdmFyIHZhbCA9IHF1ZXJ5T2JqZWN0W2tleV07XHJcbiAgICAgICAgcXVlcnlTdHJpbmcgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpO1xyXG4gICAgICAgIGlmIChpICE9PSBrZXlzLmxlbmd0aCAtIDEpIHF1ZXJ5U3RyaW5nICs9IFwiJlwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0cy53cmFwSW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkge1xyXG4gICAgdmFyIHdyYXBwZWRJbmRleCA9IChpbmRleCAlIGxlbmd0aCk7IFxyXG4gICAgaWYgKHdyYXBwZWRJbmRleCA8IDApIHtcclxuICAgICAgICAvLyBJZiBuZWdhdGl2ZSwgZmxpcCB0aGUgaW5kZXggc28gdGhhdCAtMSBiZWNvbWVzIHRoZSBsYXN0IGl0ZW0gaW4gbGlzdCBcclxuICAgICAgICB3cmFwcGVkSW5kZXggPSBsZW5ndGggKyB3cmFwcGVkSW5kZXg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gd3JhcHBlZEluZGV4O1xyXG59O1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
