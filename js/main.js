!function t(i,e,s){function o(a,h){if(!e[a]){if(!i[a]){var r="function"==typeof require&&require;if(!h&&r)return r(a,!0);if(n)return n(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var _=e[a]={exports:{}};i[a][0].call(_.exports,function(t){var e=i[a][1][t];return o(e?e:t)},_,_.exports,t,i,e,s)}return e[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(t,i,e){!function(t){var s=!1;if("function"==typeof define&&define.amd&&(define(t),s=!0),"object"==typeof e&&(i.exports=t(),s=!0),!s){var o=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=o,n}}}(function(){function t(){for(var t=0,i={};t<arguments.length;t++){var e=arguments[t];for(var s in e)i[s]=e[s]}return i}function i(e){function s(i,o,n){var a;if("undefined"!=typeof document){if(arguments.length>1){if(n=t({path:"/"},s.defaults,n),"number"==typeof n.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*n.expires),n.expires=h}try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(r){}return o=e.write?e.write(o,i):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",o,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}i||(a={});for(var c=document.cookie?document.cookie.split("; "):[],_=/(%[0-9A-Z]{2})+/g,l=0;l<c.length;l++){var d=c[l].split("="),p=d.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var u=d[0].replace(_,decodeURIComponent);if(p=e.read?e.read(p,u):e(p,u)||p.replace(_,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(r){}if(i===u){a=p;break}i||(a[u]=p)}catch(r){}}return a}}return s.set=s,s.get=function(t){return s.call(s,t)},s.getJSON=function(){return s.apply({json:!0},[].slice.call(arguments))},s.defaults={},s.remove=function(i,e){s(i,"",t(e,{expires:-1}))},s.withConverter=i,s}return i(function(){})})},{}],2:[function(t,i,e){function s(t,i,e,n,a,h){this._font=t,this._text=i,this._x=o["default"](n,0),this._y=o["default"](a,0),this._fontSize=o["default"](e,12),this._p=o["default"](h,window),this._rotation=0,this._hAlign=s.ALIGN.BOX_CENTER,this._vAlign=s.BASELINE.BOX_CENTER,this._calculateMetrics(!0)}var o=t("./utils.js");i.exports=s,s.ALIGN={BOX_LEFT:"box_left",BOX_CENTER:"box_center",BOX_RIGHT:"box_right"},s.BASELINE={BOX_TOP:"box_top",BOX_CENTER:"box_center",BOX_BOTTOM:"box_bottom",FONT_CENTER:"font_center",ALPHABETIC:"alphabetic"},s.prototype.setText=function(t){return this._text=t,this._calculateMetrics(!1),this},s.prototype.setPosition=function(t,i){return this._x=o["default"](t,this._x),this._y=o["default"](i,this._y),this},s.prototype.getPosition=function(){return{x:this._x,y:this._y}},s.prototype.setTextSize=function(t){return this._fontSize=t,this._calculateMetrics(!0),this},s.prototype.setRotation=function(t){return this._rotation=o["default"](t,this._rotation),this},s.prototype.getRotation=function(t){return this._rotation},s.prototype.setPInstance=function(t){return this._p=o["default"](t,this._p),this},s.prototype.getPInstance=function(){return this._p},s.prototype.setAnchor=function(t,i,e){var n=this._calculateAlignedCoords(this._x,this._y);if(this._hAlign=o["default"](t,s.ALIGN.CENTER),this._vAlign=o["default"](i,s.BASELINE.CENTER),e){var a=this._calculateAlignedCoords(this._x,this._y);this._x+=n.x-a.x,this._y+=n.y-a.y}return this},s.prototype.getBbox=function(t,i){this.setPosition(t,i);var e=this._calculateAlignedCoords(this._x,this._y);return{x:e.x+this._boundsOffset.x,y:e.y+this._boundsOffset.y,w:this.width,h:this.height}},s.prototype.getTextPoints=function(t,i,e){this.setPosition(t,i);for(var s=this._font.textToPoints(this._text,this._x,this._y,this._fontSize,e),o=0;o<s.length;o+=1){var n=this._calculateAlignedCoords(s[o].x,s[o].y);s[o].x=n.x,s[o].y=n.y}return s},s.prototype.draw=function(t,i,e){e=o["default"](e,!1),this.setPosition(t,i);var s={x:this._x,y:this._y};if(this._p.push(),this._rotation&&(s=this._calculateRotatedCoords(s.x,s.y,this._rotation),this._p.rotate(this._rotation)),s=this._calculateAlignedCoords(s.x,s.y),this._p.textAlign(this._p.LEFT,this._p.BASELINE),this._p.textFont(this._font),this._p.textSize(this._fontSize),this._p.text(this._text,s.x,s.y),e){this._p.stroke(200);var n=s.x+this._boundsOffset.x,a=s.y+this._boundsOffset.y;this._p.noFill(),this._p.rect(n,a,this.width,this.height)}this._p.pop()},s.prototype._calculateRotatedCoords=function(t,i,e){var s=Math.cos(e)*t+Math.cos(Math.PI/2-e)*i,o=-Math.sin(e)*t+Math.sin(Math.PI/2-e)*i;return{x:s,y:o}},s.prototype._calculateAlignedCoords=function(t,i){var e,o;switch(this._hAlign){case s.ALIGN.BOX_LEFT:e=t;break;case s.ALIGN.BOX_CENTER:e=t-this.halfWidth;break;case s.ALIGN.BOX_RIGHT:e=t-this.width;break;default:e=t,console.log("Unrecognized horizonal align:",this._hAlign)}switch(this._vAlign){case s.BASELINE.BOX_TOP:o=i-this._boundsOffset.y;break;case s.BASELINE.BOX_CENTER:o=i+this._distBaseToMid;break;case s.BASELINE.BOX_BOTTOM:o=i-this._distBaseToBottom;break;case s.BASELINE.FONT_CENTER:o=i-this._descent+(this._ascent+this._descent)/2;break;case s.BASELINE.ALPHABETIC:o=i;break;default:o=i,console.log("Unrecognized vertical align:",this._vAlign)}return{x:e,y:o}},s.prototype._calculateMetrics=function(t){var i=this._font.textBounds(this._text,1e3,1e3,this._fontSize);i={x:i.x-1e3,y:i.y-1e3,w:i.w,h:i.h},t&&(this._ascent=this._font._textAscent(this._fontSize),this._descent=this._font._textDescent(this._fontSize)),this.width=i.w,this.height=i.h,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this._boundsOffset={x:i.x,y:i.y},this._distBaseToMid=Math.abs(i.y)-this.halfHeight,this._distBaseToBottom=this.height-Math.abs(i.y)}},{"./utils.js":3}],3:[function(t,i,e){e["default"]=function(t,i){return void 0!==t?t:i}},{}],4:[function(t,i,e){function s(t,i){this._slideshowDelay=void 0!==t?t:2e3,this._transitionDuration=void 0!==i?_transitionDuration:1e3,this._slideshows=[],this.reload()}function o(t,i,e){this._$container=t,this._slideshowDelay=i,this._transitionDuration=e,this._timeoutId=null,this._imageIndex=0,this._$images=[],this._$container.find("img").each(function(t,i){var e=$(i);e.css({position:"absolute",top:"0",left:"0",zIndex:0===t?2:0}),this._$images.push(e)}.bind(this)),this._numImages=this._$images.length,this._numImages<=1||(this._$container.on("mouseenter",this._onEnter.bind(this)),this._$container.on("mouseleave",this._onLeave.bind(this)))}i.exports=s;var n=t("./utilities.js");s.prototype.reload=function(){var t=this._slideshows||[];this._slideshows=[],$(".hover-slideshow").each(function(i,e){var s=$(e),n=this._findInSlideshows(e,t);if(n!==-1){var a=t.splice(n,1)[0];this._slideshows.push(a)}else this._slideshows.push(new o(s,this._slideshowDelay,this._transitionDuration))}.bind(this))},s.prototype._findInSlideshows=function(t,i){for(var e=0;e<i.length;e+=1)if(t===i[e].getElement())return e;return-1},o.prototype.getElement=function(){return this._$container.get(0)},o.prototype.get$Element=function(){return this._$container},o.prototype._onEnter=function(){this._timeoutId=setTimeout(this._advanceSlideshow.bind(this),500)},o.prototype._onLeave=function(){clearInterval(this._timeoutId),this._timeoutId=null},o.prototype._advanceSlideshow=function(){this._imageIndex+=1;var t;this._numImages>=3&&(t=n.wrapIndex(this._imageIndex-2,this._numImages),this._$images[t].css({zIndex:0,opacity:0}),this._$images[t].velocity("stop")),this._numImages>=2&&(t=n.wrapIndex(this._imageIndex-1,this._numImages),this._$images[t].css({zIndex:1,opacity:1}),this._$images[t].velocity("stop")),this._imageIndex=n.wrapIndex(this._imageIndex,this._numImages),this._$images[this._imageIndex].css({zIndex:2,opacity:0}),this._$images[this._imageIndex].velocity({opacity:1},this._transitionDuration,"easeInOutQuad"),this._timeoutId=setTimeout(this._advanceSlideshow.bind(this),this._slideshowDelay)}},{"./utilities.js":19}],5:[function(t,i,e){function s(t,i,e){this._$nav=t,this._$navLogo=i,this._fontPath=e,this._text=this._$navLogo.text(),this._isFirstFrame=!0,this._isMouseOver=!1,this._isOverNavLogo=!1,this._updateTextOffset(),this._updateSize(),this._updateFontSize(),this._$container=$("<div>").css({position:"absolute",top:"0px",left:"0px"}).prependTo(this._$nav).hide(),this._createP5Instance()}i.exports=s;var o=t("../utilities.js");s.prototype._createP5Instance=function(){new p5(function(t){this._p=t,t.preload=this._preload.bind(this,t),t.setup=this._setup.bind(this,t),t.draw=this._draw.bind(this,t)}.bind(this),this._$container.get(0))},s.prototype._updateTextOffset=function(){var t=$("<div>").css({display:"inline-block",verticalAlign:"baseline"}).prependTo(this._$navLogo),i=this._$nav.offset(),e=t.offset();this._textOffset={top:e.top-i.top,left:e.left-i.left},t.remove()},s.prototype._calculateNavLogoBounds=function(){var t=this._$nav.offset(),i=this._$navLogo.offset();this._logoBbox={y:i.top-t.top,x:i.left-t.left,w:this._$navLogo.outerWidth(),h:this._$navLogo.outerHeight()}},s.prototype._updateSize=function(){this._width=this._$nav.innerWidth(),this._height=this._$nav.innerHeight()},s.prototype._updateFontSize=function(){this._fontSize=this._$navLogo.css("fontSize").replace("px","")},s.prototype._onResize=function(t){this._updateSize(),this._updateFontSize(),this._updateTextOffset(),this._calculateNavLogoBounds(),t.resizeCanvas(this._width,this._height)},s.prototype._setMouseOver=function(t){this._isMouseOver=t},s.prototype._onClick=function(t){this._isOverNavLogo&&this._$navLogo.trigger(t)},s.prototype._preload=function(t){this._font=t.loadFont(this._fontPath)},s.prototype._setup=function(t){var i=t.createCanvas(this._width,this._height);this._$canvas=$(i.canvas),this._$container.show(),this._$navLogo.css("zIndex",-1),this._$canvas.on("mouseover",this._setMouseOver.bind(this,!0)),this._$canvas.on("mouseout",this._setMouseOver.bind(this,!1)),this._$canvas.on("click",this._onClick.bind(this)),$(window).on("resize",this._onResize.bind(this,t))},s.prototype._draw=function(t){if(this._isMouseOver){var i=o.isInRect(t.mouseX,t.mouseY,this._logoBbox);!this._isOverNavLogo&&i?(this._isOverNavLogo=!0,this._$canvas.css("cursor","pointer")):this._isOverNavLogo&&!i&&(this._isOverNavLogo=!1,this._$canvas.css("cursor","initial"))}}},{"../utilities.js":19}],6:[function(t,i,e){function s(t,i){n.call(this,t,i,"../fonts/big_john-webfont.ttf")}i.exports=s;var o=t("p5-bbox-aligned-text"),n=t("./base-logo-sketch.js"),a=t("./generators/sin-generator.js"),h=t("../utilities.js");s.prototype=Object.create(n.prototype),s.prototype._onResize=function(t){n.prototype._onResize.call(this,t),this._spacing=h.map(this._fontSize,20,40,2,5,{clamp:!0,round:!0}),this._bboxText.setText(this._text).setTextSize(this._fontSize).setAnchor(o.ALIGN.BOX_LEFT,o.BASELINE.ALPHABETIC).setPosition(this._textOffset.left,this._textOffset.top).setAnchor(o.ALIGN.BOX_CENTER,o.BASELINE.BOX_CENTER,!0),this._drawStationaryLogo(t),this._points=this._bboxText.getTextPoints(),this._isFirstFrame=!0},s.prototype._drawStationaryLogo=function(t){t.background(255),t.stroke(255),t.fill("#0A000A"),t.strokeWeight(2),this._bboxText.draw()},s.prototype._setup=function(t){n.prototype._setup.call(this,t),this._bboxText=new o(this._font,this._text,this._fontSize,0,0,t),this._onResize(t),this._drawStationaryLogo(t),this._thresholdGenerator=new a(t,0,1,.02,t.PI/2)},s.prototype._draw=function(t){if(n.prototype._draw.call(this,t),this._isMouseOver&&this._isOverNavLogo){this._isFirstFrame&&(t.background(255),this._isFirstFrame=!1),this._fontSize>30?this._thresholdGenerator.setBounds(.2*this._bboxText.height,.47*this._bboxText.height):this._thresholdGenerator.setBounds(.2*this._bboxText.height,.6*this._bboxText.height);var i=this._thresholdGenerator.generate();t.background(255,100),t.strokeWeight(1);for(var e=0;e<this._points.length;e+=1)for(var s=this._points[e],o=e+1;o<this._points.length;o+=1){var a=this._points[o],h=t.dist(s.x,s.y,a.x,a.y);h<i&&(t.noStroke(),t.fill("rgba(165, 0, 173, 0.25)"),t.ellipse((s.x+a.x)/2,(s.y+a.y)/2,h,h),t.stroke("rgba(165, 0, 173, 0.25)"),t.noFill(),t.line(s.x,s.y,a.x,a.y))}}}},{"../utilities.js":19,"./base-logo-sketch.js":5,"./generators/sin-generator.js":8,"p5-bbox-aligned-text":2}],7:[function(t,i,e){function s(t,i,e,s,o){this._p=t,this._min=n["default"](i,0),this._max=n["default"](e,1),this._increment=n["default"](s,.1),this._position=n["default"](o,t.random(-1e6,1e6))}function o(t,i,e,o,n,a,h,r,c){this._xNoise=new s(t,i,e,a,r),this._yNoise=new s(t,o,n,h,c),this._p=t}i.exports={NoiseGenerator1D:s,NoiseGenerator2D:o};var n=t("../../utilities.js");s.prototype.setBounds=function(t,i){this._min=n["default"](t,this._min),this._max=n["default"](i,this._max)},s.prototype.setIncrement=function(t){this._increment=n["default"](t,this._increment)},s.prototype.generate=function(){this._update();var t=this._p.noise(this._position);return t=this._p.map(t,0,1,this._min,this._max)},s.prototype._update=function(){this._position+=this._increment},o.prototype.setBounds=function(t){t&&(this._xNoise.setBounds(t.xMin,t.xMax),this._yNoise.setBounds(t.yMin,t.yMax))},o.prototype.setBounds=function(t){t&&(this._xNoise.setBounds(t.xIncrement),this._yNoise.setBounds(t.yIncrement))},o.prototype.generate=function(){return{x:this._xNoise.generate(),y:this._yNoise.generate()}}},{"../../utilities.js":19}],8:[function(t,i,e){function s(t,i,e,s,n){this._p=t,this._min=o["default"](i,0),this._max=o["default"](e,0),this._increment=o["default"](s,.1),this._angle=o["default"](n,t.random(-1e6,1e6))}i.exports=s;var o=t("../../utilities.js");s.prototype.setBounds=function(t,i){this._min=o["default"](t,this._min),this._max=o["default"](i,this._max)},s.prototype.setIncrement=function(t){this._increment=o["default"](t,this._increment)},s.prototype.generate=function(){this._update();var t=this._p.sin(this._angle);return t=this._p.map(t,-1,1,this._min,this._max)},s.prototype._update=function(){this._angle+=this._increment}},{"../../utilities.js":19}],9:[function(t,i,e){function s(t,i){n.call(this,t,i,"../fonts/big_john-webfont.ttf")}i.exports=s;var o=t("p5-bbox-aligned-text"),n=t("./base-logo-sketch.js"),a=t("../utilities.js");s.prototype=Object.create(n.prototype),s.prototype._onResize=function(t){n.prototype._onResize.call(this,t),this._spacing=a.map(this._fontSize,20,40,2,5,{clamp:!0,round:!0}),this._bboxText.setText(this._text).setTextSize(this._fontSize).setAnchor(o.ALIGN.BOX_LEFT,o.BASELINE.ALPHABETIC).setPosition(this._textOffset.left,this._textOffset.top).setAnchor(o.ALIGN.BOX_CENTER,o.BASELINE.BOX_CENTER,!0),this._drawStationaryLogo(t),this._calculateCircles(t),this._isFirstFrame=!0},s.prototype._drawStationaryLogo=function(t){t.background(255),t.stroke(255),t.fill("#0A000A"),t.strokeWeight(2),this._bboxText.draw()},s.prototype._setup=function(t){n.prototype._setup.call(this,t),this._bboxText=new o(this._font,this._text,this._fontSize,0,0,t),this._onResize(t),this._drawStationaryLogo(t),this._calculateCircles(t)},s.prototype._calculateCircles=function(t){var i=this._bboxText.getBbox(),e=Math.floor(Math.max(i.x-5,0)),s=Math.ceil(Math.min(i.x+i.w+5,t.width)),o=Math.floor(Math.max(i.y-5,0)),n=Math.ceil(Math.min(i.y+i.h+5,t.height));t.loadPixels(),t.pixelDensity(1),this._circles=[];for(var a=o;a<n;a+=this._spacing)for(var h=e;h<s;h+=this._spacing){var r=4*(a*t.width+h),c=t.pixels[r],_=t.pixels[r+1],l=t.pixels[r+2],d=t.pixels[r+3],p=t.color(c,_,l,d);t.saturation(p)>0&&(this._circles.push({x:h+t.random(-2/3*this._spacing,2/3*this._spacing),y:a+t.random(-2/3*this._spacing,2/3*this._spacing),color:t.color("#06FFFF")}),this._circles.push({x:h+t.random(-2/3*this._spacing,2/3*this._spacing),y:a+t.random(-2/3*this._spacing,2/3*this._spacing),color:t.color("#FE00FE")}),this._circles.push({x:h+t.random(-2/3*this._spacing,2/3*this._spacing),y:a+t.random(-2/3*this._spacing,2/3*this._spacing),color:t.color("#FFFF04")}))}},s.prototype._draw=function(t){if(n.prototype._draw.call(this,t),this._isMouseOver&&this._isOverNavLogo){this._isFirstFrame&&(t.background(255),this._isFirstFrame=!1),t.blendMode(t.BLEND),t.background(255),t.noStroke(),t.blendMode(t.MULTIPLY);for(var i=this._bboxText.halfWidth,e=2*this._spacing,s=0;s<this._circles.length;s+=1){var o=this._circles[s],h=o.color,r=t.dist(o.x,o.y,t.mouseX,t.mouseY),c=a.map(r,0,i,1,e,{clamp:!0});t.fill(h),t.ellipse(o.x,o.y,c,c)}}}},{"../utilities.js":19,"./base-logo-sketch.js":5,"p5-bbox-aligned-text":2}],10:[function(t,i,e){function s(t,i){a.call(this,t,i,"../fonts/big_john-webfont.ttf")}i.exports=s;var o=t("./generators/noise-generators.js"),n=t("p5-bbox-aligned-text"),a=t("./base-logo-sketch.js");s.prototype=Object.create(a.prototype),s.prototype._onResize=function(t){a.prototype._onResize.call(this,t),this._bboxText.setText(this._text).setTextSize(this._fontSize).setRotation(0).setAnchor(n.ALIGN.BOX_LEFT,n.BASELINE.ALPHABETIC).setPosition(this._textOffset.left,this._textOffset.top).setAnchor(n.ALIGN.BOX_CENTER,n.BASELINE.BOX_CENTER,!0),this._textPos=this._bboxText.getPosition(),this._drawStationaryLogo(t),this._isFirstFrame=!0},s.prototype._drawStationaryLogo=function(t){t.background(255),t.stroke(255),t.fill("#0A000A"),t.strokeWeight(2),this._bboxText.draw()},s.prototype._setup=function(t){a.prototype._setup.call(this,t),this._bboxText=new n(this._font,this._text,this._fontSize,0,0,t),this._onResize(t),this._rotationNoise=new o.NoiseGenerator1D(t,-t.PI/4,t.PI/4,.02),this._xyNoise=new o.NoiseGenerator2D(t,(-100),100,(-50),50,.01,.01)},s.prototype._draw=function(t){if(a.prototype._draw.call(this,t),this._isMouseOver&&this._isOverNavLogo){this._isFirstFrame&&(t.background(255),this._isFirstFrame=!1);var i=this._rotationNoise.generate(),e=this._xyNoise.generate();this._bboxText.setRotation(i).setPosition(this._textPos.x+e.x,this._textPos.y+e.y).draw()}}},{"./base-logo-sketch.js":5,"./generators/noise-generators.js":7,"p5-bbox-aligned-text":2}],11:[function(t,i,e){function s(t){this._loader=t,this._$logo=$("nav.navbar .navbar-brand"),this._$nav=$("#main-nav"),this._$navLinks=this._$nav.find("a"),this._$activeNav=this._$navLinks.find(".active"),this._$navLinks.on("click",this._onNavClick.bind(this)),this._$logo.on("click",this._onLogoClick.bind(this))}i.exports=s,s.prototype.setActiveFromUrl=function(){this._deactivate();var t=location.pathname;"/index.html"===t||"/"===t?this._activateLink(this._$navLinks.filter("#about-link")):"/work.html"===t&&this._activateLink(this._$navLinks.filter("#work-link"))},s.prototype._deactivate=function(){this._$activeNav.length&&(this._$activeNav.removeClass("active"),this._$activeNav=$())},s.prototype._activateLink=function(t){t.addClass("active"),this._$activeNav=t},s.prototype._onLogoClick=function(t){t.preventDefault();var i=$(t.currentTarget),e=i.attr("href");this._loader.loadPage(e,{},!0)},s.prototype._onNavClick=function(t){t.preventDefault(),this._$nav.collapse("hide");var i=$(t.currentTarget);if(!i.is(this._$activeNav)){this._deactivate(),this._activateLink(i);var e=i.attr("href");this._loader.loadPage(e,{},!0)}}},{}],12:[function(t,i,e){function s(t){var i=t.state&&t.state.url||"/index.html",e=t.state&&t.state.query||{};if(i===p.getLoadedPath()&&"/work.html"===i){var s=e.category||"all";a.selectCategory(s)}else p.loadPage(i,{},!1)}function o(){n=new c,a=new _(p),l.init(),objectFitImages(),smartquotes(),u.setActiveFromUrl()}var n,a,h=t("./page-loader.js"),r=t("./main-nav.js"),c=t("./hover-slideshow.js"),_=t("./portfolio-filter.js"),l=t("./thumbnail-slideshow/slideshow.js"),d=t("./pick-random-sketch.js")(),p=new h(o),u=new r(p),f=$("nav.navbar"),g=f.find(".navbar-brand");new d(f,g);o(),window.addEventListener("popstate",s)},{"./hover-slideshow.js":4,"./main-nav.js":11,"./page-loader.js":13,"./pick-random-sketch.js":14,"./portfolio-filter.js":15,"./thumbnail-slideshow/slideshow.js":17}],13:[function(t,i,e){function s(t,i){this._$content=$("#content"),this._onReload=t,this._fadeDuration=void 0!==i?i:250,this._path=location.pathname}i.exports=s;var o=t("./utilities.js");s.prototype.getLoadedPath=function(){return this._path},s.prototype.loadPage=function(t,i,e){function s(s,n,a){if("error"===n)return void console.log("There was a problem loading the page.");var h=o.createQueryString(i);e&&history.pushState({url:t,query:i},null,t+h),ga("set","page",t+h),ga("send","pageview"),this._path=location.pathname,this._$content.velocity({opacity:1},this._fadeDuration,"swing"),this._onReload()}this._$content.velocity({opacity:0},this._fadeDuration,"swing",function(){this._$content.empty(),this._$content.load(t+" #content",s.bind(this))}.bind(this))}},{"./utilities.js":19}],14:[function(t,i,e){function s(t){var i=[];for(var e in a)t.indexOf(e)===-1&&i.push(e);return i}var o=t("js-cookie"),n=t("./utilities.js"),a={"halftone-flashlight":t("./interactive-logos/halftone-flashlight-word.js"),"noisy-word":t("./interactive-logos/noisy-word-sketch.js"),"connect-points":t("./interactive-logos/connect-points-sketch.js")},h=Object.keys(a).length,r="seen-sketch-names";i.exports=function(){var t=o.getJSON(r)||[],i=s(t);0===i.length&&(h>1?(t=[t.pop()],i=s(t)):(t=[],i=Object.keys(a)));var e=n.randArrayElement(i);return t.push(e),o.set(r,t,{expires:7}),a[e]}},{"./interactive-logos/connect-points-sketch.js":6,"./interactive-logos/halftone-flashlight-word.js":9,"./interactive-logos/noisy-word-sketch.js":10,"./utilities.js":19,"js-cookie":1}],15:[function(t,i,e){function s(t,i,e,s){this._loader=t,this._gridSpacing=0,this._aspectRatio=void 0!==e?e:16/9,this._transitionDuration=void 0!==s?s:800,this._breakpoints=void 0!==i?i.slice():n.slice(),this._$grid=$("#portfolio-grid"),this._$nav=$("#portfolio-nav"),this._$projects=[],this._$categories={},this._rows=0,this._cols=0,this._imageHeight=0,this._imageWidth=0,this._breakpoints.sort(function(t,i){return t.width<i.width?-1:t.width>i.width?1:0}),this._cacheProjects(),this._createGrid(),this._$grid.find(".project a").on("click",this._onProjectClick.bind(this));var a=o.getQueryParameters(),h=a.category||"all",r=h.toLowerCase();this._$activeNavItem=this._$nav.find("a[data-category="+r+"]"),this._$activeNavItem.addClass("active"),this._filterProjects(r),$("#portfolio-nav a").on("click",this._onNavClick.bind(this)),$(window).on("resize",this._createGrid.bind(this))}i.exports=s;var o=t("./utilities.js"),n=[{width:1200,cols:3,spacing:15},{width:992,cols:3,spacing:15},{width:700,cols:3,spacing:15},{width:600,cols:2,spacing:10},{width:480,cols:2,spacing:10},{width:320,cols:1,spacing:10}];s.prototype.selectCategory=function(t){t=t&&t.toLowerCase()||"all";var i=this._$nav.find("a[data-category="+t+"]");i.length&&!i.is(this._$activeNavItem)&&(this._$activeNavItem.removeClass("active"),this._$activeNavItem=i,this._$activeNavItem.addClass("active"),this._filterProjects(t))},s.prototype._filterProjects=function(t){var i=this._getProjectsInCategory(t);this._animateGridHeight(i.length),this._$projects.forEach(function(t){t.velocity("stop");var e=i.indexOf(t);if(e===-1)t.css("zIndex",-1),t.velocity({opacity:0},this._transitionDuration,"easeInOutCubic",function(){t.hide()});else{t.show(),t.css("zIndex",0);var s=this._indexToXY(e);t.velocity({opacity:1,top:s.y+"px",left:s.x+"px"},this._transitionDuration,"easeInOutCubic")}}.bind(this))},s.prototype._animateGridHeight=function(t){this._$grid.velocity("stop");var i=Math.ceil(t/this._cols);this._$grid.velocity({height:this._imageHeight*i+this._gridSpacing*(i-1)+"px"},this._transitionDuration)},s.prototype._getProjectsInCategory=function(t){return"all"===t?this._$projects:this._$categories[t]||[]},s.prototype._cacheProjects=function(){this._$projects=[],this._$categories={},this._$grid.find(".project").each(function(t,i){var e=$(i);this._$projects.push(e);for(var s=e.data("categories").split(","),o=0;o<s.length;o+=1){var n=$.trim(s[o]).toLowerCase();this._$categories[n]?this._$categories[n].push(e):this._$categories[n]=[e]}}.bind(this))},s.prototype._calculateGrid=function(){for(var t=this._$grid.innerWidth(),i=0;i<this._breakpoints.length;i+=1)if(t<=this._breakpoints[i].width){this._cols=this._breakpoints[i].cols,this._gridSpacing=this._breakpoints[i].spacing;break}this._rows=Math.ceil(this._$projects.length/this._cols),this._imageWidth=(t-(this._cols-1)*this._gridSpacing)/this._cols,this._imageHeight=this._imageWidth*(1/this._aspectRatio)},s.prototype._createGrid=function(){this._calculateGrid(),this._$grid.css("position","relative"),this._$grid.css({height:this._imageHeight*this._rows+this._gridSpacing*(this._rows-1)+"px"}),this._$projects.forEach(function(t,i){var e=this._indexToXY(i);t.css({position:"absolute",top:e.y+"px",left:e.x+"px",width:this._imageWidth+"px",height:this._imageHeight+"px"})}.bind(this))},s.prototype._onNavClick=function(t){t.preventDefault();var i=$(t.target);if(!i.is(this._$activeNavItem)){this._$activeNavItem.length&&this._$activeNavItem.removeClass("active"),i.addClass("active"),this._$activeNavItem=i;var e=i.data("category").toLowerCase();history.pushState({url:"/work.html",query:{category:e}},null,"/work.html?category="+e),this._filterProjects(e)}},s.prototype._onProjectClick=function(t){t.preventDefault();var i=$(t.currentTarget),e=i.data("name"),s="/projects/"+e+".html";this._loader.loadPage(s,{},!0)},s.prototype._indexToXY=function(t){var i=Math.floor(t/this._cols),e=t%this._cols;return{x:e*this._imageWidth+e*this._gridSpacing,y:i*this._imageHeight+i*this._gridSpacing}}},{"./utilities.js":19}],16:[function(t,i,e){function s(t,i){this._slideshow=i,this._$modal=t.find(".slideshow-modal"),this._$overlay=this._$modal.find(".modal-overlay"),this._$content=this._$modal.find(".modal-contents"),this._$caption=this._$modal.find(".modal-caption"),this._$imageContainer=this._$modal.find(".modal-image"),this._$imageLeft=this._$modal.find(".image-advance-left"),this._$imageRight=this._$modal.find(".image-advance-right"),this._index=0,this._isOpen=!1,this._$imageLeft.on("click",this.advanceLeft.bind(this)),this._$imageRight.on("click",this.advanceRight.bind(this)),$(document).on("keydown",this._onKeyDown.bind(this)),this._$modal.css("display","block"),this._$modal.hide(),$(window).on("resize",this._onResize.bind(this)),this._$overlay.on("click",this.close.bind(this)),this._$modal.find(".modal-close").on("click",this.close.bind(this)),this._updateControls(),setTimeout(function(){this._onResize()}.bind(this),0)}i.exports=s;var o={LEFT_ARROW:37,RIGHT_ARROW:39,ESCAPE:27};s.prototype.advanceLeft=function(){this.showImageAt(this._index-1)},s.prototype.advanceRight=function(){this.showImageAt(this._index+1)},s.prototype.showImageAt=function(t){t=Math.max(t,0),t=Math.min(t,this._slideshow.getNumImages()-1),this._index=t;var i=this._slideshow.getGalleryImage(this._index),e=this._slideshow.getCaption(this._index);this._$imageContainer.empty(),$("<img>",{src:i.attr("src")}).appendTo(this._$imageContainer),this._$caption.empty(),e&&($("<span>").addClass("figure-number").text("Fig. "+(this._index+1)+": ").appendTo(this._$caption),$("<span>").addClass("caption-text").text(e).appendTo(this._$caption)),this._onResize(),this._updateControls()},s.prototype.open=function(t){t=t||0,this._$modal.show(),this.showImageAt(t),this._isOpen=!0},s.prototype.close=function(){this._$modal.hide(),this._isOpen=!1},s.prototype._onKeyDown=function(t){this._isOpen&&(t.which===o.LEFT_ARROW?this.advanceLeft():t.which===o.RIGHT_ARROW?this.advanceRight():t.which===o.ESCAPE&&this.close())},s.prototype._updateControls=function(){this._$imageRight.removeClass("disabled"),this._$imageLeft.removeClass("disabled"),this._index>=this._slideshow.getNumImages()-1?this._$imageRight.addClass("disabled"):this._index<=0&&this._$imageLeft.addClass("disabled")},s.prototype._onResize=function(){var t=this._$imageContainer.find("img");this._$content.width("");var i=this._$imageLeft.outerWidth(!0)+this._$imageRight.outerWidth(!0),e=2*this._$caption.outerHeight(!0),s=(t.innerWidth(),this._$modal.width()-i),o=this._$modal.height()-e,n=function(){var i=t.prop("naturalWidth"),e=t.prop("naturalHeight"),n=i/s,a=e/o,h=Math.max(n,a);h>1?(t.css("width",i/h+"px"),t.css("height",e/h+"px")):(t.css("width",i+"px"),t.css("height",e+"px")),this._$imageRight.css("top",t.outerHeight()/2+"px"),this._$imageLeft.css("top",t.outerHeight()/2+"px"),this._$content.width(t.outerWidth(!0))}.bind(this);t.prop("complete")?n():t.one("load",n)}},{}],17:[function(t,i,e){function s(t,i){this._transitionDuration=i,this._$container=t,this._index=0,this._thumbnailSlider=new n(t,this),this._modal=new o(t,this),this._$captionContainer=t.find(".caption"),this._$selectedImageContainer=t.find(".selected-image"),this._$selectedImageContainer.on("click",function(){this._modal.open(this._index)}.bind(this)),this._$galleryImages=this._loadGalleryImages(),this._numImages=this._$galleryImages.length,this.showImage(0)}var o=t("./slideshow-modal.js"),n=t("./thumbnail-slider.js");i.exports={init:function(t){t=void 0!==t?t:400,this._slideshows=[],$(".slideshow").each(function(i,e){var o=new s($(e),t);this._slideshows.push(o)}.bind(this))}},s.prototype.getActiveIndex=function(){return this._index},s.prototype.getNumImages=function(){return this._numImages},s.prototype.getGalleryImage=function(t){return this._$galleryImages[t]},s.prototype.getCaption=function(t){return this._$galleryImages[t].data("caption")},s.prototype.showImage=function(t){this._$galleryImages.forEach(function(t){t.css({zIndex:0,opacity:0}),t.velocity("stop")},this);var i=this._$galleryImages[this._index],e=this._$galleryImages[t];this._index=t,i.css("zIndex",1),e.css("zIndex",2),i.css("opacity",1),e.velocity({opacity:1},this._transitionDuration,"easeInOutQuad");var s=e.data("caption");s&&(this._$captionContainer.empty(),$("<span>").addClass("figure-number").text("Fig. "+(this._index+1)+": ").appendTo(this._$captionContainer),$("<span>").addClass("caption-text").text(s).appendTo(this._$captionContainer))},s.prototype._loadGalleryImages=function(){for(var t=[],i=0;i<this._thumbnailSlider.getNumThumbnails();i+=1){var e=this._thumbnailSlider.get$Thumbnail(i),s=e.data("large-path"),o=s.split("/").pop().split(".")[0],n=$("<img>",{id:o}).css({position:"absolute",top:"0px",left:"0px",opacity:0,zIndex:0}).data("image-url",s).data("caption",e.data("caption")).appendTo(this._$selectedImageContainer);n.get(0).src=s,t.push(n)}return t}},{"./slideshow-modal.js":16,"./thumbnail-slider.js":18}],18:[function(t,i,e){function s(t,i){this._$container=t,this._slideshow=i,this._index=0,this._scrollIndex=0,this._$thumbnailContainer=t.find(".thumbnails"),this._$thumbnailImages=this._$thumbnailContainer.find("img"),this._$visibleThumbnailWrap=t.find(".visible-thumbnails"),this._$advanceLeft=t.find(".thumbnail-advance-left"),this._$advanceRight=t.find(".thumbnail-advance-right"),this._$thumbnails=[],this._$thumbnailImages.each(function(t,i){var e=$(i);e.data("index",t),this._$thumbnails.push(e)}.bind(this)),this._numImages=this._$thumbnails.length,this._$advanceLeft.on("click",this.advanceLeft.bind(this)),this._$advanceRight.on("click",this.advanceRight.bind(this)),this._$thumbnailImages.on("click",this._onClick.bind(this)),this._activateThumbnail(0),$(window).on("resize",this._onResize.bind(this)),setTimeout(function(){this._onResize()}.bind(this),0)}i.exports=s,s.prototype.getActiveIndex=function(){return this._index},s.prototype.getNumThumbnails=function(){return this._numImages},s.prototype.get$Thumbnail=function(t){return this._$thumbnails[t]},s.prototype.advanceLeft=function(){var t=this._scrollIndex-this._numVisible;t=Math.max(t,0),this._scrollToThumbnail(t)},s.prototype.advanceRight=function(){var t=this._scrollIndex+this._numVisible;t=Math.min(t,this._numImages-1),this._scrollToThumbnail(t)},s.prototype._resetSizing=function(){this._$thumbnailContainer.css({top:"",left:"",width:"",height:""}),this._$visibleThumbnailWrap.width(""),
this._$visibleThumbnailWrap.height(""),this._$thumbnails.forEach(function(t){t.height(""),t.width(t.height())})},s.prototype._onResize=function(){this._resetSizing();var t=this._$thumbnails[0],i=t.outerHeight(!1),e=2*(t.outerWidth(!0)-i);this._$advanceRight.css("display","block"),this._$advanceLeft.css("display","block");var s=this._$advanceRight.outerWidth(!0)+this._$advanceLeft.outerWidth(!0),o=this._$visibleThumbnailWrap.outerWidth(!1),n=Math.floor((o-e)/(i+e));if(n<this._numImages){n=Math.round((o-s+e)/(i+e));var a=(o-s+e)/n-e;this._$thumbnails.forEach(function(t){t.css("width",a+"px"),t.css("height",a+"px")});var h=a*this._numImages+e*(this._numImages-1);this._$thumbnailContainer.css({width:h+"px",height:t.outerHeight(!0)+"px"}),this._$visibleThumbnailWrap.css({width:o-s+"px",height:t.outerHeight(!0)+"px"})}else n=this._numImages,this._$thumbnailContainer.css("width","100%"),this._$advanceRight.css("display","none"),this._$advanceLeft.css("display","none");this._numVisible=n;var r=Math.floor((this._numVisible-1)/2);this._scrollBounds={min:r,max:this._numImages-1-r},this._numVisible%2===0&&(this._scrollBounds.max-=1),this._updateThumbnailControls()},s.prototype._activateThumbnail=function(t){this._$thumbnails[this._index].removeClass("active"),this._$thumbnails[t].addClass("active")},s.prototype._scrollToThumbnail=function(t){if(this._numVisible!==this._numImages){t=Math.max(t,this._scrollBounds.min),t=Math.min(t,this._scrollBounds.max),this._scrollIndex=t,console.log(this._scrollIndex);var i=this._$thumbnails[0],e=parseFloat(i.css("width")),s=2*parseFloat(i.css("margin-right")),o=e*this._scrollBounds.min+s*(this._scrollBounds.min-1),n=e*t+s*(t-1),a=o-n;this._$thumbnailContainer.velocity("stop"),this._$thumbnailContainer.velocity({left:a+"px"},600,"easeInOutQuad"),this._updateThumbnailControls()}},s.prototype._onClick=function(t){var i=$(t.target),e=i.data("index");this._index!==e&&(this._activateThumbnail(e),this._scrollToThumbnail(e),this._index=e,this._slideshow.showImage(e))},s.prototype._updateThumbnailControls=function(){this._$advanceLeft.removeClass("disabled"),this._$advanceRight.removeClass("disabled");var t=Math.floor((this._numVisible-1)/2);this._numImages-1-t;this._scrollIndex>=this._scrollBounds.max?this._$advanceRight.addClass("disabled"):this._scrollIndex<=this._scrollBounds.min&&this._$advanceLeft.addClass("disabled")}},{}],19:[function(t,i,e){e["default"]=function(t,i){return void 0!==t?t:i},e.timeIt=function(t){var i=performance.now();t();var e=performance.now();return e-i},e.isInRect=function(t,i,e){return t>=e.x&&t<=e.x+e.w&&i>=e.y&&i<=e.y+e.h},e.randInt=function(t,i){return Math.floor(Math.random()*(i-t+1))+t},e.randArrayElement=function(t){var i=e.randInt(0,t.length-1);return t[i]},e.map=function(t,i,e,s,o,n){var a=(t-i)/(e-i)*(o-s)+s;return n?(n.round&&n.round===!0&&(a=Math.round(a)),n.floor&&n.floor===!0&&(a=Math.floor(a)),n.ceil&&n.ceil===!0&&(a=Math.ceil(a)),n.clamp&&n.clamp===!0&&(a=Math.min(a,o),a=Math.max(a,s)),a):a},e.getQueryParameters=function(){if(qs=window.location.search,qs.length<=1)return{};qs=qs.substring(1);for(var t=qs.split("&"),i={},e=0;e<t.length;e+=1){var s=t[e].split("=");if(2===s.length){var o=decodeURIComponent(s[0]),n=decodeURIComponent(s[1]);i[o]=n}}return i},e.createQueryString=function(t){if("object"!=typeof t)return"";var i=Object.keys(t);if(0===i.length)return"";for(var e="?",s=0;s<i.length;s+=1){var o=i[s],n=t[o];e+=encodeURIComponent(o)+"="+encodeURIComponent(n),s!==i.length-1&&(e+="&")}return e},e.wrapIndex=function(t,i){var e=t%i;return e<0&&(e=i+e),e}},{}]},{},[12]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvanMtY29va2llL3NyYy9qcy5jb29raWUuanMiLCJtYWluLmpzIiwibm9kZV9tb2R1bGVzL3A1LWJib3gtYWxpZ25lZC10ZXh0L2xpYi9iYm94LWFsaWduZWQtdGV4dC5qcyIsIm5vZGVfbW9kdWxlcy9wNS1iYm94LWFsaWduZWQtdGV4dC9saWIvdXRpbHMuanMiLCJzcmMvanMvaG92ZXItc2xpZGVzaG93LmpzIiwic3JjL2pzL2ludGVyYWN0aXZlLWxvZ29zL2Jhc2UtbG9nby1za2V0Y2guanMiLCJzcmMvanMvaW50ZXJhY3RpdmUtbG9nb3MvY29ubmVjdC1wb2ludHMtc2tldGNoLmpzIiwic3JjL2pzL2ludGVyYWN0aXZlLWxvZ29zL2dlbmVyYXRvcnMvbm9pc2UtZ2VuZXJhdG9ycy5qcyIsInNyYy9qcy9pbnRlcmFjdGl2ZS1sb2dvcy9nZW5lcmF0b3JzL3Npbi1nZW5lcmF0b3IuanMiLCJzcmMvanMvaW50ZXJhY3RpdmUtbG9nb3MvaGFsZnRvbmUtZmxhc2hsaWdodC13b3JkLmpzIiwic3JjL2pzL2ludGVyYWN0aXZlLWxvZ29zL25vaXN5LXdvcmQtc2tldGNoLmpzIiwic3JjL2pzL21haW4tbmF2LmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvcGFnZS1sb2FkZXIuanMiLCJzcmMvanMvcGljay1yYW5kb20tc2tldGNoLmpzIiwic3JjL2pzL3BvcnRmb2xpby1maWx0ZXIuanMiLCJzcmMvanMvdGh1bWJuYWlsLXNsaWRlc2hvdy9zbGlkZXNob3ctbW9kYWwuanMiLCJzcmMvanMvdGh1bWJuYWlsLXNsaWRlc2hvdy9zbGlkZXNob3cuanMiLCJzcmMvanMvdGh1bWJuYWlsLXNsaWRlc2hvdy90aHVtYm5haWwtc2xpZGVyLmpzIiwic3JjL2pzL3V0aWxpdGllcy5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJmYWN0b3J5IiwicmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyIiwiZGVmaW5lIiwiYW1kIiwiT2xkQ29va2llcyIsIndpbmRvdyIsIkNvb2tpZXMiLCJhcGkiLCJub0NvbmZsaWN0IiwiZXh0ZW5kIiwicmVzdWx0IiwiYXJndW1lbnRzIiwiYXR0cmlidXRlcyIsImtleSIsImluaXQiLCJjb252ZXJ0ZXIiLCJ2YWx1ZSIsImRvY3VtZW50IiwicGF0aCIsImRlZmF1bHRzIiwiZXhwaXJlcyIsIkRhdGUiLCJzZXRNaWxsaXNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJKU09OIiwic3RyaW5naWZ5IiwidGVzdCIsIndyaXRlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiU3RyaW5nIiwicmVwbGFjZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVzY2FwZSIsImNvb2tpZSIsInRvVVRDU3RyaW5nIiwiZG9tYWluIiwic2VjdXJlIiwiam9pbiIsImNvb2tpZXMiLCJzcGxpdCIsInJkZWNvZGUiLCJwYXJ0cyIsInNsaWNlIiwiY2hhckF0IiwibmFtZSIsInJlYWQiLCJ0aGlzIiwianNvbiIsInBhcnNlIiwic2V0IiwiZ2V0IiwiZ2V0SlNPTiIsImFwcGx5IiwicmVtb3ZlIiwid2l0aENvbnZlcnRlciIsIjIiLCJCYm94QWxpZ25lZFRleHQiLCJmb250IiwidGV4dCIsImZvbnRTaXplIiwieCIsInkiLCJwSW5zdGFuY2UiLCJfZm9udCIsIl90ZXh0IiwiX3giLCJ1dGlscyIsIl95IiwiX2ZvbnRTaXplIiwiX3AiLCJfcm90YXRpb24iLCJfaEFsaWduIiwiQUxJR04iLCJCT1hfQ0VOVEVSIiwiX3ZBbGlnbiIsIkJBU0VMSU5FIiwiX2NhbGN1bGF0ZU1ldHJpY3MiLCJCT1hfTEVGVCIsIkJPWF9SSUdIVCIsIkJPWF9UT1AiLCJCT1hfQk9UVE9NIiwiRk9OVF9DRU5URVIiLCJBTFBIQUJFVElDIiwicHJvdG90eXBlIiwic2V0VGV4dCIsInN0cmluZyIsInNldFBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJzZXRUZXh0U2l6ZSIsInNldFJvdGF0aW9uIiwiYW5nbGUiLCJnZXRSb3RhdGlvbiIsInNldFBJbnN0YW5jZSIsInAiLCJnZXRQSW5zdGFuY2UiLCJzZXRBbmNob3IiLCJoQWxpZ24iLCJ2QWxpZ24iLCJ1cGRhdGVQb3NpdGlvbiIsIm9sZFBvcyIsIl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzIiwiQ0VOVEVSIiwibmV3UG9zIiwiZ2V0QmJveCIsInBvcyIsIl9ib3VuZHNPZmZzZXQiLCJ3Iiwid2lkdGgiLCJoIiwiaGVpZ2h0IiwiZ2V0VGV4dFBvaW50cyIsIm9wdGlvbnMiLCJwb2ludHMiLCJ0ZXh0VG9Qb2ludHMiLCJkcmF3IiwiZHJhd0JvdW5kcyIsInB1c2giLCJfY2FsY3VsYXRlUm90YXRlZENvb3JkcyIsInJvdGF0ZSIsInRleHRBbGlnbiIsIkxFRlQiLCJ0ZXh0Rm9udCIsInRleHRTaXplIiwic3Ryb2tlIiwiYm91bmRzWCIsImJvdW5kc1kiLCJub0ZpbGwiLCJyZWN0IiwicG9wIiwicngiLCJNYXRoIiwiY29zIiwiUEkiLCJyeSIsInNpbiIsIm5ld1giLCJuZXdZIiwiaGFsZldpZHRoIiwiY29uc29sZSIsImxvZyIsIl9kaXN0QmFzZVRvTWlkIiwiX2Rpc3RCYXNlVG9Cb3R0b20iLCJfZGVzY2VudCIsIl9hc2NlbnQiLCJzaG91bGRVcGRhdGVIZWlnaHQiLCJib3VuZHMiLCJ0ZXh0Qm91bmRzIiwiX3RleHRBc2NlbnQiLCJfdGV4dERlc2NlbnQiLCJoYWxmSGVpZ2h0IiwiYWJzIiwiLi91dGlscy5qcyIsIjMiLCJkZWZhdWx0VmFsdWUiLCJ1bmRlZmluZWQiLCI0IiwiSG92ZXJTbGlkZXNob3dzIiwic2xpZGVzaG93RGVsYXkiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJfc2xpZGVzaG93RGVsYXkiLCJfdHJhbnNpdGlvbkR1cmF0aW9uIiwiX3NsaWRlc2hvd3MiLCJyZWxvYWQiLCJTbGlkZXNob3ciLCIkY29udGFpbmVyIiwiXyRjb250YWluZXIiLCJfdGltZW91dElkIiwiX2ltYWdlSW5kZXgiLCJfJGltYWdlcyIsImZpbmQiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwiJGltYWdlIiwiJCIsImNzcyIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInpJbmRleCIsImJpbmQiLCJfbnVtSW1hZ2VzIiwib24iLCJfb25FbnRlciIsIl9vbkxlYXZlIiwidXRpbGl0aWVzIiwib2xkU2xpZGVzaG93cyIsIl8iLCIkZWxlbWVudCIsIl9maW5kSW5TbGlkZXNob3dzIiwic2xpZGVzaG93Iiwic3BsaWNlIiwic2xpZGVzaG93cyIsImdldEVsZW1lbnQiLCJnZXQkRWxlbWVudCIsInNldFRpbWVvdXQiLCJfYWR2YW5jZVNsaWRlc2hvdyIsImNsZWFySW50ZXJ2YWwiLCJ3cmFwSW5kZXgiLCJvcGFjaXR5IiwidmVsb2NpdHkiLCIuL3V0aWxpdGllcy5qcyIsIjUiLCJCYXNlTG9nb1NrZXRjaCIsIiRuYXYiLCIkbmF2TG9nbyIsImZvbnRQYXRoIiwiXyRuYXYiLCJfJG5hdkxvZ28iLCJfZm9udFBhdGgiLCJfaXNGaXJzdEZyYW1lIiwiX2lzTW91c2VPdmVyIiwiX2lzT3Zlck5hdkxvZ28iLCJfdXBkYXRlVGV4dE9mZnNldCIsIl91cGRhdGVTaXplIiwiX3VwZGF0ZUZvbnRTaXplIiwicHJlcGVuZFRvIiwiaGlkZSIsIl9jcmVhdGVQNUluc3RhbmNlIiwicDUiLCJwcmVsb2FkIiwiX3ByZWxvYWQiLCJzZXR1cCIsIl9zZXR1cCIsIl9kcmF3IiwiYmFzZWxpbmVEaXYiLCJkaXNwbGF5IiwidmVydGljYWxBbGlnbiIsIm5hdk9mZnNldCIsIm9mZnNldCIsImxvZ29CYXNlbGluZU9mZnNldCIsIl90ZXh0T2Zmc2V0IiwiX2NhbGN1bGF0ZU5hdkxvZ29Cb3VuZHMiLCJsb2dvT2Zmc2V0IiwiX2xvZ29CYm94Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiX3dpZHRoIiwiaW5uZXJXaWR0aCIsIl9oZWlnaHQiLCJpbm5lckhlaWdodCIsIl9vblJlc2l6ZSIsInJlc2l6ZUNhbnZhcyIsIl9zZXRNb3VzZU92ZXIiLCJpc01vdXNlT3ZlciIsIl9vbkNsaWNrIiwidHJpZ2dlciIsImxvYWRGb250IiwicmVuZGVyZXIiLCJjcmVhdGVDYW52YXMiLCJfJGNhbnZhcyIsImNhbnZhcyIsInNob3ciLCJpc092ZXJMb2dvIiwiaXNJblJlY3QiLCJtb3VzZVgiLCJtb3VzZVkiLCIuLi91dGlsaXRpZXMuanMiLCI2IiwiU2tldGNoIiwiQmJveFRleHQiLCJTaW5HZW5lcmF0b3IiLCJPYmplY3QiLCJjcmVhdGUiLCJfc3BhY2luZyIsIm1hcCIsImNsYW1wIiwicm91bmQiLCJfYmJveFRleHQiLCJfZHJhd1N0YXRpb25hcnlMb2dvIiwiX3BvaW50cyIsImJhY2tncm91bmQiLCJmaWxsIiwic3Ryb2tlV2VpZ2h0IiwiX3RocmVzaG9sZEdlbmVyYXRvciIsInNldEJvdW5kcyIsImRpc3RhbmNlVGhyZXNob2xkIiwiZ2VuZXJhdGUiLCJwb2ludDEiLCJqIiwicG9pbnQyIiwiZGlzdCIsIm5vU3Ryb2tlIiwiZWxsaXBzZSIsImxpbmUiLCIuL2Jhc2UtbG9nby1za2V0Y2guanMiLCIuL2dlbmVyYXRvcnMvc2luLWdlbmVyYXRvci5qcyIsInA1LWJib3gtYWxpZ25lZC10ZXh0IiwiNyIsIk5vaXNlR2VuZXJhdG9yMUQiLCJtaW4iLCJtYXgiLCJpbmNyZW1lbnQiLCJfbWluIiwiX21heCIsIl9pbmNyZW1lbnQiLCJfcG9zaXRpb24iLCJyYW5kb20iLCJOb2lzZUdlbmVyYXRvcjJEIiwieE1pbiIsInhNYXgiLCJ5TWluIiwieU1heCIsInhJbmNyZW1lbnQiLCJ5SW5jcmVtZW50IiwieE9mZnNldCIsInlPZmZzZXQiLCJfeE5vaXNlIiwiX3lOb2lzZSIsInNldEluY3JlbWVudCIsIl91cGRhdGUiLCJub2lzZSIsIi4uLy4uL3V0aWxpdGllcy5qcyIsIjgiLCJhbmdsZUluY3JlbWVudCIsInN0YXJ0aW5nQW5nbGUiLCJfYW5nbGUiLCI5IiwiX2NhbGN1bGF0ZUNpcmNsZXMiLCJiYm94Iiwic3RhcnRYIiwiZmxvb3IiLCJlbmRYIiwiY2VpbCIsInN0YXJ0WSIsImVuZFkiLCJsb2FkUGl4ZWxzIiwicGl4ZWxEZW5zaXR5IiwiX2NpcmNsZXMiLCJwaXhlbHMiLCJnIiwiYiIsImMiLCJjb2xvciIsInNhdHVyYXRpb24iLCJibGVuZE1vZGUiLCJCTEVORCIsIk1VTFRJUExZIiwibWF4RGlzdCIsIm1heFJhZGl1cyIsImNpcmNsZSIsInJhZGl1cyIsIjEwIiwiTm9pc2UiLCJfdGV4dFBvcyIsIl9yb3RhdGlvbk5vaXNlIiwiX3h5Tm9pc2UiLCJyb3RhdGlvbiIsInh5T2Zmc2V0IiwiLi9nZW5lcmF0b3JzL25vaXNlLWdlbmVyYXRvcnMuanMiLCIxMSIsIk1haW5OYXYiLCJsb2FkZXIiLCJfbG9hZGVyIiwiXyRsb2dvIiwiXyRuYXZMaW5rcyIsIl8kYWN0aXZlTmF2IiwiX29uTmF2Q2xpY2siLCJfb25Mb2dvQ2xpY2siLCJzZXRBY3RpdmVGcm9tVXJsIiwiX2RlYWN0aXZhdGUiLCJ1cmwiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiX2FjdGl2YXRlTGluayIsImZpbHRlciIsInJlbW92ZUNsYXNzIiwiJGxpbmsiLCJhZGRDbGFzcyIsInByZXZlbnREZWZhdWx0IiwiJHRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJhdHRyIiwibG9hZFBhZ2UiLCJjb2xsYXBzZSIsImlzIiwiMTIiLCJvblBvcFN0YXRlIiwic3RhdGUiLCJxdWVyeU9iamVjdCIsInF1ZXJ5IiwiZ2V0TG9hZGVkUGF0aCIsImNhdGVnb3J5IiwicG9ydGZvbGlvRmlsdGVyIiwic2VsZWN0Q2F0ZWdvcnkiLCJvblBhZ2VMb2FkIiwiaG92ZXJTbGlkZXNob3dzIiwiUG9ydGZvbGlvRmlsdGVyIiwib2JqZWN0Rml0SW1hZ2VzIiwic21hcnRxdW90ZXMiLCJtYWluTmF2IiwiTG9hZGVyIiwibmF2IiwibmF2TG9nbyIsImFkZEV2ZW50TGlzdGVuZXIiLCIuL2hvdmVyLXNsaWRlc2hvdy5qcyIsIi4vbWFpbi1uYXYuanMiLCIuL3BhZ2UtbG9hZGVyLmpzIiwiLi9waWNrLXJhbmRvbS1za2V0Y2guanMiLCIuL3BvcnRmb2xpby1maWx0ZXIuanMiLCIuL3RodW1ibmFpbC1zbGlkZXNob3cvc2xpZGVzaG93LmpzIiwiMTMiLCJvblJlbG9hZCIsImZhZGVEdXJhdGlvbiIsIl8kY29udGVudCIsIl9vblJlbG9hZCIsIl9mYWRlRHVyYXRpb24iLCJfcGF0aCIsInNob3VsZFB1c2hIaXN0b3J5Iiwib25Db250ZW50RmV0Y2hlZCIsInJlc3BvbnNlVGV4dCIsInRleHRTdGF0dXMiLCJqcVhociIsInF1ZXJ5U3RyaW5nIiwiY3JlYXRlUXVlcnlTdHJpbmciLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZ2EiLCJlbXB0eSIsImxvYWQiLCIxNCIsImZpbmRVbnNlZW5Ta2V0Y2hlcyIsInNlZW5Ta2V0Y2hOYW1lcyIsInVuc2VlblNrZXRjaE5hbWVzIiwic2tldGNoTmFtZSIsInNrZXRjaENvbnN0cnVjdG9ycyIsImluZGV4T2YiLCJoYWxmdG9uZS1mbGFzaGxpZ2h0Iiwibm9pc3ktd29yZCIsImNvbm5lY3QtcG9pbnRzIiwibnVtU2tldGNoZXMiLCJrZXlzIiwiY29va2llS2V5IiwicmFuZFNrZXRjaE5hbWUiLCJyYW5kQXJyYXlFbGVtZW50IiwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9jb25uZWN0LXBvaW50cy1za2V0Y2guanMiLCIuL2ludGVyYWN0aXZlLWxvZ29zL2hhbGZ0b25lLWZsYXNobGlnaHQtd29yZC5qcyIsIi4vaW50ZXJhY3RpdmUtbG9nb3Mvbm9pc3ktd29yZC1za2V0Y2guanMiLCJqcy1jb29raWUiLCIxNSIsImJyZWFrcG9pbnRzIiwiYXNwZWN0UmF0aW8iLCJfZ3JpZFNwYWNpbmciLCJfYXNwZWN0UmF0aW8iLCJfYnJlYWtwb2ludHMiLCJkZWZhdWx0QnJlYWtwb2ludHMiLCJfJGdyaWQiLCJfJHByb2plY3RzIiwiXyRjYXRlZ29yaWVzIiwiX3Jvd3MiLCJfY29scyIsIl9pbWFnZUhlaWdodCIsIl9pbWFnZVdpZHRoIiwic29ydCIsIl9jYWNoZVByb2plY3RzIiwiX2NyZWF0ZUdyaWQiLCJfb25Qcm9qZWN0Q2xpY2siLCJxcyIsImdldFF1ZXJ5UGFyYW1ldGVycyIsImluaXRpYWxDYXRlZ29yeSIsInRvTG93ZXJDYXNlIiwiXyRhY3RpdmVOYXZJdGVtIiwiX2ZpbHRlclByb2plY3RzIiwiY29scyIsInNwYWNpbmciLCIkc2VsZWN0ZWROYXYiLCIkc2VsZWN0ZWRFbGVtZW50cyIsIl9nZXRQcm9qZWN0c0luQ2F0ZWdvcnkiLCJfYW5pbWF0ZUdyaWRIZWlnaHQiLCJmb3JFYWNoIiwic2VsZWN0ZWRJbmRleCIsIl9pbmRleFRvWFkiLCJudW1FbGVtZW50cyIsImN1clJvd3MiLCJjYXRlZ29yeU5hbWVzIiwiZGF0YSIsInRyaW0iLCJfY2FsY3VsYXRlR3JpZCIsImdyaWRXaWR0aCIsInRhcmdldCIsInByb2plY3ROYW1lIiwiMTYiLCJTbGlkZXNob3dNb2RhbCIsIl9zbGlkZXNob3ciLCJfJG1vZGFsIiwiXyRvdmVybGF5IiwiXyRjYXB0aW9uIiwiXyRpbWFnZUNvbnRhaW5lciIsIl8kaW1hZ2VMZWZ0IiwiXyRpbWFnZVJpZ2h0IiwiX2luZGV4IiwiX2lzT3BlbiIsImFkdmFuY2VMZWZ0IiwiYWR2YW5jZVJpZ2h0IiwiX29uS2V5RG93biIsImNsb3NlIiwiX3VwZGF0ZUNvbnRyb2xzIiwiS0VZX0NPREVTIiwiTEVGVF9BUlJPVyIsIlJJR0hUX0FSUk9XIiwiRVNDQVBFIiwic2hvd0ltYWdlQXQiLCJnZXROdW1JbWFnZXMiLCIkaW1nIiwiZ2V0R2FsbGVyeUltYWdlIiwiY2FwdGlvbiIsImdldENhcHRpb24iLCJzcmMiLCJhcHBlbmRUbyIsIm9wZW4iLCJ3aGljaCIsImNvbnRyb2xzV2lkdGgiLCJjYXB0aW9uSGVpZ2h0IiwibXciLCJtaCIsInNldFNpemUiLCJpdyIsInByb3AiLCJpaCIsInN3Iiwic2giLCJvbmUiLCIxNyIsIl90aHVtYm5haWxTbGlkZXIiLCJUaHVtYm5haWxTbGlkZXIiLCJfbW9kYWwiLCJfJGNhcHRpb25Db250YWluZXIiLCJfJHNlbGVjdGVkSW1hZ2VDb250YWluZXIiLCJfJGdhbGxlcnlJbWFnZXMiLCJfbG9hZEdhbGxlcnlJbWFnZXMiLCJzaG93SW1hZ2UiLCJnZXRBY3RpdmVJbmRleCIsIiRnYWxsZXJ5SW1hZ2UiLCIkbGFzdEltYWdlIiwiJGN1cnJlbnRJbWFnZSIsIiRnYWxsZXJ5SW1hZ2VzIiwiZ2V0TnVtVGh1bWJuYWlscyIsIiR0aHVtYiIsImdldCRUaHVtYm5haWwiLCJsYXJnZVBhdGgiLCJpZCIsIi4vc2xpZGVzaG93LW1vZGFsLmpzIiwiLi90aHVtYm5haWwtc2xpZGVyLmpzIiwiMTgiLCJfc2Nyb2xsSW5kZXgiLCJfJHRodW1ibmFpbENvbnRhaW5lciIsIl8kdGh1bWJuYWlsSW1hZ2VzIiwiXyR2aXNpYmxlVGh1bWJuYWlsV3JhcCIsIl8kYWR2YW5jZUxlZnQiLCJfJGFkdmFuY2VSaWdodCIsIl8kdGh1bWJuYWlscyIsIiR0aHVtYm5haWwiLCJfYWN0aXZhdGVUaHVtYm5haWwiLCJuZXdJbmRleCIsIl9udW1WaXNpYmxlIiwiX3Njcm9sbFRvVGh1bWJuYWlsIiwiX3Jlc2V0U2l6aW5nIiwiJGZpcnN0VGh1bWIiLCJ0aHVtYlNpemUiLCJ0aHVtYk1hcmdpbiIsInRodW1iQ29udHJvbFdpZHRoIiwidmlzaWJsZVdpZHRoIiwibnVtVGh1bWJzVmlzaWJsZSIsIm5ld1NpemUiLCJ0b3RhbFNpemUiLCJtaWRkbGVJbmRleCIsIl9zY3JvbGxCb3VuZHMiLCJfdXBkYXRlVGh1bWJuYWlsQ29udHJvbHMiLCJzaXplIiwicGFyc2VGbG9hdCIsIm1hcmdpbiIsImNlbnRlclgiLCJ0aHVtYlgiLCJtaWRTY3JvbGxJbmRleCIsIjE5IiwidmFsIiwiZGVmYXVsdFZhbCIsInRpbWVJdCIsImZ1bmMiLCJzdGFydCIsInBlcmZvcm1hbmNlIiwibm93IiwiZW5kIiwicmFuZEludCIsImFycmF5IiwibnVtIiwibWluMSIsIm1heDEiLCJtaW4yIiwibWF4MiIsIm1hcHBlZCIsInNl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LEVBQUEsSUFDQW5CLEVBQUFoaUIsbUJBQUFtakIsRUFBQSxHQUNBdk4sR0FBQTlXLEdBQUFrakIsR0FHQSxNQUFBcE0sSUFHQWhZLEVBQUFtYSxrQkFBQSxTQUFBbkMsR0FDQSxHQUFBLGdCQUFBQSxHQUFBLE1BQUEsRUFDQSxJQUFBb0QsR0FBQXpLLE9BQUF5SyxLQUFBcEQsRUFDQSxJQUFBLElBQUFvRCxFQUFBbGIsT0FBQSxNQUFBLEVBRUEsS0FBQSxHQURBZ2EsR0FBQSxJQUNBdmEsRUFBQSxFQUFBQSxFQUFBeWIsRUFBQWxiLE9BQUFQLEdBQUEsRUFBQSxDQUNBLEdBQUF1QixHQUFBa2EsRUFBQXpiLEdBQ0F5a0IsRUFBQXBNLEVBQUE5VyxFQUNBZ1osSUFBQWpZLG1CQUFBZixHQUFBLElBQUFlLG1CQUFBbWlCLEdBQ0F6a0IsSUFBQXliLEVBQUFsYixPQUFBLElBQUFnYSxHQUFBLEtBRUEsTUFBQUEsSUFHQWxhLEVBQUEyTSxVQUFBLFNBQUEzQixFQUFBOUssR0FDQSxHQUFBc2xCLEdBQUF4YSxFQUFBOUssQ0FLQSxPQUpBc2xCLEdBQUEsSUFFQUEsRUFBQXRsQixFQUFBc2xCLEdBRUFBLGFsQnF3RVciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyohXG4gKiBKYXZhU2NyaXB0IENvb2tpZSB2Mi4xLjNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcy1jb29raWUvanMtY29va2llXG4gKlxuICogQ29weXJpZ2h0IDIwMDYsIDIwMTUgS2xhdXMgSGFydGwgJiBGYWduZXIgQnJhY2tcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG47KGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cdHZhciByZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSBmYWxzZTtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShmYWN0b3J5KTtcblx0XHRyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSB0cnVlO1xuXHR9XG5cdGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0XHRyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSB0cnVlO1xuXHR9XG5cdGlmICghcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyKSB7XG5cdFx0dmFyIE9sZENvb2tpZXMgPSB3aW5kb3cuQ29va2llcztcblx0XHR2YXIgYXBpID0gd2luZG93LkNvb2tpZXMgPSBmYWN0b3J5KCk7XG5cdFx0YXBpLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR3aW5kb3cuQ29va2llcyA9IE9sZENvb2tpZXM7XG5cdFx0XHRyZXR1cm4gYXBpO1xuXHRcdH07XG5cdH1cbn0oZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBleHRlbmQgKCkge1xuXHRcdHZhciBpID0gMDtcblx0XHR2YXIgcmVzdWx0ID0ge307XG5cdFx0Zm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhdHRyaWJ1dGVzID0gYXJndW1lbnRzWyBpIF07XG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gYXR0cmlidXRlcykge1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQgKGNvbnZlcnRlcikge1xuXHRcdGZ1bmN0aW9uIGFwaSAoa2V5LCB2YWx1ZSwgYXR0cmlidXRlcykge1xuXHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV3JpdGVcblxuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdGF0dHJpYnV0ZXMgPSBleHRlbmQoe1xuXHRcdFx0XHRcdHBhdGg6ICcvJ1xuXHRcdFx0XHR9LCBhcGkuZGVmYXVsdHMsIGF0dHJpYnV0ZXMpO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YgYXR0cmlidXRlcy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRcdHZhciBleHBpcmVzID0gbmV3IERhdGUoKTtcblx0XHRcdFx0XHRleHBpcmVzLnNldE1pbGxpc2Vjb25kcyhleHBpcmVzLmdldE1pbGxpc2Vjb25kcygpICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZSs1KTtcblx0XHRcdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgPSBleHBpcmVzO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHRcdFx0aWYgKC9eW1xce1xcW10vLnRlc3QocmVzdWx0KSkge1xuXHRcdFx0XHRcdFx0dmFsdWUgPSByZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXG5cdFx0XHRcdGlmICghY29udmVydGVyLndyaXRlKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSlcblx0XHRcdFx0XHRcdC5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDNBfDNDfDNFfDNEfDJGfDNGfDQwfDVCfDVEfDVFfDYwfDdCfDdEfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhbHVlID0gY29udmVydGVyLndyaXRlKHZhbHVlLCBrZXkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0a2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhrZXkpKTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoLyUoMjN8MjR8MjZ8MkJ8NUV8NjB8N0MpL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9bXFwoXFwpXS9nLCBlc2NhcGUpO1xuXG5cdFx0XHRcdHJldHVybiAoZG9jdW1lbnQuY29va2llID0gW1xuXHRcdFx0XHRcdGtleSwgJz0nLCB2YWx1ZSxcblx0XHRcdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgPyAnOyBleHBpcmVzPScgKyBhdHRyaWJ1dGVzLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRVxuXHRcdFx0XHRcdGF0dHJpYnV0ZXMucGF0aCA/ICc7IHBhdGg9JyArIGF0dHJpYnV0ZXMucGF0aCA6ICcnLFxuXHRcdFx0XHRcdGF0dHJpYnV0ZXMuZG9tYWluID8gJzsgZG9tYWluPScgKyBhdHRyaWJ1dGVzLmRvbWFpbiA6ICcnLFxuXHRcdFx0XHRcdGF0dHJpYnV0ZXMuc2VjdXJlID8gJzsgc2VjdXJlJyA6ICcnXG5cdFx0XHRcdF0uam9pbignJykpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZWFkXG5cblx0XHRcdGlmICgha2V5KSB7XG5cdFx0XHRcdHJlc3VsdCA9IHt9O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUbyBwcmV2ZW50IHRoZSBmb3IgbG9vcCBpbiB0aGUgZmlyc3QgcGxhY2UgYXNzaWduIGFuIGVtcHR5IGFycmF5XG5cdFx0XHQvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC4gQWxzbyBwcmV2ZW50cyBvZGQgcmVzdWx0IHdoZW5cblx0XHRcdC8vIGNhbGxpbmcgXCJnZXQoKVwiXG5cdFx0XHR2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdO1xuXHRcdFx0dmFyIHJkZWNvZGUgPSAvKCVbMC05QS1aXXsyfSkrL2c7XG5cdFx0XHR2YXIgaSA9IDA7XG5cblx0XHRcdGZvciAoOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgcGFydHMgPSBjb29raWVzW2ldLnNwbGl0KCc9Jyk7XG5cdFx0XHRcdHZhciBjb29raWUgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCc9Jyk7XG5cblx0XHRcdFx0aWYgKGNvb2tpZS5jaGFyQXQoMCkgPT09ICdcIicpIHtcblx0XHRcdFx0XHRjb29raWUgPSBjb29raWUuc2xpY2UoMSwgLTEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR2YXIgbmFtZSA9IHBhcnRzWzBdLnJlcGxhY2UocmRlY29kZSwgZGVjb2RlVVJJQ29tcG9uZW50KTtcblx0XHRcdFx0XHRjb29raWUgPSBjb252ZXJ0ZXIucmVhZCA/XG5cdFx0XHRcdFx0XHRjb252ZXJ0ZXIucmVhZChjb29raWUsIG5hbWUpIDogY29udmVydGVyKGNvb2tpZSwgbmFtZSkgfHxcblx0XHRcdFx0XHRcdGNvb2tpZS5yZXBsYWNlKHJkZWNvZGUsIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5qc29uKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb29raWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChrZXkgPT09IG5hbWUpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IGNvb2tpZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICgha2V5KSB7XG5cdFx0XHRcdFx0XHRyZXN1bHRbbmFtZV0gPSBjb29raWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblxuXHRcdGFwaS5zZXQgPSBhcGk7XG5cdFx0YXBpLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdHJldHVybiBhcGkuY2FsbChhcGksIGtleSk7XG5cdFx0fTtcblx0XHRhcGkuZ2V0SlNPTiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBhcGkuYXBwbHkoe1xuXHRcdFx0XHRqc29uOiB0cnVlXG5cdFx0XHR9LCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHRcdH07XG5cdFx0YXBpLmRlZmF1bHRzID0ge307XG5cblx0XHRhcGkucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgYXR0cmlidXRlcykge1xuXHRcdFx0YXBpKGtleSwgJycsIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG5cdFx0XHRcdGV4cGlyZXM6IC0xXG5cdFx0XHR9KSk7XG5cdFx0fTtcblxuXHRcdGFwaS53aXRoQ29udmVydGVyID0gaW5pdDtcblxuXHRcdHJldHVybiBhcGk7XG5cdH1cblxuXHRyZXR1cm4gaW5pdChmdW5jdGlvbiAoKSB7fSk7XG59KSk7XG4iLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKiFcbiAqIEphdmFTY3JpcHQgQ29va2llIHYyLjEuM1xuICogaHR0cHM6Ly9naXRodWIuY29tL2pzLWNvb2tpZS9qcy1jb29raWVcbiAqXG4gKiBDb3B5cmlnaHQgMjAwNiwgMjAxNSBLbGF1cyBIYXJ0bCAmIEZhZ25lciBCcmFja1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKi9cbjsoZnVuY3Rpb24gKGZhY3RvcnkpIHtcblx0dmFyIHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlciA9IGZhbHNlO1xuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZhY3RvcnkpO1xuXHRcdHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlciA9IHRydWU7XG5cdH1cblx0aWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRcdHJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlciA9IHRydWU7XG5cdH1cblx0aWYgKCFyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIpIHtcblx0XHR2YXIgT2xkQ29va2llcyA9IHdpbmRvdy5Db29raWVzO1xuXHRcdHZhciBhcGkgPSB3aW5kb3cuQ29va2llcyA9IGZhY3RvcnkoKTtcblx0XHRhcGkubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHdpbmRvdy5Db29raWVzID0gT2xkQ29va2llcztcblx0XHRcdHJldHVybiBhcGk7XG5cdFx0fTtcblx0fVxufShmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIGV4dGVuZCAoKSB7XG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciByZXN1bHQgPSB7fTtcblx0XHRmb3IgKDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGF0dHJpYnV0ZXMgPSBhcmd1bWVudHNbIGkgXTtcblx0XHRcdGZvciAodmFyIGtleSBpbiBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdHJlc3VsdFtrZXldID0gYXR0cmlidXRlc1trZXldO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdCAoY29udmVydGVyKSB7XG5cdFx0ZnVuY3Rpb24gYXBpIChrZXksIHZhbHVlLCBhdHRyaWJ1dGVzKSB7XG5cdFx0XHR2YXIgcmVzdWx0O1xuXHRcdFx0aWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBXcml0ZVxuXG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0YXR0cmlidXRlcyA9IGV4dGVuZCh7XG5cdFx0XHRcdFx0cGF0aDogJy8nXG5cdFx0XHRcdH0sIGFwaS5kZWZhdWx0cywgYXR0cmlidXRlcyk7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBhdHRyaWJ1dGVzLmV4cGlyZXMgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdFx0dmFyIGV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0XHRcdGV4cGlyZXMuc2V0TWlsbGlzZWNvbmRzKGV4cGlyZXMuZ2V0TWlsbGlzZWNvbmRzKCkgKyBhdHRyaWJ1dGVzLmV4cGlyZXMgKiA4NjRlKzUpO1xuXHRcdFx0XHRcdGF0dHJpYnV0ZXMuZXhwaXJlcyA9IGV4cGlyZXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcblx0XHRcdFx0XHRpZiAoL15bXFx7XFxbXS8udGVzdChyZXN1bHQpKSB7XG5cdFx0XHRcdFx0XHR2YWx1ZSA9IHJlc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cblx0XHRcdFx0aWYgKCFjb252ZXJ0ZXIud3JpdGUpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodmFsdWUpKVxuXHRcdFx0XHRcdFx0LnJlcGxhY2UoLyUoMjN8MjR8MjZ8MkJ8M0F8M0N8M0V8M0R8MkZ8M0Z8NDB8NUJ8NUR8NUV8NjB8N0J8N0R8N0MpL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjb252ZXJ0ZXIud3JpdGUodmFsdWUsIGtleSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRrZXkgPSBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGtleSkpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvJSgyM3wyNHwyNnwyQnw1RXw2MHw3QykvZywgZGVjb2RlVVJJQ29tcG9uZW50KTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1tcXChcXCldL2csIGVzY2FwZSk7XG5cblx0XHRcdFx0cmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBbXG5cdFx0XHRcdFx0a2V5LCAnPScsIHZhbHVlLFxuXHRcdFx0XHRcdGF0dHJpYnV0ZXMuZXhwaXJlcyA/ICc7IGV4cGlyZXM9JyArIGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpIDogJycsIC8vIHVzZSBleHBpcmVzIGF0dHJpYnV0ZSwgbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG5cdFx0XHRcdFx0YXR0cmlidXRlcy5wYXRoID8gJzsgcGF0aD0nICsgYXR0cmlidXRlcy5wYXRoIDogJycsXG5cdFx0XHRcdFx0YXR0cmlidXRlcy5kb21haW4gPyAnOyBkb21haW49JyArIGF0dHJpYnV0ZXMuZG9tYWluIDogJycsXG5cdFx0XHRcdFx0YXR0cmlidXRlcy5zZWN1cmUgPyAnOyBzZWN1cmUnIDogJydcblx0XHRcdFx0XS5qb2luKCcnKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlYWRcblxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0cmVzdWx0ID0ge307XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcblx0XHRcdC8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLiBBbHNvIHByZXZlbnRzIG9kZCByZXN1bHQgd2hlblxuXHRcdFx0Ly8gY2FsbGluZyBcImdldCgpXCJcblx0XHRcdHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpIDogW107XG5cdFx0XHR2YXIgcmRlY29kZSA9IC8oJVswLTlBLVpdezJ9KSsvZztcblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0Zm9yICg7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcblx0XHRcdFx0dmFyIGNvb2tpZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTtcblxuXHRcdFx0XHRpZiAoY29va2llLmNoYXJBdCgwKSA9PT0gJ1wiJykge1xuXHRcdFx0XHRcdGNvb2tpZSA9IGNvb2tpZS5zbGljZSgxLCAtMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHZhciBuYW1lID0gcGFydHNbMF0ucmVwbGFjZShyZGVjb2RlLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHRcdFx0XHRcdGNvb2tpZSA9IGNvbnZlcnRlci5yZWFkID9cblx0XHRcdFx0XHRcdGNvbnZlcnRlci5yZWFkKGNvb2tpZSwgbmFtZSkgOiBjb252ZXJ0ZXIoY29va2llLCBuYW1lKSB8fFxuXHRcdFx0XHRcdFx0Y29va2llLnJlcGxhY2UocmRlY29kZSwgZGVjb2RlVVJJQ29tcG9uZW50KTtcblxuXHRcdFx0XHRcdGlmICh0aGlzLmpzb24pIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvb2tpZSA9IEpTT04ucGFyc2UoY29va2llKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGtleSA9PT0gbmFtZSkge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gY29va2llO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdFtuYW1lXSA9IGNvb2tpZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0YXBpLnNldCA9IGFwaTtcblx0XHRhcGkuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0cmV0dXJuIGFwaS5jYWxsKGFwaSwga2V5KTtcblx0XHR9O1xuXHRcdGFwaS5nZXRKU09OID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGFwaS5hcHBseSh7XG5cdFx0XHRcdGpzb246IHRydWVcblx0XHRcdH0sIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG5cdFx0fTtcblx0XHRhcGkuZGVmYXVsdHMgPSB7fTtcblxuXHRcdGFwaS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRhcGkoa2V5LCAnJywgZXh0ZW5kKGF0dHJpYnV0ZXMsIHtcblx0XHRcdFx0ZXhwaXJlczogLTFcblx0XHRcdH0pKTtcblx0XHR9O1xuXG5cdFx0YXBpLndpdGhDb252ZXJ0ZXIgPSBpbml0O1xuXG5cdFx0cmV0dXJuIGFwaTtcblx0fVxuXG5cdHJldHVybiBpbml0KGZ1bmN0aW9uICgpIHt9KTtcbn0pKTtcblxufSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi91dGlscy5qc1wiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQmJveEFsaWduZWRUZXh0O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgQmJveEFsaWduZWRUZXh0IG9iamVjdCAtIGEgdGV4dCBvYmplY3QgdGhhdCBjYW4gYmUgZHJhd24gd2l0aFxyXG4gKiBhbmNob3IgcG9pbnRzIGJhc2VkIG9uIGEgdGlnaHQgYm91bmRpbmcgYm94IGFyb3VuZCB0aGUgdGV4dC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBmb250IC0gcDUuRm9udCBvYmplY3RcclxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBTdHJpbmcgdG8gZGlzcGxheVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW2ZvbnRTaXplPTEyXSAtIEZvbnQgc2l6ZSB0byB1c2UgZm9yIHN0cmluZ1xyXG4gKiBAcGFyYW0ge251bWJlcn0gW3g9MF0gLSBJbml0aWFsIHggbG9jYXRpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IFt5PTBdIC0gSW5pdGlhbCB5IGxvY2F0aW9uXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcEluc3RhbmNlPXdpbmRvd10gLSBSZWZlcmVuY2UgdG8gcDUgaW5zdGFuY2UsIGxlYXZlIGJsYW5rIGlmXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2V0Y2ggaXMgZ2xvYmFsXHJcbiAqIEBleGFtcGxlXHJcbiAqIHZhciBmb250LCBiYm94VGV4dDtcclxuICogZnVuY3Rpb24gcHJlbG9hZCgpIHtcclxuICogICAgIGZvbnQgPSBsb2FkRm9udChcIi4vYXNzZXRzL1JlZ3VsYXIudHRmXCIpO1xyXG4gKiB9XHJcbiAqIGZ1bmN0aW9uIHNldHVwKCkge1xyXG4gKiAgICAgY3JlYXRlQ2FudmFzKDQwMCwgNjAwKTtcclxuICogICAgIGJhY2tncm91bmQoMCk7XHJcbiAqICAgICBcclxuICogICAgIGJib3hUZXh0ID0gbmV3IEJib3hBbGlnbmVkVGV4dChmb250LCBcIkhleSFcIiwgMzApOyAgICBcclxuICogICAgIGJib3hUZXh0LnNldFJvdGF0aW9uKFBJIC8gNCk7XHJcbiAqICAgICBiYm94VGV4dC5zZXRBbmNob3IoQmJveEFsaWduZWRUZXh0LkFMSUdOLkJPWF9DRU5URVIsIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSKTtcclxuICogICAgIFxyXG4gKiAgICAgZmlsbChcIiMwMEE4RUFcIik7XHJcbiAqICAgICBub1N0cm9rZSgpO1xyXG4gKiAgICAgYmJveFRleHQuZHJhdyh3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBCYm94QWxpZ25lZFRleHQoZm9udCwgdGV4dCwgZm9udFNpemUsIHgsIHksIHBJbnN0YW5jZSkge1xyXG4gICAgdGhpcy5fZm9udCA9IGZvbnQ7XHJcbiAgICB0aGlzLl90ZXh0ID0gdGV4dDtcclxuICAgIHRoaXMuX3ggPSB1dGlscy5kZWZhdWx0KHgsIDApO1xyXG4gICAgdGhpcy5feSA9IHV0aWxzLmRlZmF1bHQoeSwgMCk7XHJcbiAgICB0aGlzLl9mb250U2l6ZSA9IHV0aWxzLmRlZmF1bHQoZm9udFNpemUsIDEyKTtcclxuICAgIHRoaXMuX3AgPSB1dGlscy5kZWZhdWx0KHBJbnN0YW5jZSwgd2luZG93KTtcclxuICAgIHRoaXMuX3JvdGF0aW9uID0gMDtcclxuICAgIHRoaXMuX2hBbGlnbiA9IEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfQ0VOVEVSO1xyXG4gICAgdGhpcy5fdkFsaWduID0gQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVI7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVNZXRyaWNzKHRydWUpO1xyXG59XHJcblxyXG4vKipcclxuICogVmVydGljYWwgYWxpZ25tZW50IHZhbHVlc1xyXG4gKiBAcHVibGljXHJcbiAqIEBzdGF0aWNcclxuICogQHJlYWRvbmx5XHJcbiAqIEBlbnVtIHtzdHJpbmd9XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQuQUxJR04gPSB7XHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSBsZWZ0IG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfTEVGVDogXCJib3hfbGVmdFwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfQ0VOVEVSOiBcImJveF9jZW50ZXJcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIHJpZ2h0IG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfUklHSFQ6IFwiYm94X3JpZ2h0XCJcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCYXNlbGluZSBhbGlnbm1lbnQgdmFsdWVzXHJcbiAqIEBwdWJsaWNcclxuICogQHN0YXRpY1xyXG4gKiBAcmVhZG9ubHlcclxuICogQGVudW0ge3N0cmluZ31cclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5CQVNFTElORSA9IHtcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIHRvcCBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX1RPUDogXCJib3hfdG9wXCIsXHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGJib3ggKi9cclxuICAgIEJPWF9DRU5URVI6IFwiYm94X2NlbnRlclwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgYm90dG9tIG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfQk9UVE9NOiBcImJveF9ib3R0b21cIixcclxuICAgIC8qKiBcclxuICAgICAqIERyYXcgZnJvbSBoYWxmIHRoZSBoZWlnaHQgb2YgdGhlIGZvbnQuIFNwZWNpZmljYWxseSB0aGUgaGVpZ2h0IGlzXHJcbiAgICAgKiBjYWxjdWxhdGVkIGFzOiBhc2NlbnQgKyBkZXNjZW50LlxyXG4gICAgICovXHJcbiAgICBGT05UX0NFTlRFUjogXCJmb250X2NlbnRlclwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgdGhlIG5vcm1hbCBmb250IGJhc2VsaW5lICovXHJcbiAgICBBTFBIQUJFVElDOiBcImFscGhhYmV0aWNcIlxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCBjdXJyZW50IHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIC0gVGV4dCBzdHJpbmcgdG8gZGlzcGxheVxyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRUZXh0ID0gZnVuY3Rpb24oc3RyaW5nKSB7XHJcbiAgICB0aGlzLl90ZXh0ID0gc3RyaW5nO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTWV0cmljcyhmYWxzZSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHRleHQgcG9zaXRpb25cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggcG9zaXRpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBZIHBvc2l0aW9uXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgdGhpcy5feCA9IHV0aWxzLmRlZmF1bHQoeCwgdGhpcy5feCk7XHJcbiAgICB0aGlzLl95ID0gdXRpbHMuZGVmYXVsdCh5LCB0aGlzLl95KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgdGV4dCBwb3NpdGlvblxyXG4gKiBAcHVibGljXHJcbiAqIEByZXR1cm4ge29iamVjdH0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzOiB4LCB5XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IHRoaXMuX3gsXHJcbiAgICAgICAgeTogdGhpcy5feVxyXG4gICAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgY3VycmVudCB0ZXh0IHNpemVcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gZm9udFNpemUgVGV4dCBzaXplXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFRleHRTaXplID0gZnVuY3Rpb24oZm9udFNpemUpIHtcclxuICAgIHRoaXMuX2ZvbnRTaXplID0gZm9udFNpemU7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVNZXRyaWNzKHRydWUpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IHJvdGF0aW9uIG9mIHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBSb3RhdGlvbiBpbiByYWRpYW5zXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24oYW5nbGUpIHtcclxuICAgIHRoaXMuX3JvdGF0aW9uID0gdXRpbHMuZGVmYXVsdChhbmdsZSwgdGhpcy5fcm90YXRpb24pO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IHJvdGF0aW9uIG9mIHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSb3RhdGlvbiBpbiByYWRpYW5zXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24oYW5nbGUpIHtcclxuICAgIHJldHVybiB0aGlzLl9yb3RhdGlvbjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHAgaW5zdGFuY2UgdGhhdCBpcyB1c2VkIGZvciBkcmF3aW5nXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtvYmplY3R9IHAgLSBJbnN0YW5jZSBvZiBwNSBmb3IgZHJhd2luZy4gVGhpcyBpcyBvbmx5IG5lZWRlZCB3aGVuIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgIHVzaW5nIGFuIG9mZnNjcmVlbiByZW5kZXJlciBvciB3aGVuIHVzaW5nIHA1IGluIGluc3RhbmNlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgbW9kZS5cclxuICogQHJldHVybnMge3RoaXN9IFVzZWZ1bCBmb3IgY2hhaW5pbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuc2V0UEluc3RhbmNlID0gZnVuY3Rpb24ocCkge1xyXG4gICAgdGhpcy5fcCA9IHV0aWxzLmRlZmF1bHQocCwgdGhpcy5fcCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcm90YXRpb24gb2YgdGV4dFxyXG4gKiBAcHVibGljXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IEluc3RhbmNlIG9mIHA1IHRoYXQgaXMgYmVpbmcgdXNlZCBmb3IgZHJhd2luZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5nZXRQSW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9wO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCBhbmNob3IgcG9pbnQgZm9yIHRleHQgKGhvcml6b25hbCBhbmQgdmVydGljYWwgYWxpZ25tZW50KSByZWxhdGl2ZSB0b1xyXG4gKiBib3VuZGluZyBib3hcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2hBbGlnbj1DRU5URVJdIC0gSG9yaXpvbmFsIGFsaWdubWVudFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW3ZBbGlnbj1DRU5URVJdIC0gVmVydGljYWwgYmFzZWxpbmVcclxuICogQHBhcmFtIHtib29sZWFufSBbdXBkYXRlUG9zaXRpb249ZmFsc2VdIC0gSWYgc2V0IHRvIHRydWUsIHRoZSBwb3NpdGlvbiBvZiB0aGVcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHRleHQgd2lsbCBiZSBzaGlmdGVkIHNvIHRoYXRcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHRleHQgd2lsbCBiZSBkcmF3biBpbiB0aGUgc2FtZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZSBpdCB3YXMgYmVmb3JlIGNhbGxpbmcgXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFuY2hvci5cclxuICogQHJldHVybnMge3RoaXN9IFVzZWZ1bCBmb3IgY2hhaW5pbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuc2V0QW5jaG9yID0gZnVuY3Rpb24oaEFsaWduLCB2QWxpZ24sIHVwZGF0ZVBvc2l0aW9uKSB7XHJcbiAgICB2YXIgb2xkUG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyh0aGlzLl94LCB0aGlzLl95KTtcclxuICAgIHRoaXMuX2hBbGlnbiA9IHV0aWxzLmRlZmF1bHQoaEFsaWduLCBCYm94QWxpZ25lZFRleHQuQUxJR04uQ0VOVEVSKTtcclxuICAgIHRoaXMuX3ZBbGlnbiA9IHV0aWxzLmRlZmF1bHQodkFsaWduLCBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuQ0VOVEVSKTtcclxuICAgIGlmICh1cGRhdGVQb3NpdGlvbikge1xyXG4gICAgICAgIHZhciBuZXdQb3MgPSB0aGlzLl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzKHRoaXMuX3gsIHRoaXMuX3kpO1xyXG4gICAgICAgIHRoaXMuX3ggKz0gb2xkUG9zLnggLSBuZXdQb3MueDtcclxuICAgICAgICB0aGlzLl95ICs9IG9sZFBvcy55IC0gbmV3UG9zLnk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGJvdW5kaW5nIGJveCB3aGVuIHRoZSB0ZXh0IGlzIHBsYWNlZCBhdCB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGVzLlxyXG4gKiBOb3RlOiB0aGlzIGlzIHRoZSB1bnJvdGF0ZWQgYm91bmRpbmcgYm94ISBUT0RPOiBGaXggdGhpcy5cclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PWN1cnJlbnQgeF0gLSBBIG5ldyB4IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWFuZW50bHkuIFxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3k9Y3VycmVudCB5XSAtIEEgbmV3IHkgY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtYW5lbnRseS5cclxuICogQHJldHVybiB7b2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXM6IHgsIHksIHcsIGhcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZ2V0QmJveCA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB2YXIgcG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyh0aGlzLl94LCB0aGlzLl95KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogcG9zLnggKyB0aGlzLl9ib3VuZHNPZmZzZXQueCxcclxuICAgICAgICB5OiBwb3MueSArIHRoaXMuX2JvdW5kc09mZnNldC55LFxyXG4gICAgICAgIHc6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgaDogdGhpcy5oZWlnaHRcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IGFuIGFycmF5IG9mIHBvaW50cyB0aGF0IGZvbGxvdyBhbG9uZyB0aGUgdGV4dCBwYXRoLiBUaGlzIHdpbGwgdGFrZSBpbnRvXHJcbiAqIGNvbnNpZGVyYXRpb24gdGhlIGN1cnJlbnQgYWxpZ25tZW50IHNldHRpbmdzLlxyXG4gKiBOb3RlOiB0aGlzIGlzIGEgdGhpbiB3cmFwcGVyIGFyb3VuZCBhIHA1IG1ldGhvZCBhbmQgZG9lc24ndCBoYW5kbGUgdW5yb3RhdGVkXHJcbiAqIHRleHQhIFRPRE86IEZpeCB0aGlzLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3g9Y3VycmVudCB4XSAtIEEgbmV3IHggY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtYW5lbnRseS4gXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeT1jdXJyZW50IHldIC0gQSBuZXcgeSBjb29yZGluYXRlIG9mIHRleHQgYW5jaG9yLiBUaGlzXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbCBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1hbmVudGx5LlxyXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gQW4gb2JqZWN0IHRoYXQgY2FuIGhhdmU6XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gc2FtcGxlRmFjdG9yOiByYXRpbyBvZiBwYXRoLWxlbmd0aCB0byBudW1iZXJcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiBzYW1wbGVzIChkZWZhdWx0PTAuMjUpLiBIaWdoZXIgdmFsdWVzIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIG1vcmVwb2ludHMgYW5kIGFyZSB0aGVyZWZvcmUgbW9yZSBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNlLiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBzaW1wbGlmeVRocmVzaG9sZDogaWYgc2V0IHRvIGEgbm9uLXplcm8gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsIGNvbGxpbmVhciBwb2ludHMgd2lsbCBiZSByZW1vdmVkLiBUaGVcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSByZXByZXNlbnRzIHRoZSB0aHJlc2hvbGQgYW5nbGUgdG8gdXNlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiBkZXRlcm1pbmluZyB3aGV0aGVyIHR3byBlZGdlcyBhcmUgXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGluZWFyLlxyXG4gKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgb2YgcG9pbnRzLCBlYWNoIHdpdGggeCwgeSAmIGFscGhhICh0aGUgcGF0aCBhbmdsZSlcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZ2V0VGV4dFBvaW50cyA9IGZ1bmN0aW9uKHgsIHksIG9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB2YXIgcG9pbnRzID0gdGhpcy5fZm9udC50ZXh0VG9Qb2ludHModGhpcy5fdGV4dCwgdGhpcy5feCwgdGhpcy5feSwgXHJcbiAgICAgICAgdGhpcy5fZm9udFNpemUsIG9wdGlvbnMpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICB2YXIgcG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyhwb2ludHNbaV0ueCwgcG9pbnRzW2ldLnkpO1xyXG4gICAgICAgIHBvaW50c1tpXS54ID0gcG9zLng7XHJcbiAgICAgICAgcG9pbnRzW2ldLnkgPSBwb3MueTtcclxuICAgIH1cclxuICAgIHJldHVybiBwb2ludHM7XHJcbn07XHJcblxyXG4vKipcclxuICogRHJhd3MgdGhlIHRleHQgcGFydGljbGUgd2l0aCB0aGUgc3BlY2lmaWVkIHN0eWxlIHBhcmFtZXRlcnMuIE5vdGU6IHRoaXMgaXNcclxuICogZ29pbmcgdG8gc2V0IHRoZSB0ZXh0Rm9udCwgdGV4dFNpemUgJiByb3RhdGlvbiBiZWZvcmUgZHJhd2luZy4gWW91IHNob3VsZCBzZXRcclxuICogdGhlIGNvbG9yL3N0cm9rZS9maWxsIHRoYXQgeW91IHdhbnQgYmVmb3JlIGRyYXdpbmcuIFRoaXMgZnVuY3Rpb24gd2lsbCBjbGVhblxyXG4gKiB1cCBhZnRlciBpdHNlbGYgYW5kIHJlc2V0IHN0eWxpbmcgYmFjayB0byB3aGF0IGl0IHdhcyBiZWZvcmUgaXQgd2FzIGNhbGxlZC5cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gW3g9Y3VycmVudCB4XSAtIEEgbmV3IHggY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpcyB3aWxsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIHBlcm1hbmVudGx5LiBcclxuICogQHBhcmFtIHtudW1iZXJ9IFt5PWN1cnJlbnQgeV0gLSBBIG5ldyB5IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXMgd2lsbFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gcGVybWFuZW50bHkuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RyYXdCb3VuZHM9ZmFsc2VdIC0gRmxhZyBmb3IgZHJhd2luZyBib3VuZGluZyBib3hcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKHgsIHksIGRyYXdCb3VuZHMpIHtcclxuICAgIGRyYXdCb3VuZHMgPSB1dGlscy5kZWZhdWx0KGRyYXdCb3VuZHMsIGZhbHNlKTtcclxuICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB2YXIgcG9zID0ge1xyXG4gICAgICAgIHg6IHRoaXMuX3gsIFxyXG4gICAgICAgIHk6IHRoaXMuX3lcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5fcC5wdXNoKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9yb3RhdGlvbikge1xyXG4gICAgICAgICAgICBwb3MgPSB0aGlzLl9jYWxjdWxhdGVSb3RhdGVkQ29vcmRzKHBvcy54LCBwb3MueSwgdGhpcy5fcm90YXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLl9wLnJvdGF0ZSh0aGlzLl9yb3RhdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwb3MgPSB0aGlzLl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzKHBvcy54LCBwb3MueSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3AudGV4dEFsaWduKHRoaXMuX3AuTEVGVCwgdGhpcy5fcC5CQVNFTElORSk7XHJcbiAgICAgICAgdGhpcy5fcC50ZXh0Rm9udCh0aGlzLl9mb250KTtcclxuICAgICAgICB0aGlzLl9wLnRleHRTaXplKHRoaXMuX2ZvbnRTaXplKTtcclxuICAgICAgICB0aGlzLl9wLnRleHQodGhpcy5fdGV4dCwgcG9zLngsIHBvcy55KTtcclxuXHJcbiAgICAgICAgaWYgKGRyYXdCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcC5zdHJva2UoMjAwKTtcclxuICAgICAgICAgICAgdmFyIGJvdW5kc1ggPSBwb3MueCArIHRoaXMuX2JvdW5kc09mZnNldC54O1xyXG4gICAgICAgICAgICB2YXIgYm91bmRzWSA9IHBvcy55ICsgdGhpcy5fYm91bmRzT2Zmc2V0Lnk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Aubm9GaWxsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3AucmVjdChib3VuZHNYLCBib3VuZHNZLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgIHRoaXMuX3AucG9wKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogUHJvamVjdCB0aGUgY29vcmRpbmF0ZXMgKHgsIHkpIGludG8gYSByb3RhdGVkIGNvb3JkaW5hdGUgc3lzdGVtXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gWCBjb29yZGluYXRlIChpbiB1bnJvdGF0ZWQgc3BhY2UpXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gWSBjb29yZGluYXRlIChpbiB1bnJvdGF0ZWQgc3BhY2UpXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSAtIFJhZGlhbnMgb2Ygcm90YXRpb24gdG8gYXBwbHlcclxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCB4ICYgeSBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLl9jYWxjdWxhdGVSb3RhdGVkQ29vcmRzID0gZnVuY3Rpb24gKHgsIHksIGFuZ2xlKSB7ICBcclxuICAgIHZhciByeCA9IE1hdGguY29zKGFuZ2xlKSAqIHggKyBNYXRoLmNvcyhNYXRoLlBJIC8gMiAtIGFuZ2xlKSAqIHk7XHJcbiAgICB2YXIgcnkgPSAtTWF0aC5zaW4oYW5nbGUpICogeCArIE1hdGguc2luKE1hdGguUEkgLyAyIC0gYW5nbGUpICogeTtcclxuICAgIHJldHVybiB7eDogcngsIHk6IHJ5fTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGRyYXcgY29vcmRpbmF0ZXMgZm9yIHRoZSB0ZXh0LCBhbGlnbmluZyBiYXNlZCBvbiB0aGUgYm91bmRpbmcgYm94LlxyXG4gKiBUaGUgdGV4dCBpcyBldmVudHVhbGx5IGRyYXduIHdpdGggY2FudmFzIGFsaWdubWVudCBzZXQgdG8gbGVmdCAmIGJhc2VsaW5lLCBzb1xyXG4gKiB0aGlzIGZ1bmN0aW9uIHRha2VzIGEgZGVzaXJlZCBwb3MgJiBhbGlnbm1lbnQgYW5kIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlXHJcbiAqIGNvb3JkaW5hdGVzIGZvciB0aGUgbGVmdCAmIGJhc2VsaW5lLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggY29vcmRpbmF0ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0geSAtIFkgY29vcmRpbmF0ZVxyXG4gKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIHggJiB5IHByb3BlcnRpZXNcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHMgPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICB2YXIgbmV3WCwgbmV3WTtcclxuICAgIHN3aXRjaCAodGhpcy5faEFsaWduKSB7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX0xFRlQ6XHJcbiAgICAgICAgICAgIG5ld1ggPSB4O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfQ0VOVEVSOlxyXG4gICAgICAgICAgICBuZXdYID0geCAtIHRoaXMuaGFsZldpZHRoO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfUklHSFQ6XHJcbiAgICAgICAgICAgIG5ld1ggPSB4IC0gdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgbmV3WCA9IHg7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5yZWNvZ25pemVkIGhvcml6b25hbCBhbGlnbjpcIiwgdGhpcy5faEFsaWduKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHRoaXMuX3ZBbGlnbikge1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9UT1A6XHJcbiAgICAgICAgICAgIG5ld1kgPSB5IC0gdGhpcy5fYm91bmRzT2Zmc2V0Lnk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVI6XHJcbiAgICAgICAgICAgIG5ld1kgPSB5ICsgdGhpcy5fZGlzdEJhc2VUb01pZDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuQk9YX0JPVFRPTTpcclxuICAgICAgICAgICAgbmV3WSA9IHkgLSB0aGlzLl9kaXN0QmFzZVRvQm90dG9tO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5GT05UX0NFTlRFUjpcclxuICAgICAgICAgICAgLy8gSGVpZ2h0IGlzIGFwcHJveGltYXRlZCBhcyBhc2NlbnQgKyBkZXNjZW50XHJcbiAgICAgICAgICAgIG5ld1kgPSB5IC0gdGhpcy5fZGVzY2VudCArICh0aGlzLl9hc2NlbnQgKyB0aGlzLl9kZXNjZW50KSAvIDI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkFMUEhBQkVUSUM6XHJcbiAgICAgICAgICAgIG5ld1kgPSB5O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBuZXdZID0geTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbnJlY29nbml6ZWQgdmVydGljYWwgYWxpZ246XCIsIHRoaXMuX3ZBbGlnbik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHt4OiBuZXdYLCB5OiBuZXdZfTtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBib3VuZGluZyBib3ggYW5kIHZhcmlvdXMgbWV0cmljcyBmb3IgdGhlIGN1cnJlbnQgdGV4dCBhbmQgZm9udFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5fY2FsY3VsYXRlTWV0cmljcyA9IGZ1bmN0aW9uKHNob3VsZFVwZGF0ZUhlaWdodCkgeyAgXHJcbiAgICAvLyBwNSAwLjUuMCBoYXMgYSBidWcgLSB0ZXh0IGJvdW5kcyBhcmUgY2xpcHBlZCBieSAoMCwgMClcclxuICAgIC8vIENhbGN1bGF0aW5nIGJvdW5kcyBoYWNrXHJcbiAgICB2YXIgYm91bmRzID0gdGhpcy5fZm9udC50ZXh0Qm91bmRzKHRoaXMuX3RleHQsIDEwMDAsIDEwMDAsIHRoaXMuX2ZvbnRTaXplKTtcclxuICAgIC8vIEJvdW5kcyBpcyBhIHJlZmVyZW5jZSAtIGlmIHdlIG1lc3Mgd2l0aCBpdCBkaXJlY3RseSwgd2UgY2FuIG1lc3MgdXAgXHJcbiAgICAvLyBmdXR1cmUgdmFsdWVzISAoSXQgY2hhbmdlcyB0aGUgYmJveCBjYWNoZSBpbiBwNS4pXHJcbiAgICBib3VuZHMgPSB7IFxyXG4gICAgICAgIHg6IGJvdW5kcy54IC0gMTAwMCwgXHJcbiAgICAgICAgeTogYm91bmRzLnkgLSAxMDAwLCBcclxuICAgICAgICB3OiBib3VuZHMudywgXHJcbiAgICAgICAgaDogYm91bmRzLmggXHJcbiAgICB9OyBcclxuXHJcbiAgICBpZiAoc2hvdWxkVXBkYXRlSGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5fYXNjZW50ID0gdGhpcy5fZm9udC5fdGV4dEFzY2VudCh0aGlzLl9mb250U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fZGVzY2VudCA9IHRoaXMuX2ZvbnQuX3RleHREZXNjZW50KHRoaXMuX2ZvbnRTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVc2UgYm91bmRzIHRvIGNhbGN1bGF0ZSBmb250IG1ldHJpY3NcclxuICAgIHRoaXMud2lkdGggPSBib3VuZHMudztcclxuICAgIHRoaXMuaGVpZ2h0ID0gYm91bmRzLmg7XHJcbiAgICB0aGlzLmhhbGZXaWR0aCA9IHRoaXMud2lkdGggLyAyO1xyXG4gICAgdGhpcy5oYWxmSGVpZ2h0ID0gdGhpcy5oZWlnaHQgLyAyO1xyXG4gICAgdGhpcy5fYm91bmRzT2Zmc2V0ID0geyB4OiBib3VuZHMueCwgeTogYm91bmRzLnkgfTtcclxuICAgIHRoaXMuX2Rpc3RCYXNlVG9NaWQgPSBNYXRoLmFicyhib3VuZHMueSkgLSB0aGlzLmhhbGZIZWlnaHQ7XHJcbiAgICB0aGlzLl9kaXN0QmFzZVRvQm90dG9tID0gdGhpcy5oZWlnaHQgLSBNYXRoLmFicyhib3VuZHMueSk7XHJcbn07XG59LHtcIi4vdXRpbHMuanNcIjozfV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbih2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICByZXR1cm4gKHZhbHVlICE9PSB1bmRlZmluZWQpID8gdmFsdWUgOiBkZWZhdWx0VmFsdWU7XHJcbn07XG59LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gSG92ZXJTbGlkZXNob3dzO1xyXG5cclxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoXCIuL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbmZ1bmN0aW9uIEhvdmVyU2xpZGVzaG93cyhzbGlkZXNob3dEZWxheSwgdHJhbnNpdGlvbkR1cmF0aW9uKSB7XHJcbiAgICB0aGlzLl9zbGlkZXNob3dEZWxheSA9IChzbGlkZXNob3dEZWxheSAhPT0gdW5kZWZpbmVkKSA/IHNsaWRlc2hvd0RlbGF5IDogXHJcbiAgICAgICAgMjAwMDtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9ICh0cmFuc2l0aW9uRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgPyBcclxuICAgICAgICBfdHJhbnNpdGlvbkR1cmF0aW9uIDogMTAwMDsgICBcclxuXHJcbiAgICB0aGlzLl9zbGlkZXNob3dzID0gW107XHJcbiAgICB0aGlzLnJlbG9hZCgpO1xyXG59XHJcblxyXG5Ib3ZlclNsaWRlc2hvd3MucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIE5vdGU6IHRoaXMgaXMgY3VycmVudGx5IG5vdCByZWFsbHkgYmVpbmcgdXNlZC4gV2hlbiBhIHBhZ2UgaXMgbG9hZGVkLFxyXG4gICAgLy8gbWFpbi5qcyBpcyBqdXN0IHJlLWluc3RhbmNpbmcgdGhlIEhvdmVyU2xpZGVzaG93c1xyXG4gICAgdmFyIG9sZFNsaWRlc2hvd3MgPSB0aGlzLl9zbGlkZXNob3dzIHx8IFtdO1xyXG4gICAgdGhpcy5fc2xpZGVzaG93cyA9IFtdO1xyXG4gICAgJChcIi5ob3Zlci1zbGlkZXNob3dcIikuZWFjaChmdW5jdGlvbiAoXywgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fZmluZEluU2xpZGVzaG93cyhlbGVtZW50LCBvbGRTbGlkZXNob3dzKTtcclxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZXNob3cgPSBvbGRTbGlkZXNob3dzLnNwbGljZShpbmRleCwgMSlbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX3NsaWRlc2hvd3MucHVzaChzbGlkZXNob3cpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NsaWRlc2hvd3MucHVzaChuZXcgU2xpZGVzaG93KCRlbGVtZW50LCB0aGlzLl9zbGlkZXNob3dEZWxheSxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbikpO1xyXG4gICAgICAgIH1cclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbn07XHJcblxyXG5Ib3ZlclNsaWRlc2hvd3MucHJvdG90eXBlLl9maW5kSW5TbGlkZXNob3dzID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNsaWRlc2hvd3MpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVzaG93cy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09PSBzbGlkZXNob3dzW2ldLmdldEVsZW1lbnQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gLTE7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBTbGlkZXNob3coJGNvbnRhaW5lciwgc2xpZGVzaG93RGVsYXksIHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgdGhpcy5fJGNvbnRhaW5lciA9ICRjb250YWluZXI7XHJcbiAgICB0aGlzLl9zbGlkZXNob3dEZWxheSA9IHNsaWRlc2hvd0RlbGF5O1xyXG4gICAgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uID0gdHJhbnNpdGlvbkR1cmF0aW9uO1xyXG4gICAgdGhpcy5fdGltZW91dElkID0gbnVsbDtcclxuICAgIHRoaXMuX2ltYWdlSW5kZXggPSAwO1xyXG4gICAgdGhpcy5fJGltYWdlcyA9IFtdO1xyXG5cclxuICAgIC8vIFNldCB1cCBhbmQgY2FjaGUgcmVmZXJlbmNlcyB0byBpbWFnZXNcclxuICAgIHRoaXMuXyRjb250YWluZXIuZmluZChcImltZ1wiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciAkaW1hZ2UgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICRpbWFnZS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICB0b3A6IFwiMFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBcIjBcIixcclxuICAgICAgICAgICAgekluZGV4OiAoaW5kZXggPT09IDApID8gMiA6IDAgLy8gRmlyc3QgaW1hZ2Ugc2hvdWxkIGJlIG9uIHRvcFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZXMucHVzaCgkaW1hZ2UpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgd2hldGhlciB0byBiaW5kIGludGVyYWN0aXZpdHlcclxuICAgIHRoaXMuX251bUltYWdlcyA9IHRoaXMuXyRpbWFnZXMubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuX251bUltYWdlcyA8PSAxKSByZXR1cm47XHJcblxyXG4gICAgLy8gQmluZCBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuXyRjb250YWluZXIub24oXCJtb3VzZWVudGVyXCIsIHRoaXMuX29uRW50ZXIuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kY29udGFpbmVyLm9uKFwibW91c2VsZWF2ZVwiLCB0aGlzLl9vbkxlYXZlLmJpbmQodGhpcykpO1xyXG5cclxufVxyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuXyRjb250YWluZXIuZ2V0KDApO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXQkRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl8kY29udGFpbmVyO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5fb25FbnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIEZpcnN0IHRyYW5zaXRpb24gc2hvdWxkIGhhcHBlbiBwcmV0dHkgc29vbiBhZnRlciBob3ZlcmluZyBpbiBvcmRlclxyXG4gICAgLy8gdG8gY2x1ZSB0aGUgdXNlciBpbnRvIHdoYXQgaXMgaGFwcGVuaW5nXHJcbiAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX2FkdmFuY2VTbGlkZXNob3cuYmluZCh0aGlzKSwgNTAwKTtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuX29uTGVhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMuX3RpbWVvdXRJZCk7ICBcclxuICAgIHRoaXMuX3RpbWVvdXRJZCA9IG51bGw7ICAgICAgXHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLl9hZHZhbmNlU2xpZGVzaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5faW1hZ2VJbmRleCArPSAxO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgLy8gTW92ZSB0aGUgaW1hZ2UgZnJvbSAyIHN0ZXBzIGFnbyBkb3duIHRvIHRoZSBib3R0b20gei1pbmRleCBhbmQgbWFrZVxyXG4gICAgLy8gaXQgaW52aXNpYmxlXHJcbiAgICBpZiAodGhpcy5fbnVtSW1hZ2VzID49IDMpIHtcclxuICAgICAgICBpID0gdXRpbGl0aWVzLndyYXBJbmRleCh0aGlzLl9pbWFnZUluZGV4IC0gMiwgdGhpcy5fbnVtSW1hZ2VzKTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzW2ldLmNzcyh7XHJcbiAgICAgICAgICAgIHpJbmRleDogMCxcclxuICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZXNbaV0udmVsb2NpdHkoXCJzdG9wXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmUgdGhlIGltYWdlIGZyb20gMSBzdGVwcyBhZ28gZG93biB0byB0aGUgbWlkZGxlIHotaW5kZXggYW5kIG1ha2VcclxuICAgIC8vIGl0IGNvbXBsZXRlbHkgdmlzaWJsZVxyXG4gICAgaWYgKHRoaXMuX251bUltYWdlcyA+PSAyKSB7XHJcbiAgICAgICAgaSA9IHV0aWxpdGllcy53cmFwSW5kZXgodGhpcy5faW1hZ2VJbmRleCAtIDEsIHRoaXMuX251bUltYWdlcyk7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlc1tpXS5jc3Moe1xyXG4gICAgICAgICAgICB6SW5kZXg6IDEsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzW2ldLnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZlIHRoZSBjdXJyZW50IGltYWdlIHRvIHRoZSB0b3Agei1pbmRleCBhbmQgZmFkZSBpdCBpblxyXG4gICAgdGhpcy5faW1hZ2VJbmRleCA9IHV0aWxpdGllcy53cmFwSW5kZXgodGhpcy5faW1hZ2VJbmRleCwgdGhpcy5fbnVtSW1hZ2VzKTtcclxuICAgIHRoaXMuXyRpbWFnZXNbdGhpcy5faW1hZ2VJbmRleF0uY3NzKHtcclxuICAgICAgICB6SW5kZXg6IDIsXHJcbiAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl8kaW1hZ2VzW3RoaXMuX2ltYWdlSW5kZXhdLnZlbG9jaXR5KHtcclxuICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24sIFwiZWFzZUluT3V0UXVhZFwiKTtcclxuXHJcbiAgICAvLyBTY2hlZHVsZSBuZXh0IHRyYW5zaXRpb25cclxuICAgIHRoaXMuX3RpbWVvdXRJZCA9IHNldFRpbWVvdXQodGhpcy5fYWR2YW5jZVNsaWRlc2hvdy5iaW5kKHRoaXMpLCBcclxuICAgICAgICB0aGlzLl9zbGlkZXNob3dEZWxheSk7XHJcbn07XG59LHtcIi4vdXRpbGl0aWVzLmpzXCI6MTl9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gQmFzZUxvZ29Ta2V0Y2g7XHJcblxyXG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuZnVuY3Rpb24gQmFzZUxvZ29Ta2V0Y2goJG5hdiwgJG5hdkxvZ28sIGZvbnRQYXRoKSB7XHJcbiAgICB0aGlzLl8kbmF2ID0gJG5hdjtcclxuICAgIHRoaXMuXyRuYXZMb2dvID0gJG5hdkxvZ287XHJcbiAgICB0aGlzLl9mb250UGF0aCA9IGZvbnRQYXRoO1xyXG5cclxuICAgIHRoaXMuX3RleHQgPSB0aGlzLl8kbmF2TG9nby50ZXh0KCk7XHJcbiAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSB0cnVlO1xyXG4gICAgdGhpcy5faXNNb3VzZU92ZXIgPSBmYWxzZTtcclxuICAgIHRoaXMuX2lzT3Zlck5hdkxvZ28gPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLl91cGRhdGVUZXh0T2Zmc2V0KCk7XHJcbiAgICB0aGlzLl91cGRhdGVTaXplKCk7XHJcbiAgICB0aGlzLl91cGRhdGVGb250U2l6ZSgpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIChyZWxhdGl2ZSBwb3NpdGlvbmVkKSBjb250YWluZXIgZm9yIHRoZSBza2V0Y2ggaW5zaWRlIG9mIHRoZVxyXG4gICAgLy8gbmF2LCBidXQgbWFrZSBzdXJlIHRoYXQgaXQgaXMgQkVISU5EIGV2ZXJ5dGhpbmcgZWxzZS4gRXZlbnR1YWxseSwgd2Ugd2lsbFxyXG4gICAgLy8gZHJvcCBqdXN0IHRoZSBuYXYgbG9nbyAobm90IHRoZSBuYXYgbGlua3MhKSBiZWhpbmQgdGhlIGNhbnZhcy5cclxuICAgIHRoaXMuXyRjb250YWluZXIgPSAkKFwiPGRpdj5cIilcclxuICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgdG9wOiBcIjBweFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBcIjBweFwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICAucHJlcGVuZFRvKHRoaXMuXyRuYXYpXHJcbiAgICAgICAgLmhpZGUoKTtcclxuXHJcbiAgICB0aGlzLl9jcmVhdGVQNUluc3RhbmNlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBuZXcgcDUgaW5zdGFuY2UgYW5kIGJpbmQgdGhlIGFwcHJvcHJpYXRlIGNsYXNzIG1ldGhvZHMgdG8gdGhlXHJcbiAqIGluc3RhbmNlLiBUaGlzIGFsc28gZmlsbHMgaW4gdGhlIHAgcGFyYW1ldGVyIG9uIHRoZSBjbGFzcyBtZXRob2RzIChzZXR1cCxcclxuICogZHJhdywgZXRjLikgc28gdGhhdCB0aG9zZSBmdW5jdGlvbnMgY2FuIGJlIGEgbGl0dGxlIGxlc3MgdmVyYm9zZSA6KSBcclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fY3JlYXRlUDVJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIG5ldyBwNShmdW5jdGlvbihwKSB7XHJcbiAgICAgICAgdGhpcy5fcCA9IHA7XHJcbiAgICAgICAgcC5wcmVsb2FkID0gdGhpcy5fcHJlbG9hZC5iaW5kKHRoaXMsIHApO1xyXG4gICAgICAgIHAuc2V0dXAgPSB0aGlzLl9zZXR1cC5iaW5kKHRoaXMsIHApO1xyXG4gICAgICAgIHAuZHJhdyA9IHRoaXMuX2RyYXcuYmluZCh0aGlzLCBwKTtcclxuICAgIH0uYmluZCh0aGlzKSwgdGhpcy5fJGNvbnRhaW5lci5nZXQoMCkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZpbmQgdGhlIGRpc3RhbmNlIGZyb20gdGhlIHRvcCBsZWZ0IG9mIHRoZSBuYXYgdG8gdGhlIGJyYW5kIGxvZ28ncyBiYXNlbGluZS5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fdXBkYXRlVGV4dE9mZnNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYXNlbGluZURpdiA9ICQoXCI8ZGl2PlwiKVxyXG4gICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxyXG4gICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcImJhc2VsaW5lXCJcclxuICAgICAgICB9KS5wcmVwZW5kVG8odGhpcy5fJG5hdkxvZ28pO1xyXG4gICAgdmFyIG5hdk9mZnNldCA9IHRoaXMuXyRuYXYub2Zmc2V0KCk7XHJcbiAgICB2YXIgbG9nb0Jhc2VsaW5lT2Zmc2V0ID0gYmFzZWxpbmVEaXYub2Zmc2V0KCk7XHJcbiAgICB0aGlzLl90ZXh0T2Zmc2V0ID0ge1xyXG4gICAgICAgIHRvcDogbG9nb0Jhc2VsaW5lT2Zmc2V0LnRvcCAtIG5hdk9mZnNldC50b3AsXHJcbiAgICAgICAgbGVmdDogbG9nb0Jhc2VsaW5lT2Zmc2V0LmxlZnQgLSBuYXZPZmZzZXQubGVmdFxyXG4gICAgfTtcclxuICAgIGJhc2VsaW5lRGl2LnJlbW92ZSgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZpbmQgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgYnJhbmQgbG9nbyBpbiB0aGUgbmF2LiBUaGlzIGJib3ggY2FuIHRoZW4gYmUgXHJcbiAqIHVzZWQgdG8gY29udHJvbCB3aGVuIHRoZSBjdXJzb3Igc2hvdWxkIGJlIGEgcG9pbnRlci5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fY2FsY3VsYXRlTmF2TG9nb0JvdW5kcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuYXZPZmZzZXQgPSB0aGlzLl8kbmF2Lm9mZnNldCgpO1xyXG4gICAgdmFyIGxvZ29PZmZzZXQgPSB0aGlzLl8kbmF2TG9nby5vZmZzZXQoKTtcclxuICAgIHRoaXMuX2xvZ29CYm94ID0ge1xyXG4gICAgICAgIHk6IGxvZ29PZmZzZXQudG9wIC0gbmF2T2Zmc2V0LnRvcCxcclxuICAgICAgICB4OiBsb2dvT2Zmc2V0LmxlZnQgLSBuYXZPZmZzZXQubGVmdCxcclxuICAgICAgICB3OiB0aGlzLl8kbmF2TG9nby5vdXRlcldpZHRoKCksIC8vIEV4Y2x1ZGUgbWFyZ2luIGZyb20gdGhlIGJib3hcclxuICAgICAgICBoOiB0aGlzLl8kbmF2TG9nby5vdXRlckhlaWdodCgpIC8vIExpbmtzIGFyZW4ndCBjbGlja2FibGUgb24gbWFyZ2luXHJcbiAgICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgZGltZW5zaW9ucyB0byBtYXRjaCB0aGUgbmF2IC0gZXhjbHVkaW5nIGFueSBtYXJnaW4sIHBhZGRpbmcgJiBcclxuICogYm9yZGVyLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl91cGRhdGVTaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fd2lkdGggPSB0aGlzLl8kbmF2LmlubmVyV2lkdGgoKTtcclxuICAgIHRoaXMuX2hlaWdodCA9IHRoaXMuXyRuYXYuaW5uZXJIZWlnaHQoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHcmFiIHRoZSBmb250IHNpemUgZnJvbSB0aGUgYnJhbmQgbG9nbyBsaW5rLiBUaGlzIG1ha2VzIHRoZSBmb250IHNpemUgb2YgdGhlXHJcbiAqIHNrZXRjaCByZXNwb25zaXZlLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl91cGRhdGVGb250U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2ZvbnRTaXplID0gdGhpcy5fJG5hdkxvZ28uY3NzKFwiZm9udFNpemVcIikucmVwbGFjZShcInB4XCIsIFwiXCIpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFdoZW4gdGhlIGJyb3dzZXIgaXMgcmVzaXplZCwgcmVjYWxjdWxhdGUgYWxsIHRoZSBuZWNlc3Nhcnkgc3RhdHMgc28gdGhhdCB0aGVcclxuICogc2tldGNoIGNhbiBiZSByZXNwb25zaXZlLiBUaGUgbG9nbyBpbiB0aGUgc2tldGNoIHNob3VsZCBBTFdBWVMgZXhhY3RseSBtYXRjaFxyXG4gKiB0aGUgYnJhbmcgbG9nbyBsaW5rIHRoZSBIVE1MLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICB0aGlzLl91cGRhdGVTaXplKCk7XHJcbiAgICB0aGlzLl91cGRhdGVGb250U2l6ZSgpO1xyXG4gICAgdGhpcy5fdXBkYXRlVGV4dE9mZnNldCgpO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTmF2TG9nb0JvdW5kcygpO1xyXG4gICAgcC5yZXNpemVDYW52YXModGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBfaXNNb3VzZU92ZXIgcHJvcGVydHkuIFxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXRNb3VzZU92ZXIgPSBmdW5jdGlvbiAoaXNNb3VzZU92ZXIpIHtcclxuICAgIHRoaXMuX2lzTW91c2VPdmVyID0gaXNNb3VzZU92ZXI7XHJcbn07XHJcblxyXG4vKipcclxuICogSWYgdGhlIGN1cnNvciBpcyBzZXQgdG8gYSBwb2ludGVyLCBmb3J3YXJkIGFueSBjbGljayBldmVudHMgdG8gdGhlIG5hdiBsb2dvLlxyXG4gKiBUaGlzIHJlZHVjZXMgdGhlIG5lZWQgZm9yIHRoZSBjYW52YXMgdG8gZG8gYW55IEFKQVgteSBzdHVmZi5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fb25DbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAodGhpcy5faXNPdmVyTmF2TG9nbykgdGhpcy5fJG5hdkxvZ28udHJpZ2dlcihlKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIHByZWxvYWQgbWV0aG9kIHRoYXQganVzdCBsb2FkcyB0aGUgbmVjZXNzYXJ5IGZvbnRcclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fcHJlbG9hZCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICB0aGlzLl9mb250ID0gcC5sb2FkRm9udCh0aGlzLl9mb250UGF0aCk7XHJcbn07XHJcblxyXG4vKipcclxuICogQmFzZSBzZXR1cCBtZXRob2QgdGhhdCBkb2VzIHNvbWUgaGVhdnkgbGlmdGluZy4gSXQgaGlkZXMgdGhlIG5hdiBicmFuZCBsb2dvXHJcbiAqIGFuZCByZXZlYWxzIHRoZSBjYW52YXMuIEl0IGFsc28gc2V0cyB1cCBhIGxvdCBvZiB0aGUgaW50ZXJuYWwgdmFyaWFibGVzIGFuZFxyXG4gKiBjYW52YXMgZXZlbnRzLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICB2YXIgcmVuZGVyZXIgPSBwLmNyZWF0ZUNhbnZhcyh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcclxuICAgIHRoaXMuXyRjYW52YXMgPSAkKHJlbmRlcmVyLmNhbnZhcyk7XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgY2FudmFzIGFuZCBoaWRlIHRoZSBsb2dvLiBVc2luZyBzaG93L2hpZGUgb24gdGhlIGxvZ28gd2lsbCBjYXVzZVxyXG4gICAgLy8galF1ZXJ5IHRvIG11Y2sgd2l0aCB0aGUgcG9zaXRpb25pbmcsIHdoaWNoIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHdoZXJlIHRvXHJcbiAgICAvLyBkcmF3IHRoZSBjYW52YXMgdGV4dC4gSW5zdGVhZCwganVzdCBwdXNoIHRoZSBsb2dvIGJlaGluZCB0aGUgY2FudmFzLiBUaGlzXHJcbiAgICAvLyBhbGxvd3MgbWFrZXMgaXQgc28gdGhlIGNhbnZhcyBpcyBzdGlsbCBiZWhpbmQgdGhlIG5hdiBsaW5rcy5cclxuICAgIHRoaXMuXyRjb250YWluZXIuc2hvdygpO1xyXG4gICAgdGhpcy5fJG5hdkxvZ28uY3NzKFwiekluZGV4XCIsIC0xKTtcclxuXHJcbiAgICAvLyBUaGVyZSBpc24ndCBhIGdvb2Qgd2F5IHRvIGNoZWNrIHdoZXRoZXIgdGhlIHNrZXRjaCBoYXMgdGhlIG1vdXNlIG92ZXJcclxuICAgIC8vIGl0LiBwLm1vdXNlWCAmIHAubW91c2VZIGFyZSBpbml0aWFsaXplZCB0byAoMCwgMCksIGFuZCBwLmZvY3VzZWQgaXNuJ3QgXHJcbiAgICAvLyBhbHdheXMgcmVsaWFibGUuXHJcbiAgICB0aGlzLl8kY2FudmFzLm9uKFwibW91c2VvdmVyXCIsIHRoaXMuX3NldE1vdXNlT3Zlci5iaW5kKHRoaXMsIHRydWUpKTtcclxuICAgIHRoaXMuXyRjYW52YXMub24oXCJtb3VzZW91dFwiLCB0aGlzLl9zZXRNb3VzZU92ZXIuYmluZCh0aGlzLCBmYWxzZSkpO1xyXG5cclxuICAgIC8vIEZvcndhcmQgbW91c2UgY2xpY2tzIHRvIHRoZSBuYXYgbG9nb1xyXG4gICAgdGhpcy5fJGNhbnZhcy5vbihcImNsaWNrXCIsIHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgd2luZG93IGlzIHJlc2l6ZWQsIHRleHQgJiBjYW52YXMgc2l6aW5nIGFuZCBwbGFjZW1lbnQgbmVlZCB0byBiZVxyXG4gICAgLy8gcmVjYWxjdWxhdGVkLiBUaGUgc2l0ZSBpcyByZXNwb25zaXZlLCBzbyB0aGUgaW50ZXJhY3RpdmUgY2FudmFzIHNob3VsZCBiZVxyXG4gICAgLy8gdG9vISBcclxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCB0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMsIHApKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIGRyYXcgbWV0aG9kIHRoYXQgY29udHJvbHMgd2hldGhlciBvciBub3QgdGhlIGN1cnNvciBpcyBhIHBvaW50ZXIuIEl0XHJcbiAqIHNob3VsZCBvbmx5IGJlIGEgcG9pbnRlciB3aGVuIHRoZSBtb3VzZSBpcyBvdmVyIHRoZSBuYXYgYnJhbmQgbG9nby5cclxuICovXHJcbkJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fZHJhdyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBpZiAodGhpcy5faXNNb3VzZU92ZXIpIHtcclxuICAgICAgICB2YXIgaXNPdmVyTG9nbyA9IHV0aWxzLmlzSW5SZWN0KHAubW91c2VYLCBwLm1vdXNlWSwgdGhpcy5fbG9nb0Jib3gpO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNPdmVyTmF2TG9nbyAmJiBpc092ZXJMb2dvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3Zlck5hdkxvZ28gPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl8kY2FudmFzLmNzcyhcImN1cnNvclwiLCBcInBvaW50ZXJcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9pc092ZXJOYXZMb2dvICYmICFpc092ZXJMb2dvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3Zlck5hdkxvZ28gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fJGNhbnZhcy5jc3MoXCJjdXJzb3JcIiwgXCJpbml0aWFsXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcbn0se1wiLi4vdXRpbGl0aWVzLmpzXCI6MTl9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gU2tldGNoO1xyXG5cclxudmFyIEJib3hUZXh0ID0gcmVxdWlyZShcInA1LWJib3gtYWxpZ25lZC10ZXh0XCIpO1xyXG52YXIgQmFzZUxvZ29Ta2V0Y2ggPSByZXF1aXJlKFwiLi9iYXNlLWxvZ28tc2tldGNoLmpzXCIpO1xyXG52YXIgU2luR2VuZXJhdG9yID0gcmVxdWlyZShcIi4vZ2VuZXJhdG9ycy9zaW4tZ2VuZXJhdG9yLmpzXCIpO1xyXG5cclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4uL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZSk7XHJcblxyXG5mdW5jdGlvbiBTa2V0Y2goJG5hdiwgJG5hdkxvZ28pIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLmNhbGwodGhpcywgJG5hdiwgJG5hdkxvZ28sIFwiLi4vZm9udHMvYmlnX2pvaG4td2ViZm9udC50dGZcIik7XHJcbn1cclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUuY2FsbCh0aGlzLCBwKTtcclxuICAgIHRoaXMuX3NwYWNpbmcgPSB1dGlscy5tYXAodGhpcy5fZm9udFNpemUsIDIwLCA0MCwgMiwgNSwge2NsYW1wOiB0cnVlLCBcclxuICAgICAgICByb3VuZDogdHJ1ZX0pO1xyXG4gICAgLy8gVXBkYXRlIHRoZSBiYm94VGV4dCwgcGxhY2Ugb3ZlciB0aGUgbmF2IHRleHQgbG9nbyBhbmQgdGhlbiBzaGlmdCBpdHMgXHJcbiAgICAvLyBhbmNob3IgYmFjayB0byAoY2VudGVyLCBjZW50ZXIpIHdoaWxlIHByZXNlcnZpbmcgdGhlIHRleHQgcG9zaXRpb25cclxuICAgIHRoaXMuX2Jib3hUZXh0LnNldFRleHQodGhpcy5fdGV4dClcclxuICAgICAgICAuc2V0VGV4dFNpemUodGhpcy5fZm9udFNpemUpXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfTEVGVCwgQmJveFRleHQuQkFTRUxJTkUuQUxQSEFCRVRJQylcclxuICAgICAgICAuc2V0UG9zaXRpb24odGhpcy5fdGV4dE9mZnNldC5sZWZ0LCB0aGlzLl90ZXh0T2Zmc2V0LnRvcClcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9DRU5URVIsIEJib3hUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVIsIFxyXG4gICAgICAgICAgICB0cnVlKTtcclxuICAgIHRoaXMuX2RyYXdTdGF0aW9uYXJ5TG9nbyhwKTtcclxuICAgIHRoaXMuX3BvaW50cyA9IHRoaXMuX2Jib3hUZXh0LmdldFRleHRQb2ludHMoKTtcclxuICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IHRydWU7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3U3RhdGlvbmFyeUxvZ28gPSBmdW5jdGlvbiAocCkge1xyXG4gICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICBwLnN0cm9rZSgyNTUpO1xyXG4gICAgcC5maWxsKFwiIzBBMDAwQVwiKTtcclxuICAgIHAuc3Ryb2tlV2VpZ2h0KDIpO1xyXG4gICAgdGhpcy5fYmJveFRleHQuZHJhdygpO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fc2V0dXAgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cC5jYWxsKHRoaXMsIHApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIEJib3hBbGlnbmVkVGV4dCBpbnN0YW5jZSB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgZHJhd2luZyBhbmQgXHJcbiAgICAvLyByb3RhdGluZyB0ZXh0XHJcbiAgICB0aGlzLl9iYm94VGV4dCA9IG5ldyBCYm94VGV4dCh0aGlzLl9mb250LCB0aGlzLl90ZXh0LCB0aGlzLl9mb250U2l6ZSwgMCwgMCxcclxuICAgICAgICBwKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGluaXRpYWwgc2V0dXAgYnkgdHJpZ2dlcmluZyBhIHJlc2l6ZVxyXG4gICAgdGhpcy5fb25SZXNpemUocCk7XHJcblxyXG4gICAgLy8gRHJhdyB0aGUgc3RhdGlvbmFyeSBsb2dvXHJcbiAgICB0aGlzLl9kcmF3U3RhdGlvbmFyeUxvZ28ocCk7XHJcblxyXG4gICAgLy8gU3RhcnQgdGhlIHNpbiBnZW5lcmF0b3IgYXQgaXRzIG1heCB2YWx1ZVxyXG4gICAgdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yID0gbmV3IFNpbkdlbmVyYXRvcihwLCAwLCAxLCAwLjAyLCBwLlBJLzIpOyBcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2RyYXcgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9kcmF3LmNhbGwodGhpcywgcCk7XHJcbiAgICBpZiAoIXRoaXMuX2lzTW91c2VPdmVyIHx8ICF0aGlzLl9pc092ZXJOYXZMb2dvKSByZXR1cm47XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgdGV4dCBpcyBhYm91dCB0byBiZWNvbWUgYWN0aXZlIGZvciB0aGUgZmlyc3QgdGltZSwgY2xlYXJcclxuICAgIC8vIHRoZSBzdGF0aW9uYXJ5IGxvZ28gdGhhdCB3YXMgcHJldmlvdXNseSBkcmF3bi4gXHJcbiAgICBpZiAodGhpcy5faXNGaXJzdEZyYW1lKSB7XHJcbiAgICAgICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICAgICAgdGhpcy5faXNGaXJzdEZyYW1lID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2ZvbnRTaXplID4gMzApIHtcclxuICAgICAgICB0aGlzLl90aHJlc2hvbGRHZW5lcmF0b3Iuc2V0Qm91bmRzKDAuMiAqIHRoaXMuX2Jib3hUZXh0LmhlaWdodCwgXHJcbiAgICAgICAgICAgIDAuNDcgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQpOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLl90aHJlc2hvbGRHZW5lcmF0b3Iuc2V0Qm91bmRzKDAuMiAqIHRoaXMuX2Jib3hUZXh0LmhlaWdodCwgXHJcbiAgICAgICAgICAgIDAuNiAqIHRoaXMuX2Jib3hUZXh0LmhlaWdodCk7ICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgdmFyIGRpc3RhbmNlVGhyZXNob2xkID0gdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yLmdlbmVyYXRlKCk7XHJcbiAgICBcclxuICAgIHAuYmFja2dyb3VuZCgyNTUsIDEwMCk7XHJcbiAgICBwLnN0cm9rZVdlaWdodCgxKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIHBvaW50MSA9IHRoaXMuX3BvaW50c1tpXTtcclxuICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCB0aGlzLl9wb2ludHMubGVuZ3RoOyBqICs9IDEpIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50MiA9IHRoaXMuX3BvaW50c1tqXTtcclxuICAgICAgICAgICAgdmFyIGRpc3QgPSBwLmRpc3QocG9pbnQxLngsIHBvaW50MS55LCBwb2ludDIueCwgcG9pbnQyLnkpO1xyXG4gICAgICAgICAgICBpZiAoZGlzdCA8IGRpc3RhbmNlVGhyZXNob2xkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcC5ub1N0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgcC5maWxsKFwicmdiYSgxNjUsIDAsIDE3MywgMC4yNSlcIik7XHJcbiAgICAgICAgICAgICAgICBwLmVsbGlwc2UoKHBvaW50MS54ICsgcG9pbnQyLngpIC8gMiwgKHBvaW50MS55ICsgcG9pbnQyLnkpIC8gMixcclxuICAgICAgICAgICAgICAgICAgICBkaXN0LCBkaXN0KTsgIFxyXG5cclxuICAgICAgICAgICAgICAgIHAuc3Ryb2tlKFwicmdiYSgxNjUsIDAsIDE3MywgMC4yNSlcIik7XHJcbiAgICAgICAgICAgICAgICBwLm5vRmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgcC5saW5lKHBvaW50MS54LCBwb2ludDEueSwgcG9pbnQyLngsIHBvaW50Mi55KTsgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xufSx7XCIuLi91dGlsaXRpZXMuanNcIjoxOSxcIi4vYmFzZS1sb2dvLXNrZXRjaC5qc1wiOjUsXCIuL2dlbmVyYXRvcnMvc2luLWdlbmVyYXRvci5qc1wiOjgsXCJwNS1iYm94LWFsaWduZWQtdGV4dFwiOjJ9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgTm9pc2VHZW5lcmF0b3IxRDogTm9pc2VHZW5lcmF0b3IxRCxcclxuICAgIE5vaXNlR2VuZXJhdG9yMkQ6IE5vaXNlR2VuZXJhdG9yMkRcclxufTtcclxuXHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuLi8uLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG4vLyAtLSAxRCBOb2lzZSBHZW5lcmF0b3IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyBmb3IgZ2VuZXJhdGluZyBub2lzZSB2YWx1ZXNcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBwICAgICAgICAgICAgICAgUmVmZXJlbmNlIHRvIGEgcDUgc2tldGNoXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWluPTBdICAgICAgICAgTWluaW11bSB2YWx1ZSBmb3IgdGhlIG5vaXNlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4PTFdICAgICAgICAgTWF4aW11bSB2YWx1ZSBmb3IgdGhlIG5vaXNlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW5jcmVtZW50PTAuMV0gU2NhbGUgb2YgdGhlIG5vaXNlLCB1c2VkIHdoZW4gdXBkYXRpbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXQ9cmFuZG9tXSBBIHZhbHVlIHVzZWQgdG8gZW5zdXJlIG11bHRpcGxlIG5vaXNlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdG9ycyBhcmUgcmV0dXJuaW5nIFwiaW5kZXBlbmRlbnRcIiB2YWx1ZXNcclxuICovXHJcbmZ1bmN0aW9uIE5vaXNlR2VuZXJhdG9yMUQocCwgbWluLCBtYXgsIGluY3JlbWVudCwgb2Zmc2V0KSB7XHJcbiAgICB0aGlzLl9wID0gcDtcclxuICAgIHRoaXMuX21pbiA9IHV0aWxzLmRlZmF1bHQobWluLCAwKTtcclxuICAgIHRoaXMuX21heCA9IHV0aWxzLmRlZmF1bHQobWF4LCAxKTtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoaW5jcmVtZW50LCAwLjEpO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB1dGlscy5kZWZhdWx0KG9mZnNldCwgcC5yYW5kb20oLTEwMDAwMDAsIDEwMDAwMDApKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbWluIGFuZCBtYXggbm9pc2UgdmFsdWVzXHJcbiAqIEBwYXJhbSAge251bWJlcn0gbWluIE1pbmltdW0gbm9pc2UgdmFsdWVcclxuICogQHBhcmFtICB7bnVtYmVyfSBtYXggTWF4aW11bSBub2lzZSB2YWx1ZVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IxRC5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICB0aGlzLl9taW4gPSB1dGlscy5kZWZhdWx0KG1pbiwgdGhpcy5fbWluKTtcclxuICAgIHRoaXMuX21heCA9IHV0aWxzLmRlZmF1bHQobWF4LCB0aGlzLl9tYXgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbm9pc2UgaW5jcmVtZW50IChlLmcuIHNjYWxlKVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGluY3JlbWVudCBOZXcgaW5jcmVtZW50IChzY2FsZSkgdmFsdWVcclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMUQucHJvdG90eXBlLnNldEluY3JlbWVudCA9IGZ1bmN0aW9uIChpbmNyZW1lbnQpIHtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoaW5jcmVtZW50LCB0aGlzLl9pbmNyZW1lbnQpO1xyXG59O1xyXG5cclxuLyoqIFxyXG4gKiBHZW5lcmF0ZSB0aGUgbmV4dCBub2lzZSB2YWx1ZVxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbm9pc3kgdmFsdWUgYmV0d2VlbiBvYmplY3QncyBtaW4gYW5kIG1heFxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IxRC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgIHZhciBuID0gdGhpcy5fcC5ub2lzZSh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBuID0gdGhpcy5fcC5tYXAobiwgMCwgMSwgdGhpcy5fbWluLCB0aGlzLl9tYXgpO1xyXG4gICAgcmV0dXJuIG47XHJcbn07XHJcblxyXG4vKipcclxuICogSW50ZXJuYWwgdXBkYXRlIG1ldGhvZCBmb3IgZ2VuZXJhdGluZyBuZXh0IG5vaXNlIHZhbHVlXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5Ob2lzZUdlbmVyYXRvcjFELnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fcG9zaXRpb24gKz0gdGhpcy5faW5jcmVtZW50O1xyXG59O1xyXG5cclxuXHJcbi8vIC0tIDJEIE5vaXNlIEdlbmVyYXRvciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5mdW5jdGlvbiBOb2lzZUdlbmVyYXRvcjJEKHAsIHhNaW4sIHhNYXgsIHlNaW4sIHlNYXgsIHhJbmNyZW1lbnQsIHlJbmNyZW1lbnQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHhPZmZzZXQsIHlPZmZzZXQpIHtcclxuICAgIHRoaXMuX3hOb2lzZSA9IG5ldyBOb2lzZUdlbmVyYXRvcjFEKHAsIHhNaW4sIHhNYXgsIHhJbmNyZW1lbnQsIHhPZmZzZXQpO1xyXG4gICAgdGhpcy5feU5vaXNlID0gbmV3IE5vaXNlR2VuZXJhdG9yMUQocCwgeU1pbiwgeU1heCwgeUluY3JlbWVudCwgeU9mZnNldCk7XHJcbiAgICB0aGlzLl9wID0gcDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbWluIGFuZCBtYXggbm9pc2UgdmFsdWVzXHJcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCBib3VuZHMgdG8gYmUgdXBkYXRlZCBlLmcuIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgeyB4TWluOiAwLCB4TWF4OiAxLCB5TWluOiAtMSwgeU1heDogMSB9XHJcbiAqL1xyXG5Ob2lzZUdlbmVyYXRvcjJELnByb3RvdHlwZS5zZXRCb3VuZHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgaWYgKCFvcHRpb25zKSByZXR1cm47ICBcclxuICAgIHRoaXMuX3hOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy54TWluLCBvcHRpb25zLnhNYXgpO1xyXG4gICAgdGhpcy5feU5vaXNlLnNldEJvdW5kcyhvcHRpb25zLnlNaW4sIG9wdGlvbnMueU1heCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBpbmNyZW1lbnQgKGUuZy4gc2NhbGUpIGZvciB0aGUgbm9pc2UgZ2VuZXJhdG9yXHJcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCBib3VuZHMgdG8gYmUgdXBkYXRlZCBlLmcuIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgeyB4SW5jcmVtZW50OiAwLjA1LCB5SW5jcmVtZW50OiAwLjEgfVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IyRC5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmICghb3B0aW9ucykgcmV0dXJuO1xyXG4gICAgdGhpcy5feE5vaXNlLnNldEJvdW5kcyhvcHRpb25zLnhJbmNyZW1lbnQpO1xyXG4gICAgdGhpcy5feU5vaXNlLnNldEJvdW5kcyhvcHRpb25zLnlJbmNyZW1lbnQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIHRoZSBuZXh0IHBhaXIgb2Ygbm9pc2UgdmFsdWVzXHJcbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggeCBhbmQgeSBwcm9wZXJ0aWVzIHRoYXQgY29udGFpbiB0aGUgbmV4dCBub2lzZVxyXG4gKiAgICAgICAgICAgICAgICAgIHZhbHVlcyBhbG9uZyBlYWNoIGRpbWVuc2lvblxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IyRC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IHRoaXMuX3hOb2lzZS5nZW5lcmF0ZSgpLFxyXG4gICAgICAgIHk6IHRoaXMuX3lOb2lzZS5nZW5lcmF0ZSgpXHJcbiAgICB9O1xyXG59O1xufSx7XCIuLi8uLi91dGlsaXRpZXMuanNcIjoxOX1dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBTaW5HZW5lcmF0b3I7XHJcblxyXG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi4vLi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyBmb3IgZ2VuZXJhdGluZyB2YWx1ZXMgYWxvbmcgYSBzaW53YXZlXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAcGFyYW0ge29iamVjdH0gcCAgICAgICAgICAgICAgIFJlZmVyZW5jZSB0byBhIHA1IHNrZXRjaFxyXG4gKiBAcGFyYW0ge251bWJlcn0gW21pbj0wXSAgICAgICAgIE1pbmltdW0gdmFsdWUgZm9yIHRoZSBub2lzZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW21heD0xXSAgICAgICAgIE1heGltdW0gdmFsdWUgZm9yIHRoZSBub2lzZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW2luY3JlbWVudD0wLjFdIEluY3JlbWVudCB1c2VkIHdoZW4gdXBkYXRpbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXQ9cmFuZG9tXSBXaGVyZSB0byBzdGFydCBhbG9uZyB0aGUgc2luZXdhdmVcclxuICovXHJcbmZ1bmN0aW9uIFNpbkdlbmVyYXRvcihwLCBtaW4sIG1heCwgYW5nbGVJbmNyZW1lbnQsIHN0YXJ0aW5nQW5nbGUpIHtcclxuICAgIHRoaXMuX3AgPSBwO1xyXG4gICAgdGhpcy5fbWluID0gdXRpbHMuZGVmYXVsdChtaW4sIDApO1xyXG4gICAgdGhpcy5fbWF4ID0gdXRpbHMuZGVmYXVsdChtYXgsIDApO1xyXG4gICAgdGhpcy5faW5jcmVtZW50ID0gdXRpbHMuZGVmYXVsdChhbmdsZUluY3JlbWVudCwgMC4xKTtcclxuICAgIHRoaXMuX2FuZ2xlID0gdXRpbHMuZGVmYXVsdChzdGFydGluZ0FuZ2xlLCBwLnJhbmRvbSgtMTAwMDAwMCwgMTAwMDAwMCkpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBtaW4gYW5kIG1heCB2YWx1ZXNcclxuICogQHBhcmFtICB7bnVtYmVyfSBtaW4gTWluaW11bSB2YWx1ZVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG1heCBNYXhpbXVtIHZhbHVlXHJcbiAqL1xyXG5TaW5HZW5lcmF0b3IucHJvdG90eXBlLnNldEJvdW5kcyA9IGZ1bmN0aW9uIChtaW4sIG1heCkge1xyXG4gICAgdGhpcy5fbWluID0gdXRpbHMuZGVmYXVsdChtaW4sIHRoaXMuX21pbik7XHJcbiAgICB0aGlzLl9tYXggPSB1dGlscy5kZWZhdWx0KG1heCwgdGhpcy5fbWF4KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIGFuZ2xlIGluY3JlbWVudCAoZS5nLiBob3cgZmFzdCB3ZSBtb3ZlIHRocm91Z2ggdGhlIHNpbndhdmUpXHJcbiAqIEBwYXJhbSAge251bWJlcn0gaW5jcmVtZW50IE5ldyBpbmNyZW1lbnQgdmFsdWVcclxuICovXHJcblNpbkdlbmVyYXRvci5wcm90b3R5cGUuc2V0SW5jcmVtZW50ID0gZnVuY3Rpb24gKGluY3JlbWVudCkge1xyXG4gICAgdGhpcy5faW5jcmVtZW50ID0gdXRpbHMuZGVmYXVsdChpbmNyZW1lbnQsIHRoaXMuX2luY3JlbWVudCk7XHJcbn07XHJcblxyXG4vKiogXHJcbiAqIEdlbmVyYXRlIHRoZSBuZXh0IHZhbHVlXHJcbiAqIEByZXR1cm4ge251bWJlcn0gQSB2YWx1ZSBiZXR3ZWVuIGdlbmVyYXRvcnMncyBtaW4gYW5kIG1heFxyXG4gKi9cclxuU2luR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX3VwZGF0ZSgpO1xyXG4gICAgdmFyIG4gPSB0aGlzLl9wLnNpbih0aGlzLl9hbmdsZSk7XHJcbiAgICBuID0gdGhpcy5fcC5tYXAobiwgLTEsIDEsIHRoaXMuX21pbiwgdGhpcy5fbWF4KTtcclxuICAgIHJldHVybiBuO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludGVybmFsIHVwZGF0ZSBtZXRob2QgZm9yIGdlbmVyYXRpbmcgbmV4dCB2YWx1ZVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuU2luR2VuZXJhdG9yLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fYW5nbGUgKz0gdGhpcy5faW5jcmVtZW50O1xyXG59O1xufSx7XCIuLi8uLi91dGlsaXRpZXMuanNcIjoxOX1dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBTa2V0Y2g7XHJcblxyXG52YXIgQmJveFRleHQgPSByZXF1aXJlKFwicDUtYmJveC1hbGlnbmVkLXRleHRcIik7XHJcbnZhciBCYXNlTG9nb1NrZXRjaCA9IHJlcXVpcmUoXCIuL2Jhc2UtbG9nby1za2V0Y2guanNcIik7XHJcblxyXG52YXIgdXRpbHMgPSByZXF1aXJlKFwiLi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuU2tldGNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlKTtcclxuXHJcbmZ1bmN0aW9uIFNrZXRjaCgkbmF2LCAkbmF2TG9nbykge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2guY2FsbCh0aGlzLCAkbmF2LCAkbmF2TG9nbywgXCIuLi9mb250cy9iaWdfam9obi13ZWJmb250LnR0ZlwiKTtcclxufVxyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZS5jYWxsKHRoaXMsIHApO1xyXG4gICAgdGhpcy5fc3BhY2luZyA9IHV0aWxzLm1hcCh0aGlzLl9mb250U2l6ZSwgMjAsIDQwLCAyLCA1LCB7Y2xhbXA6IHRydWUsIFxyXG4gICAgICAgIHJvdW5kOiB0cnVlfSk7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGJib3hUZXh0LCBwbGFjZSBvdmVyIHRoZSBuYXYgdGV4dCBsb2dvIGFuZCB0aGVuIHNoaWZ0IGl0cyBcclxuICAgIC8vIGFuY2hvciBiYWNrIHRvIChjZW50ZXIsIGNlbnRlcikgd2hpbGUgcHJlc2VydmluZyB0aGUgdGV4dCBwb3NpdGlvblxyXG4gICAgdGhpcy5fYmJveFRleHQuc2V0VGV4dCh0aGlzLl90ZXh0KVxyXG4gICAgICAgIC5zZXRUZXh0U2l6ZSh0aGlzLl9mb250U2l6ZSlcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9MRUZULCBCYm94VGV4dC5CQVNFTElORS5BTFBIQUJFVElDKVxyXG4gICAgICAgIC5zZXRQb3NpdGlvbih0aGlzLl90ZXh0T2Zmc2V0LmxlZnQsIHRoaXMuX3RleHRPZmZzZXQudG9wKVxyXG4gICAgICAgIC5zZXRBbmNob3IoQmJveFRleHQuQUxJR04uQk9YX0NFTlRFUiwgQmJveFRleHQuQkFTRUxJTkUuQk9YX0NFTlRFUiwgXHJcbiAgICAgICAgICAgIHRydWUpO1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlQ2lyY2xlcyhwKTtcclxuICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IHRydWU7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3U3RhdGlvbmFyeUxvZ28gPSBmdW5jdGlvbiAocCkge1xyXG4gICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICBwLnN0cm9rZSgyNTUpO1xyXG4gICAgcC5maWxsKFwiIzBBMDAwQVwiKTtcclxuICAgIHAuc3Ryb2tlV2VpZ2h0KDIpO1xyXG4gICAgdGhpcy5fYmJveFRleHQuZHJhdygpO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fc2V0dXAgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cC5jYWxsKHRoaXMsIHApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIEJib3hBbGlnbmVkVGV4dCBpbnN0YW5jZSB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgZHJhd2luZyBhbmQgXHJcbiAgICAvLyByb3RhdGluZyB0ZXh0XHJcbiAgICB0aGlzLl9iYm94VGV4dCA9IG5ldyBCYm94VGV4dCh0aGlzLl9mb250LCB0aGlzLl90ZXh0LCB0aGlzLl9mb250U2l6ZSwgMCwgMCwgXHJcbiAgICAgICAgcCk7XHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBpbml0aWFsIHNldHVwIGJ5IHRyaWdnZXJpbmcgYSByZXNpemVcclxuICAgIHRoaXMuX29uUmVzaXplKHApO1xyXG5cclxuICAgIC8vIERyYXcgdGhlIHN0YXRpb25hcnkgbG9nb1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG5cclxuICAgIHRoaXMuX2NhbGN1bGF0ZUNpcmNsZXMocCk7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9jYWxjdWxhdGVDaXJjbGVzID0gZnVuY3Rpb24gKHApIHtcclxuICAgIC8vIFRPRE86IERvbid0IG5lZWQgQUxMIHRoZSBwaXhlbHMuIFRoaXMgY291bGQgaGF2ZSBhbiBvZmZzY3JlZW4gcmVuZGVyZXJcclxuICAgIC8vIHRoYXQgaXMganVzdCBiaWcgZW5vdWdoIHRvIGZpdCB0aGUgdGV4dC5cclxuICAgIC8vIExvb3Agb3ZlciB0aGUgcGl4ZWxzIGluIHRoZSB0ZXh0J3MgYm91bmRpbmcgYm94IHRvIHNhbXBsZSB0aGUgd29yZFxyXG4gICAgdmFyIGJib3ggPSB0aGlzLl9iYm94VGV4dC5nZXRCYm94KCk7XHJcbiAgICB2YXIgc3RhcnRYID0gTWF0aC5mbG9vcihNYXRoLm1heChiYm94LnggLSA1LCAwKSk7XHJcbiAgICB2YXIgZW5kWCA9IE1hdGguY2VpbChNYXRoLm1pbihiYm94LnggKyBiYm94LncgKyA1LCBwLndpZHRoKSk7XHJcbiAgICB2YXIgc3RhcnRZID0gTWF0aC5mbG9vcihNYXRoLm1heChiYm94LnkgLSA1LCAwKSk7XHJcbiAgICB2YXIgZW5kWSA9IE1hdGguY2VpbChNYXRoLm1pbihiYm94LnkgKyBiYm94LmggKyA1LCBwLmhlaWdodCkpO1xyXG4gICAgcC5sb2FkUGl4ZWxzKCk7XHJcbiAgICBwLnBpeGVsRGVuc2l0eSgxKTtcclxuICAgIHRoaXMuX2NpcmNsZXMgPSBbXTtcclxuICAgIGZvciAodmFyIHkgPSBzdGFydFk7IHkgPCBlbmRZOyB5ICs9IHRoaXMuX3NwYWNpbmcpIHtcclxuICAgICAgICBmb3IgKHZhciB4ID0gc3RhcnRYOyB4IDwgZW5kWDsgeCArPSB0aGlzLl9zcGFjaW5nKSB7ICBcclxuICAgICAgICAgICAgdmFyIGkgPSA0ICogKCh5ICogcC53aWR0aCkgKyB4KTtcclxuICAgICAgICAgICAgdmFyIHIgPSBwLnBpeGVsc1tpXTtcclxuICAgICAgICAgICAgdmFyIGcgPSBwLnBpeGVsc1tpICsgMV07XHJcbiAgICAgICAgICAgIHZhciBiID0gcC5waXhlbHNbaSArIDJdO1xyXG4gICAgICAgICAgICB2YXIgYSA9IHAucGl4ZWxzW2kgKyAzXTtcclxuICAgICAgICAgICAgdmFyIGMgPSBwLmNvbG9yKHIsIGcsIGIsIGEpO1xyXG4gICAgICAgICAgICBpZiAocC5zYXR1cmF0aW9uKGMpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2lyY2xlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB4OiB4ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHkgKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHAuY29sb3IoXCIjMDZGRkZGXCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NpcmNsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogeCArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICB5OiB5ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBwLmNvbG9yKFwiI0ZFMDBGRVwiKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaXJjbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHggKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeSArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogcC5jb2xvcihcIiNGRkZGMDRcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhdyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX2RyYXcuY2FsbCh0aGlzLCBwKTtcclxuICAgIGlmICghdGhpcy5faXNNb3VzZU92ZXIgfHwgIXRoaXMuX2lzT3Zlck5hdkxvZ28pIHJldHVybjtcclxuXHJcbiAgICAvLyBXaGVuIHRoZSB0ZXh0IGlzIGFib3V0IHRvIGJlY29tZSBhY3RpdmUgZm9yIHRoZSBmaXJzdCB0aW1lLCBjbGVhclxyXG4gICAgLy8gdGhlIHN0YXRpb25hcnkgbG9nbyB0aGF0IHdhcyBwcmV2aW91c2x5IGRyYXduLiBcclxuICAgIGlmICh0aGlzLl9pc0ZpcnN0RnJhbWUpIHtcclxuICAgICAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuICAgICAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGVhclxyXG4gICAgcC5ibGVuZE1vZGUocC5CTEVORCk7XHJcbiAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuXHJcbiAgICAvLyBEcmF3IFwiaGFsZnRvbmVcIiBsb2dvXHJcbiAgICBwLm5vU3Ryb2tlKCk7ICAgXHJcbiAgICBwLmJsZW5kTW9kZShwLk1VTFRJUExZKTtcclxuXHJcbiAgICB2YXIgbWF4RGlzdCA9IHRoaXMuX2Jib3hUZXh0LmhhbGZXaWR0aDtcclxuICAgIHZhciBtYXhSYWRpdXMgPSAyICogdGhpcy5fc3BhY2luZztcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2NpcmNsZXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICB2YXIgY2lyY2xlID0gdGhpcy5fY2lyY2xlc1tpXTtcclxuICAgICAgICB2YXIgYyA9IGNpcmNsZS5jb2xvcjtcclxuICAgICAgICB2YXIgZGlzdCA9IHAuZGlzdChjaXJjbGUueCwgY2lyY2xlLnksIHAubW91c2VYLCBwLm1vdXNlWSk7XHJcbiAgICAgICAgdmFyIHJhZGl1cyA9IHV0aWxzLm1hcChkaXN0LCAwLCBtYXhEaXN0LCAxLCBtYXhSYWRpdXMsIHtjbGFtcDogdHJ1ZX0pO1xyXG4gICAgICAgIHAuZmlsbChjKTtcclxuICAgICAgICBwLmVsbGlwc2UoY2lyY2xlLngsIGNpcmNsZS55LCByYWRpdXMsIHJhZGl1cyk7XHJcbiAgICB9XHJcbn07XG59LHtcIi4uL3V0aWxpdGllcy5qc1wiOjE5LFwiLi9iYXNlLWxvZ28tc2tldGNoLmpzXCI6NSxcInA1LWJib3gtYWxpZ25lZC10ZXh0XCI6Mn1dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gU2tldGNoO1xyXG5cclxudmFyIE5vaXNlID0gcmVxdWlyZShcIi4vZ2VuZXJhdG9ycy9ub2lzZS1nZW5lcmF0b3JzLmpzXCIpO1xyXG52YXIgQmJveFRleHQgPSByZXF1aXJlKFwicDUtYmJveC1hbGlnbmVkLXRleHRcIik7XHJcbnZhciBCYXNlTG9nb1NrZXRjaCA9IHJlcXVpcmUoXCIuL2Jhc2UtbG9nby1za2V0Y2guanNcIik7XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUpO1xyXG5cclxuZnVuY3Rpb24gU2tldGNoKCRuYXYsICRuYXZMb2dvKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5jYWxsKHRoaXMsICRuYXYsICRuYXZMb2dvLCBcIi4uL2ZvbnRzL2JpZ19qb2huLXdlYmZvbnQudHRmXCIpO1xyXG59XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplLmNhbGwodGhpcywgcCk7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGJib3hUZXh0LCBwbGFjZSBvdmVyIHRoZSBuYXYgdGV4dCBsb2dvIGFuZCB0aGVuIHNoaWZ0IGl0cyBcclxuICAgIC8vIGFuY2hvciBiYWNrIHRvIChjZW50ZXIsIGNlbnRlcikgd2hpbGUgcHJlc2VydmluZyB0aGUgdGV4dCBwb3NpdGlvblxyXG4gICAgdGhpcy5fYmJveFRleHQuc2V0VGV4dCh0aGlzLl90ZXh0KVxyXG4gICAgICAgIC5zZXRUZXh0U2l6ZSh0aGlzLl9mb250U2l6ZSlcclxuICAgICAgICAuc2V0Um90YXRpb24oMClcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9MRUZULCBCYm94VGV4dC5CQVNFTElORS5BTFBIQUJFVElDKVxyXG4gICAgICAgIC5zZXRQb3NpdGlvbih0aGlzLl90ZXh0T2Zmc2V0LmxlZnQsIHRoaXMuX3RleHRPZmZzZXQudG9wKVxyXG4gICAgICAgIC5zZXRBbmNob3IoQmJveFRleHQuQUxJR04uQk9YX0NFTlRFUiwgQmJveFRleHQuQkFTRUxJTkUuQk9YX0NFTlRFUiwgXHJcbiAgICAgICAgICAgIHRydWUpO1xyXG4gICAgdGhpcy5fdGV4dFBvcyA9IHRoaXMuX2Jib3hUZXh0LmdldFBvc2l0aW9uKCk7XHJcbiAgICB0aGlzLl9kcmF3U3RhdGlvbmFyeUxvZ28ocCk7XHJcbiAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSB0cnVlO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhd1N0YXRpb25hcnlMb2dvID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgcC5zdHJva2UoMjU1KTtcclxuICAgIHAuZmlsbChcIiMwQTAwMEFcIik7XHJcbiAgICBwLnN0cm9rZVdlaWdodCgyKTtcclxuICAgIHRoaXMuX2Jib3hUZXh0LmRyYXcoKTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX3NldHVwID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fc2V0dXAuY2FsbCh0aGlzLCBwKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBCYm94QWxpZ25lZFRleHQgaW5zdGFuY2UgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGRyYXdpbmcgYW5kIFxyXG4gICAgLy8gcm90YXRpbmcgdGV4dFxyXG4gICAgdGhpcy5fYmJveFRleHQgPSBuZXcgQmJveFRleHQodGhpcy5fZm9udCwgdGhpcy5fdGV4dCwgdGhpcy5fZm9udFNpemUsIDAsIDAsIFxyXG4gICAgICAgIHApO1xyXG5cclxuICAgIC8vIEhhbmRsZSB0aGUgaW5pdGlhbCBzZXR1cCBieSB0cmlnZ2VyaW5nIGEgcmVzaXplXHJcbiAgICB0aGlzLl9vblJlc2l6ZShwKTtcclxuXHJcbiAgICAvLyBTZXQgdXAgbm9pc2UgZ2VuZXJhdG9yc1xyXG4gICAgdGhpcy5fcm90YXRpb25Ob2lzZSA9IG5ldyBOb2lzZS5Ob2lzZUdlbmVyYXRvcjFEKHAsIC1wLlBJLzQsIHAuUEkvNCwgMC4wMik7IFxyXG4gICAgdGhpcy5feHlOb2lzZSA9IG5ldyBOb2lzZS5Ob2lzZUdlbmVyYXRvcjJEKHAsIC0xMDAsIDEwMCwgLTUwLCA1MCwgMC4wMSwgXHJcbiAgICAgICAgMC4wMSk7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3ID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fZHJhdy5jYWxsKHRoaXMsIHApO1xyXG4gICAgaWYgKCF0aGlzLl9pc01vdXNlT3ZlciB8fCAhdGhpcy5faXNPdmVyTmF2TG9nbykgcmV0dXJuO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIHRleHQgaXMgYWJvdXQgdG8gYmVjb21lIGFjdGl2ZSBmb3IgdGhlIGZpcnN0IHRpbWUsIGNsZWFyXHJcbiAgICAvLyB0aGUgc3RhdGlvbmFyeSBsb2dvIHRoYXQgd2FzIHByZXZpb3VzbHkgZHJhd24uIFxyXG4gICAgaWYgKHRoaXMuX2lzRmlyc3RGcmFtZSkge1xyXG4gICAgICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBwb3NpdGlvbiBhbmQgcm90YXRpb24gdG8gY3JlYXRlIGEgaml0dGVyeSBsb2dvXHJcbiAgICB2YXIgcm90YXRpb24gPSB0aGlzLl9yb3RhdGlvbk5vaXNlLmdlbmVyYXRlKCk7XHJcbiAgICB2YXIgeHlPZmZzZXQgPSB0aGlzLl94eU5vaXNlLmdlbmVyYXRlKCk7XHJcbiAgICB0aGlzLl9iYm94VGV4dC5zZXRSb3RhdGlvbihyb3RhdGlvbilcclxuICAgICAgICAuc2V0UG9zaXRpb24odGhpcy5fdGV4dFBvcy54ICsgeHlPZmZzZXQueCwgdGhpcy5fdGV4dFBvcy55ICsgeHlPZmZzZXQueSlcclxuICAgICAgICAuZHJhdygpO1xyXG59O1xufSx7XCIuL2Jhc2UtbG9nby1za2V0Y2guanNcIjo1LFwiLi9nZW5lcmF0b3JzL25vaXNlLWdlbmVyYXRvcnMuanNcIjo3LFwicDUtYmJveC1hbGlnbmVkLXRleHRcIjoyfV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBNYWluTmF2O1xyXG5cclxuZnVuY3Rpb24gTWFpbk5hdihsb2FkZXIpIHtcclxuICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcclxuICAgIHRoaXMuXyRsb2dvID0gJChcIm5hdi5uYXZiYXIgLm5hdmJhci1icmFuZFwiKTtcclxuICAgIHRoaXMuXyRuYXYgPSAkKFwiI21haW4tbmF2XCIpO1xyXG4gICAgdGhpcy5fJG5hdkxpbmtzID0gdGhpcy5fJG5hdi5maW5kKFwiYVwiKTtcclxuICAgIHRoaXMuXyRhY3RpdmVOYXYgPSB0aGlzLl8kbmF2TGlua3MuZmluZChcIi5hY3RpdmVcIik7IFxyXG4gICAgdGhpcy5fJG5hdkxpbmtzLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25OYXZDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuXyRsb2dvLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25Mb2dvQ2xpY2suYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcbk1haW5OYXYucHJvdG90eXBlLnNldEFjdGl2ZUZyb21VcmwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9kZWFjdGl2YXRlKCk7XHJcbiAgICB2YXIgdXJsID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICBpZiAodXJsID09PSBcIi9pbmRleC5odG1sXCIgfHwgdXJsID09PSBcIi9cIikge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlTGluayh0aGlzLl8kbmF2TGlua3MuZmlsdGVyKFwiI2Fib3V0LWxpbmtcIikpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodXJsID09PSBcIi93b3JrLmh0bWxcIikgeyAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fYWN0aXZhdGVMaW5rKHRoaXMuXyRuYXZMaW5rcy5maWx0ZXIoXCIjd29yay1saW5rXCIpKTtcclxuICAgIH1cclxufTtcclxuXHJcbk1haW5OYXYucHJvdG90eXBlLl9kZWFjdGl2YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuXyRhY3RpdmVOYXYubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5fJGFjdGl2ZU5hdi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2ID0gJCgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTWFpbk5hdi5wcm90b3R5cGUuX2FjdGl2YXRlTGluayA9IGZ1bmN0aW9uICgkbGluaykge1xyXG4gICAgJGxpbmsuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB0aGlzLl8kYWN0aXZlTmF2ID0gJGxpbms7XHJcbn07XHJcblxyXG5NYWluTmF2LnByb3RvdHlwZS5fb25Mb2dvQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICB2YXIgdXJsID0gJHRhcmdldC5hdHRyKFwiaHJlZlwiKTtcclxuICAgIHRoaXMuX2xvYWRlci5sb2FkUGFnZSh1cmwsIHt9LCB0cnVlKTtcclxufTtcclxuXHJcbk1haW5OYXYucHJvdG90eXBlLl9vbk5hdkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuXyRuYXYuY29sbGFwc2UoXCJoaWRlXCIpOyAvLyBDbG9zZSB0aGUgbmF2IC0gb25seSBtYXR0ZXJzIG9uIG1vYmlsZVxyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBpZiAoJHRhcmdldC5pcyh0aGlzLl8kYWN0aXZlTmF2KSkgcmV0dXJuO1xyXG4gICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xyXG4gICAgdGhpcy5fYWN0aXZhdGVMaW5rKCR0YXJnZXQpO1xyXG4gICAgdmFyIHVybCA9ICR0YXJnZXQuYXR0cihcImhyZWZcIik7XHJcbiAgICB0aGlzLl9sb2FkZXIubG9hZFBhZ2UodXJsLCB7fSwgdHJ1ZSk7ICAgIFxyXG59O1xufSx7fV0sMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIExvYWRlciA9IHJlcXVpcmUoXCIuL3BhZ2UtbG9hZGVyLmpzXCIpO1xyXG52YXIgTWFpbk5hdiA9IHJlcXVpcmUoXCIuL21haW4tbmF2LmpzXCIpO1xyXG52YXIgSG92ZXJTbGlkZXNob3dzID0gcmVxdWlyZShcIi4vaG92ZXItc2xpZGVzaG93LmpzXCIpO1xyXG52YXIgUG9ydGZvbGlvRmlsdGVyID0gcmVxdWlyZShcIi4vcG9ydGZvbGlvLWZpbHRlci5qc1wiKTtcclxudmFyIHNsaWRlc2hvd3MgPSByZXF1aXJlKFwiLi90aHVtYm5haWwtc2xpZGVzaG93L3NsaWRlc2hvdy5qc1wiKTtcclxuXHJcbi8vIFBpY2tpbmcgYSByYW5kb20gc2tldGNoIHRoYXQgdGhlIHVzZXIgaGFzbid0IHNlZW4gYmVmb3JlXHJcbnZhciBTa2V0Y2ggPSByZXF1aXJlKFwiLi9waWNrLXJhbmRvbS1za2V0Y2guanNcIikoKTtcclxuXHJcbi8vIEFKQVggcGFnZSBsb2FkZXIsIHdpdGggY2FsbGJhY2sgZm9yIHJlbG9hZGluZyB3aWRnZXRzXHJcbnZhciBsb2FkZXIgPSBuZXcgTG9hZGVyKG9uUGFnZUxvYWQpO1xyXG5cclxuLy8gTWFpbiBuYXYgd2lkZ2V0XHJcbnZhciBtYWluTmF2ID0gbmV3IE1haW5OYXYobG9hZGVyKTtcclxuXHJcbi8vIEludGVyYWN0aXZlIGxvZ28gaW4gbmF2YmFyXHJcbnZhciBuYXYgPSAkKFwibmF2Lm5hdmJhclwiKTtcclxudmFyIG5hdkxvZ28gPSBuYXYuZmluZChcIi5uYXZiYXItYnJhbmRcIik7XHJcbnZhciBza2V0Y2ggPSBuZXcgU2tldGNoKG5hdiwgbmF2TG9nbyk7XHJcblxyXG4vLyBXaWRnZXQgZ2xvYmFsc1xyXG52YXIgaG92ZXJTbGlkZXNob3dzLCBwb3J0Zm9saW9GaWx0ZXI7XHJcblxyXG4vLyBMb2FkIGFsbCB3aWRnZXRzXHJcbm9uUGFnZUxvYWQoKTtcclxuXHJcbi8vIEhhbmRsZSBiYWNrL2ZvcndhcmQgYnV0dG9uc1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIG9uUG9wU3RhdGUpO1xyXG5cclxuZnVuY3Rpb24gb25Qb3BTdGF0ZShlKSB7XHJcbiAgICAvLyBMb2FkZXIgc3RvcmVzIGN1c3RvbSBkYXRhIGluIHRoZSBzdGF0ZSAtIGluY2x1ZGluZyB0aGUgdXJsIGFuZCB0aGUgcXVlcnlcclxuICAgIHZhciB1cmwgPSAoZS5zdGF0ZSAmJiBlLnN0YXRlLnVybCkgfHwgXCIvaW5kZXguaHRtbFwiO1xyXG4gICAgdmFyIHF1ZXJ5T2JqZWN0ID0gKGUuc3RhdGUgJiYgZS5zdGF0ZS5xdWVyeSkgfHwge307XHJcblxyXG4gICAgaWYgKCh1cmwgPT09IGxvYWRlci5nZXRMb2FkZWRQYXRoKCkpICYmICh1cmwgPT09IFwiL3dvcmsuaHRtbFwiKSkge1xyXG4gICAgICAgIC8vIFRoZSBjdXJyZW50ICYgcHJldmlvdXMgbG9hZGVkIHN0YXRlcyB3ZXJlIHdvcmsuaHRtbCwgc28ganVzdCByZWZpbHRlclxyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IHF1ZXJ5T2JqZWN0LmNhdGVnb3J5IHx8IFwiYWxsXCI7XHJcbiAgICAgICAgcG9ydGZvbGlvRmlsdGVyLnNlbGVjdENhdGVnb3J5KGNhdGVnb3J5KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTG9hZCB0aGUgbmV3IHBhZ2VcclxuICAgICAgICBsb2FkZXIubG9hZFBhZ2UodXJsLCB7fSwgZmFsc2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblBhZ2VMb2FkKCkge1xyXG4gICAgLy8gUmVsb2FkIGFsbCBwbHVnaW5zL3dpZGdldHNcclxuICAgIGhvdmVyU2xpZGVzaG93cyA9IG5ldyBIb3ZlclNsaWRlc2hvd3MoKTtcclxuICAgIHBvcnRmb2xpb0ZpbHRlciA9IG5ldyBQb3J0Zm9saW9GaWx0ZXIobG9hZGVyKTtcclxuICAgIHNsaWRlc2hvd3MuaW5pdCgpO1xyXG4gICAgb2JqZWN0Rml0SW1hZ2VzKCk7XHJcbiAgICBzbWFydHF1b3RlcygpO1xyXG5cclxuICAgIC8vIFNsaWdodGx5IHJlZHVuZGFudCwgYnV0IHVwZGF0ZSB0aGUgbWFpbiBuYXYgdXNpbmcgdGhlIGN1cnJlbnQgVVJMLiBUaGlzXHJcbiAgICAvLyBpcyBpbXBvcnRhbnQgaWYgYSBwYWdlIGlzIGxvYWRlZCBieSB0eXBpbmcgYSBmdWxsIFVSTCAoZS5nLiBnb2luZ1xyXG4gICAgLy8gZGlyZWN0bHkgdG8gL3dvcmsuaHRtbCkgb3Igd2hlbiBtb3ZpbmcgZnJvbSB3b3JrLmh0bWwgdG8gYSBwcm9qZWN0LiBcclxuICAgIG1haW5OYXYuc2V0QWN0aXZlRnJvbVVybCgpO1xyXG59XHJcblxyXG4vLyBXZSd2ZSBoaXQgdGhlIGxhbmRpbmcgcGFnZSwgbG9hZCB0aGUgYWJvdXQgcGFnZVxyXG4vLyBpZiAobG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL14oXFwvfFxcL2luZGV4Lmh0bWx8aW5kZXguaHRtbCkkLykpIHtcclxuLy8gICAgIGxvYWRlci5sb2FkUGFnZShcIi9hYm91dC5odG1sXCIsIHt9LCBmYWxzZSk7XHJcbi8vIH1cbn0se1wiLi9ob3Zlci1zbGlkZXNob3cuanNcIjo0LFwiLi9tYWluLW5hdi5qc1wiOjExLFwiLi9wYWdlLWxvYWRlci5qc1wiOjEzLFwiLi9waWNrLXJhbmRvbS1za2V0Y2guanNcIjoxNCxcIi4vcG9ydGZvbGlvLWZpbHRlci5qc1wiOjE1LFwiLi90aHVtYm5haWwtc2xpZGVzaG93L3NsaWRlc2hvdy5qc1wiOjE3fV0sMTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBMb2FkZXI7XHJcblxyXG52YXIgdXRpbGl0aWVzID0gcmVxdWlyZShcIi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxuZnVuY3Rpb24gTG9hZGVyKG9uUmVsb2FkLCBmYWRlRHVyYXRpb24pIHtcclxuICAgIHRoaXMuXyRjb250ZW50ID0gJChcIiNjb250ZW50XCIpO1xyXG4gICAgdGhpcy5fb25SZWxvYWQgPSBvblJlbG9hZDtcclxuICAgIHRoaXMuX2ZhZGVEdXJhdGlvbiA9IChmYWRlRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgPyBmYWRlRHVyYXRpb24gOiAyNTA7XHJcbiAgICB0aGlzLl9wYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbn1cclxuXHJcbkxvYWRlci5wcm90b3R5cGUuZ2V0TG9hZGVkUGF0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wYXRoO1xyXG59O1xyXG5cclxuTG9hZGVyLnByb3RvdHlwZS5sb2FkUGFnZSA9IGZ1bmN0aW9uICh1cmwsIHF1ZXJ5T2JqZWN0LCBzaG91bGRQdXNoSGlzdG9yeSkge1xyXG4gICAgLy8gRmFkZSB0aGVuIGVtcHR5IHRoZSBjdXJyZW50IGNvbnRlbnRzXHJcbiAgICB0aGlzLl8kY29udGVudC52ZWxvY2l0eSh7IG9wYWNpdHk6IDAgfSwgdGhpcy5fZmFkZUR1cmF0aW9uLCBcInN3aW5nXCIsXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuXyRjb250ZW50LmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5fJGNvbnRlbnQubG9hZCh1cmwgKyBcIiAjY29udGVudFwiLCBvbkNvbnRlbnRGZXRjaGVkLmJpbmQodGhpcykpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBGYWRlIHRoZSBuZXcgY29udGVudCBpbiBhZnRlciBpdCBoYXMgYmVlbiBmZXRjaGVkXHJcbiAgICBmdW5jdGlvbiBvbkNvbnRlbnRGZXRjaGVkKHJlc3BvbnNlVGV4dCwgdGV4dFN0YXR1cywganFYaHIpIHtcclxuICAgICAgICBpZiAodGV4dFN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBwYWdlLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gdXRpbGl0aWVzLmNyZWF0ZVF1ZXJ5U3RyaW5nKHF1ZXJ5T2JqZWN0KTtcclxuICAgICAgICBpZiAoc2hvdWxkUHVzaEhpc3RvcnkpIHtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlPYmplY3RcclxuICAgICAgICAgICAgfSwgbnVsbCwgdXJsICsgcXVlcnlTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIEdvb2dsZSBhbmFseXRpY3NcclxuICAgICAgICBnYShcInNldFwiLCBcInBhZ2VcIiwgdXJsICsgcXVlcnlTdHJpbmcpO1xyXG4gICAgICAgIGdhKFwic2VuZFwiLCBcInBhZ2V2aWV3XCIpO1xyXG5cclxuICAgICAgICB0aGlzLl9wYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgdGhpcy5fJGNvbnRlbnQudmVsb2NpdHkoeyBvcGFjaXR5OiAxIH0sIHRoaXMuX2ZhZGVEdXJhdGlvbiwgXHJcbiAgICAgICAgICAgIFwic3dpbmdcIik7XHJcbiAgICAgICAgdGhpcy5fb25SZWxvYWQoKTtcclxuICAgIH1cclxufTtcbn0se1wiLi91dGlsaXRpZXMuanNcIjoxOX1dLDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBjb29raWVzID0gcmVxdWlyZShcImpzLWNvb2tpZVwiKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxudmFyIHNrZXRjaENvbnN0cnVjdG9ycyA9IHtcclxuICAgIFwiaGFsZnRvbmUtZmxhc2hsaWdodFwiOiBcclxuICAgICAgICByZXF1aXJlKFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9oYWxmdG9uZS1mbGFzaGxpZ2h0LXdvcmQuanNcIiksXHJcbiAgICBcIm5vaXN5LXdvcmRcIjpcclxuICAgICAgICByZXF1aXJlKFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9ub2lzeS13b3JkLXNrZXRjaC5qc1wiKSxcclxuICAgIFwiY29ubmVjdC1wb2ludHNcIjpcclxuICAgICAgICByZXF1aXJlKFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9jb25uZWN0LXBvaW50cy1za2V0Y2guanNcIilcclxufTtcclxudmFyIG51bVNrZXRjaGVzID0gT2JqZWN0LmtleXMoc2tldGNoQ29uc3RydWN0b3JzKS5sZW5ndGg7XHJcbnZhciBjb29raWVLZXkgPSBcInNlZW4tc2tldGNoLW5hbWVzXCI7XHJcblxyXG4vKipcclxuICogUGljayBhIHJhbmRvbSBza2V0Y2ggdGhhdCB1c2VyIGhhc24ndCBzZWVuIHlldC4gSWYgdGhlIHVzZXIgaGFzIHNlZW4gYWxsIHRoZVxyXG4gKiBza2V0Y2hlcywganVzdCBwaWNrIGEgcmFuZG9tIG9uZS4gVGhpcyB1c2VzIGNvb2tpZXMgdG8gdHJhY2sgd2hhdCB0aGUgdXNlciBcclxuICogaGFzIHNlZW4gYWxyZWFkeS5cclxuICogQHJldHVybiB7RnVuY3Rpb259IENvbnN0cnVjdG9yIGZvciBhIFNrZXRjaCBjbGFzc1xyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwaWNrUmFuZG9tU2tldGNoKCkge1xyXG4gICAgdmFyIHNlZW5Ta2V0Y2hOYW1lcyA9IGNvb2tpZXMuZ2V0SlNPTihjb29raWVLZXkpIHx8IFtdO1xyXG5cclxuICAgIC8vIEZpbmQgdGhlIG5hbWVzIG9mIHRoZSB1bnNlZW4gc2tldGNoZXNcclxuICAgIHZhciB1bnNlZW5Ta2V0Y2hOYW1lcyA9IGZpbmRVbnNlZW5Ta2V0Y2hlcyhzZWVuU2tldGNoTmFtZXMpO1xyXG5cclxuICAgIC8vIEFsbCBza2V0Y2hlcyBoYXZlIGJlZW4gc2VlblxyXG4gICAgaWYgKHVuc2VlblNrZXRjaE5hbWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIC8vIElmIHdlJ3ZlIGdvdCBtb3JlIHRoZW4gb25lIHNrZXRjaCwgdGhlbiBtYWtlIHN1cmUgdG8gY2hvb3NlIGEgcmFuZG9tXHJcbiAgICAgICAgLy8gc2tldGNoIGV4Y2x1ZGluZyB0aGUgbW9zdCByZWNlbnRseSBzZWVuIHNrZXRjaFxyXG4gICAgICAgIGlmIChudW1Ta2V0Y2hlcyA+IDEpIHtcclxuICAgICAgICAgICAgc2VlblNrZXRjaE5hbWVzID0gW3NlZW5Ta2V0Y2hOYW1lcy5wb3AoKV07XHJcbiAgICAgICAgICAgIHVuc2VlblNrZXRjaE5hbWVzID0gZmluZFVuc2VlblNrZXRjaGVzKHNlZW5Ta2V0Y2hOYW1lcyk7XHJcbiAgICAgICAgfSBcclxuICAgICAgICAvLyBJZiB3ZSd2ZSBvbmx5IGdvdCBvbmUgc2tldGNoLCB0aGVuIHdlIGNhbid0IGRvIG11Y2guLi5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VlblNrZXRjaE5hbWVzID0gW107XHJcbiAgICAgICAgICAgIHVuc2VlblNrZXRjaE5hbWVzID0gT2JqZWN0LmtleXMoc2tldGNoQ29uc3RydWN0b3JzKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJhbmRTa2V0Y2hOYW1lID0gdXRpbHMucmFuZEFycmF5RWxlbWVudCh1bnNlZW5Ta2V0Y2hOYW1lcyk7XHJcbiAgICBzZWVuU2tldGNoTmFtZXMucHVzaChyYW5kU2tldGNoTmFtZSk7XHJcblxyXG4gICAgLy8gU3RvcmUgdGhlIGdlbmVyYXRlZCBza2V0Y2ggaW4gYSBjb29raWUuIFRoaXMgY3JlYXRlcyBhIG1vdmluZyA3IGRheVxyXG4gICAgLy8gd2luZG93IC0gYW55dGltZSB0aGUgc2l0ZSBpcyB2aXNpdGVkLCB0aGUgY29va2llIGlzIHJlZnJlc2hlZC5cclxuICAgIGNvb2tpZXMuc2V0KGNvb2tpZUtleSwgc2VlblNrZXRjaE5hbWVzLCB7IGV4cGlyZXM6IDcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNrZXRjaENvbnN0cnVjdG9yc1tyYW5kU2tldGNoTmFtZV07XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmaW5kVW5zZWVuU2tldGNoZXMoc2VlblNrZXRjaE5hbWVzKSB7XHJcbiAgICB2YXIgdW5zZWVuU2tldGNoTmFtZXMgPSBbXTtcclxuICAgIGZvciAodmFyIHNrZXRjaE5hbWUgaW4gc2tldGNoQ29uc3RydWN0b3JzKSB7XHJcbiAgICAgICAgaWYgKHNlZW5Ta2V0Y2hOYW1lcy5pbmRleE9mKHNrZXRjaE5hbWUpID09PSAtMSkge1xyXG4gICAgICAgICAgICB1bnNlZW5Ta2V0Y2hOYW1lcy5wdXNoKHNrZXRjaE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1bnNlZW5Ta2V0Y2hOYW1lcztcclxufVxufSx7XCIuL2ludGVyYWN0aXZlLWxvZ29zL2Nvbm5lY3QtcG9pbnRzLXNrZXRjaC5qc1wiOjYsXCIuL2ludGVyYWN0aXZlLWxvZ29zL2hhbGZ0b25lLWZsYXNobGlnaHQtd29yZC5qc1wiOjksXCIuL2ludGVyYWN0aXZlLWxvZ29zL25vaXN5LXdvcmQtc2tldGNoLmpzXCI6MTAsXCIuL3V0aWxpdGllcy5qc1wiOjE5LFwianMtY29va2llXCI6MX1dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gUG9ydGZvbGlvRmlsdGVyO1xyXG5cclxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoXCIuL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbnZhciBkZWZhdWx0QnJlYWtwb2ludHMgPSBbXHJcbiAgICB7IHdpZHRoOiAxMjAwLCBjb2xzOiAzLCBzcGFjaW5nOiAxNSB9LFxyXG4gICAgeyB3aWR0aDogOTkyLCBjb2xzOiAzLCBzcGFjaW5nOiAxNSB9LFxyXG4gICAgeyB3aWR0aDogNzAwLCBjb2xzOiAzLCBzcGFjaW5nOiAxNSB9LFxyXG4gICAgeyB3aWR0aDogNjAwLCBjb2xzOiAyLCBzcGFjaW5nOiAxMCB9LFxyXG4gICAgeyB3aWR0aDogNDgwLCBjb2xzOiAyLCBzcGFjaW5nOiAxMCB9LFxyXG4gICAgeyB3aWR0aDogMzIwLCBjb2xzOiAxLCBzcGFjaW5nOiAxMCB9XHJcbl07XHJcblxyXG5mdW5jdGlvbiBQb3J0Zm9saW9GaWx0ZXIobG9hZGVyLCBicmVha3BvaW50cywgYXNwZWN0UmF0aW8sIHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xyXG4gICAgdGhpcy5fZ3JpZFNwYWNpbmcgPSAwO1xyXG4gICAgdGhpcy5fYXNwZWN0UmF0aW8gPSAoYXNwZWN0UmF0aW8gIT09IHVuZGVmaW5lZCkgPyBhc3BlY3RSYXRpbyA6ICgxNi85KTtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9ICh0cmFuc2l0aW9uRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgPyBcclxuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24gOiA4MDA7XHJcbiAgICB0aGlzLl9icmVha3BvaW50cyA9IChicmVha3BvaW50cyAhPT0gdW5kZWZpbmVkKSA/IFxyXG4gICAgICAgIGJyZWFrcG9pbnRzLnNsaWNlKCkgOiBkZWZhdWx0QnJlYWtwb2ludHMuc2xpY2UoKTtcclxuICAgIHRoaXMuXyRncmlkID0gJChcIiNwb3J0Zm9saW8tZ3JpZFwiKTtcclxuICAgIHRoaXMuXyRuYXYgPSAkKFwiI3BvcnRmb2xpby1uYXZcIik7XHJcbiAgICB0aGlzLl8kcHJvamVjdHMgPSBbXTtcclxuICAgIHRoaXMuXyRjYXRlZ29yaWVzID0ge307XHJcbiAgICB0aGlzLl9yb3dzID0gMDtcclxuICAgIHRoaXMuX2NvbHMgPSAwO1xyXG4gICAgdGhpcy5faW1hZ2VIZWlnaHQgPSAwO1xyXG4gICAgdGhpcy5faW1hZ2VXaWR0aCA9IDA7XHJcblxyXG4gICAgLy8gU29ydCB0aGUgYnJlYWtwb2ludHMgaW4gZGVzY2VuZGluZyBvcmRlclxyXG4gICAgdGhpcy5fYnJlYWtwb2ludHMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgaWYgKGEud2lkdGggPCBiLndpZHRoKSByZXR1cm4gLTE7XHJcbiAgICAgICAgZWxzZSBpZiAoYS53aWR0aCA+IGIud2lkdGgpIHJldHVybiAxO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYWNoZVByb2plY3RzKCk7XHJcbiAgICB0aGlzLl9jcmVhdGVHcmlkKCk7XHJcblxyXG4gICAgdGhpcy5fJGdyaWQuZmluZChcIi5wcm9qZWN0IGFcIikub24oXCJjbGlja1wiLCB0aGlzLl9vblByb2plY3RDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB2YXIgcXMgPSB1dGlsaXRpZXMuZ2V0UXVlcnlQYXJhbWV0ZXJzKCk7XHJcbiAgICB2YXIgaW5pdGlhbENhdGVnb3J5ID0gcXMuY2F0ZWdvcnkgfHwgXCJhbGxcIjtcclxuICAgIHZhciBjYXRlZ29yeSA9IGluaXRpYWxDYXRlZ29yeS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0gPSB0aGlzLl8kbmF2LmZpbmQoXCJhW2RhdGEtY2F0ZWdvcnk9XCIgKyBjYXRlZ29yeSArIFwiXVwiKTtcclxuICAgIHRoaXMuXyRhY3RpdmVOYXZJdGVtLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fZmlsdGVyUHJvamVjdHMoY2F0ZWdvcnkpO1xyXG4gICAgJChcIiNwb3J0Zm9saW8tbmF2IGFcIikub24oXCJjbGlja1wiLCB0aGlzLl9vbk5hdkNsaWNrLmJpbmQodGhpcykpO1xyXG5cclxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCB0aGlzLl9jcmVhdGVHcmlkLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLnNlbGVjdENhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgICBjYXRlZ29yeSA9IChjYXRlZ29yeSAmJiBjYXRlZ29yeS50b0xvd2VyQ2FzZSgpKSB8fCBcImFsbFwiO1xyXG4gICAgdmFyICRzZWxlY3RlZE5hdiA9IHRoaXMuXyRuYXYuZmluZChcImFbZGF0YS1jYXRlZ29yeT1cIiArIGNhdGVnb3J5ICsgXCJdXCIpO1xyXG4gICAgaWYgKCRzZWxlY3RlZE5hdi5sZW5ndGggJiYgISRzZWxlY3RlZE5hdi5pcyh0aGlzLl8kYWN0aXZlTmF2SXRlbSkpIHtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbSA9ICRzZWxlY3RlZE5hdjtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl9maWx0ZXJQcm9qZWN0cyhjYXRlZ29yeSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9maWx0ZXJQcm9qZWN0cyA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgdmFyICRzZWxlY3RlZEVsZW1lbnRzID0gdGhpcy5fZ2V0UHJvamVjdHNJbkNhdGVnb3J5KGNhdGVnb3J5KTtcclxuXHJcbiAgICAvLyBBbmltYXRlIHRoZSBncmlkIHRvIHRoZSBjb3JyZWN0IGhlaWdodCB0byBjb250YWluIHRoZSByb3dzXHJcbiAgICB0aGlzLl9hbmltYXRlR3JpZEhlaWdodCgkc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIHByb2plY3RzXHJcbiAgICB0aGlzLl8kcHJvamVjdHMuZm9yRWFjaChmdW5jdGlvbiAoJGVsZW1lbnQpIHtcclxuICAgICAgICAvLyBTdG9wIGFsbCBhbmltYXRpb25zXHJcbiAgICAgICAgJGVsZW1lbnQudmVsb2NpdHkoXCJzdG9wXCIpO1xyXG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgaXMgbm90IHNlbGVjdGVkOiBkcm9wIHotaW5kZXggJiBhbmltYXRlIG9wYWNpdHkgLT4gaGlkZVxyXG4gICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gJHNlbGVjdGVkRWxlbWVudHMuaW5kZXhPZigkZWxlbWVudCk7IFxyXG4gICAgICAgIGlmIChzZWxlY3RlZEluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3MoXCJ6SW5kZXhcIiwgLTEpO1xyXG4gICAgICAgICAgICAkZWxlbWVudC52ZWxvY2l0eSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiwgXCJlYXNlSW5PdXRDdWJpY1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBhbiBlbGVtZW50IGlzIHNlbGVjdGVkOiBzaG93ICYgYnVtcCB6LWluZGV4ICYgYW5pbWF0ZSB0byBwb3NpdGlvbiBcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJGVsZW1lbnQuc2hvdygpO1xyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3MoXCJ6SW5kZXhcIiwgMCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdQb3MgPSB0aGlzLl9pbmRleFRvWFkoc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgICAgICRlbGVtZW50LnZlbG9jaXR5KHsgXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgdG9wOiBuZXdQb3MueSArIFwicHhcIixcclxuICAgICAgICAgICAgICAgIGxlZnQ6IG5ld1Bvcy54ICsgXCJweFwiXHJcbiAgICAgICAgICAgIH0sIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiwgXCJlYXNlSW5PdXRDdWJpY1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fYW5pbWF0ZUdyaWRIZWlnaHQgPSBmdW5jdGlvbiAobnVtRWxlbWVudHMpIHtcclxuICAgIHRoaXMuXyRncmlkLnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgIHZhciBjdXJSb3dzID0gTWF0aC5jZWlsKG51bUVsZW1lbnRzIC8gdGhpcy5fY29scyk7XHJcbiAgICB0aGlzLl8kZ3JpZC52ZWxvY2l0eSh7XHJcbiAgICAgICAgaGVpZ2h0OiB0aGlzLl9pbWFnZUhlaWdodCAqIGN1clJvd3MgKyBcclxuICAgICAgICAgICAgdGhpcy5fZ3JpZFNwYWNpbmcgKiAoY3VyUm93cyAtIDEpICsgXCJweFwiXHJcbiAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24pO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fZ2V0UHJvamVjdHNJbkNhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgICBpZiAoY2F0ZWdvcnkgPT09IFwiYWxsXCIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fJHByb2plY3RzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuXyRjYXRlZ29yaWVzW2NhdGVnb3J5XSB8fCBbXSk7XHJcbiAgICB9ICAgICAgICBcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2NhY2hlUHJvamVjdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl8kcHJvamVjdHMgPSBbXTtcclxuICAgIHRoaXMuXyRjYXRlZ29yaWVzID0ge307XHJcbiAgICB0aGlzLl8kZ3JpZC5maW5kKFwiLnByb2plY3RcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuXyRwcm9qZWN0cy5wdXNoKCRlbGVtZW50KTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlOYW1lcyA9ICRlbGVtZW50LmRhdGEoXCJjYXRlZ29yaWVzXCIpLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhdGVnb3J5TmFtZXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gJC50cmltKGNhdGVnb3J5TmFtZXNbaV0pLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fJGNhdGVnb3JpZXNbY2F0ZWdvcnldKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kY2F0ZWdvcmllc1tjYXRlZ29yeV0gPSBbJGVsZW1lbnRdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGNhdGVnb3JpZXNbY2F0ZWdvcnldLnB1c2goJGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcbi8vIFBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2NhbGN1bGF0ZUdyaWQgPSBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICB2YXIgZ3JpZFdpZHRoID0gdGhpcy5fJGdyaWQuaW5uZXJXaWR0aCgpO1xyXG4vLyAgICAgdGhpcy5fY29scyA9IE1hdGguZmxvb3IoKGdyaWRXaWR0aCArIHRoaXMuX2dyaWRTcGFjaW5nKSAvIFxyXG4vLyAgICAgICAgICh0aGlzLl9taW5JbWFnZVdpZHRoICsgdGhpcy5fZ3JpZFNwYWNpbmcpKTtcclxuLy8gICAgIHRoaXMuX3Jvd3MgPSBNYXRoLmNlaWwodGhpcy5fJHByb2plY3RzLmxlbmd0aCAvIHRoaXMuX2NvbHMpO1xyXG4vLyAgICAgdGhpcy5faW1hZ2VXaWR0aCA9IChncmlkV2lkdGggLSAoKHRoaXMuX2NvbHMgLSAxKSAqIHRoaXMuX2dyaWRTcGFjaW5nKSkgLyBcclxuLy8gICAgICAgICB0aGlzLl9jb2xzO1xyXG4vLyAgICAgdGhpcy5faW1hZ2VIZWlnaHQgPSB0aGlzLl9pbWFnZVdpZHRoICogKDEgLyB0aGlzLl9hc3BlY3RSYXRpbyk7XHJcbi8vIH07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jYWxjdWxhdGVHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGdyaWRXaWR0aCA9IHRoaXMuXyRncmlkLmlubmVyV2lkdGgoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYnJlYWtwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAoZ3JpZFdpZHRoIDw9IHRoaXMuX2JyZWFrcG9pbnRzW2ldLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbHMgPSB0aGlzLl9icmVha3BvaW50c1tpXS5jb2xzO1xyXG4gICAgICAgICAgICB0aGlzLl9ncmlkU3BhY2luZyA9IHRoaXMuX2JyZWFrcG9pbnRzW2ldLnNwYWNpbmc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3Jvd3MgPSBNYXRoLmNlaWwodGhpcy5fJHByb2plY3RzLmxlbmd0aCAvIHRoaXMuX2NvbHMpO1xyXG4gICAgdGhpcy5faW1hZ2VXaWR0aCA9IChncmlkV2lkdGggLSAoKHRoaXMuX2NvbHMgLSAxKSAqIHRoaXMuX2dyaWRTcGFjaW5nKSkgLyBcclxuICAgICAgICB0aGlzLl9jb2xzO1xyXG4gICAgdGhpcy5faW1hZ2VIZWlnaHQgPSB0aGlzLl9pbWFnZVdpZHRoICogKDEgLyB0aGlzLl9hc3BlY3RSYXRpbyk7XHJcbn07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jcmVhdGVHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlR3JpZCgpO1xyXG5cclxuICAgIHRoaXMuXyRncmlkLmNzcyhcInBvc2l0aW9uXCIsIFwicmVsYXRpdmVcIik7XHJcbiAgICB0aGlzLl8kZ3JpZC5jc3Moe1xyXG4gICAgICAgIGhlaWdodDogdGhpcy5faW1hZ2VIZWlnaHQgKiB0aGlzLl9yb3dzICsgXHJcbiAgICAgICAgICAgIHRoaXMuX2dyaWRTcGFjaW5nICogKHRoaXMuX3Jvd3MgLSAxKSArIFwicHhcIlxyXG4gICAgfSk7ICAgIFxyXG5cclxuICAgIHRoaXMuXyRwcm9qZWN0cy5mb3JFYWNoKGZ1bmN0aW9uICgkZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgICB2YXIgcG9zID0gdGhpcy5faW5kZXhUb1hZKGluZGV4KTtcclxuICAgICAgICAkZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICB0b3A6IHBvcy55ICsgXCJweFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBwb3MueCArIFwicHhcIixcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuX2ltYWdlV2lkdGggKyBcInB4XCIsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5faW1hZ2VIZWlnaHQgKyBcInB4XCJcclxuICAgICAgICB9KTtcclxuICAgIH0uYmluZCh0aGlzKSk7ICAgIFxyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fb25OYXZDbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgaWYgKCR0YXJnZXQuaXModGhpcy5fJGFjdGl2ZU5hdkl0ZW0pKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5fJGFjdGl2ZU5hdkl0ZW0ubGVuZ3RoKSB0aGlzLl8kYWN0aXZlTmF2SXRlbS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICR0YXJnZXQuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbSA9ICR0YXJnZXQ7XHJcbiAgICB2YXIgY2F0ZWdvcnkgPSAkdGFyZ2V0LmRhdGEoXCJjYXRlZ29yeVwiKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGhpc3RvcnkucHVzaFN0YXRlKHtcclxuICAgICAgICB1cmw6IFwiL3dvcmsuaHRtbFwiLFxyXG4gICAgICAgIHF1ZXJ5OiB7IGNhdGVnb3J5OiBjYXRlZ29yeSB9XHJcbiAgICB9LCBudWxsLCBcIi93b3JrLmh0bWw/Y2F0ZWdvcnk9XCIgKyBjYXRlZ29yeSk7XHJcblxyXG4gICAgdGhpcy5fZmlsdGVyUHJvamVjdHMoY2F0ZWdvcnkpO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fb25Qcm9qZWN0Q2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICB2YXIgcHJvamVjdE5hbWUgPSAkdGFyZ2V0LmRhdGEoXCJuYW1lXCIpO1xyXG4gICAgdmFyIHVybCA9IFwiL3Byb2plY3RzL1wiICsgcHJvamVjdE5hbWUgKyBcIi5odG1sXCI7XHJcbiAgICB0aGlzLl9sb2FkZXIubG9hZFBhZ2UodXJsLCB7fSwgdHJ1ZSk7XHJcbn07XHJcblxyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5faW5kZXhUb1hZID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICB2YXIgciA9IE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLl9jb2xzKTtcclxuICAgIHZhciBjID0gaW5kZXggJSB0aGlzLl9jb2xzOyBcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogYyAqIHRoaXMuX2ltYWdlV2lkdGggKyBjICogdGhpcy5fZ3JpZFNwYWNpbmcsXHJcbiAgICAgICAgeTogciAqIHRoaXMuX2ltYWdlSGVpZ2h0ICsgciAqIHRoaXMuX2dyaWRTcGFjaW5nXHJcbiAgICB9O1xyXG59O1xufSx7XCIuL3V0aWxpdGllcy5qc1wiOjE5fV0sMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xubW9kdWxlLmV4cG9ydHMgPSBTbGlkZXNob3dNb2RhbDtcclxuXHJcbnZhciBLRVlfQ09ERVMgPSB7XHJcbiAgICBMRUZUX0FSUk9XOiAzNyxcclxuICAgIFJJR0hUX0FSUk9XOiAzOSxcclxuICAgIEVTQ0FQRTogMjdcclxufTtcclxuXHJcbmZ1bmN0aW9uIFNsaWRlc2hvd01vZGFsKCRjb250YWluZXIsIHNsaWRlc2hvdykge1xyXG4gICAgdGhpcy5fc2xpZGVzaG93ID0gc2xpZGVzaG93O1xyXG5cclxuICAgIHRoaXMuXyRtb2RhbCA9ICRjb250YWluZXIuZmluZChcIi5zbGlkZXNob3ctbW9kYWxcIik7XHJcbiAgICB0aGlzLl8kb3ZlcmxheSA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLm1vZGFsLW92ZXJsYXlcIik7XHJcbiAgICB0aGlzLl8kY29udGVudCA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLm1vZGFsLWNvbnRlbnRzXCIpO1xyXG4gICAgdGhpcy5fJGNhcHRpb24gPSB0aGlzLl8kbW9kYWwuZmluZChcIi5tb2RhbC1jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5fJGltYWdlQ29udGFpbmVyID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIubW9kYWwtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl8kaW1hZ2VMZWZ0ID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIuaW1hZ2UtYWR2YW5jZS1sZWZ0XCIpO1xyXG4gICAgdGhpcy5fJGltYWdlUmlnaHQgPSB0aGlzLl8kbW9kYWwuZmluZChcIi5pbWFnZS1hZHZhbmNlLXJpZ2h0XCIpO1xyXG5cclxuICAgIHRoaXMuX2luZGV4ID0gMDsgLy8gSW5kZXggb2Ygc2VsZWN0ZWQgaW1hZ2VcclxuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICB0aGlzLl8kaW1hZ2VMZWZ0Lm9uKFwiY2xpY2tcIiwgdGhpcy5hZHZhbmNlTGVmdC5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuXyRpbWFnZVJpZ2h0Lm9uKFwiY2xpY2tcIiwgdGhpcy5hZHZhbmNlUmlnaHQuYmluZCh0aGlzKSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgdGhpcy5fb25LZXlEb3duLmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIEdpdmUgalF1ZXJ5IGNvbnRyb2wgb3ZlciBzaG93aW5nL2hpZGluZ1xyXG4gICAgdGhpcy5fJG1vZGFsLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgIHRoaXMuXyRtb2RhbC5oaWRlKCk7XHJcblxyXG4gICAgLy8gRXZlbnRzXHJcbiAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgdGhpcy5fb25SZXNpemUuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kb3ZlcmxheS5vbihcImNsaWNrXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kbW9kYWwuZmluZChcIi5tb2RhbC1jbG9zZVwiKS5vbihcImNsaWNrXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgICBcclxuICAgIHRoaXMuX3VwZGF0ZUNvbnRyb2xzKCk7XHJcblxyXG4gICAgLy8gU2l6ZSBvZiBmb250YXdlc29tZSBpY29ucyBuZWVkcyBhIHNsaWdodCBkZWxheSAodW50aWwgc3RhY2sgaXMgY2xlYXIpIGZvclxyXG4gICAgLy8gc29tZSByZWFzb25cclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX29uUmVzaXplKCk7XHJcbiAgICB9LmJpbmQodGhpcyksIDApO1xyXG59XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuYWR2YW5jZUxlZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnNob3dJbWFnZUF0KHRoaXMuX2luZGV4IC0gMSk7XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuYWR2YW5jZVJpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5zaG93SW1hZ2VBdCh0aGlzLl9pbmRleCArIDEpO1xyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLnNob3dJbWFnZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICBpbmRleCA9IE1hdGgubWF4KGluZGV4LCAwKTtcclxuICAgIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHRoaXMuX3NsaWRlc2hvdy5nZXROdW1JbWFnZXMoKSAtIDEpO1xyXG4gICAgdGhpcy5faW5kZXggPSBpbmRleDtcclxuICAgIHZhciAkaW1nID0gdGhpcy5fc2xpZGVzaG93LmdldEdhbGxlcnlJbWFnZSh0aGlzLl9pbmRleCk7XHJcbiAgICB2YXIgY2FwdGlvbiA9IHRoaXMuX3NsaWRlc2hvdy5nZXRDYXB0aW9uKHRoaXMuX2luZGV4KTtcclxuXHJcbiAgICB0aGlzLl8kaW1hZ2VDb250YWluZXIuZW1wdHkoKTtcclxuICAgICQoXCI8aW1nPlwiLCB7c3JjOiAkaW1nLmF0dHIoXCJzcmNcIil9KVxyXG4gICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kaW1hZ2VDb250YWluZXIpO1xyXG5cclxuICAgIHRoaXMuXyRjYXB0aW9uLmVtcHR5KCk7XHJcbiAgICBpZiAoY2FwdGlvbikge1xyXG4gICAgICAgICQoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJmaWd1cmUtbnVtYmVyXCIpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiRmlnLiBcIiArICh0aGlzLl9pbmRleCArIDEpICsgXCI6IFwiKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8odGhpcy5fJGNhcHRpb24pO1xyXG4gICAgICAgICQoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJjYXB0aW9uLXRleHRcIilcclxuICAgICAgICAgICAgLnRleHQoY2FwdGlvbilcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRjYXB0aW9uKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5fb25SZXNpemUoKTtcclxuICAgIHRoaXMuX3VwZGF0ZUNvbnRyb2xzKCk7XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgaW5kZXggPSBpbmRleCB8fCAwO1xyXG4gICAgdGhpcy5fJG1vZGFsLnNob3coKTtcclxuICAgIHRoaXMuc2hvd0ltYWdlQXQoaW5kZXgpO1xyXG4gICAgdGhpcy5faXNPcGVuID0gdHJ1ZTtcclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuXyRtb2RhbC5oaWRlKCk7XHJcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5fb25LZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmICghdGhpcy5faXNPcGVuKSByZXR1cm47XHJcbiAgICBpZiAoZS53aGljaCA9PT0gS0VZX0NPREVTLkxFRlRfQVJST1cpIHtcclxuICAgICAgICB0aGlzLmFkdmFuY2VMZWZ0KCk7XHJcbiAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IEtFWV9DT0RFUy5SSUdIVF9BUlJPVykge1xyXG4gICAgICAgIHRoaXMuYWR2YW5jZVJpZ2h0KCk7XHJcbiAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IEtFWV9DT0RFUy5FU0NBUEUpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7ICAgXHJcbiAgICB9XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuX3VwZGF0ZUNvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gUmUtZW5hYmxlXHJcbiAgICB0aGlzLl8kaW1hZ2VSaWdodC5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgdGhpcy5fJGltYWdlTGVmdC5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgXHJcbiAgICAvLyBEaXNhYmxlIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIHRoZSBtYXggb3IgbWluIGxpbWl0XHJcbiAgICBpZiAodGhpcy5faW5kZXggPj0gKHRoaXMuX3NsaWRlc2hvdy5nZXROdW1JbWFnZXMoKSAtIDEpKSB7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlUmlnaHQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5faW5kZXggPD0gMCkge1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZUxlZnQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGltYWdlID0gdGhpcy5fJGltYWdlQ29udGFpbmVyLmZpbmQoXCJpbWdcIik7XHJcblxyXG4gICAgLy8gUmVzZXQgdGhlIGNvbnRlbnQncyB3aWR0aFxyXG4gICAgdGhpcy5fJGNvbnRlbnQud2lkdGgoXCJcIik7XHJcblxyXG4gICAgLy8gRmluZCB0aGUgc2l6ZSBvZiB0aGUgY29tcG9uZW50cyB0aGF0IG5lZWQgdG8gYmUgZGlzcGxheWVkIGluIGFkZGl0aW9uIHRvIFxyXG4gICAgLy8gdGhlIGltYWdlXHJcbiAgICB2YXIgY29udHJvbHNXaWR0aCA9IHRoaXMuXyRpbWFnZUxlZnQub3V0ZXJXaWR0aCh0cnVlKSArIFxyXG4gICAgICAgIHRoaXMuXyRpbWFnZVJpZ2h0Lm91dGVyV2lkdGgodHJ1ZSk7XHJcbiAgICAvLyBIYWNrIGZvciBub3cgLSBidWRnZXQgZm9yIDJ4IHRoZSBjYXB0aW9uIGhlaWdodC4gXHJcbiAgICB2YXIgY2FwdGlvbkhlaWdodCA9IDIgKiB0aGlzLl8kY2FwdGlvbi5vdXRlckhlaWdodCh0cnVlKTsgXHJcbiAgICB2YXIgaW1hZ2VQYWRkaW5nID0gJGltYWdlLmlubmVyV2lkdGgoKTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGF2YWlsYWJsZSBhcmVhIGZvciB0aGUgbW9kYWxcclxuICAgIHZhciBtdyA9IHRoaXMuXyRtb2RhbC53aWR0aCgpIC0gY29udHJvbHNXaWR0aDtcclxuICAgIHZhciBtaCA9IHRoaXMuXyRtb2RhbC5oZWlnaHQoKSAtIGNhcHRpb25IZWlnaHQ7XHJcblxyXG4gICAgLy8gRml0IHRoZSBpbWFnZSB0byB0aGUgcmVtYWluaW5nIHNjcmVlbiByZWFsIGVzdGF0ZSBcclxuICAgIHZhciBzZXRTaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpdyA9ICRpbWFnZS5wcm9wKFwibmF0dXJhbFdpZHRoXCIpO1xyXG4gICAgICAgIHZhciBpaCA9ICRpbWFnZS5wcm9wKFwibmF0dXJhbEhlaWdodFwiKTtcclxuICAgICAgICB2YXIgc3cgPSBpdyAvIG13O1xyXG4gICAgICAgIHZhciBzaCA9IGloIC8gbWg7XHJcbiAgICAgICAgdmFyIHMgPSBNYXRoLm1heChzdywgc2gpO1xyXG5cclxuICAgICAgICAvLyBTZXQgd2lkdGgvaGVpZ2h0IHVzaW5nIENTUyBpbiBvcmRlciB0byByZXNwZWN0IGJveC1zaXppbmdcclxuICAgICAgICBpZiAocyA+IDEpIHtcclxuICAgICAgICAgICAgJGltYWdlLmNzcyhcIndpZHRoXCIsIGl3IC8gcyArIFwicHhcIik7XHJcbiAgICAgICAgICAgICRpbWFnZS5jc3MoXCJoZWlnaHRcIiwgaWggLyBzICsgXCJweFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkaW1hZ2UuY3NzKFwid2lkdGhcIiwgaXcgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAkaW1hZ2UuY3NzKFwiaGVpZ2h0XCIsIGloICsgXCJweFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuXyRpbWFnZVJpZ2h0LmNzcyhcInRvcFwiLCAkaW1hZ2Uub3V0ZXJIZWlnaHQoKSAvIDIgKyBcInB4XCIpO1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZUxlZnQuY3NzKFwidG9wXCIsICRpbWFnZS5vdXRlckhlaWdodCgpIC8gMiArIFwicHhcIik7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgY29udGVudCB3cmFwcGVyIHRvIGJlIHRoZSB3aWR0aCBvZiB0aGUgaW1hZ2UuIFRoaXMgd2lsbCBrZWVwIFxyXG4gICAgICAgIC8vIHRoZSBjYXB0aW9uIGZyb20gZXhwYW5kaW5nIGJleW9uZCB0aGUgaW1hZ2UuXHJcbiAgICAgICAgdGhpcy5fJGNvbnRlbnQud2lkdGgoJGltYWdlLm91dGVyV2lkdGgodHJ1ZSkpOyAgICAgICAgXHJcbiAgICB9LmJpbmQodGhpcyk7XHJcblxyXG4gICAgaWYgKCRpbWFnZS5wcm9wKFwiY29tcGxldGVcIikpIHNldFNpemUoKTtcclxuICAgIGVsc2UgJGltYWdlLm9uZShcImxvYWRcIiwgc2V0U2l6ZSk7XHJcbn07XHJcblxufSx7fV0sMTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIFNsaWRlc2hvd01vZGFsID0gcmVxdWlyZShcIi4vc2xpZGVzaG93LW1vZGFsLmpzXCIpO1xyXG52YXIgVGh1bWJuYWlsU2xpZGVyID0gcmVxdWlyZShcIi4vdGh1bWJuYWlsLXNsaWRlci5qc1wiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24odHJhbnNpdGlvbkR1cmF0aW9uKSB7XHJcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uID0gKHRyYW5zaXRpb25EdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSA/XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbiA6IDQwMDtcclxuICAgICAgICB0aGlzLl9zbGlkZXNob3dzID0gW107XHJcbiAgICAgICAgJChcIi5zbGlkZXNob3dcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIHNsaWRlc2hvdyA9IG5ldyBTbGlkZXNob3coJChlbGVtZW50KSwgdHJhbnNpdGlvbkR1cmF0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5fc2xpZGVzaG93cy5wdXNoKHNsaWRlc2hvdyk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIFNsaWRlc2hvdygkY29udGFpbmVyLCB0cmFuc2l0aW9uRHVyYXRpb24pIHtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbjtcclxuICAgIHRoaXMuXyRjb250YWluZXIgPSAkY29udGFpbmVyO1xyXG4gICAgdGhpcy5faW5kZXggPSAwOyAvLyBJbmRleCBvZiBzZWxlY3RlZCBpbWFnZVxyXG5cclxuICAgIC8vIENyZWF0ZSBjb21wb25lbnRzXHJcbiAgICB0aGlzLl90aHVtYm5haWxTbGlkZXIgPSBuZXcgVGh1bWJuYWlsU2xpZGVyKCRjb250YWluZXIsIHRoaXMpO1xyXG4gICAgdGhpcy5fbW9kYWwgPSBuZXcgU2xpZGVzaG93TW9kYWwoJGNvbnRhaW5lciwgdGhpcyk7XHJcblxyXG4gICAgLy8gQ2FjaGUgYW5kIGNyZWF0ZSBuZWNlc3NhcnkgRE9NIGVsZW1lbnRzICAgXHJcbiAgICB0aGlzLl8kY2FwdGlvbkNvbnRhaW5lciA9ICRjb250YWluZXIuZmluZChcIi5jYXB0aW9uXCIpO1xyXG4gICAgdGhpcy5fJHNlbGVjdGVkSW1hZ2VDb250YWluZXIgPSAkY29udGFpbmVyLmZpbmQoXCIuc2VsZWN0ZWQtaW1hZ2VcIik7XHJcblxyXG4gICAgLy8gT3BlbiBtb2RhbCBvbiBjbGlja2luZyBzZWxlY3RlZCBpbWFnZVxyXG4gICAgdGhpcy5fJHNlbGVjdGVkSW1hZ2VDb250YWluZXIub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbW9kYWwub3Blbih0aGlzLl9pbmRleCk7ICAgIFxyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBMb2FkIGltYWdlc1xyXG4gICAgdGhpcy5fJGdhbGxlcnlJbWFnZXMgPSB0aGlzLl9sb2FkR2FsbGVyeUltYWdlcygpO1xyXG4gICAgdGhpcy5fbnVtSW1hZ2VzID0gdGhpcy5fJGdhbGxlcnlJbWFnZXMubGVuZ3RoO1xyXG5cclxuICAgIC8vIFNob3cgdGhlIGZpcnN0IGltYWdlXHJcbiAgICB0aGlzLnNob3dJbWFnZSgwKTtcclxufVxyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXRBY3RpdmVJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbmRleDtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0TnVtSW1hZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX251bUltYWdlcztcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuZ2V0R2FsbGVyeUltYWdlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJGdhbGxlcnlJbWFnZXNbaW5kZXhdO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXRDYXB0aW9uID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJGdhbGxlcnlJbWFnZXNbaW5kZXhdLmRhdGEoXCJjYXB0aW9uXCIpO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5zaG93SW1hZ2UgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIC8vIFJlc2V0IGFsbCBpbWFnZXMgdG8gaW52aXNpYmxlIGFuZCBsb3dlc3Qgei1pbmRleC4gVGhpcyBjb3VsZCBiZSBzbWFydGVyLFxyXG4gICAgLy8gbGlrZSBIb3ZlclNsaWRlc2hvdywgYW5kIG9ubHkgcmVzZXQgZXhhY3RseSB3aGF0IHdlIG5lZWQsIGJ1dCB3ZSBhcmVuJ3QgXHJcbiAgICAvLyB3YXN0aW5nIHRoYXQgbWFueSBjeWNsZXMuXHJcbiAgICB0aGlzLl8kZ2FsbGVyeUltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uICgkZ2FsbGVyeUltYWdlKSB7XHJcbiAgICAgICAgJGdhbGxlcnlJbWFnZS5jc3Moe1xyXG4gICAgICAgICAgICBcInpJbmRleFwiOiAwLFxyXG4gICAgICAgICAgICBcIm9wYWNpdHlcIjogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRnYWxsZXJ5SW1hZ2UudmVsb2NpdHkoXCJzdG9wXCIpOyAvLyBTdG9wIGFueSBhbmltYXRpb25zXHJcbiAgICB9LCB0aGlzKTtcclxuXHJcbiAgICAvLyBDYWNoZSByZWZlcmVuY2VzIHRvIHRoZSBsYXN0IGFuZCBjdXJyZW50IGltYWdlXHJcbiAgICB2YXIgJGxhc3RJbWFnZSA9IHRoaXMuXyRnYWxsZXJ5SW1hZ2VzW3RoaXMuX2luZGV4XTtcclxuICAgIHZhciAkY3VycmVudEltYWdlID0gdGhpcy5fJGdhbGxlcnlJbWFnZXNbaW5kZXhdO1xyXG4gICAgdGhpcy5faW5kZXggPSBpbmRleDtcclxuXHJcbiAgICAvLyBNYWtlIHRoZSBsYXN0IGltYWdlIHZpc2lzYmxlIGFuZCB0aGVuIGFuaW1hdGUgdGhlIGN1cnJlbnQgaW1hZ2UgaW50byB2aWV3XHJcbiAgICAvLyBvbiB0b3Agb2YgdGhlIGxhc3RcclxuICAgICRsYXN0SW1hZ2UuY3NzKFwiekluZGV4XCIsIDEpO1xyXG4gICAgJGN1cnJlbnRJbWFnZS5jc3MoXCJ6SW5kZXhcIiwgMik7XHJcbiAgICAkbGFzdEltYWdlLmNzcyhcIm9wYWNpdHlcIiwgMSk7XHJcbiAgICAkY3VycmVudEltYWdlLnZlbG9jaXR5KHtcIm9wYWNpdHlcIjogMX0sIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiwgXHJcbiAgICAgICAgXCJlYXNlSW5PdXRRdWFkXCIpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgY2FwdGlvbiwgaWYgaXQgZXhpc3RzIG9uIHRoZSB0aHVtYm5haWxcclxuICAgIHZhciBjYXB0aW9uID0gJGN1cnJlbnRJbWFnZS5kYXRhKFwiY2FwdGlvblwiKTtcclxuICAgIGlmIChjYXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fJGNhcHRpb25Db250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiZmlndXJlLW51bWJlclwiKVxyXG4gICAgICAgICAgICAudGV4dChcIkZpZy4gXCIgKyAodGhpcy5faW5kZXggKyAxKSArIFwiOiBcIilcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRjYXB0aW9uQ29udGFpbmVyKTtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiY2FwdGlvbi10ZXh0XCIpXHJcbiAgICAgICAgICAgIC50ZXh0KGNhcHRpb24pXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kY2FwdGlvbkNvbnRhaW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT2JqZWN0IGltYWdlIGZpdCBwb2x5ZmlsbCBicmVha3MgalF1ZXJ5IGF0dHIoLi4uKSwgc28gZmFsbGJhY2sgdG8ganVzdCBcclxuICAgIC8vIHVzaW5nIGVsZW1lbnQuc3JjXHJcbiAgICAvLyBUT0RPOiBMYXp5IVxyXG4gICAgLy8gaWYgKCRjdXJyZW50SW1hZ2UuZ2V0KDApLnNyYyA9PT0gXCJcIikge1xyXG4gICAgLy8gICAgICRjdXJyZW50SW1hZ2UuZ2V0KDApLnNyYyA9ICRjdXJyZW50SW1hZ2UuZGF0YShcImltYWdlLXVybFwiKTtcclxuICAgIC8vIH1cclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuX2xvYWRHYWxsZXJ5SW1hZ2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gQ3JlYXRlIGVtcHR5IGltYWdlcyBpbiB0aGUgZ2FsbGVyeSBmb3IgZWFjaCB0aHVtYm5haWwuIFRoaXMgaGVscHMgdXMgZG9cclxuICAgIC8vIGxhenkgbG9hZGluZyBvZiBnYWxsZXJ5IGltYWdlcyBhbmQgYWxsb3dzIHVzIHRvIGNyb3NzLWZhZGUgaW1hZ2VzLlxyXG4gICAgdmFyICRnYWxsZXJ5SW1hZ2VzID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RodW1ibmFpbFNsaWRlci5nZXROdW1UaHVtYm5haWxzKCk7IGkgKz0gMSkge1xyXG4gICAgICAgIC8vIEdldCB0aGUgdGh1bWJuYWlsIGVsZW1lbnQgd2hpY2ggaGFzIHBhdGggYW5kIGNhcHRpb24gZGF0YVxyXG4gICAgICAgIHZhciAkdGh1bWIgPSB0aGlzLl90aHVtYm5haWxTbGlkZXIuZ2V0JFRodW1ibmFpbChpKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBpZCBmcm9tIHRoZSBwYXRoIHRvIHRoZSBsYXJnZSBpbWFnZVxyXG4gICAgICAgIHZhciBsYXJnZVBhdGggPSAkdGh1bWIuZGF0YShcImxhcmdlLXBhdGhcIik7XHJcbiAgICAgICAgdmFyIGlkID0gbGFyZ2VQYXRoLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIilbMF07XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhIGdhbGxlcnkgaW1hZ2UgZWxlbWVudFxyXG4gICAgICAgIHZhciAkZ2FsbGVyeUltYWdlID0gJChcIjxpbWc+XCIsIHtpZDogaWR9KVxyXG4gICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXHJcbiAgICAgICAgICAgICAgICB0b3A6IFwiMHB4XCIsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBcIjBweFwiLFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICAgICAgICAgIHpJbmRleDogMFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZGF0YShcImltYWdlLXVybFwiLCBsYXJnZVBhdGgpICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC5kYXRhKFwiY2FwdGlvblwiLCAkdGh1bWIuZGF0YShcImNhcHRpb25cIikpXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kc2VsZWN0ZWRJbWFnZUNvbnRhaW5lcik7XHJcbiAgICAgICAgJGdhbGxlcnlJbWFnZS5nZXQoMCkuc3JjID0gbGFyZ2VQYXRoOyAvLyBUT0RPOiBNYWtlIHRoaXMgbGF6eSFcclxuICAgICAgICAkZ2FsbGVyeUltYWdlcy5wdXNoKCRnYWxsZXJ5SW1hZ2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICRnYWxsZXJ5SW1hZ2VzO1xyXG59O1xufSx7XCIuL3NsaWRlc2hvdy1tb2RhbC5qc1wiOjE2LFwiLi90aHVtYm5haWwtc2xpZGVyLmpzXCI6MTh9XSwxODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9IFRodW1ibmFpbFNsaWRlcjtcclxuXHJcbmZ1bmN0aW9uIFRodW1ibmFpbFNsaWRlcigkY29udGFpbmVyLCBzbGlkZXNob3cpIHtcclxuICAgIHRoaXMuXyRjb250YWluZXIgPSAkY29udGFpbmVyO1xyXG4gICAgdGhpcy5fc2xpZGVzaG93ID0gc2xpZGVzaG93O1xyXG5cclxuICAgIHRoaXMuX2luZGV4ID0gMDsgLy8gSW5kZXggb2Ygc2VsZWN0ZWQgdGh1bWJuYWlsXHJcbiAgICB0aGlzLl9zY3JvbGxJbmRleCA9IDA7IC8vIEluZGV4IG9mIHRoZSB0aHVtYm5haWwgdGhhdCBpcyBjdXJyZW50bHkgY2VudGVyZWRcclxuXHJcbiAgICAvLyBDYWNoZSBhbmQgY3JlYXRlIG5lY2Vzc2FyeSBET00gZWxlbWVudHNcclxuICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIgPSAkY29udGFpbmVyLmZpbmQoXCIudGh1bWJuYWlsc1wiKTtcclxuICAgIHRoaXMuXyR0aHVtYm5haWxJbWFnZXMgPSB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyLmZpbmQoXCJpbWdcIik7XHJcbiAgICB0aGlzLl8kdmlzaWJsZVRodW1ibmFpbFdyYXAgPSAkY29udGFpbmVyLmZpbmQoXCIudmlzaWJsZS10aHVtYm5haWxzXCIpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VMZWZ0ID0gJGNvbnRhaW5lci5maW5kKFwiLnRodW1ibmFpbC1hZHZhbmNlLWxlZnRcIik7XHJcbiAgICB0aGlzLl8kYWR2YW5jZVJpZ2h0ID0gJGNvbnRhaW5lci5maW5kKFwiLnRodW1ibmFpbC1hZHZhbmNlLXJpZ2h0XCIpO1xyXG5cclxuICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgdGh1bWJuYWlscywgZ2l2ZSB0aGVtIGFuIGluZGV4IGRhdGEgYXR0cmlidXRlIGFuZCBjYWNoZVxyXG4gICAgLy8gYSByZWZlcmVuY2UgdG8gdGhlbSBpbiBhbiBhcnJheVxyXG4gICAgdGhpcy5fJHRodW1ibmFpbHMgPSBbXTtcclxuICAgIHRoaXMuXyR0aHVtYm5haWxJbWFnZXMuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJHRodW1ibmFpbCA9ICQoZWxlbWVudCk7XHJcbiAgICAgICAgJHRodW1ibmFpbC5kYXRhKFwiaW5kZXhcIiwgaW5kZXgpO1xyXG4gICAgICAgIHRoaXMuXyR0aHVtYm5haWxzLnB1c2goJHRodW1ibmFpbCk7XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fbnVtSW1hZ2VzID0gdGhpcy5fJHRodW1ibmFpbHMubGVuZ3RoO1xyXG5cclxuICAgIC8vIExlZnQvcmlnaHQgY29udHJvbHNcclxuICAgIHRoaXMuXyRhZHZhbmNlTGVmdC5vbihcImNsaWNrXCIsIHRoaXMuYWR2YW5jZUxlZnQuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kYWR2YW5jZVJpZ2h0Lm9uKFwiY2xpY2tcIiwgdGhpcy5hZHZhbmNlUmlnaHQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gQ2xpY2tpbmcgYSB0aHVtYm5haWxcclxuICAgIHRoaXMuXyR0aHVtYm5haWxJbWFnZXMub24oXCJjbGlja1wiLCB0aGlzLl9vbkNsaWNrLmJpbmQodGhpcykpO1xyXG5cclxuICAgIHRoaXMuX2FjdGl2YXRlVGh1bWJuYWlsKDApO1xyXG5cclxuICAgIC8vIFJlc2l6ZVxyXG4gICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIHRoaXMuX29uUmVzaXplLmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIEZvciBzb21lIHJlYXNvbiwgdGhlIHNpemluZyBvbiB0aGUgY29udHJvbHMgaXMgbWVzc2VkIHVwIGlmIGl0IHJ1bnNcclxuICAgIC8vIGltbWVkaWF0ZWx5IC0gZGVsYXkgc2l6aW5nIHVudGlsIHN0YWNrIGlzIGNsZWFyXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9vblJlc2l6ZSgpO1xyXG4gICAgfS5iaW5kKHRoaXMpLCAwKTtcclxufVxyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5nZXRBY3RpdmVJbmRleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbmRleDtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuZ2V0TnVtVGh1bWJuYWlscyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9udW1JbWFnZXM7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLmdldCRUaHVtYm5haWwgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIHJldHVybiB0aGlzLl8kdGh1bWJuYWlsc1tpbmRleF07XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLmFkdmFuY2VMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld0luZGV4ID0gdGhpcy5fc2Nyb2xsSW5kZXggLSB0aGlzLl9udW1WaXNpYmxlO1xyXG4gICAgbmV3SW5kZXggPSBNYXRoLm1heChuZXdJbmRleCwgMCk7XHJcbiAgICB0aGlzLl9zY3JvbGxUb1RodW1ibmFpbChuZXdJbmRleCk7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLmFkdmFuY2VSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdJbmRleCA9IHRoaXMuX3Njcm9sbEluZGV4ICsgdGhpcy5fbnVtVmlzaWJsZTtcclxuICAgIG5ld0luZGV4ID0gTWF0aC5taW4obmV3SW5kZXgsIHRoaXMuX251bUltYWdlcyAtIDEpO1xyXG4gICAgdGhpcy5fc2Nyb2xsVG9UaHVtYm5haWwobmV3SW5kZXgpO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5fcmVzZXRTaXppbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBSZXNldCBzaXppbmcgdmFyaWFibGVzLiBUaGlzIGluY2x1ZGVzIHJlc2V0dGluZyBhbnkgaW5saW5lIHN0eWxlIHRoYXQgaGFzXHJcbiAgICAvLyBiZWVuIGFwcGxpZWQsIHNvIHRoYXQgYW55IHNpemUgY2FsY3VsYXRpb25zIGNhbiBiZSBiYXNlZCBvbiB0aGUgQ1NTXHJcbiAgICAvLyBzdHlsaW5nLlxyXG4gICAgdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci5jc3Moe1xyXG4gICAgICAgIHRvcDogXCJcIiwgbGVmdDogXCJcIiwgd2lkdGg6IFwiXCIsIGhlaWdodDogXCJcIlxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl8kdmlzaWJsZVRodW1ibmFpbFdyYXAud2lkdGgoXCJcIik7XHJcbiAgICB0aGlzLl8kdmlzaWJsZVRodW1ibmFpbFdyYXAuaGVpZ2h0KFwiXCIpO1xyXG4gICAgLy8gTWFrZSBhbGwgdGh1bWJuYWlscyBzcXVhcmUgYW5kIHJlc2V0IGFueSBoZWlnaHRcclxuICAgIHRoaXMuXyR0aHVtYm5haWxzLmZvckVhY2goZnVuY3Rpb24gKCRlbGVtZW50KSB7IFxyXG4gICAgICAgICRlbGVtZW50LmhlaWdodChcIlwiKTsgLy8gUmVzZXQgaGVpZ2h0IGJlZm9yZSBzZXR0aW5nIHdpZHRoXHJcbiAgICAgICAgJGVsZW1lbnQud2lkdGgoJGVsZW1lbnQuaGVpZ2h0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX3Jlc2V0U2l6aW5nKCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzaXplIG9mIHRoZSBmaXJzdCB0aHVtYm5haWwuIFRoaXMgYXNzdW1lcyB0aGUgZmlyc3QgaW1hZ2VcclxuICAgIC8vIG9ubHkgaGFzIGEgcmlnaHQtc2lkZSBtYXJnaW4uXHJcbiAgICB2YXIgJGZpcnN0VGh1bWIgPSB0aGlzLl8kdGh1bWJuYWlsc1swXTtcclxuICAgIHZhciB0aHVtYlNpemUgPSAkZmlyc3RUaHVtYi5vdXRlckhlaWdodChmYWxzZSk7XHJcbiAgICB2YXIgdGh1bWJNYXJnaW4gPSAyICogKCRmaXJzdFRodW1iLm91dGVyV2lkdGgodHJ1ZSkgLSB0aHVtYlNpemUpO1xyXG5cclxuICAgIC8vIE1lYXN1cmUgY29udHJvbHMuIFRoZXkgbmVlZCB0byBiZSB2aXNpYmxlIGluIG9yZGVyIHRvIGJlIG1lYXN1cmVkLlxyXG4gICAgdGhpcy5fJGFkdmFuY2VSaWdodC5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICB0aGlzLl8kYWR2YW5jZUxlZnQuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgdmFyIHRodW1iQ29udHJvbFdpZHRoID0gdGhpcy5fJGFkdmFuY2VSaWdodC5vdXRlcldpZHRoKHRydWUpICtcclxuICAgICAgICB0aGlzLl8kYWR2YW5jZUxlZnQub3V0ZXJXaWR0aCh0cnVlKTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgaG93IG1hbnkgZnVsbCB0aHVtYm5haWxzIGNhbiBmaXQgd2l0aGluIHRoZSB0aHVtYm5haWwgYXJlYVxyXG4gICAgdmFyIHZpc2libGVXaWR0aCA9IHRoaXMuXyR2aXNpYmxlVGh1bWJuYWlsV3JhcC5vdXRlcldpZHRoKGZhbHNlKTtcclxuICAgIHZhciBudW1UaHVtYnNWaXNpYmxlID0gTWF0aC5mbG9vcihcclxuICAgICAgICAodmlzaWJsZVdpZHRoIC0gdGh1bWJNYXJnaW4pIC8gKHRodW1iU2l6ZSArIHRodW1iTWFyZ2luKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDaGVjayB3aGV0aGVyIGFsbCB0aGUgdGh1bWJuYWlscyBjYW4gZml0IG9uIHRoZSBzY3JlZW4gYXQgb25jZVxyXG4gICAgaWYgKG51bVRodW1ic1Zpc2libGUgPCB0aGlzLl9udW1JbWFnZXMpIHtcclxuICAgICAgICAvLyBUYWtlIGEgYmVzdCBndWVzcyBhdCBob3cgdG8gc2l6ZSB0aGUgdGh1bWJuYWlscy4gU2l6ZSBmb3JtdWxhOlxyXG4gICAgICAgIC8vICB3aWR0aCA9IG51bSAqIHRodW1iU2l6ZSArIChudW0gLSAxKSAqIHRodW1iTWFyZ2luICsgY29udHJvbFNpemVcclxuICAgICAgICAvLyBTb2x2ZSBmb3IgbnVtYmVyIG9mIHRodW1ibmFpbHMgYW5kIHJvdW5kIHRvIHRoZSBuZWFyZXN0IGludGVnZXIgc28gXHJcbiAgICAgICAgLy8gdGhhdCB3ZSBkb24ndCBoYXZlIGFueSBwYXJ0aWFsIHRodW1ibmFpbHMgc2hvd2luZy5cclxuICAgICAgICBudW1UaHVtYnNWaXNpYmxlID0gTWF0aC5yb3VuZChcclxuICAgICAgICAgICAgKHZpc2libGVXaWR0aCAtIHRodW1iQ29udHJvbFdpZHRoICsgdGh1bWJNYXJnaW4pIC8gXHJcbiAgICAgICAgICAgICh0aHVtYlNpemUgKyB0aHVtYk1hcmdpbilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBVc2UgdGhpcyBudW1iZXIgb2YgdGh1bWJuYWlscyB0byBjYWxjdWxhdGUgdGhlIHRodW1ibmFpbCBzaXplXHJcbiAgICAgICAgdmFyIG5ld1NpemUgPSAodmlzaWJsZVdpZHRoIC0gdGh1bWJDb250cm9sV2lkdGggKyB0aHVtYk1hcmdpbikgLyBcclxuICAgICAgICAgICAgbnVtVGh1bWJzVmlzaWJsZSAtIHRodW1iTWFyZ2luO1xyXG4gICAgICAgIHRoaXMuXyR0aHVtYm5haWxzLmZvckVhY2goZnVuY3Rpb24gKCRlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vICQud2lkdGggYW5kICQuaGVpZ2h0IHNldCB0aGUgY29udGVudCBzaXplIHJlZ2FyZGxlc3Mgb2YgdGhlIFxyXG4gICAgICAgICAgICAvLyBib3gtc2l6aW5nLiBUaGUgaW1hZ2VzIGFyZSBib3JkZXItYm94LCBzbyB3ZSB3YW50IHRoZSBDU1Mgd2lkdGhcclxuICAgICAgICAgICAgLy8gYW5kIGhlaWdodC4gVGhpcyBhbGxvd3MgdGhlIGFjdGl2ZSBpbWFnZSB0byBoYXZlIGEgYm9yZGVyIGFuZCB0aGVcclxuICAgICAgICAgICAgLy8gb3RoZXIgaW1hZ2VzIHRvIGhhdmUgcGFkZGluZy4gXHJcbiAgICAgICAgICAgICRlbGVtZW50LmNzcyhcIndpZHRoXCIsIG5ld1NpemUgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3MoXCJoZWlnaHRcIiwgbmV3U2l6ZSArIFwicHhcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgdGh1bWJuYWlsIHdyYXAgc2l6ZS4gSXQgc2hvdWxkIGJlIGp1c3QgdGFsbCBlbm91Z2ggdG8gZml0IGFcclxuICAgICAgICAvLyB0aHVtYm5haWwgYW5kIGxvbmcgZW5vdWdoIHRvIGhvbGQgYWxsIHRoZSB0aHVtYm5haWxzIGluIG9uZSBsaW5lOlxyXG4gICAgICAgIHZhciB0b3RhbFNpemUgPSBuZXdTaXplICogdGhpcy5fbnVtSW1hZ2VzICsgXHJcbiAgICAgICAgICAgIHRodW1iTWFyZ2luICogKHRoaXMuX251bUltYWdlcyAtIDEpO1xyXG4gICAgICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIuY3NzKHtcclxuICAgICAgICAgICAgd2lkdGg6IHRvdGFsU2l6ZSArIFwicHhcIixcclxuICAgICAgICAgICAgaGVpZ2h0OiAkZmlyc3RUaHVtYi5vdXRlckhlaWdodCh0cnVlKSArIFwicHhcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIHZpc2libGUgdGh1bWJuYWlsIHdyYXAgc2l6ZS4gVGhpcyBpcyB1c2VkIHRvIG1ha3MgdGhlIG11Y2ggXHJcbiAgICAgICAgLy8gbGFyZ2VyIHRodW1ibmFpbCBjb250YWluZXIuIEl0IHNob3VsZCBiZSBhcyB3aWRlIGFzIGl0IGNhbiBiZSwgbWludXNcclxuICAgICAgICAvLyB0aGUgc3BhY2UgbmVlZGVkIGZvciB0aGUgbGVmdC9yaWdodCBjb250b2xzLlxyXG4gICAgICAgIHRoaXMuXyR2aXNpYmxlVGh1bWJuYWlsV3JhcC5jc3Moe1xyXG4gICAgICAgICAgICB3aWR0aDogdmlzaWJsZVdpZHRoIC0gdGh1bWJDb250cm9sV2lkdGggKyBcInB4XCIsXHJcbiAgICAgICAgICAgIGhlaWdodDogJGZpcnN0VGh1bWIub3V0ZXJIZWlnaHQodHJ1ZSkgKyBcInB4XCJcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQWxsIHRodW1ibmFpbHMgYXJlIHZpc2libGUsIHdlIGNhbiBoaWRlIHRoZSBjb250cm9scyBhbmQgZXhwYW5kIHRoZVxyXG4gICAgICAgIC8vIHRodW1ibmFpbCBjb250YWluZXIgdG8gMTAwJVxyXG4gICAgICAgIG51bVRodW1ic1Zpc2libGUgPSB0aGlzLl9udW1JbWFnZXM7XHJcbiAgICAgICAgdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci5jc3MoXCJ3aWR0aFwiLCBcIjEwMCVcIik7XHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VSaWdodC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICB0aGlzLl8kYWR2YW5jZUxlZnQuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fbnVtVmlzaWJsZSA9IG51bVRodW1ic1Zpc2libGU7XHJcbiAgICB2YXIgbWlkZGxlSW5kZXggPSBNYXRoLmZsb29yKCh0aGlzLl9udW1WaXNpYmxlIC0gMSkgLyAyKTtcclxuICAgIHRoaXMuX3Njcm9sbEJvdW5kcyA9IHtcclxuICAgICAgICBtaW46IG1pZGRsZUluZGV4LFxyXG4gICAgICAgIG1heDogdGhpcy5fbnVtSW1hZ2VzIC0gMSAtIG1pZGRsZUluZGV4XHJcbiAgICB9O1xyXG4gICAgaWYgKHRoaXMuX251bVZpc2libGUgJSAyID09PSAwKSB0aGlzLl9zY3JvbGxCb3VuZHMubWF4IC09IDE7XHJcblxyXG4gICAgdGhpcy5fdXBkYXRlVGh1bWJuYWlsQ29udHJvbHMoKTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX2FjdGl2YXRlVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAvLyBBY3RpdmF0ZS9kZWFjdGl2YXRlIHRodW1ibmFpbHNcclxuICAgIHRoaXMuXyR0aHVtYm5haWxzW3RoaXMuX2luZGV4XS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIHRoaXMuXyR0aHVtYm5haWxzW2luZGV4XS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX3Njcm9sbFRvVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAvLyBObyBuZWVkIHRvIHNjcm9sbCBpZiBhbGwgdGh1bWJuYWlscyBhcmUgdmlzaWJsZVxyXG4gICAgaWYgKHRoaXMuX251bVZpc2libGUgPT09IHRoaXMuX251bUltYWdlcykgcmV0dXJuO1xyXG5cclxuICAgIC8vIENvbnN0cmFpbiBpbmRleCBzbyB0aGF0IHdlIGNhbid0IHNjcm9sbCBvdXQgb2YgYm91bmRzIFxyXG4gICAgaW5kZXggPSBNYXRoLm1heChpbmRleCwgdGhpcy5fc2Nyb2xsQm91bmRzLm1pbik7XHJcbiAgICBpbmRleCA9IE1hdGgubWluKGluZGV4LCB0aGlzLl9zY3JvbGxCb3VuZHMubWF4KTtcclxuICAgIHRoaXMuX3Njcm9sbEluZGV4ID0gaW5kZXg7XHJcblxyXG4gICAgY29uc29sZS5sb2codGhpcy5fc2Nyb2xsSW5kZXgpO1xyXG4gICAgXHJcbiAgICAvLyBGaW5kIHRoZSBcImxlZnRcIiBwb3NpdGlvbiBvZiB0aGUgdGh1bWJuYWlsIGNvbnRhaW5lciB0aGF0IHdvdWxkIHB1dCB0aGUgXHJcbiAgICAvLyB0aHVtYm5haWwgYXQgaW5kZXggYXQgdGhlIGNlbnRlclxyXG4gICAgdmFyICR0aHVtYiA9IHRoaXMuXyR0aHVtYm5haWxzWzBdO1xyXG4gICAgdmFyIHNpemUgPSBwYXJzZUZsb2F0KCR0aHVtYi5jc3MoXCJ3aWR0aFwiKSk7XHJcbiAgICB2YXIgbWFyZ2luID0gMiAqIHBhcnNlRmxvYXQoJHRodW1iLmNzcyhcIm1hcmdpbi1yaWdodFwiKSk7IFxyXG4gICAgdmFyIGNlbnRlclggPSBzaXplICogdGhpcy5fc2Nyb2xsQm91bmRzLm1pbiArIFxyXG4gICAgICAgIG1hcmdpbiAqICh0aGlzLl9zY3JvbGxCb3VuZHMubWluIC0gMSk7XHJcbiAgICB2YXIgdGh1bWJYID0gc2l6ZSAqIGluZGV4ICsgbWFyZ2luICogKGluZGV4IC0gMSk7XHJcbiAgICB2YXIgbGVmdCA9IGNlbnRlclggLSB0aHVtYlg7XHJcblxyXG4gICAgLy8gQW5pbWF0ZSB0aGUgdGh1bWJuYWlsIGNvbnRhaW5lclxyXG4gICAgdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci52ZWxvY2l0eShcInN0b3BcIik7XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyLnZlbG9jaXR5KHtcclxuICAgICAgICBcImxlZnRcIjogbGVmdCArIFwicHhcIlxyXG4gICAgfSwgNjAwLCBcImVhc2VJbk91dFF1YWRcIik7XHJcblxyXG4gICAgdGhpcy5fdXBkYXRlVGh1bWJuYWlsQ29udHJvbHMoKTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX29uQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgIHZhciBpbmRleCA9ICR0YXJnZXQuZGF0YShcImluZGV4XCIpO1xyXG4gICAgXHJcbiAgICAvLyBDbGlja2VkIG9uIHRoZSBhY3RpdmUgaW1hZ2UgLSBubyBuZWVkIHRvIGRvIGFueXRoaW5nXHJcbiAgICBpZiAodGhpcy5faW5kZXggIT09IGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZhdGVUaHVtYm5haWwoaW5kZXgpO1xyXG4gICAgICAgIHRoaXMuX3Njcm9sbFRvVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuX3NsaWRlc2hvdy5zaG93SW1hZ2UoaW5kZXgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5fdXBkYXRlVGh1bWJuYWlsQ29udHJvbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBSZS1lbmFibGVcclxuICAgIHRoaXMuXyRhZHZhbmNlTGVmdC5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VSaWdodC5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgXHJcbiAgICAvLyBEaXNhYmxlIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIHRoZSBtYXggb3IgbWluIGxpbWl0XHJcbiAgICB2YXIgbWlkU2Nyb2xsSW5kZXggPSBNYXRoLmZsb29yKCh0aGlzLl9udW1WaXNpYmxlIC0gMSkgLyAyKTtcclxuICAgIHZhciBtaW5TY3JvbGxJbmRleCA9IG1pZFNjcm9sbEluZGV4O1xyXG4gICAgdmFyIG1heFNjcm9sbEluZGV4ID0gdGhpcy5fbnVtSW1hZ2VzIC0gMSAtIG1pZFNjcm9sbEluZGV4O1xyXG4gICAgaWYgKHRoaXMuX3Njcm9sbEluZGV4ID49IHRoaXMuX3Njcm9sbEJvdW5kcy5tYXgpIHtcclxuICAgICAgICB0aGlzLl8kYWR2YW5jZVJpZ2h0LmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3Njcm9sbEluZGV4IDw9IHRoaXMuX3Njcm9sbEJvdW5kcy5taW4pIHtcclxuICAgICAgICB0aGlzLl8kYWR2YW5jZUxlZnQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxufTtcbn0se31dLDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICh2YWwsIGRlZmF1bHRWYWwpIHtcclxuICAgIHJldHVybiAodmFsICE9PSB1bmRlZmluZWQpID8gdmFsIDogZGVmYXVsdFZhbDtcclxufTtcclxuXHJcbi8vIFVudGVzdGVkXHJcbi8vIGV4cG9ydHMuZGVmYXVsdFByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZhdWx0UHJvcGVydGllcyAob2JqLCBwcm9wcykge1xyXG4vLyAgICAgZm9yICh2YXIgcHJvcCBpbiBwcm9wcykge1xyXG4vLyAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wcywgcHJvcCkpIHtcclxuLy8gICAgICAgICAgICAgdmFyIHZhbHVlID0gZXhwb3J0cy5kZWZhdWx0VmFsdWUocHJvcHMudmFsdWUsIHByb3BzLmRlZmF1bHQpO1xyXG4vLyAgICAgICAgICAgICBvYmpbcHJvcF0gPSB2YWx1ZTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcbi8vICAgICByZXR1cm4gb2JqO1xyXG4vLyB9O1xyXG4vLyBcclxuZXhwb3J0cy50aW1lSXQgPSBmdW5jdGlvbiAoZnVuYykge1xyXG4gICAgdmFyIHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBmdW5jKCk7XHJcbiAgICB2YXIgZW5kID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICByZXR1cm4gZW5kIC0gc3RhcnQ7XHJcbn07XHJcblxyXG5leHBvcnRzLmlzSW5SZWN0ID0gZnVuY3Rpb24gKHgsIHksIHJlY3QpIHtcclxuICAgIGlmICh4ID49IHJlY3QueCAmJiB4IDw9IChyZWN0LnggKyByZWN0LncpICYmXHJcbiAgICAgICAgeSA+PSByZWN0LnkgJiYgeSA8PSAocmVjdC55ICsgcmVjdC5oKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuZXhwb3J0cy5yYW5kSW50ID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxufTtcclxuXHJcbmV4cG9ydHMucmFuZEFycmF5RWxlbWVudCA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgdmFyIGkgPSBleHBvcnRzLnJhbmRJbnQoMCwgYXJyYXkubGVuZ3RoIC0gMSk7ICAgIFxyXG4gICAgcmV0dXJuIGFycmF5W2ldO1xyXG59O1xyXG5cclxuZXhwb3J0cy5tYXAgPSBmdW5jdGlvbiAobnVtLCBtaW4xLCBtYXgxLCBtaW4yLCBtYXgyLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgbWFwcGVkID0gKG51bSAtIG1pbjEpIC8gKG1heDEgLSBtaW4xKSAqIChtYXgyIC0gbWluMikgKyBtaW4yO1xyXG4gICAgaWYgKCFvcHRpb25zKSByZXR1cm4gbWFwcGVkO1xyXG4gICAgaWYgKG9wdGlvbnMucm91bmQgJiYgb3B0aW9ucy5yb3VuZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1hcHBlZCA9IE1hdGgucm91bmQobWFwcGVkKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmZsb29yICYmIG9wdGlvbnMuZmxvb3IgPT09IHRydWUpIHtcclxuICAgICAgICBtYXBwZWQgPSBNYXRoLmZsb29yKG1hcHBlZCk7ICAgICAgICBcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNlaWwgJiYgb3B0aW9ucy5jZWlsID09PSB0cnVlKSB7XHJcbiAgICAgICAgbWFwcGVkID0gTWF0aC5jZWlsKG1hcHBlZCk7ICAgICAgICBcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmNsYW1wICYmIG9wdGlvbnMuY2xhbXAgPT09IHRydWUpIHtcclxuICAgICAgICBtYXBwZWQgPSBNYXRoLm1pbihtYXBwZWQsIG1heDIpO1xyXG4gICAgICAgIG1hcHBlZCA9IE1hdGgubWF4KG1hcHBlZCwgbWluMik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFwcGVkO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRRdWVyeVBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBDaGVjayBmb3IgcXVlcnkgc3RyaW5nXHJcbiAgICBxcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcbiAgICBpZiAocXMubGVuZ3RoIDw9IDEpIHJldHVybiB7fTtcclxuICAgIC8vIFF1ZXJ5IHN0cmluZyBleGlzdHMsIHBhcnNlIGl0IGludG8gYSBxdWVyeSBvYmplY3RcclxuICAgIHFzID0gcXMuc3Vic3RyaW5nKDEpOyAvLyBSZW1vdmUgdGhlIFwiP1wiIGRlbGltaXRlclxyXG4gICAgdmFyIGtleVZhbFBhaXJzID0gcXMuc3BsaXQoXCImXCIpO1xyXG4gICAgdmFyIHF1ZXJ5T2JqZWN0ID0ge307XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleVZhbFBhaXJzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIGtleVZhbCA9IGtleVZhbFBhaXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBpZiAoa2V5VmFsLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KGtleVZhbFswXSk7XHJcbiAgICAgICAgICAgIHZhciB2YWwgPSBkZWNvZGVVUklDb21wb25lbnQoa2V5VmFsWzFdKTtcclxuICAgICAgICAgICAgcXVlcnlPYmplY3Rba2V5XSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlcnlPYmplY3Q7XHJcbn07XHJcblxyXG5leHBvcnRzLmNyZWF0ZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHF1ZXJ5T2JqZWN0KSB7XHJcbiAgICBpZiAodHlwZW9mIHF1ZXJ5T2JqZWN0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gXCJcIjtcclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocXVlcnlPYmplY3QpO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIjtcclxuICAgIHZhciBxdWVyeVN0cmluZyA9IFwiP1wiO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgdmFyIHZhbCA9IHF1ZXJ5T2JqZWN0W2tleV07XHJcbiAgICAgICAgcXVlcnlTdHJpbmcgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpO1xyXG4gICAgICAgIGlmIChpICE9PSBrZXlzLmxlbmd0aCAtIDEpIHF1ZXJ5U3RyaW5nICs9IFwiJlwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0cy53cmFwSW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGxlbmd0aCkge1xyXG4gICAgdmFyIHdyYXBwZWRJbmRleCA9IChpbmRleCAlIGxlbmd0aCk7IFxyXG4gICAgaWYgKHdyYXBwZWRJbmRleCA8IDApIHtcclxuICAgICAgICAvLyBJZiBuZWdhdGl2ZSwgZmxpcCB0aGUgaW5kZXggc28gdGhhdCAtMSBiZWNvbWVzIHRoZSBsYXN0IGl0ZW0gaW4gbGlzdCBcclxuICAgICAgICB3cmFwcGVkSW5kZXggPSBsZW5ndGggKyB3cmFwcGVkSW5kZXg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gd3JhcHBlZEluZGV4O1xyXG59O1xyXG5cbn0se31dfSx7fSxbMTJdKVxuXG4iLCJ2YXIgdXRpbHMgPSByZXF1aXJlKFwiLi91dGlscy5qc1wiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQmJveEFsaWduZWRUZXh0O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgQmJveEFsaWduZWRUZXh0IG9iamVjdCAtIGEgdGV4dCBvYmplY3QgdGhhdCBjYW4gYmUgZHJhd24gd2l0aFxyXG4gKiBhbmNob3IgcG9pbnRzIGJhc2VkIG9uIGEgdGlnaHQgYm91bmRpbmcgYm94IGFyb3VuZCB0aGUgdGV4dC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBmb250IC0gcDUuRm9udCBvYmplY3RcclxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBTdHJpbmcgdG8gZGlzcGxheVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW2ZvbnRTaXplPTEyXSAtIEZvbnQgc2l6ZSB0byB1c2UgZm9yIHN0cmluZ1xyXG4gKiBAcGFyYW0ge251bWJlcn0gW3g9MF0gLSBJbml0aWFsIHggbG9jYXRpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IFt5PTBdIC0gSW5pdGlhbCB5IGxvY2F0aW9uXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcEluc3RhbmNlPXdpbmRvd10gLSBSZWZlcmVuY2UgdG8gcDUgaW5zdGFuY2UsIGxlYXZlIGJsYW5rIGlmXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2V0Y2ggaXMgZ2xvYmFsXHJcbiAqIEBleGFtcGxlXHJcbiAqIHZhciBmb250LCBiYm94VGV4dDtcclxuICogZnVuY3Rpb24gcHJlbG9hZCgpIHtcclxuICogICAgIGZvbnQgPSBsb2FkRm9udChcIi4vYXNzZXRzL1JlZ3VsYXIudHRmXCIpO1xyXG4gKiB9XHJcbiAqIGZ1bmN0aW9uIHNldHVwKCkge1xyXG4gKiAgICAgY3JlYXRlQ2FudmFzKDQwMCwgNjAwKTtcclxuICogICAgIGJhY2tncm91bmQoMCk7XHJcbiAqICAgICBcclxuICogICAgIGJib3hUZXh0ID0gbmV3IEJib3hBbGlnbmVkVGV4dChmb250LCBcIkhleSFcIiwgMzApOyAgICBcclxuICogICAgIGJib3hUZXh0LnNldFJvdGF0aW9uKFBJIC8gNCk7XHJcbiAqICAgICBiYm94VGV4dC5zZXRBbmNob3IoQmJveEFsaWduZWRUZXh0LkFMSUdOLkJPWF9DRU5URVIsIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSKTtcclxuICogICAgIFxyXG4gKiAgICAgZmlsbChcIiMwMEE4RUFcIik7XHJcbiAqICAgICBub1N0cm9rZSgpO1xyXG4gKiAgICAgYmJveFRleHQuZHJhdyh3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBCYm94QWxpZ25lZFRleHQoZm9udCwgdGV4dCwgZm9udFNpemUsIHgsIHksIHBJbnN0YW5jZSkge1xyXG4gICAgdGhpcy5fZm9udCA9IGZvbnQ7XHJcbiAgICB0aGlzLl90ZXh0ID0gdGV4dDtcclxuICAgIHRoaXMuX3ggPSB1dGlscy5kZWZhdWx0KHgsIDApO1xyXG4gICAgdGhpcy5feSA9IHV0aWxzLmRlZmF1bHQoeSwgMCk7XHJcbiAgICB0aGlzLl9mb250U2l6ZSA9IHV0aWxzLmRlZmF1bHQoZm9udFNpemUsIDEyKTtcclxuICAgIHRoaXMuX3AgPSB1dGlscy5kZWZhdWx0KHBJbnN0YW5jZSwgd2luZG93KTtcclxuICAgIHRoaXMuX3JvdGF0aW9uID0gMDtcclxuICAgIHRoaXMuX2hBbGlnbiA9IEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfQ0VOVEVSO1xyXG4gICAgdGhpcy5fdkFsaWduID0gQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVI7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVNZXRyaWNzKHRydWUpO1xyXG59XHJcblxyXG4vKipcclxuICogVmVydGljYWwgYWxpZ25tZW50IHZhbHVlc1xyXG4gKiBAcHVibGljXHJcbiAqIEBzdGF0aWNcclxuICogQHJlYWRvbmx5XHJcbiAqIEBlbnVtIHtzdHJpbmd9XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQuQUxJR04gPSB7XHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSBsZWZ0IG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfTEVGVDogXCJib3hfbGVmdFwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfQ0VOVEVSOiBcImJveF9jZW50ZXJcIixcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIHJpZ2h0IG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfUklHSFQ6IFwiYm94X3JpZ2h0XCJcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCYXNlbGluZSBhbGlnbm1lbnQgdmFsdWVzXHJcbiAqIEBwdWJsaWNcclxuICogQHN0YXRpY1xyXG4gKiBAcmVhZG9ubHlcclxuICogQGVudW0ge3N0cmluZ31cclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5CQVNFTElORSA9IHtcclxuICAgIC8qKiBEcmF3IGZyb20gdGhlIHRvcCBvZiB0aGUgYmJveCAqL1xyXG4gICAgQk9YX1RPUDogXCJib3hfdG9wXCIsXHJcbiAgICAvKiogRHJhdyBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGJib3ggKi9cclxuICAgIEJPWF9DRU5URVI6IFwiYm94X2NlbnRlclwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgYm90dG9tIG9mIHRoZSBiYm94ICovXHJcbiAgICBCT1hfQk9UVE9NOiBcImJveF9ib3R0b21cIixcclxuICAgIC8qKiBcclxuICAgICAqIERyYXcgZnJvbSBoYWxmIHRoZSBoZWlnaHQgb2YgdGhlIGZvbnQuIFNwZWNpZmljYWxseSB0aGUgaGVpZ2h0IGlzXHJcbiAgICAgKiBjYWxjdWxhdGVkIGFzOiBhc2NlbnQgKyBkZXNjZW50LlxyXG4gICAgICovXHJcbiAgICBGT05UX0NFTlRFUjogXCJmb250X2NlbnRlclwiLFxyXG4gICAgLyoqIERyYXcgZnJvbSB0aGUgdGhlIG5vcm1hbCBmb250IGJhc2VsaW5lICovXHJcbiAgICBBTFBIQUJFVElDOiBcImFscGhhYmV0aWNcIlxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCBjdXJyZW50IHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIC0gVGV4dCBzdHJpbmcgdG8gZGlzcGxheVxyXG4gKiBAcmV0dXJucyB7dGhpc30gVXNlZnVsIGZvciBjaGFpbmluZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5zZXRUZXh0ID0gZnVuY3Rpb24oc3RyaW5nKSB7XHJcbiAgICB0aGlzLl90ZXh0ID0gc3RyaW5nO1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlTWV0cmljcyhmYWxzZSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHRleHQgcG9zaXRpb25cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggcG9zaXRpb25cclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBZIHBvc2l0aW9uXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24oeCwgeSkge1xyXG4gICAgdGhpcy5feCA9IHV0aWxzLmRlZmF1bHQoeCwgdGhpcy5feCk7XHJcbiAgICB0aGlzLl95ID0gdXRpbHMuZGVmYXVsdCh5LCB0aGlzLl95KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgdGV4dCBwb3NpdGlvblxyXG4gKiBAcHVibGljXHJcbiAqIEByZXR1cm4ge29iamVjdH0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzOiB4LCB5XHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IHRoaXMuX3gsXHJcbiAgICAgICAgeTogdGhpcy5feVxyXG4gICAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgY3VycmVudCB0ZXh0IHNpemVcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gZm9udFNpemUgVGV4dCBzaXplXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFRleHRTaXplID0gZnVuY3Rpb24oZm9udFNpemUpIHtcclxuICAgIHRoaXMuX2ZvbnRTaXplID0gZm9udFNpemU7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVNZXRyaWNzKHRydWUpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IHJvdGF0aW9uIG9mIHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBSb3RhdGlvbiBpbiByYWRpYW5zXHJcbiAqIEByZXR1cm5zIHt0aGlzfSBVc2VmdWwgZm9yIGNoYWluaW5nXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24oYW5nbGUpIHtcclxuICAgIHRoaXMuX3JvdGF0aW9uID0gdXRpbHMuZGVmYXVsdChhbmdsZSwgdGhpcy5fcm90YXRpb24pO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IHJvdGF0aW9uIG9mIHRleHRcclxuICogQHB1YmxpY1xyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSb3RhdGlvbiBpbiByYWRpYW5zXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24oYW5nbGUpIHtcclxuICAgIHJldHVybiB0aGlzLl9yb3RhdGlvbjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIHAgaW5zdGFuY2UgdGhhdCBpcyB1c2VkIGZvciBkcmF3aW5nXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIHtvYmplY3R9IHAgLSBJbnN0YW5jZSBvZiBwNSBmb3IgZHJhd2luZy4gVGhpcyBpcyBvbmx5IG5lZWRlZCB3aGVuIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgIHVzaW5nIGFuIG9mZnNjcmVlbiByZW5kZXJlciBvciB3aGVuIHVzaW5nIHA1IGluIGluc3RhbmNlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgbW9kZS5cclxuICogQHJldHVybnMge3RoaXN9IFVzZWZ1bCBmb3IgY2hhaW5pbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuc2V0UEluc3RhbmNlID0gZnVuY3Rpb24ocCkge1xyXG4gICAgdGhpcy5fcCA9IHV0aWxzLmRlZmF1bHQocCwgdGhpcy5fcCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcm90YXRpb24gb2YgdGV4dFxyXG4gKiBAcHVibGljXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IEluc3RhbmNlIG9mIHA1IHRoYXQgaXMgYmVpbmcgdXNlZCBmb3IgZHJhd2luZ1xyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5nZXRQSW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9wO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNldCBhbmNob3IgcG9pbnQgZm9yIHRleHQgKGhvcml6b25hbCBhbmQgdmVydGljYWwgYWxpZ25tZW50KSByZWxhdGl2ZSB0b1xyXG4gKiBib3VuZGluZyBib3hcclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2hBbGlnbj1DRU5URVJdIC0gSG9yaXpvbmFsIGFsaWdubWVudFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW3ZBbGlnbj1DRU5URVJdIC0gVmVydGljYWwgYmFzZWxpbmVcclxuICogQHBhcmFtIHtib29sZWFufSBbdXBkYXRlUG9zaXRpb249ZmFsc2VdIC0gSWYgc2V0IHRvIHRydWUsIHRoZSBwb3NpdGlvbiBvZiB0aGVcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHRleHQgd2lsbCBiZSBzaGlmdGVkIHNvIHRoYXRcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHRleHQgd2lsbCBiZSBkcmF3biBpbiB0aGUgc2FtZVxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZSBpdCB3YXMgYmVmb3JlIGNhbGxpbmcgXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFuY2hvci5cclxuICogQHJldHVybnMge3RoaXN9IFVzZWZ1bCBmb3IgY2hhaW5pbmdcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuc2V0QW5jaG9yID0gZnVuY3Rpb24oaEFsaWduLCB2QWxpZ24sIHVwZGF0ZVBvc2l0aW9uKSB7XHJcbiAgICB2YXIgb2xkUG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyh0aGlzLl94LCB0aGlzLl95KTtcclxuICAgIHRoaXMuX2hBbGlnbiA9IHV0aWxzLmRlZmF1bHQoaEFsaWduLCBCYm94QWxpZ25lZFRleHQuQUxJR04uQ0VOVEVSKTtcclxuICAgIHRoaXMuX3ZBbGlnbiA9IHV0aWxzLmRlZmF1bHQodkFsaWduLCBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuQ0VOVEVSKTtcclxuICAgIGlmICh1cGRhdGVQb3NpdGlvbikge1xyXG4gICAgICAgIHZhciBuZXdQb3MgPSB0aGlzLl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzKHRoaXMuX3gsIHRoaXMuX3kpO1xyXG4gICAgICAgIHRoaXMuX3ggKz0gb2xkUG9zLnggLSBuZXdQb3MueDtcclxuICAgICAgICB0aGlzLl95ICs9IG9sZFBvcy55IC0gbmV3UG9zLnk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGJvdW5kaW5nIGJveCB3aGVuIHRoZSB0ZXh0IGlzIHBsYWNlZCBhdCB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGVzLlxyXG4gKiBOb3RlOiB0aGlzIGlzIHRoZSB1bnJvdGF0ZWQgYm91bmRpbmcgYm94ISBUT0RPOiBGaXggdGhpcy5cclxuICogQHBhcmFtIHtudW1iZXJ9IFt4PWN1cnJlbnQgeF0gLSBBIG5ldyB4IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXNcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWFuZW50bHkuIFxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3k9Y3VycmVudCB5XSAtIEEgbmV3IHkgY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtYW5lbnRseS5cclxuICogQHJldHVybiB7b2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXM6IHgsIHksIHcsIGhcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZ2V0QmJveCA9IGZ1bmN0aW9uKHgsIHkpIHtcclxuICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB2YXIgcG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyh0aGlzLl94LCB0aGlzLl95KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogcG9zLnggKyB0aGlzLl9ib3VuZHNPZmZzZXQueCxcclxuICAgICAgICB5OiBwb3MueSArIHRoaXMuX2JvdW5kc09mZnNldC55LFxyXG4gICAgICAgIHc6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgaDogdGhpcy5oZWlnaHRcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0IGFuIGFycmF5IG9mIHBvaW50cyB0aGF0IGZvbGxvdyBhbG9uZyB0aGUgdGV4dCBwYXRoLiBUaGlzIHdpbGwgdGFrZSBpbnRvXHJcbiAqIGNvbnNpZGVyYXRpb24gdGhlIGN1cnJlbnQgYWxpZ25tZW50IHNldHRpbmdzLlxyXG4gKiBOb3RlOiB0aGlzIGlzIGEgdGhpbiB3cmFwcGVyIGFyb3VuZCBhIHA1IG1ldGhvZCBhbmQgZG9lc24ndCBoYW5kbGUgdW5yb3RhdGVkXHJcbiAqIHRleHQhIFRPRE86IEZpeCB0aGlzLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gW3g9Y3VycmVudCB4XSAtIEEgbmV3IHggY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpc1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgY2hhbmdlIHRoZSB0ZXh0J3MgeCBwb3NpdGlvbiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtYW5lbnRseS4gXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeT1jdXJyZW50IHldIC0gQSBuZXcgeSBjb29yZGluYXRlIG9mIHRleHQgYW5jaG9yLiBUaGlzXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbCBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1hbmVudGx5LlxyXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gQW4gb2JqZWN0IHRoYXQgY2FuIGhhdmU6XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gc2FtcGxlRmFjdG9yOiByYXRpbyBvZiBwYXRoLWxlbmd0aCB0byBudW1iZXJcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiBzYW1wbGVzIChkZWZhdWx0PTAuMjUpLiBIaWdoZXIgdmFsdWVzIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIG1vcmVwb2ludHMgYW5kIGFyZSB0aGVyZWZvcmUgbW9yZSBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNlLiBcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBzaW1wbGlmeVRocmVzaG9sZDogaWYgc2V0IHRvIGEgbm9uLXplcm8gXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsIGNvbGxpbmVhciBwb2ludHMgd2lsbCBiZSByZW1vdmVkLiBUaGVcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSByZXByZXNlbnRzIHRoZSB0aHJlc2hvbGQgYW5nbGUgdG8gdXNlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiBkZXRlcm1pbmluZyB3aGV0aGVyIHR3byBlZGdlcyBhcmUgXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGluZWFyLlxyXG4gKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgb2YgcG9pbnRzLCBlYWNoIHdpdGggeCwgeSAmIGFscGhhICh0aGUgcGF0aCBhbmdsZSlcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZ2V0VGV4dFBvaW50cyA9IGZ1bmN0aW9uKHgsIHksIG9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB2YXIgcG9pbnRzID0gdGhpcy5fZm9udC50ZXh0VG9Qb2ludHModGhpcy5fdGV4dCwgdGhpcy5feCwgdGhpcy5feSwgXHJcbiAgICAgICAgdGhpcy5fZm9udFNpemUsIG9wdGlvbnMpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICB2YXIgcG9zID0gdGhpcy5fY2FsY3VsYXRlQWxpZ25lZENvb3Jkcyhwb2ludHNbaV0ueCwgcG9pbnRzW2ldLnkpO1xyXG4gICAgICAgIHBvaW50c1tpXS54ID0gcG9zLng7XHJcbiAgICAgICAgcG9pbnRzW2ldLnkgPSBwb3MueTtcclxuICAgIH1cclxuICAgIHJldHVybiBwb2ludHM7XHJcbn07XHJcblxyXG4vKipcclxuICogRHJhd3MgdGhlIHRleHQgcGFydGljbGUgd2l0aCB0aGUgc3BlY2lmaWVkIHN0eWxlIHBhcmFtZXRlcnMuIE5vdGU6IHRoaXMgaXNcclxuICogZ29pbmcgdG8gc2V0IHRoZSB0ZXh0Rm9udCwgdGV4dFNpemUgJiByb3RhdGlvbiBiZWZvcmUgZHJhd2luZy4gWW91IHNob3VsZCBzZXRcclxuICogdGhlIGNvbG9yL3N0cm9rZS9maWxsIHRoYXQgeW91IHdhbnQgYmVmb3JlIGRyYXdpbmcuIFRoaXMgZnVuY3Rpb24gd2lsbCBjbGVhblxyXG4gKiB1cCBhZnRlciBpdHNlbGYgYW5kIHJlc2V0IHN0eWxpbmcgYmFjayB0byB3aGF0IGl0IHdhcyBiZWZvcmUgaXQgd2FzIGNhbGxlZC5cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gW3g9Y3VycmVudCB4XSAtIEEgbmV3IHggY29vcmRpbmF0ZSBvZiB0ZXh0IGFuY2hvci4gVGhpcyB3aWxsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgdGhlIHRleHQncyB4IHBvc2l0aW9uIHBlcm1hbmVudGx5LiBcclxuICogQHBhcmFtIHtudW1iZXJ9IFt5PWN1cnJlbnQgeV0gLSBBIG5ldyB5IGNvb3JkaW5hdGUgb2YgdGV4dCBhbmNob3IuIFRoaXMgd2lsbFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZSB0aGUgdGV4dCdzIHggcG9zaXRpb24gcGVybWFuZW50bHkuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RyYXdCb3VuZHM9ZmFsc2VdIC0gRmxhZyBmb3IgZHJhd2luZyBib3VuZGluZyBib3hcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKHgsIHksIGRyYXdCb3VuZHMpIHtcclxuICAgIGRyYXdCb3VuZHMgPSB1dGlscy5kZWZhdWx0KGRyYXdCb3VuZHMsIGZhbHNlKTtcclxuICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB2YXIgcG9zID0ge1xyXG4gICAgICAgIHg6IHRoaXMuX3gsIFxyXG4gICAgICAgIHk6IHRoaXMuX3lcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5fcC5wdXNoKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9yb3RhdGlvbikge1xyXG4gICAgICAgICAgICBwb3MgPSB0aGlzLl9jYWxjdWxhdGVSb3RhdGVkQ29vcmRzKHBvcy54LCBwb3MueSwgdGhpcy5fcm90YXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLl9wLnJvdGF0ZSh0aGlzLl9yb3RhdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwb3MgPSB0aGlzLl9jYWxjdWxhdGVBbGlnbmVkQ29vcmRzKHBvcy54LCBwb3MueSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3AudGV4dEFsaWduKHRoaXMuX3AuTEVGVCwgdGhpcy5fcC5CQVNFTElORSk7XHJcbiAgICAgICAgdGhpcy5fcC50ZXh0Rm9udCh0aGlzLl9mb250KTtcclxuICAgICAgICB0aGlzLl9wLnRleHRTaXplKHRoaXMuX2ZvbnRTaXplKTtcclxuICAgICAgICB0aGlzLl9wLnRleHQodGhpcy5fdGV4dCwgcG9zLngsIHBvcy55KTtcclxuXHJcbiAgICAgICAgaWYgKGRyYXdCb3VuZHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fcC5zdHJva2UoMjAwKTtcclxuICAgICAgICAgICAgdmFyIGJvdW5kc1ggPSBwb3MueCArIHRoaXMuX2JvdW5kc09mZnNldC54O1xyXG4gICAgICAgICAgICB2YXIgYm91bmRzWSA9IHBvcy55ICsgdGhpcy5fYm91bmRzT2Zmc2V0Lnk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Aubm9GaWxsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3AucmVjdChib3VuZHNYLCBib3VuZHNZLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgIHRoaXMuX3AucG9wKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogUHJvamVjdCB0aGUgY29vcmRpbmF0ZXMgKHgsIHkpIGludG8gYSByb3RhdGVkIGNvb3JkaW5hdGUgc3lzdGVtXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gWCBjb29yZGluYXRlIChpbiB1bnJvdGF0ZWQgc3BhY2UpXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gWSBjb29yZGluYXRlIChpbiB1bnJvdGF0ZWQgc3BhY2UpXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSAtIFJhZGlhbnMgb2Ygcm90YXRpb24gdG8gYXBwbHlcclxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCB4ICYgeSBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5CYm94QWxpZ25lZFRleHQucHJvdG90eXBlLl9jYWxjdWxhdGVSb3RhdGVkQ29vcmRzID0gZnVuY3Rpb24gKHgsIHksIGFuZ2xlKSB7ICBcclxuICAgIHZhciByeCA9IE1hdGguY29zKGFuZ2xlKSAqIHggKyBNYXRoLmNvcyhNYXRoLlBJIC8gMiAtIGFuZ2xlKSAqIHk7XHJcbiAgICB2YXIgcnkgPSAtTWF0aC5zaW4oYW5nbGUpICogeCArIE1hdGguc2luKE1hdGguUEkgLyAyIC0gYW5nbGUpICogeTtcclxuICAgIHJldHVybiB7eDogcngsIHk6IHJ5fTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGRyYXcgY29vcmRpbmF0ZXMgZm9yIHRoZSB0ZXh0LCBhbGlnbmluZyBiYXNlZCBvbiB0aGUgYm91bmRpbmcgYm94LlxyXG4gKiBUaGUgdGV4dCBpcyBldmVudHVhbGx5IGRyYXduIHdpdGggY2FudmFzIGFsaWdubWVudCBzZXQgdG8gbGVmdCAmIGJhc2VsaW5lLCBzb1xyXG4gKiB0aGlzIGZ1bmN0aW9uIHRha2VzIGEgZGVzaXJlZCBwb3MgJiBhbGlnbm1lbnQgYW5kIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlXHJcbiAqIGNvb3JkaW5hdGVzIGZvciB0aGUgbGVmdCAmIGJhc2VsaW5lLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggY29vcmRpbmF0ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0geSAtIFkgY29vcmRpbmF0ZVxyXG4gKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCB3aXRoIHggJiB5IHByb3BlcnRpZXNcclxuICovXHJcbkJib3hBbGlnbmVkVGV4dC5wcm90b3R5cGUuX2NhbGN1bGF0ZUFsaWduZWRDb29yZHMgPSBmdW5jdGlvbih4LCB5KSB7XHJcbiAgICB2YXIgbmV3WCwgbmV3WTtcclxuICAgIHN3aXRjaCAodGhpcy5faEFsaWduKSB7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQUxJR04uQk9YX0xFRlQ6XHJcbiAgICAgICAgICAgIG5ld1ggPSB4O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfQ0VOVEVSOlxyXG4gICAgICAgICAgICBuZXdYID0geCAtIHRoaXMuaGFsZldpZHRoO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5BTElHTi5CT1hfUklHSFQ6XHJcbiAgICAgICAgICAgIG5ld1ggPSB4IC0gdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgbmV3WCA9IHg7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5yZWNvZ25pemVkIGhvcml6b25hbCBhbGlnbjpcIiwgdGhpcy5faEFsaWduKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHRoaXMuX3ZBbGlnbikge1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9UT1A6XHJcbiAgICAgICAgICAgIG5ld1kgPSB5IC0gdGhpcy5fYm91bmRzT2Zmc2V0Lnk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVI6XHJcbiAgICAgICAgICAgIG5ld1kgPSB5ICsgdGhpcy5fZGlzdEJhc2VUb01pZDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCYm94QWxpZ25lZFRleHQuQkFTRUxJTkUuQk9YX0JPVFRPTTpcclxuICAgICAgICAgICAgbmV3WSA9IHkgLSB0aGlzLl9kaXN0QmFzZVRvQm90dG9tO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJib3hBbGlnbmVkVGV4dC5CQVNFTElORS5GT05UX0NFTlRFUjpcclxuICAgICAgICAgICAgLy8gSGVpZ2h0IGlzIGFwcHJveGltYXRlZCBhcyBhc2NlbnQgKyBkZXNjZW50XHJcbiAgICAgICAgICAgIG5ld1kgPSB5IC0gdGhpcy5fZGVzY2VudCArICh0aGlzLl9hc2NlbnQgKyB0aGlzLl9kZXNjZW50KSAvIDI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmJveEFsaWduZWRUZXh0LkJBU0VMSU5FLkFMUEhBQkVUSUM6XHJcbiAgICAgICAgICAgIG5ld1kgPSB5O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBuZXdZID0geTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbnJlY29nbml6ZWQgdmVydGljYWwgYWxpZ246XCIsIHRoaXMuX3ZBbGlnbik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHt4OiBuZXdYLCB5OiBuZXdZfTtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBib3VuZGluZyBib3ggYW5kIHZhcmlvdXMgbWV0cmljcyBmb3IgdGhlIGN1cnJlbnQgdGV4dCBhbmQgZm9udFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuQmJveEFsaWduZWRUZXh0LnByb3RvdHlwZS5fY2FsY3VsYXRlTWV0cmljcyA9IGZ1bmN0aW9uKHNob3VsZFVwZGF0ZUhlaWdodCkgeyAgXHJcbiAgICAvLyBwNSAwLjUuMCBoYXMgYSBidWcgLSB0ZXh0IGJvdW5kcyBhcmUgY2xpcHBlZCBieSAoMCwgMClcclxuICAgIC8vIENhbGN1bGF0aW5nIGJvdW5kcyBoYWNrXHJcbiAgICB2YXIgYm91bmRzID0gdGhpcy5fZm9udC50ZXh0Qm91bmRzKHRoaXMuX3RleHQsIDEwMDAsIDEwMDAsIHRoaXMuX2ZvbnRTaXplKTtcclxuICAgIC8vIEJvdW5kcyBpcyBhIHJlZmVyZW5jZSAtIGlmIHdlIG1lc3Mgd2l0aCBpdCBkaXJlY3RseSwgd2UgY2FuIG1lc3MgdXAgXHJcbiAgICAvLyBmdXR1cmUgdmFsdWVzISAoSXQgY2hhbmdlcyB0aGUgYmJveCBjYWNoZSBpbiBwNS4pXHJcbiAgICBib3VuZHMgPSB7IFxyXG4gICAgICAgIHg6IGJvdW5kcy54IC0gMTAwMCwgXHJcbiAgICAgICAgeTogYm91bmRzLnkgLSAxMDAwLCBcclxuICAgICAgICB3OiBib3VuZHMudywgXHJcbiAgICAgICAgaDogYm91bmRzLmggXHJcbiAgICB9OyBcclxuXHJcbiAgICBpZiAoc2hvdWxkVXBkYXRlSGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5fYXNjZW50ID0gdGhpcy5fZm9udC5fdGV4dEFzY2VudCh0aGlzLl9mb250U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5fZGVzY2VudCA9IHRoaXMuX2ZvbnQuX3RleHREZXNjZW50KHRoaXMuX2ZvbnRTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVc2UgYm91bmRzIHRvIGNhbGN1bGF0ZSBmb250IG1ldHJpY3NcclxuICAgIHRoaXMud2lkdGggPSBib3VuZHMudztcclxuICAgIHRoaXMuaGVpZ2h0ID0gYm91bmRzLmg7XHJcbiAgICB0aGlzLmhhbGZXaWR0aCA9IHRoaXMud2lkdGggLyAyO1xyXG4gICAgdGhpcy5oYWxmSGVpZ2h0ID0gdGhpcy5oZWlnaHQgLyAyO1xyXG4gICAgdGhpcy5fYm91bmRzT2Zmc2V0ID0geyB4OiBib3VuZHMueCwgeTogYm91bmRzLnkgfTtcclxuICAgIHRoaXMuX2Rpc3RCYXNlVG9NaWQgPSBNYXRoLmFicyhib3VuZHMueSkgLSB0aGlzLmhhbGZIZWlnaHQ7XHJcbiAgICB0aGlzLl9kaXN0QmFzZVRvQm90dG9tID0gdGhpcy5oZWlnaHQgLSBNYXRoLmFicyhib3VuZHMueSk7XHJcbn07IiwiZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24odmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgcmV0dXJuICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSA/IHZhbHVlIDogZGVmYXVsdFZhbHVlO1xyXG59OyIsIm1vZHVsZS5leHBvcnRzID0gSG92ZXJTbGlkZXNob3dzO1xyXG5cclxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoXCIuL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbmZ1bmN0aW9uIEhvdmVyU2xpZGVzaG93cyhzbGlkZXNob3dEZWxheSwgdHJhbnNpdGlvbkR1cmF0aW9uKSB7XHJcbiAgICB0aGlzLl9zbGlkZXNob3dEZWxheSA9IChzbGlkZXNob3dEZWxheSAhPT0gdW5kZWZpbmVkKSA/IHNsaWRlc2hvd0RlbGF5IDogXHJcbiAgICAgICAgMjAwMDtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9ICh0cmFuc2l0aW9uRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgPyBcclxuICAgICAgICBfdHJhbnNpdGlvbkR1cmF0aW9uIDogMTAwMDsgICBcclxuXHJcbiAgICB0aGlzLl9zbGlkZXNob3dzID0gW107XHJcbiAgICB0aGlzLnJlbG9hZCgpO1xyXG59XHJcblxyXG5Ib3ZlclNsaWRlc2hvd3MucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIE5vdGU6IHRoaXMgaXMgY3VycmVudGx5IG5vdCByZWFsbHkgYmVpbmcgdXNlZC4gV2hlbiBhIHBhZ2UgaXMgbG9hZGVkLFxyXG4gICAgLy8gbWFpbi5qcyBpcyBqdXN0IHJlLWluc3RhbmNpbmcgdGhlIEhvdmVyU2xpZGVzaG93c1xyXG4gICAgdmFyIG9sZFNsaWRlc2hvd3MgPSB0aGlzLl9zbGlkZXNob3dzIHx8IFtdO1xyXG4gICAgdGhpcy5fc2xpZGVzaG93cyA9IFtdO1xyXG4gICAgJChcIi5ob3Zlci1zbGlkZXNob3dcIikuZWFjaChmdW5jdGlvbiAoXywgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fZmluZEluU2xpZGVzaG93cyhlbGVtZW50LCBvbGRTbGlkZXNob3dzKTtcclxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZXNob3cgPSBvbGRTbGlkZXNob3dzLnNwbGljZShpbmRleCwgMSlbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX3NsaWRlc2hvd3MucHVzaChzbGlkZXNob3cpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NsaWRlc2hvd3MucHVzaChuZXcgU2xpZGVzaG93KCRlbGVtZW50LCB0aGlzLl9zbGlkZXNob3dEZWxheSxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbikpO1xyXG4gICAgICAgIH1cclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbn07XHJcblxyXG5Ib3ZlclNsaWRlc2hvd3MucHJvdG90eXBlLl9maW5kSW5TbGlkZXNob3dzID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNsaWRlc2hvd3MpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVzaG93cy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIGlmIChlbGVtZW50ID09PSBzbGlkZXNob3dzW2ldLmdldEVsZW1lbnQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gLTE7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBTbGlkZXNob3coJGNvbnRhaW5lciwgc2xpZGVzaG93RGVsYXksIHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgdGhpcy5fJGNvbnRhaW5lciA9ICRjb250YWluZXI7XHJcbiAgICB0aGlzLl9zbGlkZXNob3dEZWxheSA9IHNsaWRlc2hvd0RlbGF5O1xyXG4gICAgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uID0gdHJhbnNpdGlvbkR1cmF0aW9uO1xyXG4gICAgdGhpcy5fdGltZW91dElkID0gbnVsbDtcclxuICAgIHRoaXMuX2ltYWdlSW5kZXggPSAwO1xyXG4gICAgdGhpcy5fJGltYWdlcyA9IFtdO1xyXG5cclxuICAgIC8vIFNldCB1cCBhbmQgY2FjaGUgcmVmZXJlbmNlcyB0byBpbWFnZXNcclxuICAgIHRoaXMuXyRjb250YWluZXIuZmluZChcImltZ1wiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciAkaW1hZ2UgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICRpbWFnZS5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICB0b3A6IFwiMFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBcIjBcIixcclxuICAgICAgICAgICAgekluZGV4OiAoaW5kZXggPT09IDApID8gMiA6IDAgLy8gRmlyc3QgaW1hZ2Ugc2hvdWxkIGJlIG9uIHRvcFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZXMucHVzaCgkaW1hZ2UpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgd2hldGhlciB0byBiaW5kIGludGVyYWN0aXZpdHlcclxuICAgIHRoaXMuX251bUltYWdlcyA9IHRoaXMuXyRpbWFnZXMubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuX251bUltYWdlcyA8PSAxKSByZXR1cm47XHJcblxyXG4gICAgLy8gQmluZCBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuXyRjb250YWluZXIub24oXCJtb3VzZWVudGVyXCIsIHRoaXMuX29uRW50ZXIuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kY29udGFpbmVyLm9uKFwibW91c2VsZWF2ZVwiLCB0aGlzLl9vbkxlYXZlLmJpbmQodGhpcykpO1xyXG5cclxufVxyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuXyRjb250YWluZXIuZ2V0KDApO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXQkRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLl8kY29udGFpbmVyO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5fb25FbnRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIEZpcnN0IHRyYW5zaXRpb24gc2hvdWxkIGhhcHBlbiBwcmV0dHkgc29vbiBhZnRlciBob3ZlcmluZyBpbiBvcmRlclxyXG4gICAgLy8gdG8gY2x1ZSB0aGUgdXNlciBpbnRvIHdoYXQgaXMgaGFwcGVuaW5nXHJcbiAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX2FkdmFuY2VTbGlkZXNob3cuYmluZCh0aGlzKSwgNTAwKTtcclxufTtcclxuXHJcblNsaWRlc2hvdy5wcm90b3R5cGUuX29uTGVhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMuX3RpbWVvdXRJZCk7ICBcclxuICAgIHRoaXMuX3RpbWVvdXRJZCA9IG51bGw7ICAgICAgXHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLl9hZHZhbmNlU2xpZGVzaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5faW1hZ2VJbmRleCArPSAxO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgLy8gTW92ZSB0aGUgaW1hZ2UgZnJvbSAyIHN0ZXBzIGFnbyBkb3duIHRvIHRoZSBib3R0b20gei1pbmRleCBhbmQgbWFrZVxyXG4gICAgLy8gaXQgaW52aXNpYmxlXHJcbiAgICBpZiAodGhpcy5fbnVtSW1hZ2VzID49IDMpIHtcclxuICAgICAgICBpID0gdXRpbGl0aWVzLndyYXBJbmRleCh0aGlzLl9pbWFnZUluZGV4IC0gMiwgdGhpcy5fbnVtSW1hZ2VzKTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzW2ldLmNzcyh7XHJcbiAgICAgICAgICAgIHpJbmRleDogMCxcclxuICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZXNbaV0udmVsb2NpdHkoXCJzdG9wXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vdmUgdGhlIGltYWdlIGZyb20gMSBzdGVwcyBhZ28gZG93biB0byB0aGUgbWlkZGxlIHotaW5kZXggYW5kIG1ha2VcclxuICAgIC8vIGl0IGNvbXBsZXRlbHkgdmlzaWJsZVxyXG4gICAgaWYgKHRoaXMuX251bUltYWdlcyA+PSAyKSB7XHJcbiAgICAgICAgaSA9IHV0aWxpdGllcy53cmFwSW5kZXgodGhpcy5faW1hZ2VJbmRleCAtIDEsIHRoaXMuX251bUltYWdlcyk7XHJcbiAgICAgICAgdGhpcy5fJGltYWdlc1tpXS5jc3Moe1xyXG4gICAgICAgICAgICB6SW5kZXg6IDEsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VzW2ldLnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNb3ZlIHRoZSBjdXJyZW50IGltYWdlIHRvIHRoZSB0b3Agei1pbmRleCBhbmQgZmFkZSBpdCBpblxyXG4gICAgdGhpcy5faW1hZ2VJbmRleCA9IHV0aWxpdGllcy53cmFwSW5kZXgodGhpcy5faW1hZ2VJbmRleCwgdGhpcy5fbnVtSW1hZ2VzKTtcclxuICAgIHRoaXMuXyRpbWFnZXNbdGhpcy5faW1hZ2VJbmRleF0uY3NzKHtcclxuICAgICAgICB6SW5kZXg6IDIsXHJcbiAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl8kaW1hZ2VzW3RoaXMuX2ltYWdlSW5kZXhdLnZlbG9jaXR5KHtcclxuICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24sIFwiZWFzZUluT3V0UXVhZFwiKTtcclxuXHJcbiAgICAvLyBTY2hlZHVsZSBuZXh0IHRyYW5zaXRpb25cclxuICAgIHRoaXMuX3RpbWVvdXRJZCA9IHNldFRpbWVvdXQodGhpcy5fYWR2YW5jZVNsaWRlc2hvdy5iaW5kKHRoaXMpLCBcclxuICAgICAgICB0aGlzLl9zbGlkZXNob3dEZWxheSk7XHJcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBCYXNlTG9nb1NrZXRjaDtcclxuXHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG5mdW5jdGlvbiBCYXNlTG9nb1NrZXRjaCgkbmF2LCAkbmF2TG9nbywgZm9udFBhdGgpIHtcclxuICAgIHRoaXMuXyRuYXYgPSAkbmF2O1xyXG4gICAgdGhpcy5fJG5hdkxvZ28gPSAkbmF2TG9nbztcclxuICAgIHRoaXMuX2ZvbnRQYXRoID0gZm9udFBhdGg7XHJcblxyXG4gICAgdGhpcy5fdGV4dCA9IHRoaXMuXyRuYXZMb2dvLnRleHQoKTtcclxuICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IHRydWU7XHJcbiAgICB0aGlzLl9pc01vdXNlT3ZlciA9IGZhbHNlO1xyXG4gICAgdGhpcy5faXNPdmVyTmF2TG9nbyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX3VwZGF0ZVRleHRPZmZzZXQoKTtcclxuICAgIHRoaXMuX3VwZGF0ZVNpemUoKTtcclxuICAgIHRoaXMuX3VwZGF0ZUZvbnRTaXplKCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgKHJlbGF0aXZlIHBvc2l0aW9uZWQpIGNvbnRhaW5lciBmb3IgdGhlIHNrZXRjaCBpbnNpZGUgb2YgdGhlXHJcbiAgICAvLyBuYXYsIGJ1dCBtYWtlIHN1cmUgdGhhdCBpdCBpcyBCRUhJTkQgZXZlcnl0aGluZyBlbHNlLiBFdmVudHVhbGx5LCB3ZSB3aWxsXHJcbiAgICAvLyBkcm9wIGp1c3QgdGhlIG5hdiBsb2dvIChub3QgdGhlIG5hdiBsaW5rcyEpIGJlaGluZCB0aGUgY2FudmFzLlxyXG4gICAgdGhpcy5fJGNvbnRhaW5lciA9ICQoXCI8ZGl2PlwiKVxyXG4gICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICB0b3A6IFwiMHB4XCIsXHJcbiAgICAgICAgICAgIGxlZnQ6IFwiMHB4XCJcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5wcmVwZW5kVG8odGhpcy5fJG5hdilcclxuICAgICAgICAuaGlkZSgpO1xyXG5cclxuICAgIHRoaXMuX2NyZWF0ZVA1SW5zdGFuY2UoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIG5ldyBwNSBpbnN0YW5jZSBhbmQgYmluZCB0aGUgYXBwcm9wcmlhdGUgY2xhc3MgbWV0aG9kcyB0byB0aGVcclxuICogaW5zdGFuY2UuIFRoaXMgYWxzbyBmaWxscyBpbiB0aGUgcCBwYXJhbWV0ZXIgb24gdGhlIGNsYXNzIG1ldGhvZHMgKHNldHVwLFxyXG4gKiBkcmF3LCBldGMuKSBzbyB0aGF0IHRob3NlIGZ1bmN0aW9ucyBjYW4gYmUgYSBsaXR0bGUgbGVzcyB2ZXJib3NlIDopIFxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9jcmVhdGVQNUluc3RhbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbmV3IHA1KGZ1bmN0aW9uKHApIHtcclxuICAgICAgICB0aGlzLl9wID0gcDtcclxuICAgICAgICBwLnByZWxvYWQgPSB0aGlzLl9wcmVsb2FkLmJpbmQodGhpcywgcCk7XHJcbiAgICAgICAgcC5zZXR1cCA9IHRoaXMuX3NldHVwLmJpbmQodGhpcywgcCk7XHJcbiAgICAgICAgcC5kcmF3ID0gdGhpcy5fZHJhdy5iaW5kKHRoaXMsIHApO1xyXG4gICAgfS5iaW5kKHRoaXMpLCB0aGlzLl8kY29udGFpbmVyLmdldCgwKSk7XHJcbn07XHJcblxyXG4vKipcclxuICogRmluZCB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgdG9wIGxlZnQgb2YgdGhlIG5hdiB0byB0aGUgYnJhbmQgbG9nbydzIGJhc2VsaW5lLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl91cGRhdGVUZXh0T2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhc2VsaW5lRGl2ID0gJChcIjxkaXY+XCIpXHJcbiAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXHJcbiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246IFwiYmFzZWxpbmVcIlxyXG4gICAgICAgIH0pLnByZXBlbmRUbyh0aGlzLl8kbmF2TG9nbyk7XHJcbiAgICB2YXIgbmF2T2Zmc2V0ID0gdGhpcy5fJG5hdi5vZmZzZXQoKTtcclxuICAgIHZhciBsb2dvQmFzZWxpbmVPZmZzZXQgPSBiYXNlbGluZURpdi5vZmZzZXQoKTtcclxuICAgIHRoaXMuX3RleHRPZmZzZXQgPSB7XHJcbiAgICAgICAgdG9wOiBsb2dvQmFzZWxpbmVPZmZzZXQudG9wIC0gbmF2T2Zmc2V0LnRvcCxcclxuICAgICAgICBsZWZ0OiBsb2dvQmFzZWxpbmVPZmZzZXQubGVmdCAtIG5hdk9mZnNldC5sZWZ0XHJcbiAgICB9O1xyXG4gICAgYmFzZWxpbmVEaXYucmVtb3ZlKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogRmluZCB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBicmFuZCBsb2dvIGluIHRoZSBuYXYuIFRoaXMgYmJveCBjYW4gdGhlbiBiZSBcclxuICogdXNlZCB0byBjb250cm9sIHdoZW4gdGhlIGN1cnNvciBzaG91bGQgYmUgYSBwb2ludGVyLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9jYWxjdWxhdGVOYXZMb2dvQm91bmRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5hdk9mZnNldCA9IHRoaXMuXyRuYXYub2Zmc2V0KCk7XHJcbiAgICB2YXIgbG9nb09mZnNldCA9IHRoaXMuXyRuYXZMb2dvLm9mZnNldCgpO1xyXG4gICAgdGhpcy5fbG9nb0Jib3ggPSB7XHJcbiAgICAgICAgeTogbG9nb09mZnNldC50b3AgLSBuYXZPZmZzZXQudG9wLFxyXG4gICAgICAgIHg6IGxvZ29PZmZzZXQubGVmdCAtIG5hdk9mZnNldC5sZWZ0LFxyXG4gICAgICAgIHc6IHRoaXMuXyRuYXZMb2dvLm91dGVyV2lkdGgoKSwgLy8gRXhjbHVkZSBtYXJnaW4gZnJvbSB0aGUgYmJveFxyXG4gICAgICAgIGg6IHRoaXMuXyRuYXZMb2dvLm91dGVySGVpZ2h0KCkgLy8gTGlua3MgYXJlbid0IGNsaWNrYWJsZSBvbiBtYXJnaW5cclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBkaW1lbnNpb25zIHRvIG1hdGNoIHRoZSBuYXYgLSBleGNsdWRpbmcgYW55IG1hcmdpbiwgcGFkZGluZyAmIFxyXG4gKiBib3JkZXIuXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3VwZGF0ZVNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl93aWR0aCA9IHRoaXMuXyRuYXYuaW5uZXJXaWR0aCgpO1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gdGhpcy5fJG5hdi5pbm5lckhlaWdodCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdyYWIgdGhlIGZvbnQgc2l6ZSBmcm9tIHRoZSBicmFuZCBsb2dvIGxpbmsuIFRoaXMgbWFrZXMgdGhlIGZvbnQgc2l6ZSBvZiB0aGVcclxuICogc2tldGNoIHJlc3BvbnNpdmUuXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3VwZGF0ZUZvbnRTaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fZm9udFNpemUgPSB0aGlzLl8kbmF2TG9nby5jc3MoXCJmb250U2l6ZVwiKS5yZXBsYWNlKFwicHhcIiwgXCJcIik7XHJcbn07XHJcblxyXG4vKipcclxuICogV2hlbiB0aGUgYnJvd3NlciBpcyByZXNpemVkLCByZWNhbGN1bGF0ZSBhbGwgdGhlIG5lY2Vzc2FyeSBzdGF0cyBzbyB0aGF0IHRoZVxyXG4gKiBza2V0Y2ggY2FuIGJlIHJlc3BvbnNpdmUuIFRoZSBsb2dvIGluIHRoZSBza2V0Y2ggc2hvdWxkIEFMV0FZUyBleGFjdGx5IG1hdGNoXHJcbiAqIHRoZSBicmFuZyBsb2dvIGxpbmsgdGhlIEhUTUwuXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHRoaXMuX3VwZGF0ZVNpemUoKTtcclxuICAgIHRoaXMuX3VwZGF0ZUZvbnRTaXplKCk7XHJcbiAgICB0aGlzLl91cGRhdGVUZXh0T2Zmc2V0KCk7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVOYXZMb2dvQm91bmRzKCk7XHJcbiAgICBwLnJlc2l6ZUNhbnZhcyh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgdGhlIF9pc01vdXNlT3ZlciBwcm9wZXJ0eS4gXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3NldE1vdXNlT3ZlciA9IGZ1bmN0aW9uIChpc01vdXNlT3Zlcikge1xyXG4gICAgdGhpcy5faXNNb3VzZU92ZXIgPSBpc01vdXNlT3ZlcjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJZiB0aGUgY3Vyc29yIGlzIHNldCB0byBhIHBvaW50ZXIsIGZvcndhcmQgYW55IGNsaWNrIGV2ZW50cyB0byB0aGUgbmF2IGxvZ28uXHJcbiAqIFRoaXMgcmVkdWNlcyB0aGUgbmVlZCBmb3IgdGhlIGNhbnZhcyB0byBkbyBhbnkgQUpBWC15IHN0dWZmLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9vbkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmICh0aGlzLl9pc092ZXJOYXZMb2dvKSB0aGlzLl8kbmF2TG9nby50cmlnZ2VyKGUpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEJhc2UgcHJlbG9hZCBtZXRob2QgdGhhdCBqdXN0IGxvYWRzIHRoZSBuZWNlc3NhcnkgZm9udFxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9wcmVsb2FkID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHRoaXMuX2ZvbnQgPSBwLmxvYWRGb250KHRoaXMuX2ZvbnRQYXRoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBCYXNlIHNldHVwIG1ldGhvZCB0aGF0IGRvZXMgc29tZSBoZWF2eSBsaWZ0aW5nLiBJdCBoaWRlcyB0aGUgbmF2IGJyYW5kIGxvZ29cclxuICogYW5kIHJldmVhbHMgdGhlIGNhbnZhcy4gSXQgYWxzbyBzZXRzIHVwIGEgbG90IG9mIHRoZSBpbnRlcm5hbCB2YXJpYWJsZXMgYW5kXHJcbiAqIGNhbnZhcyBldmVudHMuXHJcbiAqL1xyXG5CYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3NldHVwID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHZhciByZW5kZXJlciA9IHAuY3JlYXRlQ2FudmFzKHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpO1xyXG4gICAgdGhpcy5fJGNhbnZhcyA9ICQocmVuZGVyZXIuY2FudmFzKTtcclxuXHJcbiAgICAvLyBTaG93IHRoZSBjYW52YXMgYW5kIGhpZGUgdGhlIGxvZ28uIFVzaW5nIHNob3cvaGlkZSBvbiB0aGUgbG9nbyB3aWxsIGNhdXNlXHJcbiAgICAvLyBqUXVlcnkgdG8gbXVjayB3aXRoIHRoZSBwb3NpdGlvbmluZywgd2hpY2ggaXMgdXNlZCB0byBjYWxjdWxhdGUgd2hlcmUgdG9cclxuICAgIC8vIGRyYXcgdGhlIGNhbnZhcyB0ZXh0LiBJbnN0ZWFkLCBqdXN0IHB1c2ggdGhlIGxvZ28gYmVoaW5kIHRoZSBjYW52YXMuIFRoaXNcclxuICAgIC8vIGFsbG93cyBtYWtlcyBpdCBzbyB0aGUgY2FudmFzIGlzIHN0aWxsIGJlaGluZCB0aGUgbmF2IGxpbmtzLlxyXG4gICAgdGhpcy5fJGNvbnRhaW5lci5zaG93KCk7XHJcbiAgICB0aGlzLl8kbmF2TG9nby5jc3MoXCJ6SW5kZXhcIiwgLTEpO1xyXG5cclxuICAgIC8vIFRoZXJlIGlzbid0IGEgZ29vZCB3YXkgdG8gY2hlY2sgd2hldGhlciB0aGUgc2tldGNoIGhhcyB0aGUgbW91c2Ugb3ZlclxyXG4gICAgLy8gaXQuIHAubW91c2VYICYgcC5tb3VzZVkgYXJlIGluaXRpYWxpemVkIHRvICgwLCAwKSwgYW5kIHAuZm9jdXNlZCBpc24ndCBcclxuICAgIC8vIGFsd2F5cyByZWxpYWJsZS5cclxuICAgIHRoaXMuXyRjYW52YXMub24oXCJtb3VzZW92ZXJcIiwgdGhpcy5fc2V0TW91c2VPdmVyLmJpbmQodGhpcywgdHJ1ZSkpO1xyXG4gICAgdGhpcy5fJGNhbnZhcy5vbihcIm1vdXNlb3V0XCIsIHRoaXMuX3NldE1vdXNlT3Zlci5iaW5kKHRoaXMsIGZhbHNlKSk7XHJcblxyXG4gICAgLy8gRm9yd2FyZCBtb3VzZSBjbGlja3MgdG8gdGhlIG5hdiBsb2dvXHJcbiAgICB0aGlzLl8kY2FudmFzLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25DbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgaXMgcmVzaXplZCwgdGV4dCAmIGNhbnZhcyBzaXppbmcgYW5kIHBsYWNlbWVudCBuZWVkIHRvIGJlXHJcbiAgICAvLyByZWNhbGN1bGF0ZWQuIFRoZSBzaXRlIGlzIHJlc3BvbnNpdmUsIHNvIHRoZSBpbnRlcmFjdGl2ZSBjYW52YXMgc2hvdWxkIGJlXHJcbiAgICAvLyB0b28hIFxyXG4gICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIHRoaXMuX29uUmVzaXplLmJpbmQodGhpcywgcCkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEJhc2UgZHJhdyBtZXRob2QgdGhhdCBjb250cm9scyB3aGV0aGVyIG9yIG5vdCB0aGUgY3Vyc29yIGlzIGEgcG9pbnRlci4gSXRcclxuICogc2hvdWxkIG9ubHkgYmUgYSBwb2ludGVyIHdoZW4gdGhlIG1vdXNlIGlzIG92ZXIgdGhlIG5hdiBicmFuZCBsb2dvLlxyXG4gKi9cclxuQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9kcmF3ID0gZnVuY3Rpb24gKHApIHtcclxuICAgIGlmICh0aGlzLl9pc01vdXNlT3Zlcikge1xyXG4gICAgICAgIHZhciBpc092ZXJMb2dvID0gdXRpbHMuaXNJblJlY3QocC5tb3VzZVgsIHAubW91c2VZLCB0aGlzLl9sb2dvQmJveCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc092ZXJOYXZMb2dvICYmIGlzT3ZlckxvZ28pIHtcclxuICAgICAgICAgICAgdGhpcy5faXNPdmVyTmF2TG9nbyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuXyRjYW52YXMuY3NzKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2lzT3Zlck5hdkxvZ28gJiYgIWlzT3ZlckxvZ28pIHtcclxuICAgICAgICAgICAgdGhpcy5faXNPdmVyTmF2TG9nbyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl8kY2FudmFzLmNzcyhcImN1cnNvclwiLCBcImluaXRpYWxcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59OyIsIm1vZHVsZS5leHBvcnRzID0gU2tldGNoO1xyXG5cclxudmFyIEJib3hUZXh0ID0gcmVxdWlyZShcInA1LWJib3gtYWxpZ25lZC10ZXh0XCIpO1xyXG52YXIgQmFzZUxvZ29Ta2V0Y2ggPSByZXF1aXJlKFwiLi9iYXNlLWxvZ28tc2tldGNoLmpzXCIpO1xyXG52YXIgU2luR2VuZXJhdG9yID0gcmVxdWlyZShcIi4vZ2VuZXJhdG9ycy9zaW4tZ2VuZXJhdG9yLmpzXCIpO1xyXG5cclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4uL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZSk7XHJcblxyXG5mdW5jdGlvbiBTa2V0Y2goJG5hdiwgJG5hdkxvZ28pIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLmNhbGwodGhpcywgJG5hdiwgJG5hdkxvZ28sIFwiLi4vZm9udHMvYmlnX2pvaG4td2ViZm9udC50dGZcIik7XHJcbn1cclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUuY2FsbCh0aGlzLCBwKTtcclxuICAgIHRoaXMuX3NwYWNpbmcgPSB1dGlscy5tYXAodGhpcy5fZm9udFNpemUsIDIwLCA0MCwgMiwgNSwge2NsYW1wOiB0cnVlLCBcclxuICAgICAgICByb3VuZDogdHJ1ZX0pO1xyXG4gICAgLy8gVXBkYXRlIHRoZSBiYm94VGV4dCwgcGxhY2Ugb3ZlciB0aGUgbmF2IHRleHQgbG9nbyBhbmQgdGhlbiBzaGlmdCBpdHMgXHJcbiAgICAvLyBhbmNob3IgYmFjayB0byAoY2VudGVyLCBjZW50ZXIpIHdoaWxlIHByZXNlcnZpbmcgdGhlIHRleHQgcG9zaXRpb25cclxuICAgIHRoaXMuX2Jib3hUZXh0LnNldFRleHQodGhpcy5fdGV4dClcclxuICAgICAgICAuc2V0VGV4dFNpemUodGhpcy5fZm9udFNpemUpXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfTEVGVCwgQmJveFRleHQuQkFTRUxJTkUuQUxQSEFCRVRJQylcclxuICAgICAgICAuc2V0UG9zaXRpb24odGhpcy5fdGV4dE9mZnNldC5sZWZ0LCB0aGlzLl90ZXh0T2Zmc2V0LnRvcClcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9DRU5URVIsIEJib3hUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVIsIFxyXG4gICAgICAgICAgICB0cnVlKTtcclxuICAgIHRoaXMuX2RyYXdTdGF0aW9uYXJ5TG9nbyhwKTtcclxuICAgIHRoaXMuX3BvaW50cyA9IHRoaXMuX2Jib3hUZXh0LmdldFRleHRQb2ludHMoKTtcclxuICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IHRydWU7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3U3RhdGlvbmFyeUxvZ28gPSBmdW5jdGlvbiAocCkge1xyXG4gICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICBwLnN0cm9rZSgyNTUpO1xyXG4gICAgcC5maWxsKFwiIzBBMDAwQVwiKTtcclxuICAgIHAuc3Ryb2tlV2VpZ2h0KDIpO1xyXG4gICAgdGhpcy5fYmJveFRleHQuZHJhdygpO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fc2V0dXAgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cC5jYWxsKHRoaXMsIHApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIEJib3hBbGlnbmVkVGV4dCBpbnN0YW5jZSB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgZHJhd2luZyBhbmQgXHJcbiAgICAvLyByb3RhdGluZyB0ZXh0XHJcbiAgICB0aGlzLl9iYm94VGV4dCA9IG5ldyBCYm94VGV4dCh0aGlzLl9mb250LCB0aGlzLl90ZXh0LCB0aGlzLl9mb250U2l6ZSwgMCwgMCxcclxuICAgICAgICBwKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGluaXRpYWwgc2V0dXAgYnkgdHJpZ2dlcmluZyBhIHJlc2l6ZVxyXG4gICAgdGhpcy5fb25SZXNpemUocCk7XHJcblxyXG4gICAgLy8gRHJhdyB0aGUgc3RhdGlvbmFyeSBsb2dvXHJcbiAgICB0aGlzLl9kcmF3U3RhdGlvbmFyeUxvZ28ocCk7XHJcblxyXG4gICAgLy8gU3RhcnQgdGhlIHNpbiBnZW5lcmF0b3IgYXQgaXRzIG1heCB2YWx1ZVxyXG4gICAgdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yID0gbmV3IFNpbkdlbmVyYXRvcihwLCAwLCAxLCAwLjAyLCBwLlBJLzIpOyBcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2RyYXcgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9kcmF3LmNhbGwodGhpcywgcCk7XHJcbiAgICBpZiAoIXRoaXMuX2lzTW91c2VPdmVyIHx8ICF0aGlzLl9pc092ZXJOYXZMb2dvKSByZXR1cm47XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgdGV4dCBpcyBhYm91dCB0byBiZWNvbWUgYWN0aXZlIGZvciB0aGUgZmlyc3QgdGltZSwgY2xlYXJcclxuICAgIC8vIHRoZSBzdGF0aW9uYXJ5IGxvZ28gdGhhdCB3YXMgcHJldmlvdXNseSBkcmF3bi4gXHJcbiAgICBpZiAodGhpcy5faXNGaXJzdEZyYW1lKSB7XHJcbiAgICAgICAgcC5iYWNrZ3JvdW5kKDI1NSk7XHJcbiAgICAgICAgdGhpcy5faXNGaXJzdEZyYW1lID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2ZvbnRTaXplID4gMzApIHtcclxuICAgICAgICB0aGlzLl90aHJlc2hvbGRHZW5lcmF0b3Iuc2V0Qm91bmRzKDAuMiAqIHRoaXMuX2Jib3hUZXh0LmhlaWdodCwgXHJcbiAgICAgICAgICAgIDAuNDcgKiB0aGlzLl9iYm94VGV4dC5oZWlnaHQpOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLl90aHJlc2hvbGRHZW5lcmF0b3Iuc2V0Qm91bmRzKDAuMiAqIHRoaXMuX2Jib3hUZXh0LmhlaWdodCwgXHJcbiAgICAgICAgICAgIDAuNiAqIHRoaXMuX2Jib3hUZXh0LmhlaWdodCk7ICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgdmFyIGRpc3RhbmNlVGhyZXNob2xkID0gdGhpcy5fdGhyZXNob2xkR2VuZXJhdG9yLmdlbmVyYXRlKCk7XHJcbiAgICBcclxuICAgIHAuYmFja2dyb3VuZCgyNTUsIDEwMCk7XHJcbiAgICBwLnN0cm9rZVdlaWdodCgxKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdmFyIHBvaW50MSA9IHRoaXMuX3BvaW50c1tpXTtcclxuICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCB0aGlzLl9wb2ludHMubGVuZ3RoOyBqICs9IDEpIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50MiA9IHRoaXMuX3BvaW50c1tqXTtcclxuICAgICAgICAgICAgdmFyIGRpc3QgPSBwLmRpc3QocG9pbnQxLngsIHBvaW50MS55LCBwb2ludDIueCwgcG9pbnQyLnkpO1xyXG4gICAgICAgICAgICBpZiAoZGlzdCA8IGRpc3RhbmNlVGhyZXNob2xkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcC5ub1N0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgcC5maWxsKFwicmdiYSgxNjUsIDAsIDE3MywgMC4yNSlcIik7XHJcbiAgICAgICAgICAgICAgICBwLmVsbGlwc2UoKHBvaW50MS54ICsgcG9pbnQyLngpIC8gMiwgKHBvaW50MS55ICsgcG9pbnQyLnkpIC8gMixcclxuICAgICAgICAgICAgICAgICAgICBkaXN0LCBkaXN0KTsgIFxyXG5cclxuICAgICAgICAgICAgICAgIHAuc3Ryb2tlKFwicmdiYSgxNjUsIDAsIDE3MywgMC4yNSlcIik7XHJcbiAgICAgICAgICAgICAgICBwLm5vRmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgcC5saW5lKHBvaW50MS54LCBwb2ludDEueSwgcG9pbnQyLngsIHBvaW50Mi55KTsgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59OyIsIm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgTm9pc2VHZW5lcmF0b3IxRDogTm9pc2VHZW5lcmF0b3IxRCxcclxuICAgIE5vaXNlR2VuZXJhdG9yMkQ6IE5vaXNlR2VuZXJhdG9yMkRcclxufTtcclxuXHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuLi8uLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG4vLyAtLSAxRCBOb2lzZSBHZW5lcmF0b3IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyBmb3IgZ2VuZXJhdGluZyBub2lzZSB2YWx1ZXNcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBwICAgICAgICAgICAgICAgUmVmZXJlbmNlIHRvIGEgcDUgc2tldGNoXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWluPTBdICAgICAgICAgTWluaW11bSB2YWx1ZSBmb3IgdGhlIG5vaXNlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4PTFdICAgICAgICAgTWF4aW11bSB2YWx1ZSBmb3IgdGhlIG5vaXNlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW5jcmVtZW50PTAuMV0gU2NhbGUgb2YgdGhlIG5vaXNlLCB1c2VkIHdoZW4gdXBkYXRpbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXQ9cmFuZG9tXSBBIHZhbHVlIHVzZWQgdG8gZW5zdXJlIG11bHRpcGxlIG5vaXNlXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdG9ycyBhcmUgcmV0dXJuaW5nIFwiaW5kZXBlbmRlbnRcIiB2YWx1ZXNcclxuICovXHJcbmZ1bmN0aW9uIE5vaXNlR2VuZXJhdG9yMUQocCwgbWluLCBtYXgsIGluY3JlbWVudCwgb2Zmc2V0KSB7XHJcbiAgICB0aGlzLl9wID0gcDtcclxuICAgIHRoaXMuX21pbiA9IHV0aWxzLmRlZmF1bHQobWluLCAwKTtcclxuICAgIHRoaXMuX21heCA9IHV0aWxzLmRlZmF1bHQobWF4LCAxKTtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoaW5jcmVtZW50LCAwLjEpO1xyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB1dGlscy5kZWZhdWx0KG9mZnNldCwgcC5yYW5kb20oLTEwMDAwMDAsIDEwMDAwMDApKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbWluIGFuZCBtYXggbm9pc2UgdmFsdWVzXHJcbiAqIEBwYXJhbSAge251bWJlcn0gbWluIE1pbmltdW0gbm9pc2UgdmFsdWVcclxuICogQHBhcmFtICB7bnVtYmVyfSBtYXggTWF4aW11bSBub2lzZSB2YWx1ZVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IxRC5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICB0aGlzLl9taW4gPSB1dGlscy5kZWZhdWx0KG1pbiwgdGhpcy5fbWluKTtcclxuICAgIHRoaXMuX21heCA9IHV0aWxzLmRlZmF1bHQobWF4LCB0aGlzLl9tYXgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbm9pc2UgaW5jcmVtZW50IChlLmcuIHNjYWxlKVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGluY3JlbWVudCBOZXcgaW5jcmVtZW50IChzY2FsZSkgdmFsdWVcclxuICovXHJcbk5vaXNlR2VuZXJhdG9yMUQucHJvdG90eXBlLnNldEluY3JlbWVudCA9IGZ1bmN0aW9uIChpbmNyZW1lbnQpIHtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoaW5jcmVtZW50LCB0aGlzLl9pbmNyZW1lbnQpO1xyXG59O1xyXG5cclxuLyoqIFxyXG4gKiBHZW5lcmF0ZSB0aGUgbmV4dCBub2lzZSB2YWx1ZVxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbm9pc3kgdmFsdWUgYmV0d2VlbiBvYmplY3QncyBtaW4gYW5kIG1heFxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IxRC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgIHZhciBuID0gdGhpcy5fcC5ub2lzZSh0aGlzLl9wb3NpdGlvbik7XHJcbiAgICBuID0gdGhpcy5fcC5tYXAobiwgMCwgMSwgdGhpcy5fbWluLCB0aGlzLl9tYXgpO1xyXG4gICAgcmV0dXJuIG47XHJcbn07XHJcblxyXG4vKipcclxuICogSW50ZXJuYWwgdXBkYXRlIG1ldGhvZCBmb3IgZ2VuZXJhdGluZyBuZXh0IG5vaXNlIHZhbHVlXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5Ob2lzZUdlbmVyYXRvcjFELnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fcG9zaXRpb24gKz0gdGhpcy5faW5jcmVtZW50O1xyXG59O1xyXG5cclxuXHJcbi8vIC0tIDJEIE5vaXNlIEdlbmVyYXRvciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5mdW5jdGlvbiBOb2lzZUdlbmVyYXRvcjJEKHAsIHhNaW4sIHhNYXgsIHlNaW4sIHlNYXgsIHhJbmNyZW1lbnQsIHlJbmNyZW1lbnQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHhPZmZzZXQsIHlPZmZzZXQpIHtcclxuICAgIHRoaXMuX3hOb2lzZSA9IG5ldyBOb2lzZUdlbmVyYXRvcjFEKHAsIHhNaW4sIHhNYXgsIHhJbmNyZW1lbnQsIHhPZmZzZXQpO1xyXG4gICAgdGhpcy5feU5vaXNlID0gbmV3IE5vaXNlR2VuZXJhdG9yMUQocCwgeU1pbiwgeU1heCwgeUluY3JlbWVudCwgeU9mZnNldCk7XHJcbiAgICB0aGlzLl9wID0gcDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbWluIGFuZCBtYXggbm9pc2UgdmFsdWVzXHJcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCBib3VuZHMgdG8gYmUgdXBkYXRlZCBlLmcuIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgeyB4TWluOiAwLCB4TWF4OiAxLCB5TWluOiAtMSwgeU1heDogMSB9XHJcbiAqL1xyXG5Ob2lzZUdlbmVyYXRvcjJELnByb3RvdHlwZS5zZXRCb3VuZHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgaWYgKCFvcHRpb25zKSByZXR1cm47ICBcclxuICAgIHRoaXMuX3hOb2lzZS5zZXRCb3VuZHMob3B0aW9ucy54TWluLCBvcHRpb25zLnhNYXgpO1xyXG4gICAgdGhpcy5feU5vaXNlLnNldEJvdW5kcyhvcHRpb25zLnlNaW4sIG9wdGlvbnMueU1heCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBpbmNyZW1lbnQgKGUuZy4gc2NhbGUpIGZvciB0aGUgbm9pc2UgZ2VuZXJhdG9yXHJcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCBib3VuZHMgdG8gYmUgdXBkYXRlZCBlLmcuIFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgeyB4SW5jcmVtZW50OiAwLjA1LCB5SW5jcmVtZW50OiAwLjEgfVxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IyRC5wcm90b3R5cGUuc2V0Qm91bmRzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmICghb3B0aW9ucykgcmV0dXJuO1xyXG4gICAgdGhpcy5feE5vaXNlLnNldEJvdW5kcyhvcHRpb25zLnhJbmNyZW1lbnQpO1xyXG4gICAgdGhpcy5feU5vaXNlLnNldEJvdW5kcyhvcHRpb25zLnlJbmNyZW1lbnQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIHRoZSBuZXh0IHBhaXIgb2Ygbm9pc2UgdmFsdWVzXHJcbiAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggeCBhbmQgeSBwcm9wZXJ0aWVzIHRoYXQgY29udGFpbiB0aGUgbmV4dCBub2lzZVxyXG4gKiAgICAgICAgICAgICAgICAgIHZhbHVlcyBhbG9uZyBlYWNoIGRpbWVuc2lvblxyXG4gKi9cclxuTm9pc2VHZW5lcmF0b3IyRC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IHRoaXMuX3hOb2lzZS5nZW5lcmF0ZSgpLFxyXG4gICAgICAgIHk6IHRoaXMuX3lOb2lzZS5nZW5lcmF0ZSgpXHJcbiAgICB9O1xyXG59OyIsIm1vZHVsZS5leHBvcnRzID0gU2luR2VuZXJhdG9yO1xyXG5cclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4uLy4uL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgY2xhc3MgZm9yIGdlbmVyYXRpbmcgdmFsdWVzIGFsb25nIGEgc2lud2F2ZVxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtvYmplY3R9IHAgICAgICAgICAgICAgICBSZWZlcmVuY2UgdG8gYSBwNSBza2V0Y2hcclxuICogQHBhcmFtIHtudW1iZXJ9IFttaW49MF0gICAgICAgICBNaW5pbXVtIHZhbHVlIGZvciB0aGUgbm9pc2VcclxuICogQHBhcmFtIHtudW1iZXJ9IFttYXg9MV0gICAgICAgICBNYXhpbXVtIHZhbHVlIGZvciB0aGUgbm9pc2VcclxuICogQHBhcmFtIHtudW1iZXJ9IFtpbmNyZW1lbnQ9MC4xXSBJbmNyZW1lbnQgdXNlZCB3aGVuIHVwZGF0aW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb2Zmc2V0PXJhbmRvbV0gV2hlcmUgdG8gc3RhcnQgYWxvbmcgdGhlIHNpbmV3YXZlXHJcbiAqL1xyXG5mdW5jdGlvbiBTaW5HZW5lcmF0b3IocCwgbWluLCBtYXgsIGFuZ2xlSW5jcmVtZW50LCBzdGFydGluZ0FuZ2xlKSB7XHJcbiAgICB0aGlzLl9wID0gcDtcclxuICAgIHRoaXMuX21pbiA9IHV0aWxzLmRlZmF1bHQobWluLCAwKTtcclxuICAgIHRoaXMuX21heCA9IHV0aWxzLmRlZmF1bHQobWF4LCAwKTtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoYW5nbGVJbmNyZW1lbnQsIDAuMSk7XHJcbiAgICB0aGlzLl9hbmdsZSA9IHV0aWxzLmRlZmF1bHQoc3RhcnRpbmdBbmdsZSwgcC5yYW5kb20oLTEwMDAwMDAsIDEwMDAwMDApKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSB0aGUgbWluIGFuZCBtYXggdmFsdWVzXHJcbiAqIEBwYXJhbSAge251bWJlcn0gbWluIE1pbmltdW0gdmFsdWVcclxuICogQHBhcmFtICB7bnVtYmVyfSBtYXggTWF4aW11bSB2YWx1ZVxyXG4gKi9cclxuU2luR2VuZXJhdG9yLnByb3RvdHlwZS5zZXRCb3VuZHMgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcclxuICAgIHRoaXMuX21pbiA9IHV0aWxzLmRlZmF1bHQobWluLCB0aGlzLl9taW4pO1xyXG4gICAgdGhpcy5fbWF4ID0gdXRpbHMuZGVmYXVsdChtYXgsIHRoaXMuX21heCk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHRoZSBhbmdsZSBpbmNyZW1lbnQgKGUuZy4gaG93IGZhc3Qgd2UgbW92ZSB0aHJvdWdoIHRoZSBzaW53YXZlKVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGluY3JlbWVudCBOZXcgaW5jcmVtZW50IHZhbHVlXHJcbiAqL1xyXG5TaW5HZW5lcmF0b3IucHJvdG90eXBlLnNldEluY3JlbWVudCA9IGZ1bmN0aW9uIChpbmNyZW1lbnQpIHtcclxuICAgIHRoaXMuX2luY3JlbWVudCA9IHV0aWxzLmRlZmF1bHQoaW5jcmVtZW50LCB0aGlzLl9pbmNyZW1lbnQpO1xyXG59O1xyXG5cclxuLyoqIFxyXG4gKiBHZW5lcmF0ZSB0aGUgbmV4dCB2YWx1ZVxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgdmFsdWUgYmV0d2VlbiBnZW5lcmF0b3JzJ3MgbWluIGFuZCBtYXhcclxuICovXHJcblNpbkdlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgIHZhciBuID0gdGhpcy5fcC5zaW4odGhpcy5fYW5nbGUpO1xyXG4gICAgbiA9IHRoaXMuX3AubWFwKG4sIC0xLCAxLCB0aGlzLl9taW4sIHRoaXMuX21heCk7XHJcbiAgICByZXR1cm4gbjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbnRlcm5hbCB1cGRhdGUgbWV0aG9kIGZvciBnZW5lcmF0aW5nIG5leHQgdmFsdWVcclxuICogQHByaXZhdGVcclxuICovXHJcblNpbkdlbmVyYXRvci5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2FuZ2xlICs9IHRoaXMuX2luY3JlbWVudDtcclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IFNrZXRjaDtcclxuXHJcbnZhciBCYm94VGV4dCA9IHJlcXVpcmUoXCJwNS1iYm94LWFsaWduZWQtdGV4dFwiKTtcclxudmFyIEJhc2VMb2dvU2tldGNoID0gcmVxdWlyZShcIi4vYmFzZS1sb2dvLXNrZXRjaC5qc1wiKTtcclxuXHJcbnZhciB1dGlscyA9IHJlcXVpcmUoXCIuLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUpO1xyXG5cclxuZnVuY3Rpb24gU2tldGNoKCRuYXYsICRuYXZMb2dvKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5jYWxsKHRoaXMsICRuYXYsICRuYXZMb2dvLCBcIi4uL2ZvbnRzL2JpZ19qb2huLXdlYmZvbnQudHRmXCIpO1xyXG59XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZSA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX29uUmVzaXplLmNhbGwodGhpcywgcCk7XHJcbiAgICB0aGlzLl9zcGFjaW5nID0gdXRpbHMubWFwKHRoaXMuX2ZvbnRTaXplLCAyMCwgNDAsIDIsIDUsIHtjbGFtcDogdHJ1ZSwgXHJcbiAgICAgICAgcm91bmQ6IHRydWV9KTtcclxuICAgIC8vIFVwZGF0ZSB0aGUgYmJveFRleHQsIHBsYWNlIG92ZXIgdGhlIG5hdiB0ZXh0IGxvZ28gYW5kIHRoZW4gc2hpZnQgaXRzIFxyXG4gICAgLy8gYW5jaG9yIGJhY2sgdG8gKGNlbnRlciwgY2VudGVyKSB3aGlsZSBwcmVzZXJ2aW5nIHRoZSB0ZXh0IHBvc2l0aW9uXHJcbiAgICB0aGlzLl9iYm94VGV4dC5zZXRUZXh0KHRoaXMuX3RleHQpXHJcbiAgICAgICAgLnNldFRleHRTaXplKHRoaXMuX2ZvbnRTaXplKVxyXG4gICAgICAgIC5zZXRBbmNob3IoQmJveFRleHQuQUxJR04uQk9YX0xFRlQsIEJib3hUZXh0LkJBU0VMSU5FLkFMUEhBQkVUSUMpXHJcbiAgICAgICAgLnNldFBvc2l0aW9uKHRoaXMuX3RleHRPZmZzZXQubGVmdCwgdGhpcy5fdGV4dE9mZnNldC50b3ApXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfQ0VOVEVSLCBCYm94VGV4dC5CQVNFTElORS5CT1hfQ0VOVEVSLCBcclxuICAgICAgICAgICAgdHJ1ZSk7XHJcbiAgICB0aGlzLl9kcmF3U3RhdGlvbmFyeUxvZ28ocCk7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVDaXJjbGVzKHApO1xyXG4gICAgdGhpcy5faXNGaXJzdEZyYW1lID0gdHJ1ZTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2RyYXdTdGF0aW9uYXJ5TG9nbyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuICAgIHAuc3Ryb2tlKDI1NSk7XHJcbiAgICBwLmZpbGwoXCIjMEEwMDBBXCIpO1xyXG4gICAgcC5zdHJva2VXZWlnaHQoMik7XHJcbiAgICB0aGlzLl9iYm94VGV4dC5kcmF3KCk7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3NldHVwLmNhbGwodGhpcywgcCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgQmJveEFsaWduZWRUZXh0IGluc3RhbmNlIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBkcmF3aW5nIGFuZCBcclxuICAgIC8vIHJvdGF0aW5nIHRleHRcclxuICAgIHRoaXMuX2Jib3hUZXh0ID0gbmV3IEJib3hUZXh0KHRoaXMuX2ZvbnQsIHRoaXMuX3RleHQsIHRoaXMuX2ZvbnRTaXplLCAwLCAwLCBcclxuICAgICAgICBwKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGluaXRpYWwgc2V0dXAgYnkgdHJpZ2dlcmluZyBhIHJlc2l6ZVxyXG4gICAgdGhpcy5fb25SZXNpemUocCk7XHJcblxyXG4gICAgLy8gRHJhdyB0aGUgc3RhdGlvbmFyeSBsb2dvXHJcbiAgICB0aGlzLl9kcmF3U3RhdGlvbmFyeUxvZ28ocCk7XHJcblxyXG4gICAgdGhpcy5fY2FsY3VsYXRlQ2lyY2xlcyhwKTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2NhbGN1bGF0ZUNpcmNsZXMgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgLy8gVE9ETzogRG9uJ3QgbmVlZCBBTEwgdGhlIHBpeGVscy4gVGhpcyBjb3VsZCBoYXZlIGFuIG9mZnNjcmVlbiByZW5kZXJlclxyXG4gICAgLy8gdGhhdCBpcyBqdXN0IGJpZyBlbm91Z2ggdG8gZml0IHRoZSB0ZXh0LlxyXG4gICAgLy8gTG9vcCBvdmVyIHRoZSBwaXhlbHMgaW4gdGhlIHRleHQncyBib3VuZGluZyBib3ggdG8gc2FtcGxlIHRoZSB3b3JkXHJcbiAgICB2YXIgYmJveCA9IHRoaXMuX2Jib3hUZXh0LmdldEJib3goKTtcclxuICAgIHZhciBzdGFydFggPSBNYXRoLmZsb29yKE1hdGgubWF4KGJib3gueCAtIDUsIDApKTtcclxuICAgIHZhciBlbmRYID0gTWF0aC5jZWlsKE1hdGgubWluKGJib3gueCArIGJib3gudyArIDUsIHAud2lkdGgpKTtcclxuICAgIHZhciBzdGFydFkgPSBNYXRoLmZsb29yKE1hdGgubWF4KGJib3gueSAtIDUsIDApKTtcclxuICAgIHZhciBlbmRZID0gTWF0aC5jZWlsKE1hdGgubWluKGJib3gueSArIGJib3guaCArIDUsIHAuaGVpZ2h0KSk7XHJcbiAgICBwLmxvYWRQaXhlbHMoKTtcclxuICAgIHAucGl4ZWxEZW5zaXR5KDEpO1xyXG4gICAgdGhpcy5fY2lyY2xlcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgeSA9IHN0YXJ0WTsgeSA8IGVuZFk7IHkgKz0gdGhpcy5fc3BhY2luZykge1xyXG4gICAgICAgIGZvciAodmFyIHggPSBzdGFydFg7IHggPCBlbmRYOyB4ICs9IHRoaXMuX3NwYWNpbmcpIHsgIFxyXG4gICAgICAgICAgICB2YXIgaSA9IDQgKiAoKHkgKiBwLndpZHRoKSArIHgpO1xyXG4gICAgICAgICAgICB2YXIgciA9IHAucGl4ZWxzW2ldO1xyXG4gICAgICAgICAgICB2YXIgZyA9IHAucGl4ZWxzW2kgKyAxXTtcclxuICAgICAgICAgICAgdmFyIGIgPSBwLnBpeGVsc1tpICsgMl07XHJcbiAgICAgICAgICAgIHZhciBhID0gcC5waXhlbHNbaSArIDNdO1xyXG4gICAgICAgICAgICB2YXIgYyA9IHAuY29sb3IociwgZywgYiwgYSk7XHJcbiAgICAgICAgICAgIGlmIChwLnNhdHVyYXRpb24oYykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaXJjbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHggKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogeSArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogcC5jb2xvcihcIiMwNkZGRkZcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2lyY2xlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB4OiB4ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHkgKyBwLnJhbmRvbSgtMi8zICogdGhpcy5fc3BhY2luZywgMi8zICogdGhpcy5fc3BhY2luZyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHAuY29sb3IoXCIjRkUwMEZFXCIpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NpcmNsZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogeCArIHAucmFuZG9tKC0yLzMgKiB0aGlzLl9zcGFjaW5nLCAyLzMgKiB0aGlzLl9zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgICAgICB5OiB5ICsgcC5yYW5kb20oLTIvMyAqIHRoaXMuX3NwYWNpbmcsIDIvMyAqIHRoaXMuX3NwYWNpbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBwLmNvbG9yKFwiI0ZGRkYwNFwiKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9kcmF3ID0gZnVuY3Rpb24gKHApIHtcclxuICAgIEJhc2VMb2dvU2tldGNoLnByb3RvdHlwZS5fZHJhdy5jYWxsKHRoaXMsIHApO1xyXG4gICAgaWYgKCF0aGlzLl9pc01vdXNlT3ZlciB8fCAhdGhpcy5faXNPdmVyTmF2TG9nbykgcmV0dXJuO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIHRleHQgaXMgYWJvdXQgdG8gYmVjb21lIGFjdGl2ZSBmb3IgdGhlIGZpcnN0IHRpbWUsIGNsZWFyXHJcbiAgICAvLyB0aGUgc3RhdGlvbmFyeSBsb2dvIHRoYXQgd2FzIHByZXZpb3VzbHkgZHJhd24uIFxyXG4gICAgaWYgKHRoaXMuX2lzRmlyc3RGcmFtZSkge1xyXG4gICAgICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG4gICAgICAgIHRoaXMuX2lzRmlyc3RGcmFtZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENsZWFyXHJcbiAgICBwLmJsZW5kTW9kZShwLkJMRU5EKTtcclxuICAgIHAuYmFja2dyb3VuZCgyNTUpO1xyXG5cclxuICAgIC8vIERyYXcgXCJoYWxmdG9uZVwiIGxvZ29cclxuICAgIHAubm9TdHJva2UoKTsgICBcclxuICAgIHAuYmxlbmRNb2RlKHAuTVVMVElQTFkpO1xyXG5cclxuICAgIHZhciBtYXhEaXN0ID0gdGhpcy5fYmJveFRleHQuaGFsZldpZHRoO1xyXG4gICAgdmFyIG1heFJhZGl1cyA9IDIgKiB0aGlzLl9zcGFjaW5nO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fY2lyY2xlcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSB0aGlzLl9jaXJjbGVzW2ldO1xyXG4gICAgICAgIHZhciBjID0gY2lyY2xlLmNvbG9yO1xyXG4gICAgICAgIHZhciBkaXN0ID0gcC5kaXN0KGNpcmNsZS54LCBjaXJjbGUueSwgcC5tb3VzZVgsIHAubW91c2VZKTtcclxuICAgICAgICB2YXIgcmFkaXVzID0gdXRpbHMubWFwKGRpc3QsIDAsIG1heERpc3QsIDEsIG1heFJhZGl1cywge2NsYW1wOiB0cnVlfSk7XHJcbiAgICAgICAgcC5maWxsKGMpO1xyXG4gICAgICAgIHAuZWxsaXBzZShjaXJjbGUueCwgY2lyY2xlLnksIHJhZGl1cywgcmFkaXVzKTtcclxuICAgIH1cclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IFNrZXRjaDtcclxuXHJcbnZhciBOb2lzZSA9IHJlcXVpcmUoXCIuL2dlbmVyYXRvcnMvbm9pc2UtZ2VuZXJhdG9ycy5qc1wiKTtcclxudmFyIEJib3hUZXh0ID0gcmVxdWlyZShcInA1LWJib3gtYWxpZ25lZC10ZXh0XCIpO1xyXG52YXIgQmFzZUxvZ29Ta2V0Y2ggPSByZXF1aXJlKFwiLi9iYXNlLWxvZ28tc2tldGNoLmpzXCIpO1xyXG5cclxuU2tldGNoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlKTtcclxuXHJcbmZ1bmN0aW9uIFNrZXRjaCgkbmF2LCAkbmF2TG9nbykge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2guY2FsbCh0aGlzLCAkbmF2LCAkbmF2TG9nbywgXCIuLi9mb250cy9iaWdfam9obi13ZWJmb250LnR0ZlwiKTtcclxufVxyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAocCkge1xyXG4gICAgQmFzZUxvZ29Ta2V0Y2gucHJvdG90eXBlLl9vblJlc2l6ZS5jYWxsKHRoaXMsIHApO1xyXG4gICAgLy8gVXBkYXRlIHRoZSBiYm94VGV4dCwgcGxhY2Ugb3ZlciB0aGUgbmF2IHRleHQgbG9nbyBhbmQgdGhlbiBzaGlmdCBpdHMgXHJcbiAgICAvLyBhbmNob3IgYmFjayB0byAoY2VudGVyLCBjZW50ZXIpIHdoaWxlIHByZXNlcnZpbmcgdGhlIHRleHQgcG9zaXRpb25cclxuICAgIHRoaXMuX2Jib3hUZXh0LnNldFRleHQodGhpcy5fdGV4dClcclxuICAgICAgICAuc2V0VGV4dFNpemUodGhpcy5fZm9udFNpemUpXHJcbiAgICAgICAgLnNldFJvdGF0aW9uKDApXHJcbiAgICAgICAgLnNldEFuY2hvcihCYm94VGV4dC5BTElHTi5CT1hfTEVGVCwgQmJveFRleHQuQkFTRUxJTkUuQUxQSEFCRVRJQylcclxuICAgICAgICAuc2V0UG9zaXRpb24odGhpcy5fdGV4dE9mZnNldC5sZWZ0LCB0aGlzLl90ZXh0T2Zmc2V0LnRvcClcclxuICAgICAgICAuc2V0QW5jaG9yKEJib3hUZXh0LkFMSUdOLkJPWF9DRU5URVIsIEJib3hUZXh0LkJBU0VMSU5FLkJPWF9DRU5URVIsIFxyXG4gICAgICAgICAgICB0cnVlKTtcclxuICAgIHRoaXMuX3RleHRQb3MgPSB0aGlzLl9iYm94VGV4dC5nZXRQb3NpdGlvbigpO1xyXG4gICAgdGhpcy5fZHJhd1N0YXRpb25hcnlMb2dvKHApO1xyXG4gICAgdGhpcy5faXNGaXJzdEZyYW1lID0gdHJ1ZTtcclxufTtcclxuXHJcblNrZXRjaC5wcm90b3R5cGUuX2RyYXdTdGF0aW9uYXJ5TG9nbyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuICAgIHAuc3Ryb2tlKDI1NSk7XHJcbiAgICBwLmZpbGwoXCIjMEEwMDBBXCIpO1xyXG4gICAgcC5zdHJva2VXZWlnaHQoMik7XHJcbiAgICB0aGlzLl9iYm94VGV4dC5kcmF3KCk7XHJcbn07XHJcblxyXG5Ta2V0Y2gucHJvdG90eXBlLl9zZXR1cCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX3NldHVwLmNhbGwodGhpcywgcCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgQmJveEFsaWduZWRUZXh0IGluc3RhbmNlIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBkcmF3aW5nIGFuZCBcclxuICAgIC8vIHJvdGF0aW5nIHRleHRcclxuICAgIHRoaXMuX2Jib3hUZXh0ID0gbmV3IEJib3hUZXh0KHRoaXMuX2ZvbnQsIHRoaXMuX3RleHQsIHRoaXMuX2ZvbnRTaXplLCAwLCAwLCBcclxuICAgICAgICBwKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgdGhlIGluaXRpYWwgc2V0dXAgYnkgdHJpZ2dlcmluZyBhIHJlc2l6ZVxyXG4gICAgdGhpcy5fb25SZXNpemUocCk7XHJcblxyXG4gICAgLy8gU2V0IHVwIG5vaXNlIGdlbmVyYXRvcnNcclxuICAgIHRoaXMuX3JvdGF0aW9uTm9pc2UgPSBuZXcgTm9pc2UuTm9pc2VHZW5lcmF0b3IxRChwLCAtcC5QSS80LCBwLlBJLzQsIDAuMDIpOyBcclxuICAgIHRoaXMuX3h5Tm9pc2UgPSBuZXcgTm9pc2UuTm9pc2VHZW5lcmF0b3IyRChwLCAtMTAwLCAxMDAsIC01MCwgNTAsIDAuMDEsIFxyXG4gICAgICAgIDAuMDEpO1xyXG59O1xyXG5cclxuU2tldGNoLnByb3RvdHlwZS5fZHJhdyA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICBCYXNlTG9nb1NrZXRjaC5wcm90b3R5cGUuX2RyYXcuY2FsbCh0aGlzLCBwKTtcclxuICAgIGlmICghdGhpcy5faXNNb3VzZU92ZXIgfHwgIXRoaXMuX2lzT3Zlck5hdkxvZ28pIHJldHVybjtcclxuXHJcbiAgICAvLyBXaGVuIHRoZSB0ZXh0IGlzIGFib3V0IHRvIGJlY29tZSBhY3RpdmUgZm9yIHRoZSBmaXJzdCB0aW1lLCBjbGVhclxyXG4gICAgLy8gdGhlIHN0YXRpb25hcnkgbG9nbyB0aGF0IHdhcyBwcmV2aW91c2x5IGRyYXduLiBcclxuICAgIGlmICh0aGlzLl9pc0ZpcnN0RnJhbWUpIHtcclxuICAgICAgICBwLmJhY2tncm91bmQoMjU1KTtcclxuICAgICAgICB0aGlzLl9pc0ZpcnN0RnJhbWUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgcG9zaXRpb24gYW5kIHJvdGF0aW9uIHRvIGNyZWF0ZSBhIGppdHRlcnkgbG9nb1xyXG4gICAgdmFyIHJvdGF0aW9uID0gdGhpcy5fcm90YXRpb25Ob2lzZS5nZW5lcmF0ZSgpO1xyXG4gICAgdmFyIHh5T2Zmc2V0ID0gdGhpcy5feHlOb2lzZS5nZW5lcmF0ZSgpO1xyXG4gICAgdGhpcy5fYmJveFRleHQuc2V0Um90YXRpb24ocm90YXRpb24pXHJcbiAgICAgICAgLnNldFBvc2l0aW9uKHRoaXMuX3RleHRQb3MueCArIHh5T2Zmc2V0LngsIHRoaXMuX3RleHRQb3MueSArIHh5T2Zmc2V0LnkpXHJcbiAgICAgICAgLmRyYXcoKTtcclxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IE1haW5OYXY7XHJcblxyXG5mdW5jdGlvbiBNYWluTmF2KGxvYWRlcikge1xyXG4gICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xyXG4gICAgdGhpcy5fJGxvZ28gPSAkKFwibmF2Lm5hdmJhciAubmF2YmFyLWJyYW5kXCIpO1xyXG4gICAgdGhpcy5fJG5hdiA9ICQoXCIjbWFpbi1uYXZcIik7XHJcbiAgICB0aGlzLl8kbmF2TGlua3MgPSB0aGlzLl8kbmF2LmZpbmQoXCJhXCIpO1xyXG4gICAgdGhpcy5fJGFjdGl2ZU5hdiA9IHRoaXMuXyRuYXZMaW5rcy5maW5kKFwiLmFjdGl2ZVwiKTsgXHJcbiAgICB0aGlzLl8kbmF2TGlua3Mub24oXCJjbGlja1wiLCB0aGlzLl9vbk5hdkNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJGxvZ28ub24oXCJjbGlja1wiLCB0aGlzLl9vbkxvZ29DbGljay5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuTWFpbk5hdi5wcm90b3R5cGUuc2V0QWN0aXZlRnJvbVVybCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX2RlYWN0aXZhdGUoKTtcclxuICAgIHZhciB1cmwgPSBsb2NhdGlvbi5wYXRobmFtZTtcclxuICAgIGlmICh1cmwgPT09IFwiL2luZGV4Lmh0bWxcIiB8fCB1cmwgPT09IFwiL1wiKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZhdGVMaW5rKHRoaXMuXyRuYXZMaW5rcy5maWx0ZXIoXCIjYWJvdXQtbGlua1wiKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1cmwgPT09IFwiL3dvcmsuaHRtbFwiKSB7ICAgICAgICBcclxuICAgICAgICB0aGlzLl9hY3RpdmF0ZUxpbmsodGhpcy5fJG5hdkxpbmtzLmZpbHRlcihcIiN3b3JrLWxpbmtcIikpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuTWFpbk5hdi5wcm90b3R5cGUuX2RlYWN0aXZhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5fJGFjdGl2ZU5hdi5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2LnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIHRoaXMuXyRhY3RpdmVOYXYgPSAkKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5NYWluTmF2LnByb3RvdHlwZS5fYWN0aXZhdGVMaW5rID0gZnVuY3Rpb24gKCRsaW5rKSB7XHJcbiAgICAkbGluay5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgIHRoaXMuXyRhY3RpdmVOYXYgPSAkbGluaztcclxufTtcclxuXHJcbk1haW5OYXYucHJvdG90eXBlLl9vbkxvZ29DbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgIHZhciB1cmwgPSAkdGFyZ2V0LmF0dHIoXCJocmVmXCIpO1xyXG4gICAgdGhpcy5fbG9hZGVyLmxvYWRQYWdlKHVybCwge30sIHRydWUpO1xyXG59O1xyXG5cclxuTWFpbk5hdi5wcm90b3R5cGUuX29uTmF2Q2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5fJG5hdi5jb2xsYXBzZShcImhpZGVcIik7IC8vIENsb3NlIHRoZSBuYXYgLSBvbmx5IG1hdHRlcnMgb24gbW9iaWxlXHJcbiAgICB2YXIgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGlmICgkdGFyZ2V0LmlzKHRoaXMuXyRhY3RpdmVOYXYpKSByZXR1cm47XHJcbiAgICB0aGlzLl9kZWFjdGl2YXRlKCk7XHJcbiAgICB0aGlzLl9hY3RpdmF0ZUxpbmsoJHRhcmdldCk7XHJcbiAgICB2YXIgdXJsID0gJHRhcmdldC5hdHRyKFwiaHJlZlwiKTtcclxuICAgIHRoaXMuX2xvYWRlci5sb2FkUGFnZSh1cmwsIHt9LCB0cnVlKTsgICAgXHJcbn07IiwidmFyIExvYWRlciA9IHJlcXVpcmUoXCIuL3BhZ2UtbG9hZGVyLmpzXCIpO1xyXG52YXIgTWFpbk5hdiA9IHJlcXVpcmUoXCIuL21haW4tbmF2LmpzXCIpO1xyXG52YXIgSG92ZXJTbGlkZXNob3dzID0gcmVxdWlyZShcIi4vaG92ZXItc2xpZGVzaG93LmpzXCIpO1xyXG52YXIgUG9ydGZvbGlvRmlsdGVyID0gcmVxdWlyZShcIi4vcG9ydGZvbGlvLWZpbHRlci5qc1wiKTtcclxudmFyIHNsaWRlc2hvd3MgPSByZXF1aXJlKFwiLi90aHVtYm5haWwtc2xpZGVzaG93L3NsaWRlc2hvdy5qc1wiKTtcclxuXHJcbi8vIFBpY2tpbmcgYSByYW5kb20gc2tldGNoIHRoYXQgdGhlIHVzZXIgaGFzbid0IHNlZW4gYmVmb3JlXHJcbnZhciBTa2V0Y2ggPSByZXF1aXJlKFwiLi9waWNrLXJhbmRvbS1za2V0Y2guanNcIikoKTtcclxuXHJcbi8vIEFKQVggcGFnZSBsb2FkZXIsIHdpdGggY2FsbGJhY2sgZm9yIHJlbG9hZGluZyB3aWRnZXRzXHJcbnZhciBsb2FkZXIgPSBuZXcgTG9hZGVyKG9uUGFnZUxvYWQpO1xyXG5cclxuLy8gTWFpbiBuYXYgd2lkZ2V0XHJcbnZhciBtYWluTmF2ID0gbmV3IE1haW5OYXYobG9hZGVyKTtcclxuXHJcbi8vIEludGVyYWN0aXZlIGxvZ28gaW4gbmF2YmFyXHJcbnZhciBuYXYgPSAkKFwibmF2Lm5hdmJhclwiKTtcclxudmFyIG5hdkxvZ28gPSBuYXYuZmluZChcIi5uYXZiYXItYnJhbmRcIik7XHJcbnZhciBza2V0Y2ggPSBuZXcgU2tldGNoKG5hdiwgbmF2TG9nbyk7XHJcblxyXG4vLyBXaWRnZXQgZ2xvYmFsc1xyXG52YXIgaG92ZXJTbGlkZXNob3dzLCBwb3J0Zm9saW9GaWx0ZXI7XHJcblxyXG4vLyBMb2FkIGFsbCB3aWRnZXRzXHJcbm9uUGFnZUxvYWQoKTtcclxuXHJcbi8vIEhhbmRsZSBiYWNrL2ZvcndhcmQgYnV0dG9uc1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIG9uUG9wU3RhdGUpO1xyXG5cclxuZnVuY3Rpb24gb25Qb3BTdGF0ZShlKSB7XHJcbiAgICAvLyBMb2FkZXIgc3RvcmVzIGN1c3RvbSBkYXRhIGluIHRoZSBzdGF0ZSAtIGluY2x1ZGluZyB0aGUgdXJsIGFuZCB0aGUgcXVlcnlcclxuICAgIHZhciB1cmwgPSAoZS5zdGF0ZSAmJiBlLnN0YXRlLnVybCkgfHwgXCIvaW5kZXguaHRtbFwiO1xyXG4gICAgdmFyIHF1ZXJ5T2JqZWN0ID0gKGUuc3RhdGUgJiYgZS5zdGF0ZS5xdWVyeSkgfHwge307XHJcblxyXG4gICAgaWYgKCh1cmwgPT09IGxvYWRlci5nZXRMb2FkZWRQYXRoKCkpICYmICh1cmwgPT09IFwiL3dvcmsuaHRtbFwiKSkge1xyXG4gICAgICAgIC8vIFRoZSBjdXJyZW50ICYgcHJldmlvdXMgbG9hZGVkIHN0YXRlcyB3ZXJlIHdvcmsuaHRtbCwgc28ganVzdCByZWZpbHRlclxyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IHF1ZXJ5T2JqZWN0LmNhdGVnb3J5IHx8IFwiYWxsXCI7XHJcbiAgICAgICAgcG9ydGZvbGlvRmlsdGVyLnNlbGVjdENhdGVnb3J5KGNhdGVnb3J5KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTG9hZCB0aGUgbmV3IHBhZ2VcclxuICAgICAgICBsb2FkZXIubG9hZFBhZ2UodXJsLCB7fSwgZmFsc2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblBhZ2VMb2FkKCkge1xyXG4gICAgLy8gUmVsb2FkIGFsbCBwbHVnaW5zL3dpZGdldHNcclxuICAgIGhvdmVyU2xpZGVzaG93cyA9IG5ldyBIb3ZlclNsaWRlc2hvd3MoKTtcclxuICAgIHBvcnRmb2xpb0ZpbHRlciA9IG5ldyBQb3J0Zm9saW9GaWx0ZXIobG9hZGVyKTtcclxuICAgIHNsaWRlc2hvd3MuaW5pdCgpO1xyXG4gICAgb2JqZWN0Rml0SW1hZ2VzKCk7XHJcbiAgICBzbWFydHF1b3RlcygpO1xyXG5cclxuICAgIC8vIFNsaWdodGx5IHJlZHVuZGFudCwgYnV0IHVwZGF0ZSB0aGUgbWFpbiBuYXYgdXNpbmcgdGhlIGN1cnJlbnQgVVJMLiBUaGlzXHJcbiAgICAvLyBpcyBpbXBvcnRhbnQgaWYgYSBwYWdlIGlzIGxvYWRlZCBieSB0eXBpbmcgYSBmdWxsIFVSTCAoZS5nLiBnb2luZ1xyXG4gICAgLy8gZGlyZWN0bHkgdG8gL3dvcmsuaHRtbCkgb3Igd2hlbiBtb3ZpbmcgZnJvbSB3b3JrLmh0bWwgdG8gYSBwcm9qZWN0LiBcclxuICAgIG1haW5OYXYuc2V0QWN0aXZlRnJvbVVybCgpO1xyXG59XHJcblxyXG4vLyBXZSd2ZSBoaXQgdGhlIGxhbmRpbmcgcGFnZSwgbG9hZCB0aGUgYWJvdXQgcGFnZVxyXG4vLyBpZiAobG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL14oXFwvfFxcL2luZGV4Lmh0bWx8aW5kZXguaHRtbCkkLykpIHtcclxuLy8gICAgIGxvYWRlci5sb2FkUGFnZShcIi9hYm91dC5odG1sXCIsIHt9LCBmYWxzZSk7XHJcbi8vIH0iLCJtb2R1bGUuZXhwb3J0cyA9IExvYWRlcjtcclxuXHJcbnZhciB1dGlsaXRpZXMgPSByZXF1aXJlKFwiLi91dGlsaXRpZXMuanNcIik7XHJcblxyXG5mdW5jdGlvbiBMb2FkZXIob25SZWxvYWQsIGZhZGVEdXJhdGlvbikge1xyXG4gICAgdGhpcy5fJGNvbnRlbnQgPSAkKFwiI2NvbnRlbnRcIik7XHJcbiAgICB0aGlzLl9vblJlbG9hZCA9IG9uUmVsb2FkO1xyXG4gICAgdGhpcy5fZmFkZUR1cmF0aW9uID0gKGZhZGVEdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSA/IGZhZGVEdXJhdGlvbiA6IDI1MDtcclxuICAgIHRoaXMuX3BhdGggPSBsb2NhdGlvbi5wYXRobmFtZTtcclxufVxyXG5cclxuTG9hZGVyLnByb3RvdHlwZS5nZXRMb2FkZWRQYXRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BhdGg7XHJcbn07XHJcblxyXG5Mb2FkZXIucHJvdG90eXBlLmxvYWRQYWdlID0gZnVuY3Rpb24gKHVybCwgcXVlcnlPYmplY3QsIHNob3VsZFB1c2hIaXN0b3J5KSB7XHJcbiAgICAvLyBGYWRlIHRoZW4gZW1wdHkgdGhlIGN1cnJlbnQgY29udGVudHNcclxuICAgIHRoaXMuXyRjb250ZW50LnZlbG9jaXR5KHsgb3BhY2l0eTogMCB9LCB0aGlzLl9mYWRlRHVyYXRpb24sIFwic3dpbmdcIixcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fJGNvbnRlbnQuZW1wdHkoKTtcclxuICAgICAgICB0aGlzLl8kY29udGVudC5sb2FkKHVybCArIFwiICNjb250ZW50XCIsIG9uQ29udGVudEZldGNoZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIEZhZGUgdGhlIG5ldyBjb250ZW50IGluIGFmdGVyIGl0IGhhcyBiZWVuIGZldGNoZWRcclxuICAgIGZ1bmN0aW9uIG9uQ29udGVudEZldGNoZWQocmVzcG9uc2VUZXh0LCB0ZXh0U3RhdHVzLCBqcVhocikge1xyXG4gICAgICAgIGlmICh0ZXh0U3RhdHVzID09PSBcImVycm9yXCIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgdGhlIHBhZ2UuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSB1dGlsaXRpZXMuY3JlYXRlUXVlcnlTdHJpbmcocXVlcnlPYmplY3QpO1xyXG4gICAgICAgIGlmIChzaG91bGRQdXNoSGlzdG9yeSkge1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeU9iamVjdFxyXG4gICAgICAgICAgICB9LCBudWxsLCB1cmwgKyBxdWVyeVN0cmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgR29vZ2xlIGFuYWx5dGljc1xyXG4gICAgICAgIGdhKFwic2V0XCIsIFwicGFnZVwiLCB1cmwgKyBxdWVyeVN0cmluZyk7XHJcbiAgICAgICAgZ2EoXCJzZW5kXCIsIFwicGFnZXZpZXdcIik7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhdGggPSBsb2NhdGlvbi5wYXRobmFtZTtcclxuICAgICAgICB0aGlzLl8kY29udGVudC52ZWxvY2l0eSh7IG9wYWNpdHk6IDEgfSwgdGhpcy5fZmFkZUR1cmF0aW9uLCBcclxuICAgICAgICAgICAgXCJzd2luZ1wiKTtcclxuICAgICAgICB0aGlzLl9vblJlbG9hZCgpO1xyXG4gICAgfVxyXG59OyIsInZhciBjb29raWVzID0gcmVxdWlyZShcImpzLWNvb2tpZVwiKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZShcIi4vdXRpbGl0aWVzLmpzXCIpO1xyXG5cclxudmFyIHNrZXRjaENvbnN0cnVjdG9ycyA9IHtcclxuICAgIFwiaGFsZnRvbmUtZmxhc2hsaWdodFwiOiBcclxuICAgICAgICByZXF1aXJlKFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9oYWxmdG9uZS1mbGFzaGxpZ2h0LXdvcmQuanNcIiksXHJcbiAgICBcIm5vaXN5LXdvcmRcIjpcclxuICAgICAgICByZXF1aXJlKFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9ub2lzeS13b3JkLXNrZXRjaC5qc1wiKSxcclxuICAgIFwiY29ubmVjdC1wb2ludHNcIjpcclxuICAgICAgICByZXF1aXJlKFwiLi9pbnRlcmFjdGl2ZS1sb2dvcy9jb25uZWN0LXBvaW50cy1za2V0Y2guanNcIilcclxufTtcclxudmFyIG51bVNrZXRjaGVzID0gT2JqZWN0LmtleXMoc2tldGNoQ29uc3RydWN0b3JzKS5sZW5ndGg7XHJcbnZhciBjb29raWVLZXkgPSBcInNlZW4tc2tldGNoLW5hbWVzXCI7XHJcblxyXG4vKipcclxuICogUGljayBhIHJhbmRvbSBza2V0Y2ggdGhhdCB1c2VyIGhhc24ndCBzZWVuIHlldC4gSWYgdGhlIHVzZXIgaGFzIHNlZW4gYWxsIHRoZVxyXG4gKiBza2V0Y2hlcywganVzdCBwaWNrIGEgcmFuZG9tIG9uZS4gVGhpcyB1c2VzIGNvb2tpZXMgdG8gdHJhY2sgd2hhdCB0aGUgdXNlciBcclxuICogaGFzIHNlZW4gYWxyZWFkeS5cclxuICogQHJldHVybiB7RnVuY3Rpb259IENvbnN0cnVjdG9yIGZvciBhIFNrZXRjaCBjbGFzc1xyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwaWNrUmFuZG9tU2tldGNoKCkge1xyXG4gICAgdmFyIHNlZW5Ta2V0Y2hOYW1lcyA9IGNvb2tpZXMuZ2V0SlNPTihjb29raWVLZXkpIHx8IFtdO1xyXG5cclxuICAgIC8vIEZpbmQgdGhlIG5hbWVzIG9mIHRoZSB1bnNlZW4gc2tldGNoZXNcclxuICAgIHZhciB1bnNlZW5Ta2V0Y2hOYW1lcyA9IGZpbmRVbnNlZW5Ta2V0Y2hlcyhzZWVuU2tldGNoTmFtZXMpO1xyXG5cclxuICAgIC8vIEFsbCBza2V0Y2hlcyBoYXZlIGJlZW4gc2VlblxyXG4gICAgaWYgKHVuc2VlblNrZXRjaE5hbWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIC8vIElmIHdlJ3ZlIGdvdCBtb3JlIHRoZW4gb25lIHNrZXRjaCwgdGhlbiBtYWtlIHN1cmUgdG8gY2hvb3NlIGEgcmFuZG9tXHJcbiAgICAgICAgLy8gc2tldGNoIGV4Y2x1ZGluZyB0aGUgbW9zdCByZWNlbnRseSBzZWVuIHNrZXRjaFxyXG4gICAgICAgIGlmIChudW1Ta2V0Y2hlcyA+IDEpIHtcclxuICAgICAgICAgICAgc2VlblNrZXRjaE5hbWVzID0gW3NlZW5Ta2V0Y2hOYW1lcy5wb3AoKV07XHJcbiAgICAgICAgICAgIHVuc2VlblNrZXRjaE5hbWVzID0gZmluZFVuc2VlblNrZXRjaGVzKHNlZW5Ta2V0Y2hOYW1lcyk7XHJcbiAgICAgICAgfSBcclxuICAgICAgICAvLyBJZiB3ZSd2ZSBvbmx5IGdvdCBvbmUgc2tldGNoLCB0aGVuIHdlIGNhbid0IGRvIG11Y2guLi5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VlblNrZXRjaE5hbWVzID0gW107XHJcbiAgICAgICAgICAgIHVuc2VlblNrZXRjaE5hbWVzID0gT2JqZWN0LmtleXMoc2tldGNoQ29uc3RydWN0b3JzKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJhbmRTa2V0Y2hOYW1lID0gdXRpbHMucmFuZEFycmF5RWxlbWVudCh1bnNlZW5Ta2V0Y2hOYW1lcyk7XHJcbiAgICBzZWVuU2tldGNoTmFtZXMucHVzaChyYW5kU2tldGNoTmFtZSk7XHJcblxyXG4gICAgLy8gU3RvcmUgdGhlIGdlbmVyYXRlZCBza2V0Y2ggaW4gYSBjb29raWUuIFRoaXMgY3JlYXRlcyBhIG1vdmluZyA3IGRheVxyXG4gICAgLy8gd2luZG93IC0gYW55dGltZSB0aGUgc2l0ZSBpcyB2aXNpdGVkLCB0aGUgY29va2llIGlzIHJlZnJlc2hlZC5cclxuICAgIGNvb2tpZXMuc2V0KGNvb2tpZUtleSwgc2VlblNrZXRjaE5hbWVzLCB7IGV4cGlyZXM6IDcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNrZXRjaENvbnN0cnVjdG9yc1tyYW5kU2tldGNoTmFtZV07XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmaW5kVW5zZWVuU2tldGNoZXMoc2VlblNrZXRjaE5hbWVzKSB7XHJcbiAgICB2YXIgdW5zZWVuU2tldGNoTmFtZXMgPSBbXTtcclxuICAgIGZvciAodmFyIHNrZXRjaE5hbWUgaW4gc2tldGNoQ29uc3RydWN0b3JzKSB7XHJcbiAgICAgICAgaWYgKHNlZW5Ta2V0Y2hOYW1lcy5pbmRleE9mKHNrZXRjaE5hbWUpID09PSAtMSkge1xyXG4gICAgICAgICAgICB1bnNlZW5Ta2V0Y2hOYW1lcy5wdXNoKHNrZXRjaE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1bnNlZW5Ta2V0Y2hOYW1lcztcclxufSIsIm1vZHVsZS5leHBvcnRzID0gUG9ydGZvbGlvRmlsdGVyO1xyXG5cclxudmFyIHV0aWxpdGllcyA9IHJlcXVpcmUoXCIuL3V0aWxpdGllcy5qc1wiKTtcclxuXHJcbnZhciBkZWZhdWx0QnJlYWtwb2ludHMgPSBbXHJcbiAgICB7IHdpZHRoOiAxMjAwLCBjb2xzOiAzLCBzcGFjaW5nOiAxNSB9LFxyXG4gICAgeyB3aWR0aDogOTkyLCBjb2xzOiAzLCBzcGFjaW5nOiAxNSB9LFxyXG4gICAgeyB3aWR0aDogNzAwLCBjb2xzOiAzLCBzcGFjaW5nOiAxNSB9LFxyXG4gICAgeyB3aWR0aDogNjAwLCBjb2xzOiAyLCBzcGFjaW5nOiAxMCB9LFxyXG4gICAgeyB3aWR0aDogNDgwLCBjb2xzOiAyLCBzcGFjaW5nOiAxMCB9LFxyXG4gICAgeyB3aWR0aDogMzIwLCBjb2xzOiAxLCBzcGFjaW5nOiAxMCB9XHJcbl07XHJcblxyXG5mdW5jdGlvbiBQb3J0Zm9saW9GaWx0ZXIobG9hZGVyLCBicmVha3BvaW50cywgYXNwZWN0UmF0aW8sIHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xyXG4gICAgdGhpcy5fZ3JpZFNwYWNpbmcgPSAwO1xyXG4gICAgdGhpcy5fYXNwZWN0UmF0aW8gPSAoYXNwZWN0UmF0aW8gIT09IHVuZGVmaW5lZCkgPyBhc3BlY3RSYXRpbyA6ICgxNi85KTtcclxuICAgIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiA9ICh0cmFuc2l0aW9uRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgPyBcclxuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24gOiA4MDA7XHJcbiAgICB0aGlzLl9icmVha3BvaW50cyA9IChicmVha3BvaW50cyAhPT0gdW5kZWZpbmVkKSA/IFxyXG4gICAgICAgIGJyZWFrcG9pbnRzLnNsaWNlKCkgOiBkZWZhdWx0QnJlYWtwb2ludHMuc2xpY2UoKTtcclxuICAgIHRoaXMuXyRncmlkID0gJChcIiNwb3J0Zm9saW8tZ3JpZFwiKTtcclxuICAgIHRoaXMuXyRuYXYgPSAkKFwiI3BvcnRmb2xpby1uYXZcIik7XHJcbiAgICB0aGlzLl8kcHJvamVjdHMgPSBbXTtcclxuICAgIHRoaXMuXyRjYXRlZ29yaWVzID0ge307XHJcbiAgICB0aGlzLl9yb3dzID0gMDtcclxuICAgIHRoaXMuX2NvbHMgPSAwO1xyXG4gICAgdGhpcy5faW1hZ2VIZWlnaHQgPSAwO1xyXG4gICAgdGhpcy5faW1hZ2VXaWR0aCA9IDA7XHJcblxyXG4gICAgLy8gU29ydCB0aGUgYnJlYWtwb2ludHMgaW4gZGVzY2VuZGluZyBvcmRlclxyXG4gICAgdGhpcy5fYnJlYWtwb2ludHMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgaWYgKGEud2lkdGggPCBiLndpZHRoKSByZXR1cm4gLTE7XHJcbiAgICAgICAgZWxzZSBpZiAoYS53aWR0aCA+IGIud2lkdGgpIHJldHVybiAxO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYWNoZVByb2plY3RzKCk7XHJcbiAgICB0aGlzLl9jcmVhdGVHcmlkKCk7XHJcblxyXG4gICAgdGhpcy5fJGdyaWQuZmluZChcIi5wcm9qZWN0IGFcIikub24oXCJjbGlja1wiLCB0aGlzLl9vblByb2plY3RDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB2YXIgcXMgPSB1dGlsaXRpZXMuZ2V0UXVlcnlQYXJhbWV0ZXJzKCk7XHJcbiAgICB2YXIgaW5pdGlhbENhdGVnb3J5ID0gcXMuY2F0ZWdvcnkgfHwgXCJhbGxcIjtcclxuICAgIHZhciBjYXRlZ29yeSA9IGluaXRpYWxDYXRlZ29yeS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdGhpcy5fJGFjdGl2ZU5hdkl0ZW0gPSB0aGlzLl8kbmF2LmZpbmQoXCJhW2RhdGEtY2F0ZWdvcnk9XCIgKyBjYXRlZ29yeSArIFwiXVwiKTtcclxuICAgIHRoaXMuXyRhY3RpdmVOYXZJdGVtLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fZmlsdGVyUHJvamVjdHMoY2F0ZWdvcnkpO1xyXG4gICAgJChcIiNwb3J0Zm9saW8tbmF2IGFcIikub24oXCJjbGlja1wiLCB0aGlzLl9vbk5hdkNsaWNrLmJpbmQodGhpcykpO1xyXG5cclxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCB0aGlzLl9jcmVhdGVHcmlkLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLnNlbGVjdENhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgICBjYXRlZ29yeSA9IChjYXRlZ29yeSAmJiBjYXRlZ29yeS50b0xvd2VyQ2FzZSgpKSB8fCBcImFsbFwiO1xyXG4gICAgdmFyICRzZWxlY3RlZE5hdiA9IHRoaXMuXyRuYXYuZmluZChcImFbZGF0YS1jYXRlZ29yeT1cIiArIGNhdGVnb3J5ICsgXCJdXCIpO1xyXG4gICAgaWYgKCRzZWxlY3RlZE5hdi5sZW5ndGggJiYgISRzZWxlY3RlZE5hdi5pcyh0aGlzLl8kYWN0aXZlTmF2SXRlbSkpIHtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbSA9ICRzZWxlY3RlZE5hdjtcclxuICAgICAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl9maWx0ZXJQcm9qZWN0cyhjYXRlZ29yeSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9maWx0ZXJQcm9qZWN0cyA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gICAgdmFyICRzZWxlY3RlZEVsZW1lbnRzID0gdGhpcy5fZ2V0UHJvamVjdHNJbkNhdGVnb3J5KGNhdGVnb3J5KTtcclxuXHJcbiAgICAvLyBBbmltYXRlIHRoZSBncmlkIHRvIHRoZSBjb3JyZWN0IGhlaWdodCB0byBjb250YWluIHRoZSByb3dzXHJcbiAgICB0aGlzLl9hbmltYXRlR3JpZEhlaWdodCgkc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIHByb2plY3RzXHJcbiAgICB0aGlzLl8kcHJvamVjdHMuZm9yRWFjaChmdW5jdGlvbiAoJGVsZW1lbnQpIHtcclxuICAgICAgICAvLyBTdG9wIGFsbCBhbmltYXRpb25zXHJcbiAgICAgICAgJGVsZW1lbnQudmVsb2NpdHkoXCJzdG9wXCIpO1xyXG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgaXMgbm90IHNlbGVjdGVkOiBkcm9wIHotaW5kZXggJiBhbmltYXRlIG9wYWNpdHkgLT4gaGlkZVxyXG4gICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gJHNlbGVjdGVkRWxlbWVudHMuaW5kZXhPZigkZWxlbWVudCk7IFxyXG4gICAgICAgIGlmIChzZWxlY3RlZEluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3MoXCJ6SW5kZXhcIiwgLTEpO1xyXG4gICAgICAgICAgICAkZWxlbWVudC52ZWxvY2l0eSh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICAgIH0sIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiwgXCJlYXNlSW5PdXRDdWJpY1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBhbiBlbGVtZW50IGlzIHNlbGVjdGVkOiBzaG93ICYgYnVtcCB6LWluZGV4ICYgYW5pbWF0ZSB0byBwb3NpdGlvbiBcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJGVsZW1lbnQuc2hvdygpO1xyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3MoXCJ6SW5kZXhcIiwgMCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdQb3MgPSB0aGlzLl9pbmRleFRvWFkoc2VsZWN0ZWRJbmRleCk7XHJcbiAgICAgICAgICAgICRlbGVtZW50LnZlbG9jaXR5KHsgXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgdG9wOiBuZXdQb3MueSArIFwicHhcIixcclxuICAgICAgICAgICAgICAgIGxlZnQ6IG5ld1Bvcy54ICsgXCJweFwiXHJcbiAgICAgICAgICAgIH0sIHRoaXMuX3RyYW5zaXRpb25EdXJhdGlvbiwgXCJlYXNlSW5PdXRDdWJpY1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fYW5pbWF0ZUdyaWRIZWlnaHQgPSBmdW5jdGlvbiAobnVtRWxlbWVudHMpIHtcclxuICAgIHRoaXMuXyRncmlkLnZlbG9jaXR5KFwic3RvcFwiKTtcclxuICAgIHZhciBjdXJSb3dzID0gTWF0aC5jZWlsKG51bUVsZW1lbnRzIC8gdGhpcy5fY29scyk7XHJcbiAgICB0aGlzLl8kZ3JpZC52ZWxvY2l0eSh7XHJcbiAgICAgICAgaGVpZ2h0OiB0aGlzLl9pbWFnZUhlaWdodCAqIGN1clJvd3MgKyBcclxuICAgICAgICAgICAgdGhpcy5fZ3JpZFNwYWNpbmcgKiAoY3VyUm93cyAtIDEpICsgXCJweFwiXHJcbiAgICB9LCB0aGlzLl90cmFuc2l0aW9uRHVyYXRpb24pO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fZ2V0UHJvamVjdHNJbkNhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgICBpZiAoY2F0ZWdvcnkgPT09IFwiYWxsXCIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fJHByb2plY3RzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuXyRjYXRlZ29yaWVzW2NhdGVnb3J5XSB8fCBbXSk7XHJcbiAgICB9ICAgICAgICBcclxufTtcclxuXHJcblBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2NhY2hlUHJvamVjdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl8kcHJvamVjdHMgPSBbXTtcclxuICAgIHRoaXMuXyRjYXRlZ29yaWVzID0ge307XHJcbiAgICB0aGlzLl8kZ3JpZC5maW5kKFwiLnByb2plY3RcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuXyRwcm9qZWN0cy5wdXNoKCRlbGVtZW50KTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlOYW1lcyA9ICRlbGVtZW50LmRhdGEoXCJjYXRlZ29yaWVzXCIpLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhdGVnb3J5TmFtZXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgdmFyIGNhdGVnb3J5ID0gJC50cmltKGNhdGVnb3J5TmFtZXNbaV0pLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fJGNhdGVnb3JpZXNbY2F0ZWdvcnldKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kY2F0ZWdvcmllc1tjYXRlZ29yeV0gPSBbJGVsZW1lbnRdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGNhdGVnb3JpZXNbY2F0ZWdvcnldLnB1c2goJGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcbi8vIFBvcnRmb2xpb0ZpbHRlci5wcm90b3R5cGUuX2NhbGN1bGF0ZUdyaWQgPSBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICB2YXIgZ3JpZFdpZHRoID0gdGhpcy5fJGdyaWQuaW5uZXJXaWR0aCgpO1xyXG4vLyAgICAgdGhpcy5fY29scyA9IE1hdGguZmxvb3IoKGdyaWRXaWR0aCArIHRoaXMuX2dyaWRTcGFjaW5nKSAvIFxyXG4vLyAgICAgICAgICh0aGlzLl9taW5JbWFnZVdpZHRoICsgdGhpcy5fZ3JpZFNwYWNpbmcpKTtcclxuLy8gICAgIHRoaXMuX3Jvd3MgPSBNYXRoLmNlaWwodGhpcy5fJHByb2plY3RzLmxlbmd0aCAvIHRoaXMuX2NvbHMpO1xyXG4vLyAgICAgdGhpcy5faW1hZ2VXaWR0aCA9IChncmlkV2lkdGggLSAoKHRoaXMuX2NvbHMgLSAxKSAqIHRoaXMuX2dyaWRTcGFjaW5nKSkgLyBcclxuLy8gICAgICAgICB0aGlzLl9jb2xzO1xyXG4vLyAgICAgdGhpcy5faW1hZ2VIZWlnaHQgPSB0aGlzLl9pbWFnZVdpZHRoICogKDEgLyB0aGlzLl9hc3BlY3RSYXRpbyk7XHJcbi8vIH07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jYWxjdWxhdGVHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGdyaWRXaWR0aCA9IHRoaXMuXyRncmlkLmlubmVyV2lkdGgoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYnJlYWtwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAoZ3JpZFdpZHRoIDw9IHRoaXMuX2JyZWFrcG9pbnRzW2ldLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbHMgPSB0aGlzLl9icmVha3BvaW50c1tpXS5jb2xzO1xyXG4gICAgICAgICAgICB0aGlzLl9ncmlkU3BhY2luZyA9IHRoaXMuX2JyZWFrcG9pbnRzW2ldLnNwYWNpbmc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3Jvd3MgPSBNYXRoLmNlaWwodGhpcy5fJHByb2plY3RzLmxlbmd0aCAvIHRoaXMuX2NvbHMpO1xyXG4gICAgdGhpcy5faW1hZ2VXaWR0aCA9IChncmlkV2lkdGggLSAoKHRoaXMuX2NvbHMgLSAxKSAqIHRoaXMuX2dyaWRTcGFjaW5nKSkgLyBcclxuICAgICAgICB0aGlzLl9jb2xzO1xyXG4gICAgdGhpcy5faW1hZ2VIZWlnaHQgPSB0aGlzLl9pbWFnZVdpZHRoICogKDEgLyB0aGlzLl9hc3BlY3RSYXRpbyk7XHJcbn07XHJcblxyXG5Qb3J0Zm9saW9GaWx0ZXIucHJvdG90eXBlLl9jcmVhdGVHcmlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5fY2FsY3VsYXRlR3JpZCgpO1xyXG5cclxuICAgIHRoaXMuXyRncmlkLmNzcyhcInBvc2l0aW9uXCIsIFwicmVsYXRpdmVcIik7XHJcbiAgICB0aGlzLl8kZ3JpZC5jc3Moe1xyXG4gICAgICAgIGhlaWdodDogdGhpcy5faW1hZ2VIZWlnaHQgKiB0aGlzLl9yb3dzICsgXHJcbiAgICAgICAgICAgIHRoaXMuX2dyaWRTcGFjaW5nICogKHRoaXMuX3Jvd3MgLSAxKSArIFwicHhcIlxyXG4gICAgfSk7ICAgIFxyXG5cclxuICAgIHRoaXMuXyRwcm9qZWN0cy5mb3JFYWNoKGZ1bmN0aW9uICgkZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgICB2YXIgcG9zID0gdGhpcy5faW5kZXhUb1hZKGluZGV4KTtcclxuICAgICAgICAkZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICB0b3A6IHBvcy55ICsgXCJweFwiLFxyXG4gICAgICAgICAgICBsZWZ0OiBwb3MueCArIFwicHhcIixcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuX2ltYWdlV2lkdGggKyBcInB4XCIsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5faW1hZ2VIZWlnaHQgKyBcInB4XCJcclxuICAgICAgICB9KTtcclxuICAgIH0uYmluZCh0aGlzKSk7ICAgIFxyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fb25OYXZDbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgaWYgKCR0YXJnZXQuaXModGhpcy5fJGFjdGl2ZU5hdkl0ZW0pKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5fJGFjdGl2ZU5hdkl0ZW0ubGVuZ3RoKSB0aGlzLl8kYWN0aXZlTmF2SXRlbS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICR0YXJnZXQuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB0aGlzLl8kYWN0aXZlTmF2SXRlbSA9ICR0YXJnZXQ7XHJcbiAgICB2YXIgY2F0ZWdvcnkgPSAkdGFyZ2V0LmRhdGEoXCJjYXRlZ29yeVwiKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGhpc3RvcnkucHVzaFN0YXRlKHtcclxuICAgICAgICB1cmw6IFwiL3dvcmsuaHRtbFwiLFxyXG4gICAgICAgIHF1ZXJ5OiB7IGNhdGVnb3J5OiBjYXRlZ29yeSB9XHJcbiAgICB9LCBudWxsLCBcIi93b3JrLmh0bWw/Y2F0ZWdvcnk9XCIgKyBjYXRlZ29yeSk7XHJcblxyXG4gICAgdGhpcy5fZmlsdGVyUHJvamVjdHMoY2F0ZWdvcnkpO1xyXG59O1xyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5fb25Qcm9qZWN0Q2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyICR0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICB2YXIgcHJvamVjdE5hbWUgPSAkdGFyZ2V0LmRhdGEoXCJuYW1lXCIpO1xyXG4gICAgdmFyIHVybCA9IFwiL3Byb2plY3RzL1wiICsgcHJvamVjdE5hbWUgKyBcIi5odG1sXCI7XHJcbiAgICB0aGlzLl9sb2FkZXIubG9hZFBhZ2UodXJsLCB7fSwgdHJ1ZSk7XHJcbn07XHJcblxyXG5cclxuUG9ydGZvbGlvRmlsdGVyLnByb3RvdHlwZS5faW5kZXhUb1hZID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICB2YXIgciA9IE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLl9jb2xzKTtcclxuICAgIHZhciBjID0gaW5kZXggJSB0aGlzLl9jb2xzOyBcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogYyAqIHRoaXMuX2ltYWdlV2lkdGggKyBjICogdGhpcy5fZ3JpZFNwYWNpbmcsXHJcbiAgICAgICAgeTogciAqIHRoaXMuX2ltYWdlSGVpZ2h0ICsgciAqIHRoaXMuX2dyaWRTcGFjaW5nXHJcbiAgICB9O1xyXG59OyIsIm1vZHVsZS5leHBvcnRzID0gU2xpZGVzaG93TW9kYWw7XHJcblxyXG52YXIgS0VZX0NPREVTID0ge1xyXG4gICAgTEVGVF9BUlJPVzogMzcsXHJcbiAgICBSSUdIVF9BUlJPVzogMzksXHJcbiAgICBFU0NBUEU6IDI3XHJcbn07XHJcblxyXG5mdW5jdGlvbiBTbGlkZXNob3dNb2RhbCgkY29udGFpbmVyLCBzbGlkZXNob3cpIHtcclxuICAgIHRoaXMuX3NsaWRlc2hvdyA9IHNsaWRlc2hvdztcclxuXHJcbiAgICB0aGlzLl8kbW9kYWwgPSAkY29udGFpbmVyLmZpbmQoXCIuc2xpZGVzaG93LW1vZGFsXCIpO1xyXG4gICAgdGhpcy5fJG92ZXJsYXkgPSB0aGlzLl8kbW9kYWwuZmluZChcIi5tb2RhbC1vdmVybGF5XCIpO1xyXG4gICAgdGhpcy5fJGNvbnRlbnQgPSB0aGlzLl8kbW9kYWwuZmluZChcIi5tb2RhbC1jb250ZW50c1wiKTtcclxuICAgIHRoaXMuXyRjYXB0aW9uID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIubW9kYWwtY2FwdGlvblwiKTtcclxuICAgIHRoaXMuXyRpbWFnZUNvbnRhaW5lciA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLm1vZGFsLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fJGltYWdlTGVmdCA9IHRoaXMuXyRtb2RhbC5maW5kKFwiLmltYWdlLWFkdmFuY2UtbGVmdFwiKTtcclxuICAgIHRoaXMuXyRpbWFnZVJpZ2h0ID0gdGhpcy5fJG1vZGFsLmZpbmQoXCIuaW1hZ2UtYWR2YW5jZS1yaWdodFwiKTtcclxuXHJcbiAgICB0aGlzLl9pbmRleCA9IDA7IC8vIEluZGV4IG9mIHNlbGVjdGVkIGltYWdlXHJcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuICAgIFxyXG4gICAgdGhpcy5fJGltYWdlTGVmdC5vbihcImNsaWNrXCIsIHRoaXMuYWR2YW5jZUxlZnQuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl8kaW1hZ2VSaWdodC5vbihcImNsaWNrXCIsIHRoaXMuYWR2YW5jZVJpZ2h0LmJpbmQodGhpcykpO1xyXG4gICAgJChkb2N1bWVudCkub24oXCJrZXlkb3duXCIsIHRoaXMuX29uS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBHaXZlIGpRdWVyeSBjb250cm9sIG92ZXIgc2hvd2luZy9oaWRpbmdcclxuICAgIHRoaXMuXyRtb2RhbC5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICB0aGlzLl8kbW9kYWwuaGlkZSgpO1xyXG5cclxuICAgIC8vIEV2ZW50c1xyXG4gICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIHRoaXMuX29uUmVzaXplLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJG92ZXJsYXkub24oXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJG1vZGFsLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub24oXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgXHJcbiAgICB0aGlzLl91cGRhdGVDb250cm9scygpO1xyXG5cclxuICAgIC8vIFNpemUgb2YgZm9udGF3ZXNvbWUgaWNvbnMgbmVlZHMgYSBzbGlnaHQgZGVsYXkgKHVudGlsIHN0YWNrIGlzIGNsZWFyKSBmb3JcclxuICAgIC8vIHNvbWUgcmVhc29uXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9vblJlc2l6ZSgpO1xyXG4gICAgfS5iaW5kKHRoaXMpLCAwKTtcclxufVxyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLmFkdmFuY2VMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5zaG93SW1hZ2VBdCh0aGlzLl9pbmRleCAtIDEpO1xyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLmFkdmFuY2VSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuc2hvd0ltYWdlQXQodGhpcy5faW5kZXggKyAxKTtcclxufTtcclxuXHJcblNsaWRlc2hvd01vZGFsLnByb3RvdHlwZS5zaG93SW1hZ2VBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgaW5kZXggPSBNYXRoLm1heChpbmRleCwgMCk7XHJcbiAgICBpbmRleCA9IE1hdGgubWluKGluZGV4LCB0aGlzLl9zbGlkZXNob3cuZ2V0TnVtSW1hZ2VzKCkgLSAxKTtcclxuICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XHJcbiAgICB2YXIgJGltZyA9IHRoaXMuX3NsaWRlc2hvdy5nZXRHYWxsZXJ5SW1hZ2UodGhpcy5faW5kZXgpO1xyXG4gICAgdmFyIGNhcHRpb24gPSB0aGlzLl9zbGlkZXNob3cuZ2V0Q2FwdGlvbih0aGlzLl9pbmRleCk7XHJcblxyXG4gICAgdGhpcy5fJGltYWdlQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAkKFwiPGltZz5cIiwge3NyYzogJGltZy5hdHRyKFwic3JjXCIpfSlcclxuICAgICAgICAuYXBwZW5kVG8odGhpcy5fJGltYWdlQ29udGFpbmVyKTtcclxuXHJcbiAgICB0aGlzLl8kY2FwdGlvbi5lbXB0eSgpO1xyXG4gICAgaWYgKGNhcHRpb24pIHtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiZmlndXJlLW51bWJlclwiKVxyXG4gICAgICAgICAgICAudGV4dChcIkZpZy4gXCIgKyAodGhpcy5faW5kZXggKyAxKSArIFwiOiBcIilcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRjYXB0aW9uKTtcclxuICAgICAgICAkKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwiY2FwdGlvbi10ZXh0XCIpXHJcbiAgICAgICAgICAgIC50ZXh0KGNhcHRpb24pXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyh0aGlzLl8kY2FwdGlvbik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuX29uUmVzaXplKCk7XHJcbiAgICB0aGlzLl91cGRhdGVDb250cm9scygpO1xyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIGluZGV4ID0gaW5kZXggfHwgMDtcclxuICAgIHRoaXMuXyRtb2RhbC5zaG93KCk7XHJcbiAgICB0aGlzLnNob3dJbWFnZUF0KGluZGV4KTtcclxuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl8kbW9kYWwuaGlkZSgpO1xyXG4gICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuX29uS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzT3BlbikgcmV0dXJuO1xyXG4gICAgaWYgKGUud2hpY2ggPT09IEtFWV9DT0RFUy5MRUZUX0FSUk9XKSB7XHJcbiAgICAgICAgdGhpcy5hZHZhbmNlTGVmdCgpO1xyXG4gICAgfSBlbHNlIGlmIChlLndoaWNoID09PSBLRVlfQ09ERVMuUklHSFRfQVJST1cpIHtcclxuICAgICAgICB0aGlzLmFkdmFuY2VSaWdodCgpO1xyXG4gICAgfSBlbHNlIGlmIChlLndoaWNoID09PSBLRVlfQ09ERVMuRVNDQVBFKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpOyAgIFxyXG4gICAgfVxyXG59O1xyXG5cclxuU2xpZGVzaG93TW9kYWwucHJvdG90eXBlLl91cGRhdGVDb250cm9scyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIFJlLWVuYWJsZVxyXG4gICAgdGhpcy5fJGltYWdlUmlnaHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIHRoaXMuXyRpbWFnZUxlZnQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIFxyXG4gICAgLy8gRGlzYWJsZSBpZiB3ZSd2ZSByZWFjaGVkIHRoZSB0aGUgbWF4IG9yIG1pbiBsaW1pdFxyXG4gICAgaWYgKHRoaXMuX2luZGV4ID49ICh0aGlzLl9zbGlkZXNob3cuZ2V0TnVtSW1hZ2VzKCkgLSAxKSkge1xyXG4gICAgICAgIHRoaXMuXyRpbWFnZVJpZ2h0LmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2luZGV4IDw9IDApIHtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VMZWZ0LmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5TbGlkZXNob3dNb2RhbC5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyICRpbWFnZSA9IHRoaXMuXyRpbWFnZUNvbnRhaW5lci5maW5kKFwiaW1nXCIpO1xyXG5cclxuICAgIC8vIFJlc2V0IHRoZSBjb250ZW50J3Mgd2lkdGhcclxuICAgIHRoaXMuXyRjb250ZW50LndpZHRoKFwiXCIpO1xyXG5cclxuICAgIC8vIEZpbmQgdGhlIHNpemUgb2YgdGhlIGNvbXBvbmVudHMgdGhhdCBuZWVkIHRvIGJlIGRpc3BsYXllZCBpbiBhZGRpdGlvbiB0byBcclxuICAgIC8vIHRoZSBpbWFnZVxyXG4gICAgdmFyIGNvbnRyb2xzV2lkdGggPSB0aGlzLl8kaW1hZ2VMZWZ0Lm91dGVyV2lkdGgodHJ1ZSkgKyBcclxuICAgICAgICB0aGlzLl8kaW1hZ2VSaWdodC5vdXRlcldpZHRoKHRydWUpO1xyXG4gICAgLy8gSGFjayBmb3Igbm93IC0gYnVkZ2V0IGZvciAyeCB0aGUgY2FwdGlvbiBoZWlnaHQuIFxyXG4gICAgdmFyIGNhcHRpb25IZWlnaHQgPSAyICogdGhpcy5fJGNhcHRpb24ub3V0ZXJIZWlnaHQodHJ1ZSk7IFxyXG4gICAgdmFyIGltYWdlUGFkZGluZyA9ICRpbWFnZS5pbm5lcldpZHRoKCk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBhdmFpbGFibGUgYXJlYSBmb3IgdGhlIG1vZGFsXHJcbiAgICB2YXIgbXcgPSB0aGlzLl8kbW9kYWwud2lkdGgoKSAtIGNvbnRyb2xzV2lkdGg7XHJcbiAgICB2YXIgbWggPSB0aGlzLl8kbW9kYWwuaGVpZ2h0KCkgLSBjYXB0aW9uSGVpZ2h0O1xyXG5cclxuICAgIC8vIEZpdCB0aGUgaW1hZ2UgdG8gdGhlIHJlbWFpbmluZyBzY3JlZW4gcmVhbCBlc3RhdGUgXHJcbiAgICB2YXIgc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaXcgPSAkaW1hZ2UucHJvcChcIm5hdHVyYWxXaWR0aFwiKTtcclxuICAgICAgICB2YXIgaWggPSAkaW1hZ2UucHJvcChcIm5hdHVyYWxIZWlnaHRcIik7XHJcbiAgICAgICAgdmFyIHN3ID0gaXcgLyBtdztcclxuICAgICAgICB2YXIgc2ggPSBpaCAvIG1oO1xyXG4gICAgICAgIHZhciBzID0gTWF0aC5tYXgoc3csIHNoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHdpZHRoL2hlaWdodCB1c2luZyBDU1MgaW4gb3JkZXIgdG8gcmVzcGVjdCBib3gtc2l6aW5nXHJcbiAgICAgICAgaWYgKHMgPiAxKSB7XHJcbiAgICAgICAgICAgICRpbWFnZS5jc3MoXCJ3aWR0aFwiLCBpdyAvIHMgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAkaW1hZ2UuY3NzKFwiaGVpZ2h0XCIsIGloIC8gcyArIFwicHhcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGltYWdlLmNzcyhcIndpZHRoXCIsIGl3ICsgXCJweFwiKTtcclxuICAgICAgICAgICAgJGltYWdlLmNzcyhcImhlaWdodFwiLCBpaCArIFwicHhcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl8kaW1hZ2VSaWdodC5jc3MoXCJ0b3BcIiwgJGltYWdlLm91dGVySGVpZ2h0KCkgLyAyICsgXCJweFwiKTtcclxuICAgICAgICB0aGlzLl8kaW1hZ2VMZWZ0LmNzcyhcInRvcFwiLCAkaW1hZ2Uub3V0ZXJIZWlnaHQoKSAvIDIgKyBcInB4XCIpO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIGNvbnRlbnQgd3JhcHBlciB0byBiZSB0aGUgd2lkdGggb2YgdGhlIGltYWdlLiBUaGlzIHdpbGwga2VlcCBcclxuICAgICAgICAvLyB0aGUgY2FwdGlvbiBmcm9tIGV4cGFuZGluZyBiZXlvbmQgdGhlIGltYWdlLlxyXG4gICAgICAgIHRoaXMuXyRjb250ZW50LndpZHRoKCRpbWFnZS5vdXRlcldpZHRoKHRydWUpKTsgICAgICAgIFxyXG4gICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgIGlmICgkaW1hZ2UucHJvcChcImNvbXBsZXRlXCIpKSBzZXRTaXplKCk7XHJcbiAgICBlbHNlICRpbWFnZS5vbmUoXCJsb2FkXCIsIHNldFNpemUpO1xyXG59O1xyXG4iLCJ2YXIgU2xpZGVzaG93TW9kYWwgPSByZXF1aXJlKFwiLi9zbGlkZXNob3ctbW9kYWwuanNcIik7XHJcbnZhciBUaHVtYm5haWxTbGlkZXIgPSByZXF1aXJlKFwiLi90aHVtYm5haWwtc2xpZGVyLmpzXCIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbih0cmFuc2l0aW9uRHVyYXRpb24pIHtcclxuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSAodHJhbnNpdGlvbkR1cmF0aW9uICE9PSB1bmRlZmluZWQpID9cclxuICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uIDogNDAwO1xyXG4gICAgICAgIHRoaXMuX3NsaWRlc2hvd3MgPSBbXTtcclxuICAgICAgICAkKFwiLnNsaWRlc2hvd1wiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVzaG93ID0gbmV3IFNsaWRlc2hvdygkKGVsZW1lbnQpLCB0cmFuc2l0aW9uRHVyYXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLl9zbGlkZXNob3dzLnB1c2goc2xpZGVzaG93KTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gU2xpZGVzaG93KCRjb250YWluZXIsIHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uID0gdHJhbnNpdGlvbkR1cmF0aW9uO1xyXG4gICAgdGhpcy5fJGNvbnRhaW5lciA9ICRjb250YWluZXI7XHJcbiAgICB0aGlzLl9pbmRleCA9IDA7IC8vIEluZGV4IG9mIHNlbGVjdGVkIGltYWdlXHJcblxyXG4gICAgLy8gQ3JlYXRlIGNvbXBvbmVudHNcclxuICAgIHRoaXMuX3RodW1ibmFpbFNsaWRlciA9IG5ldyBUaHVtYm5haWxTbGlkZXIoJGNvbnRhaW5lciwgdGhpcyk7XHJcbiAgICB0aGlzLl9tb2RhbCA9IG5ldyBTbGlkZXNob3dNb2RhbCgkY29udGFpbmVyLCB0aGlzKTtcclxuXHJcbiAgICAvLyBDYWNoZSBhbmQgY3JlYXRlIG5lY2Vzc2FyeSBET00gZWxlbWVudHMgICBcclxuICAgIHRoaXMuXyRjYXB0aW9uQ29udGFpbmVyID0gJGNvbnRhaW5lci5maW5kKFwiLmNhcHRpb25cIik7XHJcbiAgICB0aGlzLl8kc2VsZWN0ZWRJbWFnZUNvbnRhaW5lciA9ICRjb250YWluZXIuZmluZChcIi5zZWxlY3RlZC1pbWFnZVwiKTtcclxuXHJcbiAgICAvLyBPcGVuIG1vZGFsIG9uIGNsaWNraW5nIHNlbGVjdGVkIGltYWdlXHJcbiAgICB0aGlzLl8kc2VsZWN0ZWRJbWFnZUNvbnRhaW5lci5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9tb2RhbC5vcGVuKHRoaXMuX2luZGV4KTsgICAgXHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIExvYWQgaW1hZ2VzXHJcbiAgICB0aGlzLl8kZ2FsbGVyeUltYWdlcyA9IHRoaXMuX2xvYWRHYWxsZXJ5SW1hZ2VzKCk7XHJcbiAgICB0aGlzLl9udW1JbWFnZXMgPSB0aGlzLl8kZ2FsbGVyeUltYWdlcy5sZW5ndGg7XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgZmlyc3QgaW1hZ2VcclxuICAgIHRoaXMuc2hvd0ltYWdlKDApO1xyXG59XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLmdldEFjdGl2ZUluZGV4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2luZGV4O1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXROdW1JbWFnZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbnVtSW1hZ2VzO1xyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5nZXRHYWxsZXJ5SW1hZ2UgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIHJldHVybiB0aGlzLl8kZ2FsbGVyeUltYWdlc1tpbmRleF07XHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLmdldENhcHRpb24gPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIHJldHVybiB0aGlzLl8kZ2FsbGVyeUltYWdlc1tpbmRleF0uZGF0YShcImNhcHRpb25cIik7XHJcbn07XHJcblxyXG5TbGlkZXNob3cucHJvdG90eXBlLnNob3dJbWFnZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgLy8gUmVzZXQgYWxsIGltYWdlcyB0byBpbnZpc2libGUgYW5kIGxvd2VzdCB6LWluZGV4LiBUaGlzIGNvdWxkIGJlIHNtYXJ0ZXIsXHJcbiAgICAvLyBsaWtlIEhvdmVyU2xpZGVzaG93LCBhbmQgb25seSByZXNldCBleGFjdGx5IHdoYXQgd2UgbmVlZCwgYnV0IHdlIGFyZW4ndCBcclxuICAgIC8vIHdhc3RpbmcgdGhhdCBtYW55IGN5Y2xlcy5cclxuICAgIHRoaXMuXyRnYWxsZXJ5SW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKCRnYWxsZXJ5SW1hZ2UpIHtcclxuICAgICAgICAkZ2FsbGVyeUltYWdlLmNzcyh7XHJcbiAgICAgICAgICAgIFwiekluZGV4XCI6IDAsXHJcbiAgICAgICAgICAgIFwib3BhY2l0eVwiOiAwXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJGdhbGxlcnlJbWFnZS52ZWxvY2l0eShcInN0b3BcIik7IC8vIFN0b3AgYW55IGFuaW1hdGlvbnNcclxuICAgIH0sIHRoaXMpO1xyXG5cclxuICAgIC8vIENhY2hlIHJlZmVyZW5jZXMgdG8gdGhlIGxhc3QgYW5kIGN1cnJlbnQgaW1hZ2VcclxuICAgIHZhciAkbGFzdEltYWdlID0gdGhpcy5fJGdhbGxlcnlJbWFnZXNbdGhpcy5faW5kZXhdO1xyXG4gICAgdmFyICRjdXJyZW50SW1hZ2UgPSB0aGlzLl8kZ2FsbGVyeUltYWdlc1tpbmRleF07XHJcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xyXG5cclxuICAgIC8vIE1ha2UgdGhlIGxhc3QgaW1hZ2UgdmlzaXNibGUgYW5kIHRoZW4gYW5pbWF0ZSB0aGUgY3VycmVudCBpbWFnZSBpbnRvIHZpZXdcclxuICAgIC8vIG9uIHRvcCBvZiB0aGUgbGFzdFxyXG4gICAgJGxhc3RJbWFnZS5jc3MoXCJ6SW5kZXhcIiwgMSk7XHJcbiAgICAkY3VycmVudEltYWdlLmNzcyhcInpJbmRleFwiLCAyKTtcclxuICAgICRsYXN0SW1hZ2UuY3NzKFwib3BhY2l0eVwiLCAxKTtcclxuICAgICRjdXJyZW50SW1hZ2UudmVsb2NpdHkoe1wib3BhY2l0eVwiOiAxfSwgdGhpcy5fdHJhbnNpdGlvbkR1cmF0aW9uLCBcclxuICAgICAgICBcImVhc2VJbk91dFF1YWRcIik7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBjYXB0aW9uLCBpZiBpdCBleGlzdHMgb24gdGhlIHRodW1ibmFpbFxyXG4gICAgdmFyIGNhcHRpb24gPSAkY3VycmVudEltYWdlLmRhdGEoXCJjYXB0aW9uXCIpO1xyXG4gICAgaWYgKGNhcHRpb24pIHtcclxuICAgICAgICB0aGlzLl8kY2FwdGlvbkNvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgICQoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJmaWd1cmUtbnVtYmVyXCIpXHJcbiAgICAgICAgICAgIC50ZXh0KFwiRmlnLiBcIiArICh0aGlzLl9pbmRleCArIDEpICsgXCI6IFwiKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8odGhpcy5fJGNhcHRpb25Db250YWluZXIpO1xyXG4gICAgICAgICQoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJjYXB0aW9uLXRleHRcIilcclxuICAgICAgICAgICAgLnRleHQoY2FwdGlvbilcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRjYXB0aW9uQ29udGFpbmVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPYmplY3QgaW1hZ2UgZml0IHBvbHlmaWxsIGJyZWFrcyBqUXVlcnkgYXR0ciguLi4pLCBzbyBmYWxsYmFjayB0byBqdXN0IFxyXG4gICAgLy8gdXNpbmcgZWxlbWVudC5zcmNcclxuICAgIC8vIFRPRE86IExhenkhXHJcbiAgICAvLyBpZiAoJGN1cnJlbnRJbWFnZS5nZXQoMCkuc3JjID09PSBcIlwiKSB7XHJcbiAgICAvLyAgICAgJGN1cnJlbnRJbWFnZS5nZXQoMCkuc3JjID0gJGN1cnJlbnRJbWFnZS5kYXRhKFwiaW1hZ2UtdXJsXCIpO1xyXG4gICAgLy8gfVxyXG59O1xyXG5cclxuU2xpZGVzaG93LnByb3RvdHlwZS5fbG9hZEdhbGxlcnlJbWFnZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBDcmVhdGUgZW1wdHkgaW1hZ2VzIGluIHRoZSBnYWxsZXJ5IGZvciBlYWNoIHRodW1ibmFpbC4gVGhpcyBoZWxwcyB1cyBkb1xyXG4gICAgLy8gbGF6eSBsb2FkaW5nIG9mIGdhbGxlcnkgaW1hZ2VzIGFuZCBhbGxvd3MgdXMgdG8gY3Jvc3MtZmFkZSBpbWFnZXMuXHJcbiAgICB2YXIgJGdhbGxlcnlJbWFnZXMgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdGh1bWJuYWlsU2xpZGVyLmdldE51bVRodW1ibmFpbHMoKTsgaSArPSAxKSB7XHJcbiAgICAgICAgLy8gR2V0IHRoZSB0aHVtYm5haWwgZWxlbWVudCB3aGljaCBoYXMgcGF0aCBhbmQgY2FwdGlvbiBkYXRhXHJcbiAgICAgICAgdmFyICR0aHVtYiA9IHRoaXMuX3RodW1ibmFpbFNsaWRlci5nZXQkVGh1bWJuYWlsKGkpO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGlkIGZyb20gdGhlIHBhdGggdG8gdGhlIGxhcmdlIGltYWdlXHJcbiAgICAgICAgdmFyIGxhcmdlUGF0aCA9ICR0aHVtYi5kYXRhKFwibGFyZ2UtcGF0aFwiKTtcclxuICAgICAgICB2YXIgaWQgPSBsYXJnZVBhdGguc3BsaXQoXCIvXCIpLnBvcCgpLnNwbGl0KFwiLlwiKVswXTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgZ2FsbGVyeSBpbWFnZSBlbGVtZW50XHJcbiAgICAgICAgdmFyICRnYWxsZXJ5SW1hZ2UgPSAkKFwiPGltZz5cIiwge2lkOiBpZH0pXHJcbiAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgIHRvcDogXCIwcHhcIixcclxuICAgICAgICAgICAgICAgIGxlZnQ6IFwiMHB4XCIsXHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgekluZGV4OiAwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5kYXRhKFwiaW1hZ2UtdXJsXCIsIGxhcmdlUGF0aCkgICAgICAgICAgICBcclxuICAgICAgICAgICAgLmRhdGEoXCJjYXB0aW9uXCIsICR0aHVtYi5kYXRhKFwiY2FwdGlvblwiKSlcclxuICAgICAgICAgICAgLmFwcGVuZFRvKHRoaXMuXyRzZWxlY3RlZEltYWdlQ29udGFpbmVyKTtcclxuICAgICAgICAkZ2FsbGVyeUltYWdlLmdldCgwKS5zcmMgPSBsYXJnZVBhdGg7IC8vIFRPRE86IE1ha2UgdGhpcyBsYXp5IVxyXG4gICAgICAgICRnYWxsZXJ5SW1hZ2VzLnB1c2goJGdhbGxlcnlJbWFnZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJGdhbGxlcnlJbWFnZXM7XHJcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBUaHVtYm5haWxTbGlkZXI7XHJcblxyXG5mdW5jdGlvbiBUaHVtYm5haWxTbGlkZXIoJGNvbnRhaW5lciwgc2xpZGVzaG93KSB7XHJcbiAgICB0aGlzLl8kY29udGFpbmVyID0gJGNvbnRhaW5lcjtcclxuICAgIHRoaXMuX3NsaWRlc2hvdyA9IHNsaWRlc2hvdztcclxuXHJcbiAgICB0aGlzLl9pbmRleCA9IDA7IC8vIEluZGV4IG9mIHNlbGVjdGVkIHRodW1ibmFpbFxyXG4gICAgdGhpcy5fc2Nyb2xsSW5kZXggPSAwOyAvLyBJbmRleCBvZiB0aGUgdGh1bWJuYWlsIHRoYXQgaXMgY3VycmVudGx5IGNlbnRlcmVkXHJcblxyXG4gICAgLy8gQ2FjaGUgYW5kIGNyZWF0ZSBuZWNlc3NhcnkgRE9NIGVsZW1lbnRzXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyID0gJGNvbnRhaW5lci5maW5kKFwiLnRodW1ibmFpbHNcIik7XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsSW1hZ2VzID0gdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci5maW5kKFwiaW1nXCIpO1xyXG4gICAgdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwID0gJGNvbnRhaW5lci5maW5kKFwiLnZpc2libGUtdGh1bWJuYWlsc1wiKTtcclxuICAgIHRoaXMuXyRhZHZhbmNlTGVmdCA9ICRjb250YWluZXIuZmluZChcIi50aHVtYm5haWwtYWR2YW5jZS1sZWZ0XCIpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VSaWdodCA9ICRjb250YWluZXIuZmluZChcIi50aHVtYm5haWwtYWR2YW5jZS1yaWdodFwiKTtcclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggdGhlIHRodW1ibmFpbHMsIGdpdmUgdGhlbSBhbiBpbmRleCBkYXRhIGF0dHJpYnV0ZSBhbmQgY2FjaGVcclxuICAgIC8vIGEgcmVmZXJlbmNlIHRvIHRoZW0gaW4gYW4gYXJyYXlcclxuICAgIHRoaXMuXyR0aHVtYm5haWxzID0gW107XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsSW1hZ2VzLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyICR0aHVtYm5haWwgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICR0aHVtYm5haWwuZGF0YShcImluZGV4XCIsIGluZGV4KTtcclxuICAgICAgICB0aGlzLl8kdGh1bWJuYWlscy5wdXNoKCR0aHVtYm5haWwpO1xyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX251bUltYWdlcyA9IHRoaXMuXyR0aHVtYm5haWxzLmxlbmd0aDtcclxuXHJcbiAgICAvLyBMZWZ0L3JpZ2h0IGNvbnRyb2xzXHJcbiAgICB0aGlzLl8kYWR2YW5jZUxlZnQub24oXCJjbGlja1wiLCB0aGlzLmFkdmFuY2VMZWZ0LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VSaWdodC5vbihcImNsaWNrXCIsIHRoaXMuYWR2YW5jZVJpZ2h0LmJpbmQodGhpcykpO1xyXG5cclxuICAgIC8vIENsaWNraW5nIGEgdGh1bWJuYWlsXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsSW1hZ2VzLm9uKFwiY2xpY2tcIiwgdGhpcy5fb25DbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9hY3RpdmF0ZVRodW1ibmFpbCgwKTtcclxuXHJcbiAgICAvLyBSZXNpemVcclxuICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCB0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAvLyBGb3Igc29tZSByZWFzb24sIHRoZSBzaXppbmcgb24gdGhlIGNvbnRyb2xzIGlzIG1lc3NlZCB1cCBpZiBpdCBydW5zXHJcbiAgICAvLyBpbW1lZGlhdGVseSAtIGRlbGF5IHNpemluZyB1bnRpbCBzdGFjayBpcyBjbGVhclxyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fb25SZXNpemUoKTtcclxuICAgIH0uYmluZCh0aGlzKSwgMCk7XHJcbn1cclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuZ2V0QWN0aXZlSW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5kZXg7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLmdldE51bVRodW1ibmFpbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbnVtSW1hZ2VzO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5nZXQkVGh1bWJuYWlsID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fJHRodW1ibmFpbHNbaW5kZXhdO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5hZHZhbmNlTGVmdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdJbmRleCA9IHRoaXMuX3Njcm9sbEluZGV4IC0gdGhpcy5fbnVtVmlzaWJsZTtcclxuICAgIG5ld0luZGV4ID0gTWF0aC5tYXgobmV3SW5kZXgsIDApO1xyXG4gICAgdGhpcy5fc2Nyb2xsVG9UaHVtYm5haWwobmV3SW5kZXgpO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5hZHZhbmNlUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbmV3SW5kZXggPSB0aGlzLl9zY3JvbGxJbmRleCArIHRoaXMuX251bVZpc2libGU7XHJcbiAgICBuZXdJbmRleCA9IE1hdGgubWluKG5ld0luZGV4LCB0aGlzLl9udW1JbWFnZXMgLSAxKTtcclxuICAgIHRoaXMuX3Njcm9sbFRvVGh1bWJuYWlsKG5ld0luZGV4KTtcclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX3Jlc2V0U2l6aW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gUmVzZXQgc2l6aW5nIHZhcmlhYmxlcy4gVGhpcyBpbmNsdWRlcyByZXNldHRpbmcgYW55IGlubGluZSBzdHlsZSB0aGF0IGhhc1xyXG4gICAgLy8gYmVlbiBhcHBsaWVkLCBzbyB0aGF0IGFueSBzaXplIGNhbGN1bGF0aW9ucyBjYW4gYmUgYmFzZWQgb24gdGhlIENTU1xyXG4gICAgLy8gc3R5bGluZy5cclxuICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIuY3NzKHtcclxuICAgICAgICB0b3A6IFwiXCIsIGxlZnQ6IFwiXCIsIHdpZHRoOiBcIlwiLCBoZWlnaHQ6IFwiXCJcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwLndpZHRoKFwiXCIpO1xyXG4gICAgdGhpcy5fJHZpc2libGVUaHVtYm5haWxXcmFwLmhlaWdodChcIlwiKTtcclxuICAgIC8vIE1ha2UgYWxsIHRodW1ibmFpbHMgc3F1YXJlIGFuZCByZXNldCBhbnkgaGVpZ2h0XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlscy5mb3JFYWNoKGZ1bmN0aW9uICgkZWxlbWVudCkgeyBcclxuICAgICAgICAkZWxlbWVudC5oZWlnaHQoXCJcIik7IC8vIFJlc2V0IGhlaWdodCBiZWZvcmUgc2V0dGluZyB3aWR0aFxyXG4gICAgICAgICRlbGVtZW50LndpZHRoKCRlbGVtZW50LmhlaWdodCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuVGh1bWJuYWlsU2xpZGVyLnByb3RvdHlwZS5fb25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLl9yZXNldFNpemluZygpO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2l6ZSBvZiB0aGUgZmlyc3QgdGh1bWJuYWlsLiBUaGlzIGFzc3VtZXMgdGhlIGZpcnN0IGltYWdlXHJcbiAgICAvLyBvbmx5IGhhcyBhIHJpZ2h0LXNpZGUgbWFyZ2luLlxyXG4gICAgdmFyICRmaXJzdFRodW1iID0gdGhpcy5fJHRodW1ibmFpbHNbMF07XHJcbiAgICB2YXIgdGh1bWJTaXplID0gJGZpcnN0VGh1bWIub3V0ZXJIZWlnaHQoZmFsc2UpO1xyXG4gICAgdmFyIHRodW1iTWFyZ2luID0gMiAqICgkZmlyc3RUaHVtYi5vdXRlcldpZHRoKHRydWUpIC0gdGh1bWJTaXplKTtcclxuXHJcbiAgICAvLyBNZWFzdXJlIGNvbnRyb2xzLiBUaGV5IG5lZWQgdG8gYmUgdmlzaWJsZSBpbiBvcmRlciB0byBiZSBtZWFzdXJlZC5cclxuICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgdGhpcy5fJGFkdmFuY2VMZWZ0LmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgIHZhciB0aHVtYkNvbnRyb2xXaWR0aCA9IHRoaXMuXyRhZHZhbmNlUmlnaHQub3V0ZXJXaWR0aCh0cnVlKSArXHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VMZWZ0Lm91dGVyV2lkdGgodHJ1ZSk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGhvdyBtYW55IGZ1bGwgdGh1bWJuYWlscyBjYW4gZml0IHdpdGhpbiB0aGUgdGh1bWJuYWlsIGFyZWFcclxuICAgIHZhciB2aXNpYmxlV2lkdGggPSB0aGlzLl8kdmlzaWJsZVRodW1ibmFpbFdyYXAub3V0ZXJXaWR0aChmYWxzZSk7XHJcbiAgICB2YXIgbnVtVGh1bWJzVmlzaWJsZSA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgKHZpc2libGVXaWR0aCAtIHRodW1iTWFyZ2luKSAvICh0aHVtYlNpemUgKyB0aHVtYk1hcmdpbilcclxuICAgICk7XHJcblxyXG4gICAgLy8gQ2hlY2sgd2hldGhlciBhbGwgdGhlIHRodW1ibmFpbHMgY2FuIGZpdCBvbiB0aGUgc2NyZWVuIGF0IG9uY2VcclxuICAgIGlmIChudW1UaHVtYnNWaXNpYmxlIDwgdGhpcy5fbnVtSW1hZ2VzKSB7XHJcbiAgICAgICAgLy8gVGFrZSBhIGJlc3QgZ3Vlc3MgYXQgaG93IHRvIHNpemUgdGhlIHRodW1ibmFpbHMuIFNpemUgZm9ybXVsYTpcclxuICAgICAgICAvLyAgd2lkdGggPSBudW0gKiB0aHVtYlNpemUgKyAobnVtIC0gMSkgKiB0aHVtYk1hcmdpbiArIGNvbnRyb2xTaXplXHJcbiAgICAgICAgLy8gU29sdmUgZm9yIG51bWJlciBvZiB0aHVtYm5haWxzIGFuZCByb3VuZCB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIHNvIFxyXG4gICAgICAgIC8vIHRoYXQgd2UgZG9uJ3QgaGF2ZSBhbnkgcGFydGlhbCB0aHVtYm5haWxzIHNob3dpbmcuXHJcbiAgICAgICAgbnVtVGh1bWJzVmlzaWJsZSA9IE1hdGgucm91bmQoXHJcbiAgICAgICAgICAgICh2aXNpYmxlV2lkdGggLSB0aHVtYkNvbnRyb2xXaWR0aCArIHRodW1iTWFyZ2luKSAvIFxyXG4gICAgICAgICAgICAodGh1bWJTaXplICsgdGh1bWJNYXJnaW4pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gVXNlIHRoaXMgbnVtYmVyIG9mIHRodW1ibmFpbHMgdG8gY2FsY3VsYXRlIHRoZSB0aHVtYm5haWwgc2l6ZVxyXG4gICAgICAgIHZhciBuZXdTaXplID0gKHZpc2libGVXaWR0aCAtIHRodW1iQ29udHJvbFdpZHRoICsgdGh1bWJNYXJnaW4pIC8gXHJcbiAgICAgICAgICAgIG51bVRodW1ic1Zpc2libGUgLSB0aHVtYk1hcmdpbjtcclxuICAgICAgICB0aGlzLl8kdGh1bWJuYWlscy5mb3JFYWNoKGZ1bmN0aW9uICgkZWxlbWVudCkge1xyXG4gICAgICAgICAgICAvLyAkLndpZHRoIGFuZCAkLmhlaWdodCBzZXQgdGhlIGNvbnRlbnQgc2l6ZSByZWdhcmRsZXNzIG9mIHRoZSBcclxuICAgICAgICAgICAgLy8gYm94LXNpemluZy4gVGhlIGltYWdlcyBhcmUgYm9yZGVyLWJveCwgc28gd2Ugd2FudCB0aGUgQ1NTIHdpZHRoXHJcbiAgICAgICAgICAgIC8vIGFuZCBoZWlnaHQuIFRoaXMgYWxsb3dzIHRoZSBhY3RpdmUgaW1hZ2UgdG8gaGF2ZSBhIGJvcmRlciBhbmQgdGhlXHJcbiAgICAgICAgICAgIC8vIG90aGVyIGltYWdlcyB0byBoYXZlIHBhZGRpbmcuIFxyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3MoXCJ3aWR0aFwiLCBuZXdTaXplICsgXCJweFwiKTtcclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKFwiaGVpZ2h0XCIsIG5ld1NpemUgKyBcInB4XCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIHRodW1ibmFpbCB3cmFwIHNpemUuIEl0IHNob3VsZCBiZSBqdXN0IHRhbGwgZW5vdWdoIHRvIGZpdCBhXHJcbiAgICAgICAgLy8gdGh1bWJuYWlsIGFuZCBsb25nIGVub3VnaCB0byBob2xkIGFsbCB0aGUgdGh1bWJuYWlscyBpbiBvbmUgbGluZTpcclxuICAgICAgICB2YXIgdG90YWxTaXplID0gbmV3U2l6ZSAqIHRoaXMuX251bUltYWdlcyArIFxyXG4gICAgICAgICAgICB0aHVtYk1hcmdpbiAqICh0aGlzLl9udW1JbWFnZXMgLSAxKTtcclxuICAgICAgICB0aGlzLl8kdGh1bWJuYWlsQ29udGFpbmVyLmNzcyh7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0b3RhbFNpemUgKyBcInB4XCIsXHJcbiAgICAgICAgICAgIGhlaWdodDogJGZpcnN0VGh1bWIub3V0ZXJIZWlnaHQodHJ1ZSkgKyBcInB4XCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRoZSB2aXNpYmxlIHRodW1ibmFpbCB3cmFwIHNpemUuIFRoaXMgaXMgdXNlZCB0byBtYWtzIHRoZSBtdWNoIFxyXG4gICAgICAgIC8vIGxhcmdlciB0aHVtYm5haWwgY29udGFpbmVyLiBJdCBzaG91bGQgYmUgYXMgd2lkZSBhcyBpdCBjYW4gYmUsIG1pbnVzXHJcbiAgICAgICAgLy8gdGhlIHNwYWNlIG5lZWRlZCBmb3IgdGhlIGxlZnQvcmlnaHQgY29udG9scy5cclxuICAgICAgICB0aGlzLl8kdmlzaWJsZVRodW1ibmFpbFdyYXAuY3NzKHtcclxuICAgICAgICAgICAgd2lkdGg6IHZpc2libGVXaWR0aCAtIHRodW1iQ29udHJvbFdpZHRoICsgXCJweFwiLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICRmaXJzdFRodW1iLm91dGVySGVpZ2h0KHRydWUpICsgXCJweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEFsbCB0aHVtYm5haWxzIGFyZSB2aXNpYmxlLCB3ZSBjYW4gaGlkZSB0aGUgY29udHJvbHMgYW5kIGV4cGFuZCB0aGVcclxuICAgICAgICAvLyB0aHVtYm5haWwgY29udGFpbmVyIHRvIDEwMCVcclxuICAgICAgICBudW1UaHVtYnNWaXNpYmxlID0gdGhpcy5fbnVtSW1hZ2VzO1xyXG4gICAgICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIuY3NzKFwid2lkdGhcIiwgXCIxMDAlXCIpO1xyXG4gICAgICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VMZWZ0LmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX251bVZpc2libGUgPSBudW1UaHVtYnNWaXNpYmxlO1xyXG4gICAgdmFyIG1pZGRsZUluZGV4ID0gTWF0aC5mbG9vcigodGhpcy5fbnVtVmlzaWJsZSAtIDEpIC8gMik7XHJcbiAgICB0aGlzLl9zY3JvbGxCb3VuZHMgPSB7XHJcbiAgICAgICAgbWluOiBtaWRkbGVJbmRleCxcclxuICAgICAgICBtYXg6IHRoaXMuX251bUltYWdlcyAtIDEgLSBtaWRkbGVJbmRleFxyXG4gICAgfTtcclxuICAgIGlmICh0aGlzLl9udW1WaXNpYmxlICUgMiA9PT0gMCkgdGhpcy5fc2Nyb2xsQm91bmRzLm1heCAtPSAxO1xyXG5cclxuICAgIHRoaXMuX3VwZGF0ZVRodW1ibmFpbENvbnRyb2xzKCk7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9hY3RpdmF0ZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgLy8gQWN0aXZhdGUvZGVhY3RpdmF0ZSB0aHVtYm5haWxzXHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsc1t0aGlzLl9pbmRleF0ucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICB0aGlzLl8kdGh1bWJuYWlsc1tpbmRleF0uYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9zY3JvbGxUb1RodW1ibmFpbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgLy8gTm8gbmVlZCB0byBzY3JvbGwgaWYgYWxsIHRodW1ibmFpbHMgYXJlIHZpc2libGVcclxuICAgIGlmICh0aGlzLl9udW1WaXNpYmxlID09PSB0aGlzLl9udW1JbWFnZXMpIHJldHVybjtcclxuXHJcbiAgICAvLyBDb25zdHJhaW4gaW5kZXggc28gdGhhdCB3ZSBjYW4ndCBzY3JvbGwgb3V0IG9mIGJvdW5kcyBcclxuICAgIGluZGV4ID0gTWF0aC5tYXgoaW5kZXgsIHRoaXMuX3Njcm9sbEJvdW5kcy5taW4pO1xyXG4gICAgaW5kZXggPSBNYXRoLm1pbihpbmRleCwgdGhpcy5fc2Nyb2xsQm91bmRzLm1heCk7XHJcbiAgICB0aGlzLl9zY3JvbGxJbmRleCA9IGluZGV4O1xyXG5cclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX3Njcm9sbEluZGV4KTtcclxuICAgIFxyXG4gICAgLy8gRmluZCB0aGUgXCJsZWZ0XCIgcG9zaXRpb24gb2YgdGhlIHRodW1ibmFpbCBjb250YWluZXIgdGhhdCB3b3VsZCBwdXQgdGhlIFxyXG4gICAgLy8gdGh1bWJuYWlsIGF0IGluZGV4IGF0IHRoZSBjZW50ZXJcclxuICAgIHZhciAkdGh1bWIgPSB0aGlzLl8kdGh1bWJuYWlsc1swXTtcclxuICAgIHZhciBzaXplID0gcGFyc2VGbG9hdCgkdGh1bWIuY3NzKFwid2lkdGhcIikpO1xyXG4gICAgdmFyIG1hcmdpbiA9IDIgKiBwYXJzZUZsb2F0KCR0aHVtYi5jc3MoXCJtYXJnaW4tcmlnaHRcIikpOyBcclxuICAgIHZhciBjZW50ZXJYID0gc2l6ZSAqIHRoaXMuX3Njcm9sbEJvdW5kcy5taW4gKyBcclxuICAgICAgICBtYXJnaW4gKiAodGhpcy5fc2Nyb2xsQm91bmRzLm1pbiAtIDEpO1xyXG4gICAgdmFyIHRodW1iWCA9IHNpemUgKiBpbmRleCArIG1hcmdpbiAqIChpbmRleCAtIDEpO1xyXG4gICAgdmFyIGxlZnQgPSBjZW50ZXJYIC0gdGh1bWJYO1xyXG5cclxuICAgIC8vIEFuaW1hdGUgdGhlIHRodW1ibmFpbCBjb250YWluZXJcclxuICAgIHRoaXMuXyR0aHVtYm5haWxDb250YWluZXIudmVsb2NpdHkoXCJzdG9wXCIpO1xyXG4gICAgdGhpcy5fJHRodW1ibmFpbENvbnRhaW5lci52ZWxvY2l0eSh7XHJcbiAgICAgICAgXCJsZWZ0XCI6IGxlZnQgKyBcInB4XCJcclxuICAgIH0sIDYwMCwgXCJlYXNlSW5PdXRRdWFkXCIpO1xyXG5cclxuICAgIHRoaXMuX3VwZGF0ZVRodW1ibmFpbENvbnRyb2xzKCk7XHJcbn07XHJcblxyXG5UaHVtYm5haWxTbGlkZXIucHJvdG90eXBlLl9vbkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICB2YXIgaW5kZXggPSAkdGFyZ2V0LmRhdGEoXCJpbmRleFwiKTtcclxuICAgIFxyXG4gICAgLy8gQ2xpY2tlZCBvbiB0aGUgYWN0aXZlIGltYWdlIC0gbm8gbmVlZCB0byBkbyBhbnl0aGluZ1xyXG4gICAgaWYgKHRoaXMuX2luZGV4ICE9PSBpbmRleCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlVGh1bWJuYWlsKGluZGV4KTtcclxuICAgICAgICB0aGlzLl9zY3JvbGxUb1RodW1ibmFpbChpbmRleCk7XHJcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLl9zbGlkZXNob3cuc2hvd0ltYWdlKGluZGV4KTtcclxuICAgIH1cclxufTtcclxuXHJcblRodW1ibmFpbFNsaWRlci5wcm90b3R5cGUuX3VwZGF0ZVRodW1ibmFpbENvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gUmUtZW5hYmxlXHJcbiAgICB0aGlzLl8kYWR2YW5jZUxlZnQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIHRoaXMuXyRhZHZhbmNlUmlnaHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgIFxyXG4gICAgLy8gRGlzYWJsZSBpZiB3ZSd2ZSByZWFjaGVkIHRoZSB0aGUgbWF4IG9yIG1pbiBsaW1pdFxyXG4gICAgdmFyIG1pZFNjcm9sbEluZGV4ID0gTWF0aC5mbG9vcigodGhpcy5fbnVtVmlzaWJsZSAtIDEpIC8gMik7XHJcbiAgICB2YXIgbWluU2Nyb2xsSW5kZXggPSBtaWRTY3JvbGxJbmRleDtcclxuICAgIHZhciBtYXhTY3JvbGxJbmRleCA9IHRoaXMuX251bUltYWdlcyAtIDEgLSBtaWRTY3JvbGxJbmRleDtcclxuICAgIGlmICh0aGlzLl9zY3JvbGxJbmRleCA+PSB0aGlzLl9zY3JvbGxCb3VuZHMubWF4KSB7XHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VSaWdodC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLl9zY3JvbGxJbmRleCA8PSB0aGlzLl9zY3JvbGxCb3VuZHMubWluKSB7XHJcbiAgICAgICAgdGhpcy5fJGFkdmFuY2VMZWZ0LmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbn07IiwiZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHZhbCwgZGVmYXVsdFZhbCkge1xyXG4gICAgcmV0dXJuICh2YWwgIT09IHVuZGVmaW5lZCkgPyB2YWwgOiBkZWZhdWx0VmFsO1xyXG59O1xyXG5cclxuLy8gVW50ZXN0ZWRcclxuLy8gZXhwb3J0cy5kZWZhdWx0UHJvcGVydGllcyA9IGZ1bmN0aW9uIGRlZmF1bHRQcm9wZXJ0aWVzIChvYmosIHByb3BzKSB7XHJcbi8vICAgICBmb3IgKHZhciBwcm9wIGluIHByb3BzKSB7XHJcbi8vICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KHByb3BzLCBwcm9wKSkge1xyXG4vLyAgICAgICAgICAgICB2YXIgdmFsdWUgPSBleHBvcnRzLmRlZmF1bHRWYWx1ZShwcm9wcy52YWx1ZSwgcHJvcHMuZGVmYXVsdCk7XHJcbi8vICAgICAgICAgICAgIG9ialtwcm9wXSA9IHZhbHVlO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICAgIHJldHVybiBvYmo7XHJcbi8vIH07XHJcbi8vIFxyXG5leHBvcnRzLnRpbWVJdCA9IGZ1bmN0aW9uIChmdW5jKSB7XHJcbiAgICB2YXIgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIGZ1bmMoKTtcclxuICAgIHZhciBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIHJldHVybiBlbmQgLSBzdGFydDtcclxufTtcclxuXHJcbmV4cG9ydHMuaXNJblJlY3QgPSBmdW5jdGlvbiAoeCwgeSwgcmVjdCkge1xyXG4gICAgaWYgKHggPj0gcmVjdC54ICYmIHggPD0gKHJlY3QueCArIHJlY3QudykgJiZcclxuICAgICAgICB5ID49IHJlY3QueSAmJiB5IDw9IChyZWN0LnkgKyByZWN0LmgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5leHBvcnRzLnJhbmRJbnQgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG59O1xyXG5cclxuZXhwb3J0cy5yYW5kQXJyYXlFbGVtZW50ID0gZnVuY3Rpb24gKGFycmF5KSB7XHJcbiAgICB2YXIgaSA9IGV4cG9ydHMucmFuZEludCgwLCBhcnJheS5sZW5ndGggLSAxKTsgICAgXHJcbiAgICByZXR1cm4gYXJyYXlbaV07XHJcbn07XHJcblxyXG5leHBvcnRzLm1hcCA9IGZ1bmN0aW9uIChudW0sIG1pbjEsIG1heDEsIG1pbjIsIG1heDIsIG9wdGlvbnMpIHtcclxuICAgIHZhciBtYXBwZWQgPSAobnVtIC0gbWluMSkgLyAobWF4MSAtIG1pbjEpICogKG1heDIgLSBtaW4yKSArIG1pbjI7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHJldHVybiBtYXBwZWQ7XHJcbiAgICBpZiAob3B0aW9ucy5yb3VuZCAmJiBvcHRpb25zLnJvdW5kID09PSB0cnVlKSB7XHJcbiAgICAgICAgbWFwcGVkID0gTWF0aC5yb3VuZChtYXBwZWQpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZmxvb3IgJiYgb3B0aW9ucy5mbG9vciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1hcHBlZCA9IE1hdGguZmxvb3IobWFwcGVkKTsgICAgICAgIFxyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuY2VpbCAmJiBvcHRpb25zLmNlaWwgPT09IHRydWUpIHtcclxuICAgICAgICBtYXBwZWQgPSBNYXRoLmNlaWwobWFwcGVkKTsgICAgICAgIFxyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuY2xhbXAgJiYgb3B0aW9ucy5jbGFtcCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1hcHBlZCA9IE1hdGgubWluKG1hcHBlZCwgbWF4Mik7XHJcbiAgICAgICAgbWFwcGVkID0gTWF0aC5tYXgobWFwcGVkLCBtaW4yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtYXBwZWQ7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFF1ZXJ5UGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIENoZWNrIGZvciBxdWVyeSBzdHJpbmdcclxuICAgIHFzID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuICAgIGlmIChxcy5sZW5ndGggPD0gMSkgcmV0dXJuIHt9O1xyXG4gICAgLy8gUXVlcnkgc3RyaW5nIGV4aXN0cywgcGFyc2UgaXQgaW50byBhIHF1ZXJ5IG9iamVjdFxyXG4gICAgcXMgPSBxcy5zdWJzdHJpbmcoMSk7IC8vIFJlbW92ZSB0aGUgXCI/XCIgZGVsaW1pdGVyXHJcbiAgICB2YXIga2V5VmFsUGFpcnMgPSBxcy5zcGxpdChcIiZcIik7XHJcbiAgICB2YXIgcXVlcnlPYmplY3QgPSB7fTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5VmFsUGFpcnMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICB2YXIga2V5VmFsID0ga2V5VmFsUGFpcnNbaV0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIGlmIChrZXlWYWwubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBkZWNvZGVVUklDb21wb25lbnQoa2V5VmFsWzBdKTtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IGRlY29kZVVSSUNvbXBvbmVudChrZXlWYWxbMV0pO1xyXG4gICAgICAgICAgICBxdWVyeU9iamVjdFtrZXldID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBxdWVyeU9iamVjdDtcclxufTtcclxuXHJcbmV4cG9ydHMuY3JlYXRlUXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAocXVlcnlPYmplY3QpIHtcclxuICAgIGlmICh0eXBlb2YgcXVlcnlPYmplY3QgIT09IFwib2JqZWN0XCIpIHJldHVybiBcIlwiO1xyXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhxdWVyeU9iamVjdCk7XHJcbiAgICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xyXG4gICAgdmFyIHF1ZXJ5U3RyaW5nID0gXCI/XCI7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcclxuICAgICAgICB2YXIgdmFsID0gcXVlcnlPYmplY3Rba2V5XTtcclxuICAgICAgICBxdWVyeVN0cmluZyArPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbCk7XHJcbiAgICAgICAgaWYgKGkgIT09IGtleXMubGVuZ3RoIC0gMSkgcXVlcnlTdHJpbmcgKz0gXCImXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcXVlcnlTdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnRzLndyYXBJbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgbGVuZ3RoKSB7XHJcbiAgICB2YXIgd3JhcHBlZEluZGV4ID0gKGluZGV4ICUgbGVuZ3RoKTsgXHJcbiAgICBpZiAod3JhcHBlZEluZGV4IDwgMCkge1xyXG4gICAgICAgIC8vIElmIG5lZ2F0aXZlLCBmbGlwIHRoZSBpbmRleCBzbyB0aGF0IC0xIGJlY29tZXMgdGhlIGxhc3QgaXRlbSBpbiBsaXN0IFxyXG4gICAgICAgIHdyYXBwZWRJbmRleCA9IGxlbmd0aCArIHdyYXBwZWRJbmRleDtcclxuICAgIH1cclxuICAgIHJldHVybiB3cmFwcGVkSW5kZXg7XHJcbn07XHJcbiJdfQ==
